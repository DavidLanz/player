define("./setPlay",["../../components/units/pageJob","../../units/base","../../units/newPlayBase","../../units/videoSlide","../../units/renderVideoList","../../units/tvVrsVideoData","../../units/shortCutListForSet","../../units/annouceForLogin"],function(a,b,c){var d=a("../../components/units/pageJob");a("../../units/base");var e=a("../../units/newPlayBase"),f=[a("../../units/videoSlide"),a("../../units/renderVideoList"),a("../../units/tvVrsVideoData"),a("../../units/shortCutListForSet"),a("../../units/annouceForLogin")];f=e.concat(f),c.exports={addJobs:function(){f.forEach(function(a){d.add(a)})},start:function(){d.start()}}});
define("../../components/units/pageJob",["../action/job"],function(a,b,c){var d=a("../action/job");c.exports=new d});
define("../../components/action/job",[],function(a,b,c){var d=Q.event.customEvent,e={},f=new Q.ic.InfoCenter({moduleName:"Job"}),g=Q.Class("Job",{construct:function(){this._oginjobs=[],this._execjobs=[],this._execedjobs=[]},methods:{create:function(a,b){if(!b)throw new Error("Job.create : obj is null.");return e[a]||(e[a]=b),this},add:function(a,b){var c=e[a],d,g=!1;if(!c)return this;try{c.getDependentDoms&&(d=c.getDependentDoms()),g=c.check(d)}catch(h){g=!1}if(g!==!0)return f.warn("job["+a+"] check failed!!!"),this;for(var i=0;i<this._oginjobs.length;i++){c=this._oginjobs[i];if(c.name==a)return this}return this._oginjobs.push({name:a,param:b,object:e[a]}),this._execjobs=this._oginjobs.slice(0),this},reset:function(){this._execjobs=this._oginjobs.slice(0),this._execedjobs=[]},clear:function(){this._oginjobs=[],this._execjobs=[],this._execedjobs=[]},getJob:function(a){return e[a]},getJobs:function(){return this._oginjobs},start:function(){var a=[],b=this._execjobs,c=this._execedjobs,g=[],h=[],i=new Date;b.forEach(function(b){for(var d=0;d<c.length;d++)if(b.name===c[d].name){h.push(b.name);return}a.push(b)}),h.length>0&&f.debug("Jobs runed before in page: "+h.join(",")),a.forEach(function(a){var b=new Date,c=a.name;g.push(c);var d=a.param,h=e[c];try{h.init&&h.init.call(h,d)}catch(i){f.warn("job["+c+"] init failed!!!"),f.warn("message : "+i.message),f.warn("stack : "+i.stack)}f.debug("Init ["+c+"] cost "+(new Date-b)+" ms")}),f.debug("Jobs in page : "+g.join(","));while(a.length>0){var j=new Date,k=a[0].name,l=a[0].param,m=e[k];try{m.exec&&m.exec.call(m,l),c.push(a.shift())}catch(n){f.warn("job["+k+"] executed failed!!!"),f.warn("message : "+n.message),f.warn("stack : "+n.stack),c.push(a[0]),c.push(a.shift())}f.debug("Exec ["+k+"] cost "+(new Date-j)+" ms")}f.debug("Run all jobs in "+(new Date-i)+" ms"),d.fire({type:"jobdone"})}}});c.exports=g});
define("../../units/base",["../kit/sendLog","../config/projectConfig","../config/siteDomain","../kit/qiyiPlayer","../config/video","../kit/userInfo","./channelIndexNavAnim","./loginFloater","../patches/swfInterfacePatch","./globalLogoutDelegate","./pcUserRegistLoginBoxManager","./navHackForIpad","../widgets/sso/job","./pcplayHistoryV2","./compatiblePlayHistory","./updateRecordsV2","./qidan","./qidanadd","./creditRecord","./thirdPartyLogin","./userInfoCenterMailSuggest","./loginNoticeToFlash","./navControls","./suggestV3","./vipNoticePopbox","./vipHeader","./topLineFloaterV2","./lazyloadFade","./strongVoiceAward","./bindAccount","./dramaKingAddToDesktop","../kit/responsive","../kit/flashSnsAuth","./iframeOpenWin","./pcYingYinDownload"],function(a,b,c){var d=a("../kit/sendLog"),e=a("../config/projectConfig");e.setConfig({});var f=a("../config/siteDomain"),g=a("../kit/qiyiPlayer"),h=a("../config/video"),i=a("../kit/userInfo");a("./channelIndexNavAnim"),a("./loginFloater"),a("../patches/swfInterfacePatch"),a("./globalLogoutDelegate"),a("./pcUserRegistLoginBoxManager"),a("./navHackForIpad"),a("../widgets/sso/job"),a("./pcplayHistoryV2"),a("./compatiblePlayHistory"),a("./updateRecordsV2"),a("./qidan"),a("./qidanadd"),a("./creditRecord"),a("./thirdPartyLogin"),a("./userInfoCenterMailSuggest"),a("./loginNoticeToFlash"),a("./navControls"),a("./suggestV3"),a("./vipNoticePopbox"),a("./vipHeader"),a("./topLineFloaterV2"),a("./lazyloadFade"),a("./strongVoiceAward"),a("./bindAccount"),a("./dramaKingAddToDesktop"),a("../kit/responsive"),a("../kit/flashSnsAuth"),a("./iframeOpenWin"),a("./pcYingYinDownload");try{document.domain=f.SITE_DOMAIN}catch(j){}window.Q=window.Q||{},Q.kit=Q.kit||{},Q.kit.QiyiPlayer=g,window.lib=window.lib||{},window.lib.swf=window.lib.swf||{},Q.swf=Q.swf||{},Q.config=Q.config||{},Q.config.video=h,window.onerror=function(){},window.onunload=function(){}});
define("../../kit/sendLog",[],function(a,b,c){var d=function(a,b){typeof a!="string"&&(a=JSON.stringify(a)),Q.http.json2("http://api.qiyife.com/logPrinter/updateLog",{data:{log:a,type:b},method:"POST",cors:!0,withCredentials:!0,onsuccess:function(a,b){},onfailure:function(a,b){}})};try{Q.$(document).on("keydown",function(a){a.ctrlKey&&a.altKey&&a.keyCode==118&&Q.ic.InfoCenter.flush({output:function(a){d(a,"all")}})})}catch(e){}c.exports=d});
define("../../config/projectConfig",["../components/units/pageJob","../config/mobileConfig"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../config/mobileConfig"),f;c.exports={setConfig:function(a){f=a},getConfig:function(){return f}}});
define("../../config/mobileConfig",["./config"],function(a,b,c){var d=a("./config");Q.object.extend(d,{jobPath:"jobs/h5"}),c.exports=d});
define("../../config/config",[],function(a,b,c){var d={projectName:"qiyiV2",projectVersion:"20130926173254",developer:"sunkuo",jobPath:"jobs/pc",env:"product",projectDebug:!1,http:{timeout:2e4},cookie:{pc:"QC020"},supportTs:Q.browser.iPad||Q.browser.iPhone,interfaces:{tm:"http://cache.m.iqiyi.com/h5/tmm/",mm:"http://qisu.video.qiyi.com/r/qisu/mac/mm/",a:"http://cache.m.iqiyi.com/h5/a/",ss:"http://cache.m.iqiyi.com/h5/s/",sc:"http://cache.m.iqiyi.com/h5/sd/",cp:"http://cache.m.iqiyi.com/h5/qiyichupin/",index:"http://cache.m.iqiyi.com/h5/index/",ch:"http://cache.m.iqiyi.com/h5/c/",p:"http://cache.m.iqiyi.com/p/",pc:"http://cache.m.iqiyi.com/pc/",v:"http://cache.m.iqiyi.com/h5/vlist/",s:"http://cache.m.iqiyi.com/h5/slist/",sd:"http://cache.m.iqiyi.com/h5/sdate/",mt:"http://cache.m.iqiyi.com/qmt/",vj:"http://cache.m.iqiyi.com/vj/",wx:"http://pub.m.iqiyi.com/api/getWxInfo",cu:"http://pub.m.iqiyi.com/api/getClientUrl",qipavs:"http://pub.m.iqiyi.com/qipa-api/services/source/status",qipaweixininfo:"http://qipa.iqiyi.com/qipa-api/services/weixin/sourceinfo",wxInfo:"http://pub.m.iqiyi.com/api/getWxInfo",topicAlbum:"http://cache.m.iqiyi.com/h5/tal/",topicBrother:"http://cache.m.iqiyi.com/h5/htl/",topicInfo:"http://cache.m.iqiyi.com/h5/ti/",topicList:"http://cache.m.iqiyi.com/h5/tl/",sdvlst:"http://cache.video.qiyi.com/sdvlst/"}};d.env=="development"&&Q.object.extend(d.interfaces,{tm:"/h5/tmm/",a:"/h5/a/",ss:"/h5/s/",sc:"/h5/sd/",cp:"/h5/qiyichupin/",index:"/h5/index/",ch:"/h5/c/",v:"/h5/vlist/",s:"/h5/slist/",sd:"/h5/sdate/",vj:"http://cache.m.iqiyi.com/vj/",topicAlbum:"/h5/tal/",topicBrother:"/h5/htl/",topicInfo:"/h5/ti/",topicList:"/h5/tl/",wx:"http://202.108.14.212/api/getWxInfo",cu:"http://202.108.14.212/api/getClientUrl",qipavs:"http://pub.m.iqiyi.com/qipa-api/services/source/status",qipaweixininfo:"http://10.10.166.45:8080/qipa-api/services/weixin/sourceinfo",wxInfo:"http://202.108.14.212/api/getWxInfo",sdvlst:"http://10.10.131.28:8080/sdvlst/"}),c.exports=d});
define("../../config/siteDomain",[],function(a,b,c){c.exports={SITE_DOMAIN:"iqiyi.com"}});
define("../../kit/qiyiPlayer",["./qiyiFlashPlayer","./qiyiHtml5Player","../config/video"],function(a,b,c){var d=a("./qiyiFlashPlayer"),e=a("./qiyiHtml5Player"),f=a("../config/video"),g=Q.Class("QiyiPlayer",{construct:function(a){var b=null;if(f){a.playerid=a.playerid||"video",b=new e(a);var c=Q.$("#"+a.playerid);c&&(c.__player=b)}else b=new d(a);return Q.event.customEvent.fire({type:"playercreated"}),b},statics:{_players:{},getPlayer:function(a){return this._players[a]?this._players[a]:(this._players[a]=new g({playerid:a}),this._players[a])},destroy:function(a){var b=this._players;if(a)b[a].un(),b[a]=null,delete b[a];else{for(var c in b)b[c].un();this._players={}}}}});c.exports=g});
define("../../kit/qiyiFlashPlayer",["./flashPlayer"],function(a,b,c){var d=a("./flashPlayer");c.exports=Q.Class("QiyiFlashPlayer",{extend:d,construct:function(a){this.callsuper(a)},methods:{setUserLogin:function(a){this._flashcall("setQiyiUserLogin",a)},setVisits:function(a){Q.log.log("setVisits__"+a),this._flashcall("setQiyiVisits",a)},setLight:function(a){a=="true"?Q.log.log("openLight....."):Q.log.log("closeLight....."),this._flashcall("setLight",a)},setSubscribe:function(a){Q.log.log("setSubscribe....."),this._flashcall("setQiyiSubscribe",a)},setNextVideoInfo:function(a){Q.log.log("setNextVideoInfo:"+JSON.stringify(a)),this._flashcall("setNextQiyiVideoInfo",a)},setFullMoive:function(a){this._flashcall("setQiyiFullMoive",a)},getWebEventID:function(a){this._flashcall("getWebEventID",undefined,a)},hasWebEventID:function(){return this._hasInterface({functionName:"getWebEventID"})},expand:function(a){this._flashcall("expand",a)},forceToSaveCurVideoInfo:function(a){Q.log.log("forceToSaveCurVideoInfo:"+JSON.stringify(a)),this._flashcall("forceToSaveCurVideoInfo",a)},resumeVideo:function(a){Q.log.log("resumeQiyiVideo:"+JSON.stringify(a)),this._flashcall("resumeQiyiVideo",a)},setContinuePlayState:function(a){Q.log.log("setContinuePlayState:"+JSON.stringify(a)),this._flashcall("setContinuePlayState",a)},switchVideo:function(a){Q.log.log("switchVideo:"+JSON.stringify(a)),this._flashcall("switchVideo",a)},getSwitchVideoType:function(a){this._flashcall("getSwitchVideoType",void 0,a)},addVideoList:function(a){this._flashcall("addVideoList",a)},removeFromList:function(a){Q.log.log("removeFromList:"+JSON.stringify(a)),this._flashcall("removeVideoList",a)},revertFromList:function(a){Q.log.log("revertFromList:"+JSON.stringify(a)),this._flashcall("revertFromList",a)},setQiyiUserRewardInfo:function(a){Q.log.log("setQiyiUserRewardInfo:"+JSON.stringify(a)),this._flashcall("setQiyiUserRewardInfo",a)},notifyAdClick:function(){Q.log.log("notifyAdClick:"+JSON.stringify()),this._flashcall("notifyAdClick")},setDeskTVInfo:function(a){Q.log.log("setDeskTVInfo:"+JSON.stringify(a)),this._flashcall("setDeskTVInfo",a)}}})});
define("../../kit/flashPlayer",["./player","./videoInfo"],function(a,b,c){var d=a("./player"),e=a("./videoInfo"),f=new Q.ic.InfoCenter({moduleName:"FlashPlayer"});c.exports=Q.Class("FlashPlayer",{extend:d,construct:function(a){this.callsuper(a);var b=Q.$("*[data-widget-player]"),c=Q.url.queryToJson(window.location.search);this._tvid=c.tvid||b&&b.attr("data-player-tvid")||"",this._videoid=c.videoid||b&&b.attr("data-player-videoid")||"",this._fire()},methods:{load:function(a){Q.log.log("js call load"),this._flashcall("loadQiyiVideo",a)},play:function(){this._flashcall("playQiyiVideo"),Q.log.log("js call play")},resume:function(){this._flashcall("resumeQiyiVideo"),Q.log.log("js call resume")},replay:function(){this._flashcall("replayQiyiVideo"),Q.log.log("js call replay")},pause:function(){this._flashcall("pauseQiyiVideo")},seek:function(a){this._flashcall("seekQiyiVideo",a)},stop:function(){Q.log.log("js call stop"),this._flashcall("stopQiyiVideo")},getPlayInfo:function(a){this._flashcall("getQiyiPlayerInfo",undefined,function(b){var c=b||"",d=c?JSON.parse(c.replace(/\r/g,"").replace(/\n/g,"")):"";d&&(d.currentTime=d.currentTime/1e3,a(d))})},getInitVideoInfo:function(a){a({vid:this._vid,tvid:this._tvid})},getVideoInfo:function(a){var b=this;e.get({tvid:b._tvid,vid:b._videoid,usage:"pc"},function(b){a&&a(b)})},loadComplete:function(a){this._flashcall("loadComplete",undefined,a)},_fire:function(){var a=this,b=Q.event.customEvent;b.on("swf_playerStateChange",function(b){b=b||{},b.data=b.data||{};var c=b.data.state||"";Q.log.log(c+"--player state--"+(new Date).getTime()),b.data.vid!=a._videoid&&(a._videoid=b.data.vid,a._tvid=b.data.tvid,c.toLocaleLowerCase()=="dataready"&&a.getVideoInfo(function(b){a.fire({type:"videoChanged",data:b})})),a.fire({type:c.toLocaleLowerCase(),data:b.data})}),b.on("js_videoChanged",function(b){f.log("js_videoChanged"),a._videoid=b.data.vid,a._tvid=b.data.tvid,a.getVideoInfo(function(b){f.log("js_videoChanged fire videoChanged event"),a.fire({type:"videoChanged",data:b})})}),b.on("swf_playNextVideo",function(b){a.fire({type:"playnext"})}),b.on("swf_loadComplete",function(b){b=b||{},b.data=b.data||{},a.fire({type:"loadComplete",data:b.data})}),b.on("swf_setLight",function(b){b=b||{},b.data=b.data||{};var c=b.data.open=="false";a.fire({type:"setLight",data:c})}),b.on("swf_moveToQitan",function(){var b=Q.$("[data-widget-qitancomment='comment']");if(b){a.fire({type:"setLight",data:!1}),a.setLight("true");var c=Q.page.getScrollTop(),d=b.getPosition(),e=Q.anim.create(b);e.onCompute=function(){window.scrollTo(0,this.info.scrollTo.animArray[this.counter]),this.counter++},e.duration(200).from("scrollTo",c).to("scrollTo",d.top-100).go()}}),b.on("swf_playerLoadSuccess",function(b){a.fire({type:"loadSuccess",data:b.data})}),b.on("swf_expand",function(b){a.fire({type:"expand",data:b.data})}),b.on("swf_authenticationResult",function(b){a.fire({type:"authenticationResult",data:b.data.isTryWatch=="true"})}),b.on("swf_recharge",function(b){b=b||{},b.data=b.data||{};var c=b.data.code;a.fire({type:"recharge",data:c})}),b.on("swf_subscribe",function(){a.fire({type:"subscribe"})}),b.on("swf_download",function(b){a.fire({type:"downloadVideo",data:b.data})}),b.on("swf_requestVideoList",function(b){a.fire({type:"flashRequireList",data:b})}),b.on("swf_requestLogin",function(b){a.fire({type:"flashRequestLogin"})}),b.on("swf_switchFullScreen",function(b){a.fire({type:"switchFullScreen",data:b.data.value})}),b.on("swf_addToTable",function(){a.fire({type:"addToTable"})}),b.on("flashplayer_focusTips",function(b){a.fire({type:"focusTips",data:b.data})})}}})});
define("../../kit/player",["./flashCall","../kit/eventPlugin"],function(a,b,c){var d=a("./flashCall"),e=a("../kit/eventPlugin");c.exports=Q.Class("Player",{plugins:[new e],construct:function(a){a.playerid?a.playerid=="video"||a.playerid=="flash"?this._player=document.getElementById("video")||document.getElementById("flash"):this._player=document.getElementById(a.playerid):this._player=a.player[0],this._opt=a},methods:{_flashcall:function(a,b,c){var e=this._opt.playerid;this._opt.playerid=="video"&&(e="flash"),d({flashID:e,callback:c,functionName:a,parameter:b})},_hasInterface:function(a){try{return!!this._player[a.functionName]}catch(b){return!1}},load:Q.fn.emptyMethod,play:Q.fn.emptyMethod,resume:Q.fn.emptyMethod,replay:Q.fn.emptyMethod,pause:Q.fn.emptyMethod,seek:Q.fn.emptyMethod,stop:Q.fn.emptyMethod,getPlayInfo:Q.fn.emptyMethod,getInitVideoInfo:Q.fn.emptyMethod,getVideoInfo:Q.fn.emptyMethod,switchVideoFullScreen:Q.fn.emptyMethod}})});
define("../../kit/flashCall",[],function(a,b,c){c.exports=function(a){a=a||{};var b=Q.$("#"+(a.flashID||"")),c=a.functionName,d=a.parameter,e=a.tryTimes||0,f=a.perTimes||500,g=0,h=a.callback||Q.fn.emptyMethod,i,j;if(!b||!c)return;i=function(){try{return d===undefined?h(b[0][c]()):Object.prototype.toString.apply(d)=="[object Object]"||Object.prototype.toString.apply(d)=="[object Array]"?h(b[0][c](JSON.stringify(d))):h(b[0][c](d)),!0}catch(a){return!1}},function(){clearTimeout(j);if(!i()){if(!e||g<e)j=setTimeout(arguments.callee,f),g++;return}}()}});
define("../../kit/eventPlugin",[],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"EventPlugin"}),e=Q.Class("EventPlugin",{construct:function(){},methods:{on:function(a,b){this._ep_createList();var c=function(a){b(a)};return a=a.toLowerCase(),this._ep_lists[a]=this._ep_lists[a]||[],this._ep_lists[a].push({type:a,listener:b,realListener:c}),d.debug("on | "+this.__NAME__+" | "+a+" | list length : "+this._ep_lists[a].length),this},un:function(a,b){this._ep_createList();if(a){a=a.toLowerCase();var c=this._ep_lists[a];if(c){var d=c.length,e=!b;c&&c.length>0&&(e?this._ep_lists[a]=[]:c.forEach(function(a,d){a&&a.listener===b&&(c[d]=null)}))}}else this._ep_clearList();return this},fire:function(a){this._ep_createList();var b=a.type.toLowerCase(),c=a.data,e=this._ep_lists[b];return e&&e.length>0&&e.forEach(function(a,e){try{a&&a.listener&&a.listener({type:b,data:c})}catch(f){d.log("eventPluginFireError---eventType is :"+b+" ;error message: "+f.message)}}),this},_ep_clearList:function(){this._ep_lists=null},_ep_createList:function(){this._ep_lists||(this._ep_lists={})}}});c.exports=e});
define("../../kit/videoInfo",["../interfaces/videoInfo","../interfaces/mtInterface","../interfaces/videoUrlInterface","./getRemoteInfo","./playerror","../config/mobileConfig"],function(a,b,c){var d=a("../interfaces/videoInfo"),e=a("../interfaces/mtInterface"),f=a("../interfaces/videoUrlInterface"),g=a("./getRemoteInfo"),h=a("./playerror"),i=new Q.ic.InfoCenter({moduleName:"VideoInfo"}),j=a("../config/mobileConfig"),k={},l={},m=Q.Class("VideoInfo",{construct:function(){this.callsuper()},statics:{_videoInfo:{},get:function(a,b){i.log("videoStory, 开始获取视频信息"),i.log("videoStory, options： "+JSON.stringify(a));var c=this,e=a.tvid,f=a.vid||"",g=a.key,h=a.type||"ts",j=a.mt||1,k=a.speed||"",l=m._videoInfo[e+(f?"|"+f:"")],n=a.usage||"phone",o;if(g=="mt"||g=="logo"||g=="ipLimit"||g=="ntv"||g=="ptv")l||(l={},m._videoInfo[e+(f?"|"+f:"")]=l),!l[g]||g=="mt"&&(!l[g][h]||!l[g][h][j])?(i.log("videoStory, getMTInfo start"),c.getMTInfo({tvid:e,onsuccess:function(a){i.log("videoStory, getMTInfo end");if(g!="mt")l[g]=a[g],b&&b(l[g],l);else{l[g]={},l[g][h]={};var c;h=="ts"?c=a.mtl:h=="mp4"&&(c=a.mpl),c.forEach(function(a){"vd"in a&&(l[g][h][a.vd]=a)}),k?o=l[g][h]:o=l[g][h][j],b&&b(o,l)}},onfailure:function(a){i.error("videoStory, getMTInfo end"),i.error("videoStory, data: "+JSON.stringify(a))}})):g!="mt"?b&&b(l[g],l):(k?o=l[g][h]:o=l[g][h][j],b&&b(o,l));else if(l)g?b&&b(l[g],l):b&&b(l,l);else{var p=new d({tvid:e,vid:f,usage:n});p.request({memory:!0},function(a){if(a.code=="A00000"){var c=a.data;m._videoInfo[e+(f?"|"+f:"")]=c,g?b&&b(c[g],c):b&&b(c,c)}})}},getMTInfo:function(a){a=a||{};var b=a.tvid,c=a.onsuccess,d=a.onfailure;if(k[b]){var f=this;setTimeout(function(){f.getMTInfo(a)},100)}else if(l[b])d(l[b]);else{k[b]=!0;var g=new e({tvid:b});g.request(function(a){var e=typeof a=="object"?JSON.stringify(a):a.toString();i.log("videoStory, getMTInfo, 后端返回data: "+e),null===a&&h.addItem(h.code.mtNull);if(a.code=="A00000"){var f=a.data;c(f)}else a.code=="Q00202"?(i.warn("版权下线"),h.addItem(h.code.offline),d(a)):d&&(h.addItem(h.code.mtFail),a.code?Q.log.server({type:"piaoshhtestmayttf",des:"mterror",tvid:b,code:a.code},"http://msg.video.qiyi.com/tmpstats.gif"):a.code="没有返回code",l[b]=a,d(a));delete k[b]})}}}});c.exports=m});
define("../../interfaces/videoInfo",["../kit/remoteInterface","../kit/ifrestime","../config/mobileConfig","../config/pcConfig"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../kit/ifrestime"),f=a("../config/mobileConfig"),g=a("../config/pcConfig");c.exports=Q.Class("RIVideoInfo",{construct:function(a){var b="";this.tvid=a.tvid,this.vid=a.vid,this.usage=a.usage,this.usage=="phone"?b=f.interfaces.vj+a.tvid+"/"+a.vid+"/":this.usage=="pc"&&(b=g.interfaces.vj+a.tvid+"/"+a.vid+"/"),this._remoteInterface=new d({videoInfo:{url:b,struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{aid:{type:"number",empty:!1},an:{type:"string",empty:!1},apic:{type:"string",empty:!1},au:{type:"string",empty:!1},es:{type:"number",empty:!1},tvid:{type:"number",empty:!1},vn:{type:"string",empty:!1},vpic:{type:"string",empty:!1},vu:{type:"string",empty:!0},c:{type:"number",empty:!1},lg:{type:"number",empty:!1},subt:{type:"string",empty:!0},idl:{type:"number",empty:!1},asubt:{type:"string",empty:!0},is:{type:"number",empty:!1},ifs:{type:"number",empty:!1},pd:{type:"number",empty:!1}}}}}})},methods:{request:function(a,b){var c=this;a=a||{};if(!this.tvid||!this.vid){b&&b({code:"A00001"});return}var d=a.memory;d&&delete a.memory;var f=new Date;this._remoteInterface.send({ifname:"videoInfo",memory:d,param:a,jsonp:{varname:"tvInfoJs"}},function(a){c.usage!=="pc"&&e.send({tl:new Date-f,intype:"vj"}),b&&b(a)})}}})});
define("../../kit/remoteInterface",["./checkRemoteData"],function(a,b,c){var d=a("./checkRemoteData"),e=new Q.ic.InfoCenter({moduleName:"RemoteInterface"}),f=Q.Class("RemoteInterface",{construct:function(a){this._remoteInterfaces=a},methods:{send:function(a,b){var c=a.ifname,f=a.param,g=a.method||"GET",h=a.jsonp,i=a.spliter||"1",j=this,k=this._getIfData(c),l=new Date,m=a.timeout||2e4,n=a.withCredentials,o=a.ifr;Q.http.json(k.url,{data:f,method:g,jsonp:h,spliter:i,cors:a.cors,withCredentials:n,timeout:m,ifr:o,memory:a.memory,encodeFn:a.encodeFn,onsuccess:function(a,g){new Date-l>5e3&&(e.log("RemoteInterface ["+c+"] timeout."),e.log("RemoteInterface ["+k.url+"] timeout."));if(h||typeof f=="object"&&("varname"in f||"cb"in f))"code"in g||(g={code:"A00000",data:g});try{e.log("send url : "+j._getUrl(k.url,f)+", Check "+"result : "+d.check(k.struct,g))}catch(i){e.error("RemoteInterface error url "+k.url+";error message "+i.message)}b&&b(g)},onfailure:function(a,c){e.error("RemoteInterface onfailure url: "+k.url),e.error("RemoteInterface data: "+JSON.stringify(c)),b&&b(c||{code:"E00000"})}})},_getIfData:function(a){return this._remoteInterfaces[a]||this._remoteInterfaces},_log:function(a){e.log("iferror"+a)},_getUrl:function(a,b){var c=[];for(var d in b)c.push(d+"="+b[d]);return a+"?"+c.join("&")}}});c.exports=f});
define("../../kit/checkRemoteData",[],function(a,b,c){c.exports={check:function(a,b){var c=this;if(!a)return!0;var d=!0;return d},checkArray:function(a,b){var c=this;if(Q.array.isArray(b)){var d=!0;return b.forEach(function(b){if(!c.checkData(a.item,b))return d=!1,!1}),d}return!1},checkObject:function(a,b){return this.check(a,b)},isEmpty:function(a,b){return a.type=="object"?b===null:a.type=="array"?b.length===0:b===""},checkData:function(a,b){return a.type=="number"&&typeof b=="number"?!0:a.type=="string"&&typeof b=="string"?!0:a.type=="boolean"&&typeof b=="boolean"?!0:a.type=="array"?this.checkArray(a.item,b):a.type=="object"?this.checkObject(a.struct,b):!1},log:function(a){}}});
define("../../kit/ifrestime",[],function(a,b,c){var d="http://msg.video.qiyi.com/vpb.gif";c.exports={send:function(a){a=a||{},a=Q.object.extend({flag:"plyract",plyract:"svrs",pla:function(){var a="3";return Q.browser.iPad&&(a="2"),a+="1",a}()},a);var b="?"+Q.url.jsonToQuery(a);(new Image).src=d+b}}});
define("../../config/pcConfig",[],function(a,b,c){var d={mode:"release",http:{timeout:5e3},cookie:{pc:"QC020"},supportTs:Q.browser.iPad||Q.browser.iPhone,interfaces:{vj:"http://cache.video.qiyi.com/vj/"}};d.mode="test",d.mode!="debug",d.mode!="test",c.exports=d});
define("../../interfaces/mtInterface",["../kit/remoteInterface","../config/mobileConfig","../kit/ifrestime","../kit/getRemoteInfo","../kit/playerror"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/mobileConfig"),f=a("../kit/ifrestime"),g=a("../kit/getRemoteInfo"),h=a("../kit/playerror"),i="MTInterface",j=new Q.ic.InfoCenter({moduleName:i}),k;c.exports=Q.Class(i,{construct:function(a){this.tvid=a.tvid;var b=(new Date).getTime();k=e.interfaces.mt+a.tvid+"/?tn="+b,this._remoteInterface=new d({MT:{url:k,struct:{}}}),Q.cookie.get("QC113")||Q.cookie.set("QC113","1",{domain:"iqiyi.com"})},methods:{request:function(a){j.log("remoteInterface start");var b=new Date;if(!this.tvid){a&&(j.log("remoteInterface end"),a({code:"A00001"}));return}this._remoteInterface.send({ifname:"MT",param:"",cors:!0,timeout:e.http.timeout},function(c){f.send({tl:new Date-b,intype:"mt"}),j.log("remoteInterface end"),null===c&&j.error("remoteInterface url: "+k+"return null!");if(a&&c.code=="A00000"){var d=c.data;d.mpl&&g({},function(b){var e=parseInt((new Date).getTime()/1e3,10);b===!1?(j.error("get server time timeout"),h.addItem(h.code.timeFail)):e=b.time;for(var f=0;f<d.mpl.length;f++)d.mpl[f].m4u&&(d.mpl[f].m4u.indexOf("?")==-1?d.mpl[f].m4u+="?v="+(e^1718192030):d.mpl[f].m4u+="&v="+(e^1718192030));a(c)})}})}}})});
define("../../kit/getRemoteInfo",[],function(a,b,c){var d={},e=function(a,b){a=a||{};var c=a.url||"http://data.video.qiyi.com/v.ts";d.data&&d.url==c&&b(d.data),d.url=c;var e={varname:"videoUrl"},f={onsuccess:function(a,c){d.data=c,b(c)},onfailure:function(){b(!1)},data:e,timeout:e.timeout||3e4};Q.http.json(c,f)};c.exports=e});
define("../../kit/playerror",["./storage"],function(a,b,c){var d=a("./storage"),e="playerror",f={mtNull:"http://cache.m.iqiyi.com/mt/ 后端返回null",mtFail:"http://cache.m.iqiyi.com/mt/ onfailure",mtTimeout:"http://cache.m.iqiyi.com/mt/ 接口超时",mtNoreturn:"http://cache.m.iqiyi.com/mt/ 没有end",cdnFail:"CDN视频调度失败",timeFail:"服务端对时失败",noBitRate:"没有相应码流",offline:"版权下线"},g=function(a){var b=d.read(e)+" "+a;d.write(e,b)},h=function(){d.write(e,"")},i=function(){return d.read(e)};c.exports={code:f,addItem:g,get:i,clean:h}});
define("../../kit/storage",[],function(a,b,c){var d={},e={getItem:function(a){return d[a]},setItem:function(a,b){d[a]=b},removeItem:function(a){delete d[a]}},f=function(){try{return window.localStorage.setItem("_Q_test_",1),window.localStorage.removeItem("_Q_test_"),window.localStorage}catch(a){}return e}();c.exports={getStorage:function(){return f},read:function(a){return f.getItem(a)},write:function(a,b){f.setItem(a,b)},remove:function(a){f.removeItem(a)}}});
define("../../interfaces/videoUrlInterface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("VideoUrl",{construct:function(a){var b=a.url;this._remoteInterface=new d({videoUrl:{url:b,struct:{}}})},methods:{request:function(a){this._remoteInterface.send({ifname:"videoUrl",param:"",jsonp:{varname:"videoUrl"}},function(b){a&&a(b)})}}})});
define("../../kit/qiyiHtml5Player",["./html5Player"],function(a,b,c){var d=a("./html5Player");c.exports=Q.Class("QiyiHTML5Player",{extend:d,construct:function(a){this.callsuper(a)},methods:{setUserLogin:function(a){Q.log.log("setUserLogin....")},setVisits:function(a){},setLight:function(a){Q.log.log("openLight.....")},setSubscribe:function(a){Q.log.log("setSubscribe.....")},setNextVideoInfo:function(a){Q.log.log("setNextVideoInfo.....")},setFullMoive:function(a){},getWebEventID:function(a){a(Q.crypto.md5(+(new Date)+Math.round(Math.random()*2147483647)+""))},hasWebEventID:function(){return!0},expand:function(a){this.fire({type:"expand",data:{origin:"video",value:a}})},getSwitchVideoType:function(){},switchVideoFullScreen:function(a){try{var b;a?(this._player.webkitEnterFullScreen(),b="true"):(this._player.webkitExitFullscreen(),b="false"),this.fire({type:"switchVideoFullScreen",data:b})}catch(c){}},switchVideo:function(a){this.load(a)},recharge:function(){this.fire({type:"recharge",data:"Q00310"})}}})});
define("../../kit/html5Player",["./player","./videoVipSrcApi","./videoSrcApi","./eventPlugin","../kit/videoInfo","../interfaces/uidInterface","../config/mobileConfig","../kit/triggerEvent","../kit/page","./playerror","../kit/bitRate"],function(a,b,c){var d=a("./player"),e=a("./videoVipSrcApi"),f=a("./videoSrcApi"),g=a("./eventPlugin"),h=a("../kit/videoInfo"),i=a("../interfaces/uidInterface"),j=a("../config/mobileConfig"),k=a("../kit/triggerEvent"),l=a("../kit/page"),m=a("./playerror"),n=new Q.ic.InfoCenter({moduleName:"HTML5Player"}),o={playing:4,progress:4,suspend:4,timeupdate:4},p=a("../kit/bitRate");c.exports=Q.Class("HTML5Player",{extend:d,plugins:[new g],construct:function(a){this.callsuper(a);var b=Q.$("*[data-widget-player='flash']"),c=window.info||{};this._definition=p.getCurrVd(),this._playerstate="Paused",this._vid=b?b.attr("data-player-videoid"):"",this._tvid=b?b.attr("data-player-tvid"):"",this._aid=b?b.attr("data-player-albumid"):"",this._pid=c.pid||"",this._ptype=c.ptype||"",this._aid=c.albumId||"",this._completeLoaded="false",this._player&&this._bindEvent()},methods:{getPlayerElem:function(){return this._player},_bindEvent:function(){var a=this;this._player.addEventListener("canplaythrough",function(b){a._completeLoaded="true"}),this._firstPlayBinded=this._firstPlay.bind(this),this._player.addEventListener("play",function(b){a._playStateChange("Play")},!1),this._player.addEventListener("playing",function(b){a._playStateChange("playing")},!1),this._player.addEventListener("timeupdate",function(b){a._playStateChange("Playing")},!1),this._player.addEventListener("waiting",function(b){a._playStateChange("Waiting")},!1),this._player.addEventListener("pause",function(b){a._playStateChange("Paused")},!1),this._player.addEventListener("ended",function(b){a._playStateChange("Stoped")},!1),this._player.addEventListener("loadedmetadata",function(b){a._playStateChange("LoadedMetaData")},!1),this._player.addEventListener("loadeddata",function(b){a._playStateChange("LoadedData")},!1),this._player.addEventListener("seeking",function(b){a._playStateChange("Seeking")},!1),this._player.addEventListener("canplay",function(b){a._playStateChange("Ready")},!1),this._player.addEventListener("error",function(a){n.debug("Failed")},!1),this._player.addEventListener("volumechange",function(b){a._playStateChange("VolumeChange")},!1),this._player.addEventListener("loadstart",function(b){a._playStateChange("LoadStart")},!1),this._player.addEventListener("durationchange",function(b){a._playStateChange("DurationChange"),n.debug("videoStory, duration: "+a._player.duration);var c=a._player.seekable;n.debug("videoStory, seekable: "+JSON.stringify(c)+", Start: "+c.start(0)+", End: "+c.end(0))},!1),this._player.addEventListener("progress",function(b){a._playStateChange("Progress")},!1),this._player.addEventListener("suspend",function(b){a._playStateChange("Suspend")},!1),this._player.addEventListener("webkitfullscreenchange",function(b){a._playStateChange("webkitfullscreenchange")},!1)},load:function(a){n.debug("videoStory--------------------------华丽的分割线-------------------------"),n.debug("videoStory, ua:"+navigator.userAgent),n.debug("videoStory, href: "+location.href),n.debug("load");var b=this;a=a||{},m.clean();if(a.preload=="true")return;this._videoChanged=!this._tvid||this._tvid&&this._tvid!=a.tvId,n.log("this._videoChanged---------------- "+!!this._videoChanged),this._vid=a.vid,this._tvid=a.tvId,this._pid=a.pid,this._ptype=a.ptype,this._aid=a.albumId,this._speed=a.speed,this._isMember=a.isMember=="true"?!0:!1,n.debug("Load video : "+this._tvid),n.debug("videoStory, Load video : "+this._tvid),this._player.addEventListener("timeupdate",this._firstPlayBinded,!1),this._playStateChange("startGetVideoSrc"),(Q.browser.iPad||Q.browser.iPhone||Q.browser.iPod)&&Q.PageInfo&&Q.PageInfo.adPlayerId?this._isMember?(n.log("videoStory, videoVipSrcApi.get start"),e.get(a,function(a){n.log("videoStory, videoVipSrcApi.get end");if(a&&!a.code){var c="http://cache.vip.iqiyi.com/m/u/"+b._vid+"/"+a.cid+"/"+a.t+"/"+a.pt+".m3u8";b._play(c),b._playStateChange("dataloaded"),b.fire({type:"authenticationResult",data:parseInt(a.prv,10)})}else b._playStateChange("Failed")})):this._initAd(function(c){n.log("_initAd  src "+c),c?(n.debug("Get src with ad : "+c),b._play(c),b._playStateChange("dataloaded")):(n.log("videoStory, start videoSrcApi.get"),f.get({tvid:a.tvId,speed:a.speed},function(a){n.log("videoStory, end videoSrcApi.get"),a.code=="A00000"?(b._play(a.src),b._playStateChange("dataloaded")):(n.error("videoStory, VideoInfo.get src end error, data: "+JSON.stringify(a)),b._playStateChange("Failed"))}))}):(n.debug("videoStory, 判断是否是会员片子"),this._isMember?(n.debug("videoStory, 是会员片子，开始鉴权"),e.get(a,function(a){if(a&&!a.code){var c="http://cache.vip.iqiyi.com/m/u/"+b._vid+"/"+a.cid+"/"+a.t+"/"+a.pt+".m3u8";b._play(c),b._playStateChange("dataloaded"),b.fire({type:"authenticationResult",data:parseInt(a.prv,10)})}else b._playStateChange("Failed")})):(n.debug("videoStory, 不是会员片子"),n.log("videoStory, videoSrcApi.get start"),f.get({tvid:a.tvId,speed:a.speed},function(a){n.log("videoStory, videoSrcApi.get end"),a.code=="A00000"?(b._play(a.src),b._playStateChange("dataloaded")):(n.error("videoStory, ni zhe ge huaidan"),n.error("videoStory, VideoInfo.get src end error, data: "+JSON.stringify(a)),b._playStateChange("Failed"))})))},play:function(){n.debug("play"),this._player&&this._player.play()},resume:function(){n.debug("resume"),this._player&&this._player.play()},retryPlay:function(){n.debug("retryPlay");if(this._player){var a=this._player.src;a=a.split("&tn=")[0]+"&tn="+(new Date).getTime(),this._player.src=a,this._player.load(),this._player.play()}},replay:function(){n.debug("replay"),this._player&&(this._player.load(),this._player.play())},resetEvent:function(){n.debug("resetEvent"),this._player.addEventListener("timeupdate",this._firstPlayBinded,!1)},show:function(){var a=Q.$(this._player);a.attr("data-display")=="hide"&&a.css("-webkit-transform","translateX(0px)"),a.attr("data-display","show"),k.trigger("resize")},hide:function(){var a=Q.$(this._player);a.attr("data-display")=="show"&&a.css("-webkit-transform","translateX(9999px)"),a.attr("data-display","hide")},playBySrc:function(a){n.debug("Change src to : "+a),this._play(a)},_play:function(a){n.debug("videoStory, 视频地址src: "+a);var b=this;this._player&&(this._player.setAttribute("src",a),this._player.load());if(Q.browser.android){var c=l.getCurrent(),d=c?c.getUrl():location.href;Q.url.getQueryValue(d,"cnid")!=23&&setTimeout(function(){b._player&&b._player.play()},1e3)}else Q.browser.WP||b._player&&b._player.play()},_firstPlay:function(){this._firstPlayBinded&&this._player.removeEventListener("timeupdate",this._firstPlayBinded),this._playStateChange("StartPlay"),n.debug("Start to play.")},pause:function(){this._player&&this._player.pause()},seek:function(a){var b=this,c=function(a){return a>1&&a!==6e3&&a!==Infinity?!0:!1},d=function(){b._player.removeEventListener("durationchange",e,!1),n.debug("Seek to :"+a),a=a||0,a=Math.max(a,0),a===0&&(a+=1),n.debug("duration: "+b._player.duration),a=Math.min(a,b._player.duration-5),n.debug("videoStory, min: "+a),b.delaySeekTimer&&clearTimeout(b.delaySeekTimer);try{var c=b._player.seekable;n.debug("videoStory, seekable: "+JSON.stringify(c)+", Start: "+c.start(0)+", End: "+c.end(0)),1===c.length&&a<c.end(0)?b.seekTo(a):b.delaySeekTimer=setTimeout(function(){n.debug("timeout seek"),b.seek(a)},100)}catch(d){n.error("videoStory, seek error: "+d)}},e=function(a){var e=b._player.duration;n.log("durationchange, curDuration: "+e),c(e)&&d()},f=b._player.duration;c(f)?d():b._player.addEventListener("durationchange",e,!1)},seekTo:function(a){n.debug("videoStory, time: "+a);var b=this;try{this._player.currentTime=a}catch(c){var d=0;this._player.addEventListener("canplay",function(){n.debug("canplay seekto "+b._player.currentTime),1!==d&&(d=1,b._player.currentTime=a)})}this._player.paused&&this._player.play()},setVolume:function(a){n.log("volume|_player|"+this._player.volume),this._player.volume=a},getVolume:function(){return this._player.volume},stop:function(){n.debug("stop")},changeDefination:function(a){if(a!=this._definition){this._definition=a,p.set(a);var b=this,c=b._player.currentTime;n.debug("Record current time : "+c),f.get({tvid:b._tvid},function(a){if(a.code=="A00000"){var d=function(){setTimeout(function(){n.debug("Resume to : "+c),b.seek(c)},0),b._player.removeEventListener("timeupdate",d)};b._player.addEventListener("timeupdate",d),b._player.src=a.src,Q.event.customEvent.fire({type:"videochangedefinition"}),b._play(a.src)}else b._playStateChange("Failed")})}},getPlayInfo:function(a){var b={};b.vid=this._vid,b.tvid=this._tvid,this._player&&(b.currentTime=this._player.currentTime,b.totalDuration=this._player.duration),b.currentDefination=this._definition,b.currentStatus=this._playerstate,this._player&&this._player.paused&&(b.currentStatus="Paused"),this._player&&this._player.ended&&(b.currentStatus="Stoped"),b.uuid=Q.cookie.get("QC006"),b.categoryId="",b.clientInstall="0",b.accInstall="0",a(b)},getVideoInfo:function(a){var b=this;h.get({vid:this._vid,tvid:this._tvid},function(b){a(b)})},loadComplete:function(a){a()},on:function(a,b){Q.swf&&Q.swf.notice?Q.event.customEvent.on("swf_playerStateChange",function(c){c=c||{},c.data=c.data||{};var d=c.data.state||"";d.toLocaleLowerCase()==a.toLocaleLowerCase()&&b(c.data)}):this.callsuper("on",a,b)},destroy:function(){this._adController&&(n.debug("Remove event : "+this._AdController.EVENT_CUPID_READY),n.debug("Remove event : "+this._AdController.EVENT_CUPID_NO_AD),this._adController.removeEventListener(this._AdController.EVENT_CUPID_READY,this._cupidEventHandler),this._adController.removeEventListener(this._AdController.EVENT_CUPID_NO_AD,this._cupidEventHandler),this._adController.stop()),this.un(),this._player&&(this._player.pause(),this._player=null)},retryFailed:function(){this._playStateChange("Failed")},_playStateChange:function(a){var b=a.toLocaleLowerCase(),c=["playing","progress","timeupdate","suspend"];c.indexOf(a.toLocaleLowerCase())===-1?n.debug("videoStory, state: "+a):o[a.toLocaleLowerCase()]>0&&(n.debug("videoStory, state: "+a),o[a.toLocaleLowerCase()]-=1),this._playerstate=a,Q.swf&&Q.swf.notice?Q.swf.notice('{"type":"playerStateChange","data":{"tvid":"'+this._tvid+'","state":"'+b+'"}}'):this.fire({type:b,data:{tvid:this._tvid}});var d=this;b=="dataloaded"&&this._videoChanged&&(n.log("videoChanged"),this.getVideoInfo(function(a){d.fire({type:"videoChanged",data:a})}))},_initAd:function(a){var b=this,c;try{c=Q.PageInfo.adPlayerUrl}catch(d){}b._bindAdParam(function(d){n.log("_initAd|_bindAdParam|"+JSON.stringify(d)),seajs.use(c||"http://static.qiyi.com/js/common/poseidon",function(c){b._adController&&b._adController.stop&&b._adController.stop(),b._AdController=c;var e=new c(b._player,d);b._cupidEventHandler=function(b){n.log("poseidon|e.type|"+b.type),b.type==c.EVENT_CUPID_NO_AD?a():(n.log("Ad length : "+b.data.ads[0].duration),Q.event.customEvent.fire({type:"adloaded",data:b.data}),a(b.data.src))},e.addEventListener(c.EVENT_CUPID_READY,b._cupidEventHandler),e.addEventListener(c.EVENT_CUPID_NO_AD,b._cupidEventHandler),b._adController=e,e.start&&e.start()})})},_bindAdParam:function(a){var b=this;b.getVideoInfo(function(c){var d=c.aid,e=c.c,f="iphone";Q.browser.iPad&&(f="ipad");var g=Q.PageInfo.adPlayerId,h=new i({});h.request(function(c){var h=Q.crypto.md5(c.uid+"webEventId"+b._tvid+b._vid+(new Date).getTime()),i=Q.crypto.md5(c.uid+"videoEventId"+b._tvid+b._vid+(new Date).getTime());a({playerId:g,tvId:b._tvid,vId:b._vid,resIndex:p.getCurrVd(),albumId:d,deviceType:f,location:location.href,webEventId:h,channelId:""+e,videoEventId:i})})})}}})});
define("../../kit/videoVipSrcApi",[],function(a,b,c){var d=function(a,b){a=a||{};var c=a.url||"http://serv.vip.iqiyi.com/services/padw_auth.action",d=a.albumId,e="afbe8fd3d73448c9",f=a.vid,g=Date.now()+"",h=parseInt(g.substring(0,2))*parseInt(g.substring(g.length-3))+100,i={onsuccess:function(a,c){b(c)},onfailure:function(){b(!1)},data:{aid:d,platform:"b85da1cf3ae44351",cid:e,vid:f,ut:g,utt:h,v:Q.crypto.md5([d,e,f,g,h,"2385461878"].join("_")),cb:"cb_"+Date.now()},timeout:a.timeout||3e4};Q.http.json(c,i)};c.exports={get:function(a,b){d(a,b)}}});
define("../../kit/videoSrcApi",["./getRemoteInfo","./videoInfo","./bitRate","../config/mobileConfig","./streamSelect","./playerror"],function(a,b,c){var d=a("./getRemoteInfo"),e=a("./videoInfo"),f=a("./bitRate"),g=a("../config/mobileConfig"),h=a("./streamSelect"),i=a("./playerror"),j,k="VideoSrcApi",l=new Q.ic.InfoCenter({moduleName:k}),m={code:"A00001"},n=g.supportTs?"ts":"mp4",o=function(){return!!Q.cookie.get("QC004")*1},p=function(a,b,c){l.log("videoStory, 判断是否为ip限制"),e.get({tvid:a,key:"ipLimit"},function(a){var d=parseInt(a,10);Q.cookie.get("QC004")==="0"&&(d=0),b.match(/oversea/ig)&&d===1?m.code="A00002":m.code="A00000",l.log("videoStory, 判断是否为ip限制完毕"),c(m)})},q=function(a,b,c){var e=n=="ts"?"":b.m4u;l.log("videoStory, 是MP4，开始拿真实的MP4地址"),l.log("videoStory, getRemoteInfo start"),d({url:e},function(d){l.log("videoStory, getRemoteInfo end");if(d===!1){l.error("CDN视频调度失败, url:"+e),i.addItem(i.code.cdnFail),c(m);return}if(!d.l){m.code="A00003",c(m);return}m.src=n=="ts"?b.m3u+"?v="+(d.time^1171771717):d.l,null===m.src&&l.error("videoStory, 没有取到src"),p(a,d.t,c)})},r=function(a,b){var c=a.speed,d=a.tvid;l.log("videoStory, BitRate.get start"),f.get({tvid:d,speed:c,onsuccess:function(a){l.log("videoStory, BitRate.get end, success"),c?h.stream(a,function(a){f.set(a.vd),q(d,a,b)}):(q(d,a,b),Q.event.customEvent.fire({type:"bitrate-set"}))},onfailure:function(){l.error("videoStory, end BitRate.get, failure"),m.code="A00003",b(m)}})};c.exports={get:r}});
define("../../kit/bitRate",["./videoInfo","./storage","../config/mobileConfig","../kit/page","./playerror"],function(a,b,c){function k(){var a=g.getCurrent()?g.getCurrent().getUrl():location.href;return Q.url.getQueryValue(a,"cnid")==23}function l(){var a="1",b="QVD";return k()?(a="2",b="QIPAQVD"):a="1",e.read(b)||a}var d=a("./videoInfo"),e=a("./storage"),f=a("../config/mobileConfig"),g=a("../kit/page"),h=a("./playerror"),i=new Q.ic.InfoCenter({moduleName:"BitRate"}),j={1:{name:"标清"},2:{name:"高清"},96:{name:"极速"}},m=f.supportTs?"ts":"mp4";c.exports={get:function(a){var b=l();this.check(a.vd)&&(b=a.vd),i.log("videoStory, BitRate videoInfo.get start"),d.get({tvid:a.tvid,key:"mt",type:m,mt:b,speed:a.speed},function(c,d){i.log("videoStory, BitRate videoInfo.get end");if(!c){d=d.mt[m];var f={};for(var g in d)f[d[g].vd]=d[g];f[2]?b="2":f[1]?b="1":b="96",i.debug("auto select bit rate: "+b),e.write(k()?"QIPAQVD":"QVD",b),c=f[b],c||(i.error("videoStory, 没有码流: "+b),h.addItem(h.code.noBitRate));try{c.src=m=="ts"?c.m3u:c.m4u,c.vd=b,c.name=j[b].name}catch(l){i.error("videoStory, BitRate: "+l),i.log("videoStory, mtInfo:"+JSON.stringify(c)),i.log("videoStory, vd:"+b),i.log("videoStory, rates[vd]:"+JSON.stringify(j[b]))}a.onsuccess(c)}else{i.log("videoStory, 测试模式-mtInfo.vd: "+c.vd);if(!c.vd)a.onsuccess(c);else{c||(i.error("videoStory, 没有码流: "+b),h.addItem(h.code.noBitRate),Q.log.server({type:"piaoshhtestmayttf",des:"norate",tvid:a.tvid},"http://msg.video.qiyi.com/tmpstats.gif"));try{c.src=m=="ts"?c.m3u:c.m4u,c.vd=b,c.name=j[b].name}catch(l){i.error("videoStory, BitRate: "+l),i.log("videoStory, mtInfo:"+JSON.stringify(c)),i.log("videoStory, vd:"+b),i.log("videoStory, rates[vd]:"+JSON.stringify(j[b]))}a.onsuccess(c)}}})},getCurrVd:l,check:function(a){var b=!!j[a];return b},set:function(a){e.write(k()?"QIPAQVD":"QVD",a),Q.event.customEvent.fire({type:"bitrate-set"})}}});
define("../../kit/page",["../components/units/pageJob","../action/templateRenderer","../view/templateView","../model/channelModel","./eventPlugin","../components/action/nonMVCWidget","../action/phoneLoading","../kit/ifrestime","../config/projectConfig"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../action/templateRenderer"),f=a("../view/templateView"),g,h=a("../model/channelModel"),i=a("./eventPlugin"),j=a("../components/action/nonMVCWidget"),k=a("../action/phoneLoading"),l=[],m=[],n={},o=new Q.ic.InfoCenter({moduleName:"Page"}),p=a("../kit/ifrestime"),q=a("../config/projectConfig"),r=q.getConfig(),s={};Q.$(window).on("popstate",function(a){Q.event.get(a).preventDefault();var b;o.log("state: "+b+", e.state: "+a.state);if(!(b=a.state))return;if(b!=null?b.id:0){var c=t.getCurrent(),d=!1;!c.state||c.state&&c.state.id>=b.id?d=t.back(b.id):d=t.foward(b.id),d||location.reload()}else location.reload()});var t=Q.Class("Page",{extend:j,properties:{},plugins:[new i],construct:function(a){this._uid=(new Date).getTime(),this.callsuper(a),this._wrapper=a.wrapper,this._tmp=Q.element.Element.create({tagName:"div"}),this._scroll=0;var b=this},statics:{_backStack:[],_fowardStack:[],_currPage:null,getInstance:function(a){var b=new t({wrapper:Q.$("body")});return b.setUrl(a),b},setCurrent:function(a){t._currPage=a},getCurrent:function(){return t._currPage},canBack:function(){return l.length>0},back:function(a){var b=n[a];if(b){var c=t.getCurrent();return m.push(c),b.setType("back"),b.renderHtml(b.getHtml(),function(){b.initPage(!1),t.setCurrent(b),b.removeHiddenPages()}),!0}return!1},foward:function(a){var b=n[a];if(b){var c=t.getCurrent();return l.push(c),b.setType("foward"),b.renderHtml(b.getHtml(),function(){b.initPage(!1),t.setCurrent(b),b.removeHiddenPages()}),!0}return!1},updateHistory:function(a,b){m=[],l.push(a),o.log("back:"+l.length),o.log("foward:"+m.length)},_getPageFromStack:function(a){var b;return l.some(function(c){if(c.getUrl()==a)return b=c,!1}),b}},methods:{load:function(a){Q.LoadTime&&Q.LoadTime.reset(["jsloaded","jobdone"]),o.log("load | tplid | "+a.tplId),this._check(),this.setType("newload"),this._loading||(this._loading=new k({doms:{wrapper:Q.$("body")}})),this._id=(new Date).getTime()-1,n[this._id]=this;var b=this,c=Q.object.extend({},a),d=new Date;c.onsuccess=function(c){o.debug("Page loaded in "+(new Date-d)+" ms"),b.initPage(!0);var e=t.getCurrent();b.setReferrer(e.getUrl()),t.setCurrent(b),t.updateHistory(e,b),b.removeHiddenPages(),a.onsuccess&&a.onsuccess()},c.onfailure=function(){a.onfailure&&a.onfailure()},this._render(c)},removeHiddenPages:function(){var a=Q.$("[data-widget=page]"),b=t.getCurrent();a.forEach(function(a){a!=b.getPageElem()[0]&&Q.$(document.body).remove(a)})},initPageResource:function(){this._getScript(),this._getHtmlTitle()},setType:function(a){this._type=a},getType:function(){return this._type},replaceUrl:function(a){history.replaceState&&history.replaceState("","",a),this.setUrl(a)},initPage:function(a){this.initPageResource(),this.setTitle(),this._initPageJob(),o.debug("Resume to scrollTop : "+this._scroll),setTimeout(this.execScript.bind(this),0),this.pushState(a)},pushState:function(a){this.state||(this.state={id:this._id});if(this._url)try{a&&history.pushState?history.pushState(this.state,this.getTitle(),this._url):history.replaceState&&history.replaceState(this.state,this.getTitle(),this._url)}catch(b){}},unload:function(){this._destroyJobs()},getHtml:function(){return this._html||""},setUrl:function(a){this._url=a},getUrl:function(){return decodeURI(this._url)},setReferrer:function(a){this._referrer=a},getReferrer:function(){return this._referrer||""},_render:function(a,b){var c=a.tplId,d=a.tplUrl,h=a.onsuccess,i=a.onfailure,j=!1,k;k=setTimeout(function(){j=!0,i&&i()},r.http.timeout),o.log("_render | tmpl to render: "+c);var l=this,m=new Date;r.getTpls(function(b){if(j)return;p.send({tl:new Date-m,intype:"ht_tm"}),o.debug("Loaded template data : "+(new Date-m)+" ms."),k&&clearTimeout(k),b=b||{},d=b[c].tpl,o.debug("_render | tmpl url: "+d);var n=b[c];if(d&&n){n.Action&&(e=n.Action),n.Model&&(g=n.Model),n.View&&(f=n.View);var q=new g({dom:a.dom}),r=new f({tplUrl:d}),s=new e({model:q,view:r});m=new Date,s.render({onsuccess:function(a){o.debug("Template rendered in "+(new Date-m)+" ms"),o.log("_render | begin to renderHtml"),m=new Date,l.renderHtml(a,function(){o.debug("Html rendered in "+(new Date-m)+" ms"),h&&h(a)})},onfailure:function(){o.error("_render | No string rendered."),i&&i()}})}else o.error("_render | Missing tplUrl or rendererInfo"),i&&i()})},renderHtml:function(a,b){this.saveHtml(a),a=this._trimBody(a);var c=new Date;this._tmp.html(a);var d=this._tmp.first();o.debug("Trim body2 cost : "+(new Date-c)+" ms"),this._pageElem=d,d.css("visibility","hidden"),this._wrapper.append(d);var e=t.getCurrent(),f=e.getPageElem();e._saveScroll(),this._switchPage(f,this._pageElem,b)},_saveScroll:function(){this._scroll=Q.page.getScrollTop(),o.debug("Saved scrollTop : "+this._scroll)},getPageElem:function(){return this._pageElem},getScripts:function(){return this._scripts||[]},execScript:function(){var a=this._scripts;a&&a.forEach(function(a){a=a.replace(/<.*?>/g,"").trim();if(a)try{(new Function(a)).call()}catch(b){o.debug(b)}})},_switchPage:function(a,b,c){var d=this,e=t.getCurrent();e.fire({type:"beforeunload",data:{page:e}}),e.fire({type:"beforeswitchpage",data:{type:this._type,callback:c,oldPage:a,newPage:b}}),e.unload()},setPageElem:function(a){this._pageElem=a},removePageElem:function(a){this._wrapper.remove(a)},_getScript:function(){var a=this._html,b=/<script.*?>([\s\S]*?)<\/ *script>/g,c=a.match(b);c&&(this._scripts=c)},getTitle:function(){return this._title||""},setTitle:function(a){document.title=a||this.getTitle(),this._title=document.title},_getHtmlTitle:function(){var a=this._html,b=/<title>([\s\S]+?)<\/title>/;a.match(b)&&(this._title=RegExp.$1.trim())},_trimBody:function(a){return a.replace(/^[\s\S]*<body.*?>/,"").replace(/<\/ *body>[\s\S]*/,"")},saveHtml:function(a){this._html=a},_destroyJobs:function(){var a=d.getJobs();a.forEach(function(a){if(a.object.destroy)try{a.object.destroy()}catch(b){o.warn("job destroy failed in "+a.name+" with message: "+b.message)}})},_initPageJob:function(){d.clear()},_showLoading:function(){this._loading.show()},_hideLoading:function(){this._loading.hide()},_check:function(){var a=Q.$("[data-widget=page]");!(a.length>1)}}});c.exports=t});
define("../../action/templateRenderer",["../components/action/adapter","../model/templateModel","../view/templateView"],function(a,b,c){var d=a("../components/action/adapter"),e=a("../model/templateModel"),f=a("../view/templateView"),g=new Q.ic.InfoCenter({moduleName:"TemplateRenderer"});c.exports=Q.Class("TemplateRenderer",{extend:d,construct:function(a){a=a||{};var b=a.model,c=a.view;if(!(b instanceof e))throw new Error("Template.construct : model is not instance of TemplateModel");if(!(c instanceof f))throw new Error("Template.construct : view is not instance of TemplateView");this.callsuper(a)},methods:{render:function(a){var b=a,c=a;Q.object.isObject(a)&&(b=a.onsuccess,c=a.onfailure);var d=this;g.debug("Begin to get template data.");var e=new Date;this._model.makeupData(function(a){g.debug("Data loaded in "+(new Date-e)+" ms"),g.debug("Data is : "+(typeof a=="object"?JSON.stringify(a):a.toString())),a&&a.code=="A00000"?(g.debug("Success getting data."),e=new Date,d._view.load({onsuccess:function(){g.debug("All templates loaded in "+(new Date-e)+" ms."),e=new Date,d._view.render(a.data||{},function(a){g.debug("Mustache calculated in "+(new Date-e)+" ms."),b(a)})},onfailure:function(){c&&c()}})):(g.debug("Fail to get data."),c&&c())})},config:function(a){this._view.config(a)}}})});
define("../../components/action/adapter",["../model/model","../view/view"],function(a,b,c){var d=a("../model/model"),e=a("../view/view");c.exports=Q.Class("Adapter",{construct:function(a){a=a||{};var b=a.model,c=a.view;b instanceof d&&(this._model=b,this._model.init(this)),c instanceof e&&(this._view=c,this._view.init(this))},methods:{notice:function(a){if(!a.hasOwnProperty("type"))throw'The ctrlClass method "notice" argument is not Meet the standard!';this._fire(a)},_fire:function(a){this.events&&this.events.hasOwnProperty(a.type)&&this.events[a.type].call(this,a)},syncGet:function(a){if(this._model)var b=this._model.get(a);this._view&&this._view.update(b)},asyncGet:function(a){if(!this._model)return!1;var b=this;this._model.get(a,function(a){b._view&&b._view.update(a)})},syncSet:function(a){if(this._model)var b=this._model.set(a);this._view&&this._view.update(b)},asyncSet:function(a){if(!this._model)return!1;var b=this;this._model.set(a,function(a){b._view&&b._view.update(a)})}}})});
define("../../components/model/model",[],function(a,b,c){c.exports=Q.Class("Model",{ns:"Q.model",construct:function(){this._data={}},methods:{init:Q.fn.emptyMethod,get:function(){return this._data},set:function(a){return Q.object.extend(this._data,a)}}})});
define("../../components/view/view",[],function(a,b,c){c.exports=Q.Class("View",{ns:"Q.view",methods:{init:function(a){this._ctrl=a},update:Q.fn.emptyMethod}})});
define("../../model/templateModel",["../components/model/model"],function(a,b,c){var d=a("../components/model/model");c.exports=Q.Class("TemplateModel",{extend:d,construct:function(){this.callsuper()},methods:{makeupData:Q.fn.abstractMethod}})});
define("../../view/templateView",["../components/view/view","../config/mobileRoot","../config/mobileConfig","../kit/plugins/storage/localStoragePlugin","../components/action/asyncQueue","../config/projectConfig"],function(a,b,c){var d=a("../components/view/view"),e=a("../config/mobileRoot"),f=a("../config/mobileConfig"),g=new Q.ic.InfoCenter({moduleName:"TemplateView"}),h=a("../kit/plugins/storage/localStoragePlugin"),i=a("../components/action/asyncQueue"),j=a("../config/projectConfig"),k=j.getConfig(),l,m;Q.event.customEvent.on("cachedownloading",function(){l={},m={}}),c.exports=Q.Class("TemplateView",{extend:d,construct:function(a){this._plugins={storage:new h},this._tplBase=k.tplBase||"",this._partials=[],this._partialsCount=0,this._tplUrl=a.tplUrl,this._id="default",this._tplUrl&&(this._id=this._tplUrl)},methods:{load:function(a){var b=a,c;Q.object.isObject(a)&&(b=a.onsuccess,c=a.onfailure);var d=this,e=new Date;this._loadStorageData(function(){l[d._id]&&m[d._id]&&!/\/(?:home)|(?:chunwan).inc$/.test(d._id)?b():(l[d._id]={},d._loadTmpl(function(a){a?(g.debug("Tmpl["+d._id+"] loaded in "+(new Date-e)+" ms."),m[d._id]=a,d._saveTmplToStorage(function(){d._getPartials(a,{onsuccess:function(a){a.forEach(function(a){l[d._id][a.name]=a.content,"/templates/pages/play.inc"===d._id&&g.log(d._id+'["'+a.name+'"]: '+(a.content.length>20?a.content.length:a.content))}),b(),d._savePdToStorage()},onfailure:function(){g.warn("Tmpl["+d._id+"] load failed."),c.apply(null,arguments)}})})):(g.warn("Tmpl["+d._id+"] load failed."),c.apply(null,arguments))}))})},config:function(a){a&&a.plugins&&"storage"in a.plugins&&(this._plugins.storage=a.plugins.storage)},render:function(a,b){var c=this;a=this._getData(a),this._renderTemplate(a,function(a){b(a)})},_getData:function(a){return a},_loadTmpl:function(a){m[this._tplUrl]?a(m[this._tplUrl]):Q.http.text(this._tplUrl+"?"+Date.now(),{cors:!0,onsuccess:function(b,c){a(c)},timeout:f.http.timeout,onfailure:function(){a("")}})},_loadStorageData:function(a){if(!this._plugins.storage){l={},m={},a();return}var b=new i,c=this;b.enqueue(function(){l?b.dequeue():c._plugins.storage.read("tmplpd",function(a,c){l=c||{},b.dequeue()})}),b.enqueue(function(){m?b.dequeue():c._plugins.storage.read("tmpl",function(a,c){m=c||{},b.dequeue()})}),b.on("end",a),b.start()},_saveTmplToStorage:function(a){this._plugins.storage?this._plugins.storage.write("tmpl",m,function(b){a()}):a()},_savePdToStorage:function(a){this._plugins.storage?this._plugins.storage.write("tmplpd",l,function(b){a&&a()}):a&&a()},_getPartials:function(a,b){var c=b,d;Q.object.isObject(b)&&(c=b.onsuccess,d=b.onfailure);var e=/\{\{> *.+? *\}\}/g,h=/[\{\} >]/g,i=this,j=a.match(e);j&&j.length>0?(this._partialsCount+=j.length,j.forEach(function(a,b){var e=a.replace(h,""),j=i._tplBase+e+".inc",k=new Date,l=function(a){i._partials.push({name:e,content:a}),i._getPartials(a,c)};m[j]?l(m[j]):Q.http.text(j+"?"+Date.now(),{cors:!0,timeout:f.http.timeout,onsuccess:function(a,b){g.debug("Tmpl["+j+"] loaded in "+(new Date-k)+" ms."),e!="fragments/chunwan/item/chunwandetail"&&e!="fragments/chunwan/item/chuwanpushdetail"&&(m[j]=b),l(b),i._savePdToStorage()},onfailure:function(){g.warn("Tmpl["+j+"] load failed."),d.apply(null,arguments)}})})):this._partialsCount==this._partials.length&&c(this._partials)},_renderTemplate:function(a,b){var c=this,d=Q.plugins.Mustache.render(m[this._id],a,l[this._id]);"/templates/pages/play.inc"===c._id&&(c._plugins.storage.read("tmplpd",function(a,b){g.log('read tmplpd partialsDatas["/templates/pages/play.inc"]'+JSON.stringify(l["/templates/pages/play.inc"]).length)}),g.log("this._id: "+this._id),g.log("tpls[this._id]: "+JSON.stringify(m[this._id]).length),g.log("partialsDatas[this._id]: "+JSON.stringify(l[this._id]).length),g.log("str.length "+d.length)),b(d)}}})});
define("../../config/mobileRoot",[],function(a,b,c){c.exports=""});
define("../../kit/plugins/storage/localStoragePlugin",["./storagePlugin","../../storage"],function(a,b,c){var d=a("./storagePlugin"),e=a("../../storage");c.exports=Q.Class("LocalStoragePlugin",{extend:d,construct:function(){},methods:{_write:function(a,b,c){b&&e.write(a,JSON.stringify(b)),c()},_read:function(a,b){var c=e.read(a);c&&(c=JSON.parse(c)),b(null,c)},_remove:function(a,b){e.remove(a),b()}}})});
define("../../kit/plugins/storage/storagePlugin",[],function(a,b,c){c.exports=Q.Class("StoragePlugin",{construct:function(){},methods:{write:function(a,b,c){a=this.__getKey(a),this._write(a,b,c)},read:function(a,b){a=this.__getKey(a),this._read(a,b)},remove:function(a,b){a=this.__getKey(a),this._remove(a,b)},__getKey:function(a){return"StoragePlugin_"+a},_write:Q.fn.abstractMethod,_read:Q.fn.abstractMethod,_remove:Q.fn.abstractMethod}})});
define("../../components/action/asyncQueue",[],function(a,b,c){c.exports=Q.Class("AsyncQueue",{ns:"Q.action",construct:function(){this._queue=[],this._event={}},methods:{enqueue:function(){var a,b;arguments.length==1&&(a=arguments[0]),arguments.length==2&&(a=arguments[0],b=arguments[1]),this._queue.push({fn:a,param:b||{}})},dequeue:function(){var a=this;if(this._queue.length==0)this.end(!0);else{var b=this._queue.splice(0,1)[0];b.fn(b.param)}},start:function(){this.dequeue()},end:function(a){this.fire("end",a)},on:function(a,b){this._event[a]||(this._event[a]=[]),this._event[a].push(b)},fire:function(a,b){if(this._event[a])for(var c=0;c<this._event[a].length;c++)this._event[a][c](b)},clear:function(){this._queue=[]}}})});
define("../../model/channelModel",["../model/templateModel"],function(a,b,c){var d=a("../model/templateModel");c.exports=Q.Class("ChannelModel",{extend:d,construct:function(a){this.callsuper(),a&&(this.name=a.name)},statics:{},methods:{setName:function(a){this.name=a},getChannels:function(){var a=[{name:"电影",htid:"dianying",categoryId:1,types:[{desc:"按地区",mb10:!0,all:["全部","华语","美国","欧洲","韩国","日本","泰国","其他"]},{desc:"按类型",all:["全部","动作","喜剧","爱情","惊悚","科幻","剧情","战争","青春","灾难"]}]},{name:"电视剧",htid:"dianshiju",categoryId:2,types:[{desc:"按地区",mb10:!0,all:["全部","内地","香港","台湾","韩国","日本","美剧","泰剧","其他"]},{desc:"按类型",all:["全部","青春","家庭","军旅","言情","古装","武侠","偶像","谍战","喜剧"]}]},{name:"片花",htid:"pianhua",categoryId:10,types:[{desc:"按分类",mb10:!0,all:["全部","电影","电视剧"]},{desc:"按地区",all:["全部","华语","美国","欧洲"]}]},{name:"微电影",htid:"weidianying",categoryId:16,types:[{desc:"按片种",mb10:!0,all:["全部","剧情","动画","创意","记录"]},{desc:"按类型",all:["全部","明星","歌舞","文艺","喜剧","爱情","动作","奇幻","惊悚","悬疑"]}]},{name:"动漫",htid:"dongman",categoryId:4,types:[{desc:"按地区",mb10:!0,all:["全部","大陆","日本","美国","法国","韩国","英国","其他"]},{desc:"按年龄",all:["全部","0-3","4-6","7-13","14-17","18以上"]}]},{name:"综艺",htid:"zongyi",categoryId:6,types:[{desc:"按地区",mb10:!0,all:["全部","内地","港台","日韩","其它"]},{desc:"按类型",all:["全部","情感","搞笑","访谈","选秀","时尚","杂谈","游戏","播报","粤语"]}]},{name:"纪录片",htid:"jilupian",categoryId:3,types:[{desc:"按类型",all:["全部","社会","军事","探索","自然","历史","人物","文化","地理","旅游"]}]},{name:"音乐",htid:"yinyue",categoryId:5,types:[{desc:"按地区",mb10:!0,all:["全部","内地","港台","日韩","欧美","拉丁","东南亚"]},{desc:"按流派",all:["全部","流行","摇滚","民谣","说唱","爵士","另类","朋克","金属","独立"]}]},{name:"旅游",htid:"lvyou",categoryId:9,types:[{desc:"按地区",mb10:!0,all:["全部","北京","西藏","法国","日本","埃及","澳洲","安徽","河南","湖南"]},{desc:"按类型",all:["全部","风光","饮食","出行","住宿"]}]},{name:"时尚",htid:"shishang",categoryId:13,types:[{desc:"按行业",mb10:!0,all:["全部","美容","服饰","生活","其他"]},{desc:"按季节",all:["全部","早春","春夏","早秋","秋冬","其他"]}]},{name:"娱乐",htid:"yule",categoryId:7,types:[{desc:"按地区",mb10:!0,all:["全部","内地","港台","日韩","海外","其它"]},{desc:"按类型",all:["全部","新闻","访谈","专题","花絮","MV","独家","热点","原创","八卦"]}]},{name:"体育",htid:"sports",categoryId:17,types:[{desc:"按项目",mb10:!0,all:["全部","足球","篮球","网球","高尔夫","赛车","极限","台球","其他"]},{desc:"按类型",all:["全部","集锦","花絮","进球","整场","节目","纪录片","教学","咨询","其他"]}]},{name:"搞笑",htid:"fun",categoryId:22,types:[{desc:"按地区",mb10:!0,all:["全部","国内","国外"]},{desc:"按类型",all:["全部","自爆","原创","恶搞","相声","小品","宠物","屌丝","童趣","方言"]}]},{name:"广告",htid:"ad",categoryId:20,types:[{desc:"按分类",mb10:!0,all:["全部","明星","公益","欧美","形象","搞笑","时尚","儿童","生活","性感"]},{desc:"按品牌",all:["全部","食品","饮料","化妆品","房地产","金融","汽车","IT数码","烟酒"]}]},{name:"生活",htid:"life",categoryId:21,types:[{desc:"按地区",mb10:!0,all:["全部","国内","国外"]},{desc:"按类型",all:["全部","社会","民生","科技","财经","奇闻","美食","健康","居家","美容"]}]},{name:"教育",htid:"edu",categoryId:12,types:[{desc:"按类型",mb10:!0,all:["全部","幼儿","小学","初中","高中","学历教育","外语学习","职业教育","管理培训"]},{desc:"按学科",all:["全部","语文","数学","英语","物理","化学","政治","生物","历史","地理"]}]}];return{channels:a}},makeupData:function(a){var b=this.name,c=this.getChannels();c.channels.forEach(function(c){if(c.name==b){c.types.forEach(function(a,b){var c=[];a.all.forEach(function(a){a=="全部"?c.push({name:a,sel:!0}):c.push({name:a,sel:!1})}),a.all=c,a.i=b});var d={};d.data=c,d.code="A00000",a(d);return}})},getData:function(a,b){var c=this.getChannels();c.channels.forEach(function(c){if(Q.object.like(c,a))for(var d in b)b[d]=c[d]})},getCategoryIdByName:function(a){var b=this.getChannels(),c=0;return b.channels.forEach(function(b){b.name==a&&(c=b.categoryId)}),c},gethtidByName:function(a){var b=this.getChannels(),c=null;return b.channels.forEach(function(b){b.name==a&&(c=b.htid)}),c},getCategoryById:function(a){var b=this.getChannels(),c;return b.channels.forEach(function(b){b.categoryId==a&&(c=b)}),c},getCategorys:function(){var a=[],b=this.getChannels();return b.channels.forEach(function(b){a.push(b.name)}),a}}})});
define("../../components/action/nonMVCWidget",["./adapter","./plugin"],function(a,b,c){var d=a("./adapter"),e=a("./plugin");c.exports=Q.Class("NonMVCWidget",{extend:d,construct:function(a){this.callsuper(a),this._plugins=[]},methods:{init:function(){var a=this;this._plugins.forEach(function(b){b.init(a)})},registerPlugin:function(a){if(!(a instanceof e))throw new Error("Not a Plugin's instance.");this._plugins.push(a)},resetPlugin:function(){this._plugins=[]}}})});
define("../../components/action/plugin",[],function(a,b,c){c.exports=Q.Class("Plugin",{construct:function(a){throw new Error("Can not create instance.")},methods:{init:function(a){this._widget=a}}})});
define("../../action/phoneLoading",["../components/action/widget","../components/model/model","../view/phoneLoadingView"],function(a,b,c){var d=a("../components/action/widget"),e=a("../components/model/model"),f=a("../view/phoneLoadingView");c.exports=Q.Class("PhoneLoading",{extend:d,construct:function(a){a=a||{},a.model=a.model||new e,a.view=a.view||new f(a),this.callsuper(a)},methods:{show:function(){this.syncSet({display:!0})},hide:function(){this.syncSet({display:!1})}}})});
define("../../components/action/widget",["./nonMVCWidget","../view/widgetView"],function(a,b,c){var d=a("./nonMVCWidget"),e=a("../view/widgetView");c.exports=Q.Class("Widget",{extend:d,construct:function(a){if(!(a.view instanceof e))throw new Error("Widget.construct : view is not instance of WidgetView");this.callsuper({model:a.model,view:a.view})},methods:{redraw:function(){this._view.update(this._model.get())},config:function(a){this._view.config(a)}}})});
define("../../components/view/widgetView",["./view"],function(a,b,c){var d=a("./view");c.exports=Q.Class("WidgetView",{ns:"Q.view",extend:d,construct:function(a){a=a||{};if(!a.doms)throw new Error("Missing doms.");this._doms=a.doms},methods:{config:Q.fn.emptyMethod}})});
define("../../view/phoneLoadingView",["../components/view/widgetView"],function(a,b,c){var d=a("../components/view/widgetView"),e=function(a){Q.event.get(a).stop()};c.exports=Q.Class("PhoneLoadingView",{extend:d,construct:function(a){this.callsuper(a),a.message=a.message||"加载中..",this._elem=Q.$("#loadingelem");var b=Q.page.getViewHeight(),c=Q.page.getViewWidth(),d=Q.page.getScrollTop();if(!this._elem){var e=Q.page.getScrollTop(),f=0+b/2-24;this._elem=Q.element.Element.create({tagName:"div"}),this._elem.html('<img src="http://www.qiyipic.com/common/images/load.gif"/>&nbsp;'+a.message),this._elem.css("position","absolute"),this._elem.css("left","0"),this._elem.css("width",c+"px"),this._elem.css("height",b+"px"),this._elem.css("color","white"),this._elem.css("background","black"),this._elem.css("zIndex","10"),this._elem.css("opacity","0.6"),this._elem.css("display","none"),this._elem.css("textAlign","center"),this._elem.attr("data-fixed-enable","true"),this._elem.attr("id","loadingelem"),this._elem.css("paddingTop",f+"px"),a.doms.wrapper.append(this._elem)}else this._elem.html('<img src="http://www.qiyipic.com/common/images/load.gif"/>&nbsp;'+a.message);this._elem.css("top",d+"px")},methods:{init:function(a){this.callsuper("init",a)},update:function(a){a.display?(this._elem.show(),Q.$("body").on("touchmove",e)):(this._elem.hide(),Q.$("body").un("touchmove",e))}}})});
define("../../kit/streamSelect",["./getRemoteInfo","./speedTest"],function(a,b,c){var d=a("./getRemoteInfo"),e=a("./speedTest"),f=new Q.ic.InfoCenter({moduleName:"streamSelect"}),g=function(a,b){var c,g,h;Q.object.forEach(a,function(a){var b=a.vd;b==1?g=a:b==2?c=a:h=a}),d("",function(a){f.log("videoStory, start getRemoteInfo"),a=a||{};var d=a.s+"",i=a.l.replace("v.ts","speed_test.png");switch(d){case"2":e.test(i,function(a){a>40?b(g||c):b(h||g||c)});break;case"3":case"4":b(h||g||c);break;default:e.test(i,function(a){a>100?b(c):a<40?b(h||g||c):b(g||c)})}})};c.exports={stream:function(a,b){g(a,b)}}});
define("../../kit/speedTest",[],function(a,b,c){c.exports={url:"http://jsmsg.video.qiyi.com/m.gif",test:function(a,b){var c,d=5e3,e=0,f,g=this;if(!a)b(1e3);else{var h=new Image;h.onload=function(){h.onload=null,f=new Date*1-f;if(!e){clearTimeout(c);var a=parseInt(300/(f/1e3));Q.log.server({flag:"html5speedstatsfrmsk",speed:a},"http://msg.video.qiyi.com/tmpstats.gif"),b(a)}},f=new Date*1,c=setTimeout(function(){e=1,Q.log.server({flag:"html5speedstatsfrmsk",speed:"timeout"},"http://msg.video.qiyi.com/tmpstats.gif"),b(1),clearTimeout(c)},d),h.src=a+"?r="+Math.random()}}}});
define("../../interfaces/uidInterface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("UIDInterface",{construct:function(a){var b=String(Math.floor(999999999*Math.random()))+""+(new Date).getTime(),c="http://data.video.qiyi.com/uid?tn="+b;this._remoteInterface=new d({UID:{url:c,struct:{uid:{type:"string",empty:!1}}}})},methods:{request:function(a){this._remoteInterface.send({ifname:"UID",param:{},jsonp:{varname:"uid"}},function(b){b.code=="A00000"?a&&a(b.data):a({})})}}})});
define("../../kit/triggerEvent",[],function(a,b,c){c.exports={trigger:function(a){var b=document.createEvent("Event");b.initEvent(a,!0,!0),window.dispatchEvent(b)}}});
define("../../config/video",[],function(a,b,c){var d=Q.browser.iPad||Q.browser.iPhone||Q.browser.android||Q.browser.lePad||Q.browser.WP;c.exports=d});
define("../../kit/userInfo",["../config/siteDomain","../interfaces/snsAccounts","../interfaces/isLogin","../action/reLogin"],function(require,exports,module){var ic=new Q.ic.InfoCenter({moduleName:"kit/userInfo"}),siteDomain=require("../config/siteDomain"),customEvent=Q.event.customEvent,RISnsAccounts=require("../interfaces/snsAccounts"),RIIsLogin=require("../interfaces/isLogin"),relogin=require("../action/reLogin"),callbackList=[],UserInfo=Q.Class("UserInfo",{properties:{uid:"",name:"",email:"",deadline_date:"",deadline_t:"",level:"",vipType:"",payType:"",remind:"",status:"",isThirdParty:!1,type:"",mobile:"",vip:!1,lockedVip:!1,expireVip:!1,expectPayVip:!1,mobilePayVip:!1,bindedSNS:null,isLoginInfo:null,surplus:""},construct:function(){this.hasVipInfo=!1},methods:{init:function(){this.bindEvent(),this.checkUserInfo()},bindEvent:function(){customEvent.on("login",this.doLogin.bind(this)),customEvent.on("logout",this.doLogout.bind(this))},doLogin:function(){this.checkUserInfo()},doLogout:function(){this.clearUserInfo()},checkUserInfo:function(){if(this.isLogin()){var p00002=Q.cookie.get("P00002");p00002!==null&&p00002!==""&&(p00002=window.JSON?window.JSON.parse(p00002):eval("("+p00002+")"),this.uid=p00002.uid,this.name=p00002.nickname,this.email=p00002.email)}},getUserInfo:function(){if(this.isLogin()){var p00002=Q.cookie.get("P00002");if(p00002!==null&&p00002!=="")return window.JSON?window.JSON.parse(p00002):eval("("+p00002+")")}},getAuthCookies:function(){var a=Q.cookie.get("P00001");return a==="deleted"&&(a=""),a},getIsThirdParty:function(){return this.isThirdParty},setIsThirdParty:function(a){return this.isThirdParty=a,this.isThirdParty},checkVipInfo:function(a,b){this.isLogin()&&(this.hasVipInfo?a&&a(b?this[b]:""):this.getInfoFromInterface(a,b))},getInfoFromInterface:function(a,b){var c=this;if(c.isLoginInfo)a&&a(b?c[b]:"");else if(callbackList&&callbackList.length)callbackList.push({cb:a,param:b});else{callbackList.push({cb:a,param:b});var d={};d.param=d.param||{},d.param.cb=d.param.cb||"__pc__getInfoAction__"+(Math.random()+"").slice(2);var e=new RIIsLogin;e.sendInfoAction(d,function(a){if(a.code=="A00005")relogin.reLogin(a);else{a.code=="A00000"?(c.setVipInfo(a.data||{}),c.isLoginInfo=a.data.userinfo||{}):(ic.warn("调用vip信息接口（http://passport.iqiyi.com/apis/user/info.action）失败。"),c.clearVipInfo());var b;while(callbackList&&callbackList.length>0)try{var d=callbackList.shift();a.code=="A00000"?b=d.param?c[d.param]:"":b=!1,d.cb&&d.cb(b)}catch(e){console.log(e)}}})}},getBindedSnsInfo:function(a){var b=this,c={};if(!this.bindedSNS){var d=new RISnsAccounts;d.getBinded(c,function(c){c.code=="A00000"?(c.data instanceof Array?b.bindedSNS={}:b.bindedSNS=c.data[b.getUid()],a&&a(b.bindedSNS)):c.code=="A00005"&&relogin.reLogin(c)})}else a&&a(this.bindedSNS)},getIsLoginInfo:function(a){var b=this;b.isLoginInfo?a&&a(b.isLoginInfo):b.getInfoFromInterface(function(c){!c&&c!==""?a&&a({}):a&&a(b.isLoginInfo)})},setVipInfo:function(a){var b=a.pps_vip_info||{},c=a.qiyi_vip_info||{},d=parseInt(b.vip_type,10),e=parseFloat(c.type,10);d||e?this.vip=!0:this.vip=!1;var f=0,g=0,h=0,i="";b.vip_remain_day&&(f=new Date,g=f.setDate(f.getDate()+b.vip_remain_day),i=Q.date.format(new Date(g),"yyyy年MM月dd日")),e||parseInt(c.vipType,10)&&!d?(c.deadline&&(h=c.deadline.t,this.deadline_t=h,this.deadline_date=c.deadline.date+""),this.level=c.level+"",this.vipType=c.vipType+"",this.payType=c.payType+"",this.remind=undefined,this.status=c.status+"",this.type=c.type+"",this.mobile=c.mobile+"",this.lockedVip=c.type=="1"&&c.status=="2",this.expireVip=c.type=="1"&&c.status=="3",this.expectPayVip=c.type=="1"&&c.status=="1"&&c.payType=="0",this.mobilePayVip=c.type=="1"&&c.status=="1"&&c.payType=="1",this.surplus=c.surplus+"",this.hasVipInfo=!0):d&&(this.deadline_t=g,this.deadline_date=i+"",this.level=b.pps_level+"",this.vipType="1",this.payType="0",this.remind=undefined,this.status="1",this.type=b.vip_type+"",this.mobile="",this.lockedVip=0,this.expireVip=b.vip_type+"",this.expectPayVip=0,this.mobilePayVip=0,this.surplus=b.vip_remain_day+"",this.hasVipInfo=!0)},clearUserInfo:function(){this.uid="",this.name="",this.email="",this.clearVipInfo(),this.bindedSNS=null,this.isLoginInfo=null},clearVipInfo:function(){this.deadline_date="",this.deadline_t="",this.level="",this.vipType="",this.payType="",this.remind="",this.status="",this.type="",this.mobile="",this.vip=!1,this.lockedVip=!1,this.expireVip=!1,this.expectPayVip=!1,this.mobilePayVip=!1,this.hasVipInfo=!1,this.surplus=""},isLogin:function(){return Q.cookie.get("P00002")!==""&&Q.cookie.get("P00002")!==null&&Q.cookie.get("P00002")!=="deleted"&&Q.cookie.get("P00003")!==""&&Q.cookie.get("P00003")!==null&&Q.cookie.get("P00003")!=="deleted"},isVip:function(a){return this.checkVipInfo(a,"vip"),this.vip},isLockedVip:function(a){return this.checkVipInfo(a,"lockedVip"),this.lockedVip},isExpireVip:function(a){return this.checkVipInfo(a,"expireVip"),this.expireVip},isExpectPayVip:function(a){return this.checkVipInfo(a,"expectPayVip"),this.expectPayVip},isMobilePayVip:function(a){return this.checkVipInfo(a,"mobilePayVip"),this.mobilePayVip},getUid:function(){return this.uid},getName:function(){return this.name},getEmail:function(){return this.email},getDeadlineDate:function(a){return this.checkVipInfo(a,"deadline_date"),this.deadline_date},getDeadlineTime:function(a){return this.checkVipInfo(a,"deadline_t"),this.deadline_t},getLevel:function(a){return this.checkVipInfo(a,"level"),this.level},getVipType:function(a){return this.checkVipInfo(a,"vipType"),this.vipType},getPayType:function(a){return this.checkVipInfo(a,"payType"),this.payType},getRemind:function(a){return this.checkVipInfo(a,"remind"),this.remind},getStatus:function(a){return this.checkVipInfo(a,"status"),this.status},getType:function(a){return this.checkVipInfo(a,"type"),this.type},getMobile:function(a){return this.checkVipInfo(a,"mobile"),this.mobile},getSurplus:function(a){return this.checkVipInfo(a,"surplus"),this.surplus}}}),userInfo=new UserInfo;userInfo.init(),module.exports={isLogin:function(){return userInfo.isLogin()},getUid:function(){return userInfo.getUid()},getName:function(){return userInfo.getName()},getAuthCookies:function(){return userInfo.getAuthCookies()},getEmail:function(){return userInfo.getEmail()},getDeadlineDate:function(a){return userInfo.getDeadlineDate(a)},getDeadlineTime:function(a){return userInfo.getDeadlineTime(a)},getLevel:function(a){return userInfo.getLevel(a)},getVipType:function(a){return userInfo.getVipType(a)},getPayType:function(a){return userInfo.getPayType(a)},getRemind:function(a){return userInfo.getRemind(a)},getStatus:function(a){return userInfo.getStatus(a)},getType:function(a){return userInfo.getType(a)},getMobile:function(a){return userInfo.getMobile(a)},isVip:function(a){return userInfo.isVip(a)},isLockedVip:function(a){return userInfo.isLockedVip(a)},isExpireVip:function(a){return userInfo.isExpireVip(a)},isExpectPayVip:function(a){return userInfo.isExpectPayVip(a)},isMobilePayVip:function(a){return userInfo.isMobilePayVip(a)},checkVipInfo:function(a){return userInfo.checkVipInfo(a)},checkUserInfo:function(){return userInfo.checkUserInfo()},getUserInfo:function(){return userInfo.getUserInfo()},getIsThirdParty:function(){return userInfo.getIsThirdParty()},setIsThirdParty:function(a){return userInfo.setIsThirdParty(a)},getBindedSnsInfo:function(a){return userInfo.getBindedSnsInfo(a)},getIsLoginInfo:function(a){return userInfo.getIsLoginInfo(a)},getSurplus:function(a){return userInfo.getSurplus(a)},clearUserInfo:function(){userInfo.clearUserInfo()}}});
define("../../interfaces/snsAccounts",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("snsAccounts",{construct:function(){this._remoteInterface=new d({getBinded:{url:"http://passport.iqiyi.com/apis/sns/getBindedSNSAcounts.php",struct:{code:{type:"string"},data:{type:"object"}}},bind:{url:"",struct:{code:{type:"string"}}}})},methods:{getBinded:function(a,b){a=a||"",a.cb=a.cb||"__pc__getBindedSNSAccounts__",a.timestamp=(new Date).getTime(),this._remoteInterface.send({ifname:"getBinded",param:a},function(a){b&&b(a)})}}})});
define("../../interfaces/isLogin",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("RIIsLogin",{construct:function(){this._remoteInterface=new d({url:"http://passport.iqiyi.com/apis/user/islogin.php",struct:{code:{type:"string"},data:{type:"object"}}}),this._infoRemote=new d({url:"http://passport.iqiyi.com/apis/user/info.action",struct:{code:{type:"string"},data:{type:"object"}}})},methods:{send:function(a,b){a.param=a.param||{},a.method=a.method||"POST",a.cors=!0,a.withCredentials=!0,a.param.authcookie=a.param.authcookie||Q.cookie.get("P00001"),this._remoteInterface.send(a,function(a){b&&b(a)})},sendInfoAction:function(a,b){a.param=a.param||{},a.method=a.method||"POST",a.cors=!0,a.withCredentials=!0,a.param.authcookie=a.param.authcookie||Q.cookie.get("P00001"),this._infoRemote.send(a,function(a){b&&b(a)})}}})});
define("../../action/reLogin",["./qipaLogin"],function(a,b,c){var d=a("./qipaLogin"),e=Q.Class("ReLogin",{construct:function(){this.needRefresh=!0},methods:{reLogin:function(a){var b=this;a.code=="A00005"&&(Q.event.customEvent.on("login",function(a){b.needRefresh&&setTimeout(function(){window.location.reload()},100)}),Q.event.customEvent.on("loginIframeClosed",function(){b.needRefresh=!1,d.closeLoginWindow(),d.clearTempCallback(),Q.event.customEvent.fire({type:"logout",data:{}})}),d.openLoginWindow({btnId:"resetpwd"}))}}});c.exports=new e});
define("../../action/qipaLogin",["../config/siteDomain","../components/action/viewCenter","../components/action/floater","../components/view/floaterView"],function(a,b,c){var d=a("../config/siteDomain"),e=a("../components/action/viewCenter"),f=a("../components/action/floater"),g=a("../components/view/floaterView"),h=null,i=Q.event.customEvent,j=Q.Class("QipaLogin",{construct:function(){this.loginTempCallback=null},methods:{openLoginWindow:function(a,b){var c=Q.cookie.get("P00002")!==""&&Q.cookie.get("P00002")!==null&&Q.cookie.get("P00002")!=="deleted"&&Q.cookie.get("P00003")!==""&&Q.cookie.get("P00003")!==null&&Q.cookie.get("P00003")!=="deleted";if(!c){a=Q.object.extend({showClose:!0,regUrl:""},a);var e="";a.loginUrl?e=a.loginUrl:(e="http://passport."+d.SITE_DOMAIN+"/user/loginiframe.php?showclose="+a.showClose.toString(),a.btnId&&(e+="&btnid="+a.btnId)),this.renderIfr({src:e}),this.loginTempCallback=b}else b&&b()},closeLoginWindow:function(){if(h)h.destroy(),h=null;else{var a=lib.component.login=lib.component.login||{};try{a.dialog.close()}catch(b){}}},clearTempCallback:function(){this.loginTempCallback=null},renderIfr:function(a){var b=this;a=Q.object.extend({src:"about:blank",width:580,height:375},a),this.qipaLoginIfr=Q.$("#qipaLoginIfr"),this.qipaLoginIfr||(this.qipaLoginIfr=Q.element.Element.create({tagName:"iframe"}),this.qipaLoginIfr.attr("id","qipaLoginIfr").attr("src",a.src).attr("allowTransparency","true").attr("frameBorder",0).attr("scrolling","no").attr("width",a.width).attr("height",a.height).css("zIndex",a.zIndex||4860).hide()),h||(h=new f({view:new g({isResize:!0,zIndex:4850})})),h.show({elem:b.qipaLoginIfr})},setCenter:function(){e(this.qipaLoginIfr)},runTempCallback:function(){this.loginTempCallback&&(this.loginTempCallback(),this.loginTempCallback=null)},reset:function(a){if(this.qipaLoginIfr)for(var b in a)this.qipaLoginIfr.attr(b,a[b])}}}),k=new j;i.on("login",function(a){k.closeLoginWindow(),k.runTempCallback()}),i.on("loginIframeClosed",function(){k.closeLoginWindow(),k.clearTempCallback()}),i.on("loginIframeReset",function(a){k.reset(a.data.opt)}),c.exports=k});
define("../../components/action/viewCenter",[],function(a,b,c){var d=function(a,b){b=b||{};if(!a)return;a=Q.$(a);var c=a.width(),d=a.height(),e=Q.page.getViewWidth(),f=Q.page.getViewHeight(),g=(e-c)/2+Q.page.getScrollLeft(),h=(f-d)/2+Q.page.getScrollTop();b.noposition||a.css("position","absolute"),b.direction=="vertical"?a.css("top",h+"px"):b.direction=="horizontal"?a.css("left",g+"px"):(a.css("left",g+"px"),a.css("top",h+"px"))};c.exports=d});
define("../../components/action/floater",["./adapter","../model/floaterModel","../view/floaterView"],function(a,b,c){var d=a("./adapter"),e=a("../model/floaterModel"),f=a("../view/floaterView");c.exports=Q.Class("Floater",{ns:Q.action,extend:d,construct:function(a){a=a||{},a.model=a.model||new e,a.view=a.view||new f(a),this.callsuper(a),this._valid=!0,this._plugins=[]},methods:{show:function(a){a=a||{},Q.object.extend(a,{display:!0}),this._model.set(a),this.syncGet()},reShow:function(){this._view.update({display:!0})},justShow:function(){this._view.show(),this._view.showCover(),this._view.adjustPosition(),this._view.playAnim()},hide:function(){this._model.set({display:!1}),this.syncGet()},pos:function(a){this._view.pos(a)},getFloater:function(){return this._view.getFloater()},destroy:function(){this.hide(),this._valid&&(this._model.destroy&&this._model.destroy(),this._view.destroy&&this._view.destroy(),this._valid=!1)},isValid:function(){return this._valid},isOpen:function(){return this._view.isOpen()},registPlugin:function(a){this._plugins.push(a)},plugin:function(a){this._plugins.forEach(function(b){b.init&&b.init(a)})},clearPlugins:function(){this._plugins=[]}}})});
define("../../components/model/floaterModel",["./model"],function(a,b,c){var d=a("./model");c.exports=Q.Class("FloaterModel",{ns:Q.model,extend:d,methods:{init:function(){this._data={display:!1}}}})});
define("../../components/view/floaterView",["./view","../action/viewCenter","../action/overlay","../kit/wmodesp","../../kit/anim"],function(a,b,c){var d=a("./view"),e=a("../action/viewCenter"),f=a("../action/overlay"),g=a("../kit/wmodesp"),h=a("../../kit/anim"),i=null;c.exports=Q.Class("FloaterView",{ns:Q.view,extend:d,construct:function(a){a=a||{},this.callsuper(a),this.doOnresize(a),this._wrapper=a.wrapper||document.body,this._zIndex=a.zIndex||100,this.isAnim=a.isAnim,this.noOverflowHidden=a.noOverflowHidden},methods:{init:function(a){this._ctrl=a,this._elem=Q.$(document.createElement("div")),this._elem.css("position","absolute"),this._elem.css("top","0px"),this._elem.css("zIndex",this._zIndex),this.noOverflowHidden||this._elem.css("overflow","hidden"),this._elem.css("visibility","hidden"),Q.$(this._wrapper).append(this._elem),this.adjustBind=this.adjustBind||this.adjustPosition.bind(this)},update:function(a){a.display?(this.build(a),this.show(),this.showCover(a.cover),this.adjustPosition(a.floater),this.playAnim(a.anim),this.isResize&&this.doOnresize({isResize:!0})):(this.hide(),this.hideCover(),this._removeEvent())},getFloater:function(){return this._elem},build:function(a){if(a.id){var b=Q.$("#"+a.id);b&&(this._elem.append(b),a.removeBlock?b.removeAttr("style"):b.show())}else a.html?this._elem.html(a.html):a.elem&&(this._elem.append(a.elem),a.elem.show())},pos:function(a){this._elem.css("left",a.left+"px"),this._elem.css("top",a.top+"px")},show:function(){this._elem.css("visibility","visible"),this.hidePlayer()},hide:function(){this._elem.css("visibility","hidden"),this.showPlayer()},showPlayer:function(){Q.browser.iPad||(Q._PLAYER_WMODE_SP&&Q._PLAYER_WMODE_SP.hide(),g.hide())},hidePlayer:function(){Q.browser.iPad||(Q._PLAYER_WMODE_SP&&Q._PLAYER_WMODE_SP.show(),g.show())},destroy:function(){this._removeEvent(),this._removeDom()},adjustPosition:function(){var a=this;a.isAnim?setTimeout(function(){e(a._elem[0],{noposition:1,direction:"horizontal"}),f.resize()},0):setTimeout(function(){e(a._elem[0]);var b=a._elem.top();f.resize(),b<0&&a._elem.css("top","30px")},0)},showCover:function(a){f.show(this._zIndex-5,a)},hideCover:function(){f.hide()},playAnim:function(a){a=a||{},a.style&&h({elem:this._elem,style:a.style,from:a.from||-300,to:a.to||0,duration:a.duration||400})},_removeDom:function(){var a=this._elem[0];a.parentNode&&a.parentNode.removeChild(a)},_removeEvent:function(){this.winObj&&(this.winObj.un("resize",this.adjustBind),this.winObj=null)},isOpen:function(){return this._elem.css("visibility")=="visible"},doOnresize:function(a){a&&a.isResize&&(this.isResize=!0,this.winObj||(this.winObj=Q.$(window),this.adjustBind=this.adjustBind||this.adjustPosition.bind(this),this.winObj.on("resize",this.adjustBind)))}}})});
define("../../components/action/overlay",[],function(a,b,c){var d=Q.Class("Overlay",{ns:"Q.action",_overlay:null,statics:{show:function(a,b){b=b||{};if(!d._overlay){var c=Q.$(document.createElement("div"));c.css("position",Q.browser.IE6?"absolute":"fixed"),c.css("left","0"),c.css("top","0"),c.css("width",Q.page.getWidth()+"px"),c.css("height",Q.page.getHeight()+"px"),c.css("background","#000"),c.css("opacity",b.opacity||"0.5"),c.css("filter","alpha(opacity="+(b.opacity*100||.5)+")"),c.css("-moz-opacity",b.opacity||"0.5"),Q.$(document.body).append(c),d._overlay=c}a&&d._overlay.css("zIndex",a),this.resize(),d._overlay.css("display","")},hide:function(){d._overlay&&d._overlay.css("display","none").css("zIndex","100")},resize:function(){d._overlay&&d._overlay.css("width",Q.page.getWidth()+"px").css("height",Q.page.getHeight()+"px")}}});c.exports=d});
define("../../components/kit/wmodesp",[],function(a,b,c){var d=Q.Class("WMODESP",{construct:function(){this.player=Q.$("#flash")},methods:{show:function(){this.player&&Q.player.wMode=="window"&&this.player.css("visibility","hidden")},hide:function(){this.player&&Q.player.wMode=="window"&&this.player.css("visibility","visible")}}});c.exports=new d});
define("../../kit/anim",[],function(a,b,c){var d=[],e=function(a,b){var c;return d.forEach(function(d){if(d.elem.equal(a)&&d.style==b)return c=d.anim,!1}),c};c.exports=function(a){if(a){var b=a.elem,c=a.style||"left",f=a.from,g=a.to,h=a.ease||"Expo.easeOut",i=a.duration||500,j=a.done||function(){},k=e(b,c);return k||(k=Q.anim.create(b),d.push({elem:b,style:c,anim:k})),k.ease(h),k.duration(i),k.stop().from(c,f).to(c,g).go().onDone(j),k}}});
define("../../units/channelIndexNavAnim",["../components/units/pageJob","../components/action/checkDoms","../kit/anim"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/anim"),g="channelIndexNavAnim",h={},i=!1,j=!0,k=!1,l;d.create(g,{getDependentDoms:function(){h={wrap:Q.$("[data-widget-navAnim=wrap]"),word:Q.$("[data-navAnim-elem=word]"),navBtn:Q.$("[data-widget-navctrl-elem=guide]"),matchWords:Q.$("[data-navAnim-elem=matchword]"),mask:Q.$("[data-navAnim-elem=mask]")}},check:function(a){for(var b in a)if(!a[b])return!1;return!0},_getCookie:function(){var a;h.wrap.attr("data-navAnim-param")=="channel"?a="QC109":h.wrap.attr("data-navAnim-param")=="play"&&(a="QC111",j=!1),l=parseInt(Q.cookie.get(a),10),!l&&l!==0?l=0:l++,Q.cookie.set(a,l)},_resetWordText:function(){var a=h.word.attr("data-navAnim-param").split("&"),b=a[parseInt(Math.random()*a.length,10)];h.word[0].innerHTML=b},_innerWordAnimate:function(){f({elem:Q.$("[data-navAnim-elem=cur]"),style:"marginLeft",from:70,to:0,duration:600,done:function(){Q.$("[data-navAnim-elem=cur]").removeAttr("data-navAnim-elem")}})},_navBtnAnimate:function(){var a=this;f({elem:h.navBtn,style:"opacity",from:1,to:0,duration:200,done:function(){f({elem:h.navBtn,style:"opacity",from:0,to:1,duration:200,done:function(){h.mask[0].style.display="none"}})}})},_outerWordAnimate:function(){var a=this;f({elem:h.word,style:"right",from:-60,to:0,duration:400})},_animateRightToLeft:function(){var a=this;this._outerWordAnimate(),setTimeout(function(){a._navBtnAnimate()},200),this._innerWordAnimate()},_animteAction:function(){var a=this;h.word[0].style.right="-50px",h.matchWords.forEach(function(a,b){a.innerHTML===h.word[0].innerHTML&&(a.style.marginLeft="60px",Q.$(a).attr("data-navAnim-elem","cur"))});var b;a.isHover?b=0:b=2,setTimeout(function(){a._animateRightToLeft()},1e3*b)},init:function(){this._getCookie();if(l>3)return!1;var a=this,b;this._resetWordText(),h.navBtn.on("mouseenter",function(){if(a.isHover||a.hoverAlready)return!1;b&&window.clearInterval(b),h.mask[0].style.display="block",a.isHover=!0,a._animteAction(),a.hoverAlready=!0}),h.navBtn.on("mouseleave",function(){a.isHover=!1}),a._animteAction(),j&&(b=setInterval(function(){a._animteAction()},6e4))}}),d.add(g)});
define("../../components/action/checkDoms",[],function(a,b,c){var d=function(a){Q.object.forEach(a,function(a,b){if(!a)throw new Error("Dom "+b+" is null")})};c.exports=d});
define("../../units/loginFloater",["../components/units/pageJob","../kit/loginFloater"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"units/creditRecord"}),e=a("../components/units/pageJob"),f=a("../kit/loginFloater");Q.$("body").delegate("loginfloater",function(a){f()})});
define("../../kit/loginFloater",["./userInfo","../components/action/floater"],function(a,b,c){var d=a("./userInfo"),e=a("../components/action/floater"),f=new e;Q.event.customEvent.on("loginIframeClosed",function(){f.hide()}),c.exports=function(a){a=a||function(){};if(d.isLogin())a();else{var b=function(){Q.event.customEvent.un("login",b),f.hide(),a()};Q.event.customEvent.on("login",b),f.show({html:'<iframe width="580" scrolling="no" height="375" frameborder="0" style="z-index: 9999;" src="http://passport.iqiyi.com/user/loginiframe.php?showclose=true" id="j-dialog" allowtransparency="true"></iframe>'})}}});
define("../../patches/swfInterfacePatch",["../kit/userInfo","../kit/yingyinPluginV2"],function(a,b,c){var d=a("../kit/userInfo"),e=a("../kit/yingyinPluginV2");window.lib=window.lib||{},window.lib.swf=window.lib.swf||{},window.lib.swf.getPageInfo=window.lib.swf.getPageInfo||function(){var a=Q.$("[data-widget-qitancomment='comment']");return JSON.stringify({login:d.isLogin().toString(),passportId:d.getUid(),comment:a?"true":"false",name:d.getName(),P00001:d.getAuthCookies()})},window.lib.swf.checkClientInstall=e.check});
define("../../kit/yingyinPluginV2",[],function(a,b,c){var d=function(){if(!(Q.browser.getOS()||"").match(/win/i))return null;e&&e.parentNode.removeChild(e);var a=parseInt(Math.random()*31415926+1,10);return window.ActiveXObject?Q.$("body").html("beforeend","<object id="+a+" "+'classid="clsid:5E6A8DA1-5731-465B-B036-B9E16EF26CAC" width="0" height="0">'+"</object>"):navigator.plugins?navigator.plugins["iQiyi Browser Plugin"]&&Q.$("body").html("beforeend","<object id="+a+" "+'clsid="{5E6A8DA1-5731-465B-B036-B9E16EF26CAC}" width="0" height="0" '+'type="application/client-activex" ></object>'):Q.$("body").html("beforeend","<object id="+a+" "+'clsid="{5E6A8DA1-5731-465B-B036-B9E16EF26CAC}" width="0" height="0" '+'type="application/client-activex" ></object>'),Q.$("#"+a)&&Q.$("#"+a)[0]},e;c.exports={check:function(){e=d();var a;try{a=e.IsClientExists()}catch(b){a=!1}return e!=null&&a},checkDramaKing:function(){e=d();var a;try{a=e.IsFollowExists()}catch(b){a=!1}return e!=null&&a},down:function(a){try{return e.Launch(a.albumId,a.tvName,a.isCharge,a.tvId,a.offline,a.startTime||"",a.definite),!0}catch(b){return!1}},getPlugin:function(){return e=d(),e},downProtocol:function(a){var b="iqiyi://type=download&albumid="+a.albumId+"&tvid="+a.tvId+"&vid=videoid&name="+a.tvName+"&ischarge=0";return window.location.href=b,!1},downDramaKing:function(a){try{return Q.log.log("setDeskTVInfo:"+JSON.stringify(a)),e.GetDeskFavorInfo(JSON.stringify(a)),!0}catch(b){return!1}},sendInfoToDrama:function(a){try{var b=e.GetJSInfo(JSON.stringify(a));return Q.log.log("GetJSInfo:"+JSON.stringify(a)),b}catch(c){return!1}}}});
define("../../units/globalLogoutDelegate",["../components/units/pageJob","../kit/pcLogin"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/pcLogin"),f="globalLogoutDelegate";d.create(f,{check:function(){return!0},init:function(a){var b=this;b.redirect="",Q.$(document).delegate("j-global_logout",function(a){Q.event.get(a.event).preventDefault();var c=a.currentTarget||a.target||a.srcElement;c.href.indexOf("=")!==1?b.redirect=decodeURIComponent(c.href.substring(c.href.indexOf("=")+1)):b.redirect="www.iqiyi.com",e.logout()}),Q.event.customEvent.on("logout",function(){b.redirect&&(location.href=b.redirect)})}}),d.add(f)});
define("../../kit/pcLogin",["../interfaces/pcLogin","../interfaces/logout","../config/loginMsg"],function(a,b,c){var d=a("../interfaces/pcLogin"),e=a("../interfaces/logout"),f=Q.event.customEvent,g=a("../config/loginMsg"),h=new Q.ic.InfoCenter({moduleName:"pcLogin"});window.lib=window.lib||{},window.lib.__callbacks__=window.lib.__callbacks__||{};var i={login_success:lib.__callbacks__.login_success||function(){},login_error:lib.__callbacks__.login_error||function(){},logout_callback:lib.__callbacks__.logout_callback||function(){},login_iframe_closed:lib.__callbacks__.login_iframe_closed||function(){},logBox_close:lib.__callbacks__.logBox_close||function(a){},logBox_reset:lib.__callbacks__.logBox_reset||function(a){}};window.lib.__callbacks__.login_iframe_closed=function(){i.login_iframe_closed(),f.fire({type:"loginIframeClosed"})},window.lib.__callbacks__.login_success=function(a){i.login_success(a),f.fire({type:"login",data:a})},window.lib.__callbacks__.logout_callback=function(a){i.logout_callback(a),f.fire({type:"logout",data:a})},window.lib.__callbacks__.logBox_close=function(a){i.logBox_close(a),f.fire({type:"loginIframeClosed"})},window.lib.__callbacks__.logBox_reset=function(a){i.logBox_reset(a),f.fire({type:"loginIframeReset",data:{opt:a}})},window.lib.__callbacks__.logBox_close.isMainsite=!0,c.exports={login:function(a,b){a=a||{},b=b||"normal";var c=new d(b);c.request(a,function(a){a.code=="A00000"?window.lib.__callbacks__.login_success(a.data):(h.log(a.code+g[a.code]),i.login_error(a.data),f.fire({type:"login-failed",data:{code:a.code,msg:g[a.code],needCode:a.data.needcode}}))})},logout:function(a){f.fire({type:"beforeLogout",data:{}}),Q.browser.IE6?(this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(this._dologout,1e3)):this._dologout()},_dologout:function(){var a=new e;a.request("",function(a){a.code=="A00000"&&window.lib.__callbacks__.logout_callback(a)})}}});
define("../../interfaces/pcLogin",["../kit/remoteInterface2"],function(a,b,c){var d=a("../kit/remoteInterface2");c.exports=Q.Class("RIPcLogin",{construct:function(a){a=="normal"?this._remoteInterface=new d({url:"https://passport.iqiyi.com/apis/user/login.php",struct:{code:{type:"string"},data:{type:"object",struct:{needcode:{type:"number",empty:!0}}}}}):this._remoteInterface=new d({url:"http://passport.iqiyi.com/apis/user/authlogin.php",struct:{code:{type:"string"},data:{type:"object"}}})},methods:{request:function(a,b){this._remoteInterface.send(a,function(a){b&&b(a)})}}})});
define("../../kit/remoteInterface2",["./checkRemoteData"],function(a,b,c){var d=a("./checkRemoteData");c.exports=Q.Class("RemoteInterface2",{construct:function(a){this._remoteInterfaces=a},methods:{send:function(a,b){var c=this,e=a.ifname,f=a.param,g=a.method||"GET",h=c._remoteInterfaces[e]||c._remoteInterfaces;Q.http.json2(h.url,{data:f,method:g,timeout:a.timeout,withCredentials:a.withCredentials,ifr:a.ifr,encodeFn:a.encodeFn,headers:a.headers,onsuccess:function(a,e){try{Q.log.log("send url : "+c._getUrl(h.url,f)+", Check result : "+d.check(h.struct,e))}catch(g){}b&&b(e)},onfailure:function(a,c){b&&b(c||{code:"E00000"})}})},_getUrl:function(a,b){var c=[];for(var d in b)c.push(d+"="+b[d]);return a+"?"+c.join("&")}}})});
define("../../interfaces/logout",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("RILogout",{construct:function(){var a="";this._remoteInterface=new d({url:a,struct:{code:{type:"string"}}})},methods:{request:function(a,b){Q.__logoutcb=function(){delete Q.__logoutcb,b({code:"A00000"}),Q.$("body")[0].removeChild(c[0])};var c=Q.element.Element.create({tagName:"iframe"});c[0].frameborder="0",c[0].width="0",c[0].height="0",c[0].src="http://passport.iqiyi.com/user/logout.php?noredirect=1&logoutcb=Q.__logoutcb",Q.$("body").append(c)}}})});
define("../../config/loginMsg",[],function(a,b,c){c.exports={A00000:"操作成功",A00101:"系统错误",P00101:"注册来源错误",P00102:"请输入正确的邮箱或手机号",P00103:"请输入正确的邮箱",P00104:"密码须为6-16位字母或数字",P00105:'该帐号已注册，请直接<a  j-delegate="loginscroll" href="http://passport.qiyi.com/user/login.php">登录</a>',P00106:'该手机已注册，请直接<a  j-delegate="loginscroll" href="http://passport.qiyi.com/user/login.php">登录</a>',P00107:"验证码错误，请重新输入",P00108:"帐号或密码错误，请重试",P00109:'仅支持中英文、数字或"_"',P00110:"昵称已被占用，换一个试试？",P00111:'该帐号尚未激活，<a href="{0}" target="_blank" class="onlink">重发激活邮件</a>',P00112:"邮箱未注册",P00113:"当前密码不正确",P00114:"新密码格式格式不正确",P00115:"找回密码链接失效",P00116:"找回密码链接错误",P00117:"帐号或密码错误，请重试",P00118:"帐号已激活，不用重发激活链接",P00119:"昵称包含敏感字",P00121:"该邮箱未注册",P00201:"缺少图片",P00202:"图片格式错误",T00115:"图片尺寸有问题，请重新选择",P00211:"抱歉！处理头像图片失败，请重试",P00301:"此第三方帐号已经绑定过了",P00302:"此邮箱已经被占用，请直接绑定已有帐号",P00303:"系统繁忙，绑定失败",P00304:"邮箱或密码错误，请重试",P00305:"该邮箱已被其他帐号绑定，换一个试试吧",P00306:"该帐号尚未激活，无法完成绑定",A00001:"用户未登录",E00000:"用户名或密码错误"}});
define("../../units/pcUserRegistLoginBoxManager",["../components/units/pageJob","../kit/userInfo","../kit/validate","../components/action/checkDoms","../kit/getWebEventID","../units/history20_pingback","../action/pcLoginBox","../view/pcLoginBoxView","../action/pcRegistBox","../view/pcRegistBoxView","../action/pcUserBox","../view/pcUserBoxView","../kit/iframeLocation","./compatible"],function(a,b,c){var d=a("../components/units/pageJob"),e=Q.event.customEvent,f=a("../kit/userInfo"),g=a("../kit/validate"),h=a("../components/action/checkDoms"),i=a("../kit/getWebEventID"),j=a("../units/history20_pingback"),k=a("../action/pcLoginBox"),l=a("../view/pcLoginBoxView"),m=a("../action/pcRegistBox"),n=a("../view/pcRegistBoxView"),o=a("../action/pcUserBox"),p=a("../view/pcUserBoxView"),q=a("../kit/iframeLocation"),r=a("./compatible"),s="pcUserRegistLoginBoxManager",t,u,v,w,x=500,y=100;d.create(s,{getDependentDoms:function(){var a=Q.$("#widget-userregistlogin");if(!a)return{wrapper:null};var b=a.down("[data-widget-loginbox=loginbox]"),c=a.down("[data-widget-registbox=registbox]"),d=a.down("[data-widget-userbox=userbox]"),e=a.down("[data-elem='topUserFaceSmall']"),f=a.down("[data-elem='topUserName']"),g=a.down("[data-elem=topLoginPanel]"),h=a.down("[data-elem=topRegistPanel]"),i=a.down("*[data-vipheader-elem=vipicon]"),j=a.down("*[data-vipheader-elem=notvipicon]"),k=a.down("[data-elem=topUserHead]"),l=Q.$("*[data-userinfocenter=loginbtn]");return this._doms={wrapper:a,loginBox:b,registBox:c,userBox:d,avatarPanael:e,namePanel:f,loginPanel:g,registPanel:h,vipIcon:i,notVipIcon:j,userHead:k,loginBtn:l},this._doms},check:function(a){return!!(a.wrapper&&a.loginBox&&a.registBox&&a.userBox)},init:function(){},exec:function(){t=this._doms,this.initLoginBox(t.loginBox),this.initRegistBox(t.registBox),this.initUserBox(t.userBox),this.isLogin=f.isLogin(),this.checkoutPanel(this.isLogin),this.isLogin?t.loginBtn.hide():t.loginBtn.css("display",""),this.bindEvent()},initLoginBox:function(a){u=new k({view:new l({wrapper:a},{defaultText:{email:"请输入iQIYI或PPS帐号…",passwd:"请输入密码…",piccode:"右侧图像内容…"}}),model:""})},initRegistBox:function(a){v=new m({view:new n({wrapper:a},{defaultText:{email:"请输入常用邮箱…",passwd:"请输入密码…",repasswd:"请重复输入密码…",piccode:"右侧图像内容…"}}),model:""})},initUserBox:function(a){w=new o({view:new p({wrapper:a}),model:""})},_resetDefaultSrc:function(a){var b="http://www.qiyipic.com/common/fix/record_images/usrsmall_index.png",c=this._doms.avatarPanael;a.data.top&&(b="http://www.qiyipic.com/common/fix/record_images/usrsmall-index-new.png"),this._doms.avatarPanael.attr("defaultsrc",b),f.isLogin()?f.getIsLoginInfo(function(a){(!a||!a.icon)&&c.attr("src",b)}):c.attr("src",b)},bindEvent:function(){var a=this,b=!1;e.on("loginInputBegin",function(){b=!0}),e.on("loginInputEnd",function(){b=!1});var c=function(){b||u.hide(y)};e.on("indexNavClassChange",function(b){a._resetDefaultSrc(b)});var d=t.userHead;d.on("mouseenter",function(){a.isLogin?w.show(x):u.show(x)}).on("mouseleave",function(){a.isLogin?w.hide(y):c()});var f=t.namePanel;f.on("mouseenter",function(){w.show(x)}),f.on("mouseleave",function(){w.hide(y)}),t.userBox.on("mouseenter",function(){w.show()}),t.userBox.on("mouseleave",function(){w.hide(y)});var g=t.loginPanel;g.on("mouseenter",function(){u.show(x)}),g.on("mouseleave",function(){c()}),g.on("click",function(a){Q.event.get(a).preventDefault(),u.show(x)}),t.loginBox.on("mouseenter",function(){u.show()}),t.loginBox.on("mouseleave",function(){c()});var h=t.registPanel;h.on("click",function(a){Q.event.get(a).preventDefault(),v.toggle()});var i=function(){u.hide(),v.hide(),w.hide()},k=Q.$("body"),l=Q.browser.iPad?"touchstart":"click";k.on(l,function(a){a=Q.event.get(a);var b=Q.$(a.target);if(!b)return;var c=b.attr("j-delegate");!t.wrapper.contains(a.target)&&c!="loginscroll"&&c!="registerscroll"&&i()});var m=["hideHeaderBoxFromVipHeader","playHistoryShow","updateRecordsShow","navOneShow","suggestShow","updateRecordTipShow"];m.forEach(function(a){e.on(a,i)}),e.on("login",a.doLogin.bind(a)),e.on("logout",a.doLogout.bind(a)),e.on("ppsAccountSuccBind",function(){w.show()}),e.on("playHistoryTipClick",function(){setTimeout(function(){u.show()},0)}),k.delegate("loginscroll",this.doLoginDelegate.bind(this)),k.delegate("registerscroll",this.doRegisterDelegate.bind(this));var n=["pcLoginBoxShow","pcRegistBoxShow","pcUserBoxShow"];n.forEach(function(a){e.on(a,function(a){var b=a.data.wrapper;e.fire({type:"pcUserRegistLoginShow",data:{wrapper:t.wrapper,box:b}}),[w,u,v].forEach(function(a){a._view._doms.wrapper[0]!==b[0]&&a.hide()})})}),f.down("a").on("click",function(a){var b=Q.event.get(a.event);b.preventDefault();var c=Q.$(b.target).attr("href");j.send("gerenzhongxinclk",function(){q.href(c)})})},doLogin:function(a){this.isLogin=!0,this.checkoutPanel(!0),u.hide(),v.hide(),!f.getIsThirdParty()&&g.empty(f.getEmail())&&Q.cookie.set("P000email",f.getEmail(),{path:"/",domain:"iqiyi.com",expires:31536e6});var b=a.data&&a.data.login_state;b&&b==1?e.fire({type:"ppsAccountFirstLogin"}):w.show(),t.loginBtn.hide()},doLogout:function(){this.isLogin=!1,f.setIsThirdParty(!1),w.hide(),this.checkoutPanel(!1),t.loginBtn.css("display","")},checkoutPanel:function(a){var b=t.wrapper,c=t.avatarPanael,d=t.namePanel,e=t.loginPanel,g=t.registPanel,h=t.vipIcon,i=t.notVipIcon;if(a){e.hide(),g.hide();var j=f.getName();(Q.browser.IE6||Q.browser.IE8)&&d.down("a").css("width",Math.min(j.length*12,36)+"px"),d.down("a").html(j),d.css("display","");var k=!1;f.getIsLoginInfo(function(a){if(a&&a.icon)c.attr("src",a.icon);else{var d=c.attr("defaultSrc");c.attr("src",d)}k?b.show():k=!0}),f.isVip(function(a){a?(h.css("display",""),i.hide()):(i.css("display",""),h.hide()),k?b.show():k=!0})}else{d.hide(),e.html("登录").css("display",""),g.html("注册").css("display",""),b.show();var l=c.attr("defaultSrc");c.attr("src",l),h.hide(),i.hide()}},doLoginDelegate:function(a){a=Q.event.get(a.event||window.event),a.preventDefault(),u.show();var b=Q.$(a.target||a.srcElement||a.currentTarget),c=b.attr("j-pingback");c&&i(function(a){var b={type:"phtr2divstat20121204",jsuid:Q.cookie.get("QC006"),flshuid:Q.cookie.get("QC005"),weid:a,ppuid:f.getUid()};c=c.split(";");var d=null;for(var e=0,g=c.length;e<g;e++)d=c[e].split(":"),b[d[0]]=d[1];Q.log.server(b,"http://msg.video.qiyi.com/tmpstats.gif")})},doRegisterDelegate:function(a){a=Q.event.get(a.event||window.event),a.preventDefault(),v.show();var b=Q.$(a.currentTarget||a.target||a.srcElement),c=b.attr("j-pingback");c&&i(function(a){var b={type:"phtr2divstat20121204",jsuid:Q.cookie.get("QC006"),flshuid:Q.cookie.get("QC005"),weid:a,ppuid:f.getUid()};c=c.split(";");var d=null;for(var e=0,g=c.length;e<g;e++)d=c[e].split(":"),b[d[0]]=d[1];Q.log.server(b,"http://msg.video.qiyi.com/tmpstats.gif")})}}),d.add(s)});
define("../../kit/validate",[],function(a,b,c){var d={empty:function(a){return!!a.trim()},mail:function(a){return/^[0-9a-zA-Z_][-_\.0-9a-zA-Z-]{0,31}@([0-9a-zA-Z][0-9a-zA-Z-]*\.)+[a-zA-Z]{2,4}$/.test(a.trim())},pwd:function(a){return/^[0-9a-zA-Z]{4,20}$/.test(a.trim())},mobile:function(a){return/^(1\d{10})$/.test(a.trim())},len:function(a,b,c){return(new RegExp("^.{"+c+","+(b||0)+"}$")).test(a)},ic:function(a){return/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(a)},nickName:function(a){return/^[\u4e00-\u9fa5a-zA-Z]+[\u4e00-\u9fa5a-zA-Z0-9_\-]*$/.test(a)&&Q.string.getLength(a)>=4&&Q.string.getLength(a)<=20}};c.exports=d});
define("../../kit/getWebEventID",["./qiyiPlayer"],function(a,b,c){var d=a("./qiyiPlayer"),e=null;c.exports=function(a){if(!e){var b=d.getPlayer("video");b._player&&b.hasWebEventID()?b.getWebEventID(function(b){e=b,a(e)}):(e=Q.crypto.md5(+(new Date)+Math.round(Math.random()*2147483647)+""),a(e))}else a(e)}});
define("../../units/history20_pingback",["../kit/userInfo","../kit/getWebEventID"],function(a,b,c){var d=a("../kit/userInfo"),e=a("../kit/getWebEventID");b.send=function(a,b){e(function(c){Q.log.server({type:"phtr2divstat20121204",act:a,jsuid:Q.cookie.get("QC006"),flshuid:Q.cookie.get("QC005"),weid:c,ppuid:d.getUid()||""},"http://msg.video.qiyi.com/tmpstats.gif"),b&&b()})}});
define("../../action/pcLoginBox",["../components/action/adapter","../config/siteDomain"],function(a,b,c){var d=a("../components/action/adapter"),e=a("../config/siteDomain"),f=Q.event.customEvent;c.exports=Q.Class("PcLoginBox",{ns:Q.action,extend:d,construct:function(a){this.callsuper(a),this.init(),this.bindEvent()},properties:{timer:null},methods:{init:function(){},bindEvent:function(){f.on("login",this._loginSuccess.bind(this)),f.on("login-failed",this._loginFailed.bind(this)),f.on("logout",this._logout.bind(this))},_loginSuccess:function(a){this._view.resetInput(!0),this._view.resetTips("all"),this._view.hideCode(),Q.cookie.remove("QC017",{path:"/",domain:e.SITE_DOMAIN})},_loginFailed:function(a){var b=!1;if(a.data.needCode==1||a.data.code=="P00107"||a.data.code=="P00117"&&a.data.needCode=="1")Q.cookie.set("QC017","1",{path:"/",expires:1e5,domain:e.SITE_DOMAIN}),this._view.initCode(),b=!0;var c=a.data.msg;c.indexOf("验证码")>=0?this._view.showErrorMsg("piccode","验证码错误"):c.indexOf("密码")>=0?this._view.showErrorMsg("passwd","密码错误"):(c.indexOf("帐号")>=0||c.indexOf("邮箱")>=0||c.indexOf("手机")>=0)&&this._view.showErrorMsg("email","帐号未注册"),!b&&this._view.piccodeVisible&&this._view.refreshPiccode()},_logout:function(){this._view._initEmailFromCookie()},show:function(a){var b=this;b.timer&&clearTimeout(b.timer),a?b.timer=setTimeout(function(){b._view.show()},a):b._view.show()},hide:function(a){var b=this;b.timer&&clearTimeout(b.timer),a?b.timer=setTimeout(function(){b._view.hide()},a):b._view.hide()},toggle:function(a){var b=this;b.timer&&clearTimeout(b.timer),a?b.timer=setTimeout(function(){b._view.toggle()},a):b._view.toggle()}}})});
define("../../view/pcLoginBoxView",["../components/view/view","../kit/anim","../kit/pcVCodeKit","../units/history20_pingback","../kit/pcLogin","../kit/validate","../kit/thirdPartLogin","../kit/thirdPartyBtn"],function(a,b,c){var d=a("../components/view/view"),e=a("../kit/anim"),f=a("../kit/pcVCodeKit"),g=a("../units/history20_pingback"),h=a("../kit/pcLogin"),i=a("../kit/validate"),j=a("../kit/thirdPartLogin"),k=a("../kit/thirdPartyBtn"),l=Q.event.customEvent,m,n,o,p,q,r,s,t,u=Q.$("*[data-widget-toplinefloater=blackFloater]");c.exports=Q.Class("PcLoginBoxView",{ns:Q.view,extend:d,construct:function(a,b){this._doms=a||{},this._opt=b||{},this._empty=!0,this.piccodeVisible=!1},properties:{visible:!0,domReady:!1},methods:{init:function(){this.hide()},show:function(){if(this.visible)return;this.domReady||(this._rendererPanel(),this._initEmailFromCookie(),this._bindEvent()),this._doms.wrapper.show(),this.visible=!0,this._doms.bg&&this._doms.main&&this._doms.bg.css("height",this._doms.main.height()-2+"px"),g.send("logindivshow"),l.fire({type:"pcLoginBoxShow",data:{wrapper:this._doms.wrapper}})},hide:function(){if(!this.visible)return;this.domReady&&(this.resetInput(!1),this.resetTips("all")),this._doms.wrapper.hide(),this.visible=!1,l.fire({type:"pcLoginBoxHide",data:{wrapper:this._doms.wrapper}})},toggle:function(){this.visible?this.hide():this.show()},_rendererPanel:function(){var a='<div class="usrTxGeneral-box usrTx-box_popup usrTx-login-box" data-elem="main"><i class="nav_arrow"></i><h2>登录爱奇艺，悦享品质体验</h2><div class="usrTxGeneral-box_bd"><div class="mailType-box-login" style="display: none"data-elem="loginmailsuggest"></div><div class="logReg-form"><table class="tabs-regRorm notest-tabs" data-elem="login-table"><tbody><tr data-elem="emailTr"><th>帐号：</th><td><div data-elem="emailWrap" class="acountBorder"><input type="text" value="'+this._opt.defaultText.email+'" class="in-txt" data-elem="emailInput"> '+'<span class="in-tips" data-elem="emailTip"></span>'+"</div>"+"</td>"+"</tr>"+'<tr data-elem="passwdTr">'+"<th>密码：</th>"+'<td  class="pb10">'+'<div data-elem="passwdWrap" class="acountBorder">'+'<input type="password" data-elem="passwdInput" class="in-txt">'+'<span class="in-tips" data-elem="passwdTip"'+' style="width: 48px;">'+'<a href="http://passport.iqiyi.com/user/backpwd.php"'+' tabindex="-1" class="toforget">忘记密码</a>'+"</span>"+'<span data-elem="passwdDefaultCover" class="in-pwd"'+' style="display: block;">'+this._opt.defaultText.passwd+"</span>"+"</div> "+"</td>"+"</tr>"+"<!--验证码默认不显示-->"+'<tr data-elem="piccodeTr" class="pt18" style="display: none">'+"<th>验证：</th>"+'<td class="pb0">'+'<div data-elem="piccodeWrap" class="acountCode acountBorder">'+'<input data-elem="piccodeInput"'+' class="in-txt" type="text" value="'+this._opt.defaultText.piccode+'">'+'<span class="in-xline"></span>'+'<span class="in-tips" data-elem="piccodeTip"></span>'+'<span data-elem="yzimg" class="yzimg">'+'<img src="">'+"</span>"+"</div>"+"</td>"+"</tr> "+"<tr>"+"<th></th>"+"<td>"+'<div data-elem="autoLoginWrap-pass" class="itemregLast">  '+'<div class="logAuto">'+'<span data-elem="autoLogin" class="selected">自动登录</span>'+"</div>"+'<a class="ac666" style="display:none"'+' data-elem="refreshPiccode">换一张</a>'+"</div>"+"</td>"+"</tr> "+"<tr>"+"<th></th>"+'<td class="pb0">  '+'<div class="con0520Btn">'+'<a href="#" class="all520Btn all520Btn_green"'+' data-elem="loginBtn" '+'j-delegate="j-loginBtn" data-canClick="false">'+'<span class="lt520Btn">登  录</span>'+"</a>"+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"+"</div>"+'<div class="bindOther-box">'+"<p>使用合作帐号一键登录：</p>"+'<div class="bindOther-box_ico">'+k.weibo()+k.qq()+k.baidu()+k.renren()+k.kaixin()+k.zhifubao()+"</div>"+'<div class="noUser">'+"<p>没有爱奇艺帐号？</p>"+'<p><a href="#" class="green" j-delegate="registerscroll">现在注册</a></p>'+"</div>"+"</div>"+"</div> "+"</div> "+'<iframe class="frameLayer" data-elem="bg"></iframe> ',b=this._doms.wrapper;b&&(b.html(a),this._doms.inputs=b.down("input"),this._doms.inputTips=b.down("span.in-tips"),this._doms.emailInput=b.down("[data-elem='emailInput']"),this._doms.emailWrap=b.down("[data-elem='emailWrap']"),this._doms.emailTip=b.down("[data-elem='emailTip']"),this._doms.emailTr=b.down("[data-elem='emailTr']"),this._doms.passwdInput=b.down("[data-elem='passwdInput']"),this._doms.passwdDefaultCover=b.down("[data-elem='passwdDefaultCover']"),this._doms.passwdTip=b.down("[data-elem='passwdTip']"),this._doms.passwdWrap=b.down("[data-elem='passwdWrap']"),this._doms.passwdTr=b.down("[data-elem='passwdTr']"),this._doms.piccodeInput=b.down("[data-elem='piccodeInput']"),this._doms.piccodeWrap=b.down("[data-elem='piccodeWrap']"),this._doms.piccodeTip=b.down("[data-elem='piccodeTip']"),this._doms.piccodeTr=b.down("[data-elem='piccodeTr']"),this._doms.autoLogin=b.down("[data-elem='autoLogin']"),this._doms.autoLoginWrap_pass=b.down("[data-elem='autoLoginWrap-pass']"),this._doms.refreshPiccode=b.down("[data-elem='refreshPiccode']"),this._doms.yzimg=b.down("[data-elem='yzimg']"),this._doms.loginBtn=b.down("[data-elem='loginBtn']"),this._doms.table=b.down("[data-elem='login-table']"),this._doms.main=b.down("[data-elem='main']"),this._doms.bg=b.down("[data-elem='bg']"),Q.cookie.get("QC017")==1&&this.initCode(),this.domReady=!0,u?l.fire({type:"pcUserLoginDomReady",data:{wrapper:b.down("*[data-elem='loginmailsuggest']"),html:a,input:this._doms.emailInput}}):l.fire({type:"pcUserLoginDomReady",data:{wrapper:b,html:a}}))},_bindEvent:function(){var a=this._doms,b=this;a.inputs&&a.inputs.on("focus",function(a){l.fire({type:"loginInputBegin",data:{input:Q.event.get(a).target}}),b._changeFocus(a,this)}),a.passwdDefaultCover&&a.passwdDefaultCover.on("click",function(a){b._changeFocus(a,this)}),Q.event.customEvent.on("mailSuggestHide",function(b){b.data.input[0]===a.emailInput[0]&&(Q.browser.SAFARI||Q.browser.CHROME?(b=document.createEvent("MouseEvents"),b.initMouseEvent("click",!1,!1),a.passwdDefaultCover[0].focus(),a.passwdDefaultCover[0].dispatchEvent(b)):a.passwdDefaultCover[0].click())}),a.passwdInput&&a.passwdInput.on("focus",function(){a.loginBtn.attr("data-canClick","true")}),a.inputs&&a.inputs.on("blur",this._blur.bind(this)),a.autoLogin&&a.autoLogin.on("click",function(){a.autoLogin.hasClass("selected")?a.autoLogin.removeClass("selected"):a.autoLogin.addClass("selected")}),a.refreshPiccode&&a.refreshPiccode.on("click",function(a){Q.event.get(a).preventDefault(),b.refreshPiccode()}),a.wrapper.delegate("j-loginBtn",function(a){Q.event.get(a.event).preventDefault();var c=Q.$(a.target).attr("data-canClick");if(c&&c=="false")return!1;b.doLogin()}),a.inputs.forEach(function(c){c=Q.$(c),c.on("keydown",function(d){c.attr("data-elem").indexOf("email")<0&&d.keyCode==13&&a.loginBtn.attr("data-canClick")=="true"&&(Q.event.get(d).preventDefault(),b.doLogin())})}),a.wrapper.delegate("authLoginBtn",function(a){Q.event.get(a.event).preventDefault();var b=Q.$(a.target),c=b.attr("data-sourceId");c=="2"?g.send("weiboclk"):c=="4"?g.send("qqclk"):g.send("extendclk")})},_changeFocus:function(a,b){this._empty=!1;var c=Q.event.get(a);c.preventDefault();var d=Q.$(c.target),e,f=c.target.tagName.toLowerCase(),g=d.attr("data-elem"),h=this._doms;if(f=="input")if(g.indexOf("email")>=0)e=h.emailWrap,d.value().trim()==this._opt.defaultText.email&&d.value("");else if(g.indexOf("passwd")>=0){e=h.passwdWrap;var i=h.passwdDefaultCover.css("display");if(!i||i=="block")d.value(""),h.passwdDefaultCover.hide()}else g.indexOf("piccode")>=0&&(e=h.piccodeWrap,d.value().trim()==this._opt.defaultText.piccode&&d.value(""));else g.indexOf("passwd")>=0&&(e=h.passwdWrap,h.passwdInput.value(""),h.passwdDefaultCover.hide(),h.passwdInput[0].focus());e&&e.addClass("acountIn")},doLogin:function(){var a=this,b=a.getLoginData(),c=a.validate(b);c&&h.login({param:b,method:"POST"}),g.send("loginbtnclk")},_blur:function(a){var b=this;clearTimeout(b.st);var c=Q.event.get(a);c.preventDefault();var d=Q.$(c.target),e,f=d.attr("data-elem"),g=d.value(),h;f.indexOf("email")>=0?(h="email",e=b._doms.emailWrap,g.trim()===""&&d.value(b._opt.defaultText.email),b._doms.emailTr.hasClass("error-tds")&&b.resetTips("email")):f.indexOf("passwd")>=0?(h="passwd",e=b._doms.passwdWrap,g===""&&b._doms.passwdDefaultCover.show(),b._doms.passwdTr.hasClass("error-tds")&&b.resetTips("passwd"),clearTimeout(m)):f.indexOf("piccode")>=0&&(h="piccode",e=b._doms.piccodeWrap,g===""&&d.value(b._opt.defaultText.piccode),b._doms.piccodeTr.hasClass("error-tds")&&b.resetTips("piccode")),e.removeClass("acountIn"),setTimeout(function(){b.validate(b.getLoginData(),h,!0)},200),b._doms.wrapper.down("input:focus")||l.fire({type:"loginInputEnd",data:{lastInput:d}})},getDefaultText:function(){return this._opt.defaultText},getDom:function(){return this._doms},getLoginData:function(){var a=this._doms,b={};return b.email=a.emailInput&&a.emailInput.value(),b.passwd=a.emailInput&&a.passwdInput.value().trim(),b.keeplogin=a.autoLogin.hasClass("selected")?1:0,b.piccode=this.piccodeVisible?a.piccodeInput.value().trim():"",b.fromurl="",b},_initEmailFromCookie:function(){var a=Q.cookie.get("P000email");a&&this._doms.emailInput.value(a)},resetInput:function(a){var b=this._doms,c=this;a&&b.emailInput.value(c._opt.defaultText.email),b.passwdInput.value(""),b.passwdDefaultCover.show(),b.piccodeInput.value(c._opt.defaultText.piccode)},resetTips:function(a){var b=this._doms;if(a=="email"||a=="all")b.emailTip.html(""),b.emailTr.removeClass("error-tds");if(a=="passwd"||a=="all")b.passwdTip.html("<a class='toforget' tabIndex='-1' href='http://passport.iqiyi.com/user/backpwd.php'>忘记密码</a>"),b.passwdTr.removeClass("error-tds"),b.passwdTip.un("mouseenter",s),b.passwdTip.un("mouseleave",t),clearTimeout(m),b.passwdTip.css("width","48px");if(a=="piccode"||a=="all")b.piccodeTip.html(""),b.piccodeTr.removeClass("error-tds")},_setPiccodeVisible:function(){this._doms.piccodeTr.css("display",""),this._doms.refreshPiccode.css("display",""),this.piccodeVisible=!0},refreshPiccode:function(){this._doms.yzimg.html("<img src='"+f.getVcode()+"'/> ")},initCode:function(){var a=this._doms.piccodeTr.css("display");(!a||a=="none")&&this._setPiccodeVisible(),this.refreshPiccode()},hideCode:function(){this._doms.piccodeTr.css("display","none"),this._doms.refreshPiccode.css("display","none"),this._doms.autoLoginWrap_pass.show(),this._doms.table.addClass("notest-tabs"),this.piccodeVisible=!1},validate:function(a,b,c){if(!b||b=="email")if(!i.empty(a.email))return(!c||c&&a.email!=this._opt.defaultText.email)&&this.showErrorMsg("email","格式错误"),!1;if(!b||b=="passwd")if(!i.empty(a.passwd))return(!c||c&&this._doms.passwdDefaultCover.css("display")!="block")&&this.showErrorMsg("passwd","密码错误"),!1;if(!b||b=="piccode")if(this.piccodeVisible&&!i.empty(a.piccode))return this.showErrorMsg("piccode","验证码错误"),!1;return!0},showErrorMsg:function(a,b){var c=b||"";this.resetTips("all");var d=this._doms;d.wrapper.down("tr").removeClass("error-tabs");switch(a){case"email":d.emailTr.addClass("error-tds"),d.emailTip.html(c);break;case"passwd":d.passwdTr.addClass("error-tds"),b.indexOf("4-20")>=0&&this.errorMsgAnim(d.passwdTip,c,"格式错误"),d.passwdTip.html(c);break;case"piccode":var e=d.piccodeTr.css("display");if(!e||e!="none")d.piccodeTr.addClass("error-tds"),d.piccodeTip.html(c);break;default:}},errorMsgAnim:function(a,b,c){var d=this;q=b,r=c,a.css("visibility","hidden"),a.css("width",""),a.html(c),n=a.width(),a.width(0),a.html(b),o=a.width(),a.css("visibility","visible"),m=setTimeout(function(){d.change(a,n,c)},3e3),p=a,a.un("mouseenter",s),a.un("mouseleave",t),a.on("mouseenter",s),a.on("mouseleave",t)},change:function(a,b,c){clearTimeout(m),e({elem:a,from:a.width(),to:b,style:"width",done:function(){a.html(c)}})}}})});
define("../../kit/pcVCodeKit",["../config/siteDomain"],function(a,b,c){var d=a("../config/siteDomain");c.exports={getVcode:function(){return"http://passport."+d.SITE_DOMAIN+"/register/vcode.php?r="+Math.random()}}});
define("../../kit/thirdPartLogin",["../kit/snsWindowKit","../kit/userInfo"],function(a,b,c){function g(a){e.setIsThirdParty(!0),d.close(),Q.event.customEvent.fire({type:"login",data:a})}var d=a("../kit/snsWindowKit"),e=a("../kit/userInfo");window.lib=window.lib||{},window.lib.__callbacks__=window.lib.__callbacks__||{};var f={_oAuthSuccess:lib.__callbacks__._oAuthSuccess||function(){},_oAuthError:lib.__callbacks__._oAuthError||function(){}};lib.__callbacks__._oAuthSuccess=function(a){g(a),f._oAuthSuccess(a)},lib.__callbacks__._oAuthError=function(a){f._oAuthError(a)},lib.__callbacks__._bindSnsSuccess=function(a){d.close(),Q.event.customEvent.fire({type:"thirdPartSnsBinded",data:i["_"+a]})};var h={_1:"baidu",_2:"sina",_3:"renren",_4:"qweibo",_5:"zhifubao",_6:"kaixin"},i={_1:"sina",_2:"qzone",_3:"qweibo",_4:"renren",_5:"baidu",_6:"kaixin",_7:"zhifubao"};c.exports={show:function(a,b){var c=h["_"+a],e=c?d.open(c,b):d.open(a,b)}}});
define("../../kit/snsWindowKit",[],function(a,b,c){var d={wbVeri:{w:600,h:400},sina:{w:600,h:400},weibo:{w:600,h:400},qqVeri:{w:600,h:400},qzone:{w:600,h:400},qweibo:{w:600,h:400},rrVeri:{w:420,h:320},renren:{w:420,h:320},bdVeri:{w:600,h:400},baidu:{w:600,h:400},kaixin:{w:600,h:400},alipay_wallet:{w:600,h:400},zhifubao:{w:600,h:400},kxVeri:{w:600,h:400}},e;c.exports={open:function(a,b){var c=d[a],f=Q.page.getViewWidth(),g=Q.page.getViewHeight();c.l=(f-c.w)/2+Q.page.getScrollLeft(),c.t=(g-c.h)/2+Q.page.getScrollTop(),e=window.open(b,"newwindow","height="+c.h+",width="+c.w+",top="+c.t+",left="+c.l+",toolbar=no,menubar=no,scrollbars=no, resizable=no,location=yes, status=no"),e||alert("请允许弹窗验证窗体。")},close:function(){e&&e.close()}}});
define("../../kit/thirdPartyBtn",[],function(a,b,c){var d='<a title="${title}" href="${href}" class="${class}" data-sourceId="${source}" j-delegate="${auth}"></a>',e=new Q.plugins.Template(d),f=function(a){return e.evaluate({title:"微博","class":"sinaweibo",source:"2",href:"http://passport.iqiyi.com/oauth/login.php?type=2&isiframe=1"+(a?"&requestType=1":""),auth:"authLoginBtn"})},g=function(a){return e.evaluate({title:"QQ","class":"qq",source:"4",href:"http://passport.iqiyi.com/oauth/login.php?type=4&isiframe=1"+(a?"&requestType=1":""),auth:"authLoginBtn"})},h=function(a){return e.evaluate({title:"百度","class":"baidu",source:"1",href:"http://passport.iqiyi.com/oauth/login.php?type=1&isiframe=1"+(a?"&requestType=1":""),auth:"authLoginBtn"})},i=function(a){return e.evaluate({title:"人人","class":"renren",source:"3",href:"http://passport.iqiyi.com/oauth/login.php?type=3&isiframe=1"+(a?"&requestType=1":""),auth:"authLoginBtn"})},j=function(a){return e.evaluate({title:"开心","class":"kaixin",source:"6",href:"http://passport.iqiyi.com/oauth/login.php?type=6&isiframe=1"+(a?"&requestType=1":""),auth:"authLoginBtn"})},k=function(a){return e.evaluate({title:"支付宝","class":"zhifubao",source:"5",href:"http://passport.iqiyi.com/oauth/login.php?type=5&isiframe=1"+(a?"&requestType=1":""),auth:"authLoginBtn"})};c.exports={weibo:f,qq:g,baidu:h,renren:i,kaixin:j,zhifubao:k}});
define("../../action/pcRegistBox",["../components/action/adapter","../units/history20_pingback"],function(a,b,c){var d=a("../components/action/adapter"),e=Q.event.customEvent,f=a("../units/history20_pingback");c.exports=Q.Class("PcRegistBox",{ns:Q.action,extend:d,construct:function(a){this.callsuper(a),this.init(),this.bindEvent()},properties:{timer:null},methods:{init:function(){},bindEvent:function(){var a=this;e.on("login",this.loginSuccess.bind(this)),e.on("logout",this.logout.bind(this)),e.on("registFail",this._registFail.bind(this)),e.on("regIqiyiAccount",function(){a.show(),a._view.doBind(),a._isBinding=!0}),e.on("ppsAccountEndBind",function(){a._view.doEndBind(),a._isBinding=!1}),e.on("registed",function(b){a._isBinding?(Q.event.customEvent.fire({type:"iqiyiAccountRegSuccess",data:b.data}),a._isBinding=!1):a._registSuccess(b)})},loginSuccess:function(){this.resetInput(!0),this.resetTips("all"),this.changeBtnSize("small"),this._view.moreThirdLoginBtn(!1)},logout:function(){this.refreshPiccode()},_registSuccess:function(a){window.lib.__callbacks__.login_success(a||{}),f.send("regclk")},_registFail:function(a){var b=a.data.msg||"";b.indexOf("帐号")>=0||b.indexOf("邮箱")>=0||b.indexOf("手机")>=0?this._view.showErrorMsg("email",b):b.indexOf("验证码")>=0?this._view.showErrorMsg("piccode","验证码错误"):b.indexOf("密码")>=0?this._view.showErrorMsg("passwd","密码须为4-20位字母或数字"):this._view.showErrorMsg("email","邮箱已注册"),this.refreshPiccode()},resetTips:function(a){this._view.resetTips(a)},resetInput:function(a){this._view.resetInput(a)},changeBtnSize:function(a){this._view.changeBtnSize(a)},refreshPiccode:function(){this._view.refreshPiccode()},show:function(a){var b=this;b.timer&&clearTimeout(b.timer),a?b.timer=setTimeout(function(){b._view.show()},a):b._view.show()},hide:function(a){var b=this;b.timer&&clearTimeout(b.timer),a?b.timer=setTimeout(function(){b._view.hide()},a):b._view.hide()},toggle:function(a){var b=this;b.timer&&clearTimeout(b.timer),a?b.timer=setTimeout(function(){b._view.toggle()},a):b._view.toggle()},visible:function(){return this._view.visible}}})});
define("../../view/pcRegistBoxView",["../components/view/view","../kit/anim","../kit/pcUserRegistKit","../kit/pcVCodeKit","../units/history20_pingback","../kit/thirdPartyBtn","../kit/validate"],function(a,b,c){var d=a("../components/view/view"),e=a("../kit/anim"),f=a("../kit/pcUserRegistKit"),g=a("../kit/pcVCodeKit"),h=a("../units/history20_pingback"),i=a("../kit/thirdPartyBtn"),j=a("../kit/validate"),k=Q.event.customEvent,l,m,n,o,p,q,r,s,t=Q.$("*[data-widget-toplinefloater=blackFloater]");c.exports=Q.Class("PcRegistBoxView",{ns:Q.view,extend:d,construct:function(a,b){this._doms=a||{},this._opt=b||{},this._empty=!0},properties:{visible:!0,domReady:!1},methods:{init:function(){this.hide()},show:function(){if(this.visible)return;this.domReady||(this._rendererPanel(),this._bindEvent()),this._doms.wrapper.show(),this.visible=!0,this._doms.bg&&this._doms.main&&this._doms.bg.css("height",this._doms.main.height()-2+"px"),this.refreshPiccode(),h.send("regdivshow"),k.fire({type:"pcRegistBoxShow",data:{wrapper:this._doms.wrapper}})},hide:function(){if(!this.visible)return;this.domReady&&(this.resetInput(!1),this.resetTips("all")),this._doms.wrapper.hide(),this.visible=!1,k.fire({type:"pxRegistBoxHide",data:{wrapper:this._doms.wrapper}})},toggle:function(){this.visible?this.hide():this.show()},_rendererPanel:function(){var a='<div class="usrTxGeneral-box usrTx-box_popup usrTx-register-box" data-elem="main"><i data-elem="arrow" class="nav_arrow"></i><h2>注册爱奇艺，一步完成</h2><div class="usrTxGeneral-box_bd"><div class="mailType-box-reg" style="display: none" data-elem="regmailsuggest" ></div><div class="logReg-form"><table class="tabs-regRorm notest-tabs" data-elem="login-table"><tbody><tr data-elem="emailTr"><th>帐号：</th><td><div data-elem="emailWrap" class="acountBorder"><input data-elem="emailInput" class="in-txt" type="txt" value="'+this._opt.defaultText.email+'"> '+'<span data-elem="emailTip" class="in-tips"></span>'+"</div>"+"</td>"+"</tr>"+'<tr data-elem="passwdTr">'+"<th>密码：</th>"+"<td>"+'<div data-elem="passwdWrap" class="acountBorder">'+'<input class="in-txt" data-elem="passwdInput" type="password">'+'<span data-elem="passwdTip" class="in-tips"></span>'+'<span class="in-pwd" data-elem="passwdDefaultCover"'+' data-private-display="" style="display: block;">'+this._opt.defaultText.passwd+"</span>"+"</div>"+"</td>"+"</tr>"+'<tr data-elem="repasswdTr">'+"<th>确认：</th>"+"<td>"+'<div data-elem="repasswdWrap" class="acountBorder">'+'<input class="in-txt" data-elem="repasswdInput" type="password">'+'<span data-elem="repasswdTip" class="in-tips"></span>'+'<span class="in-pwd" data-elem="repasswdDefaultCover">'+this._opt.defaultText.repasswd+"</span>"+"</div>"+"</td>"+"</tr>"+'<tr data-elem="piccodeTr">'+"<th>验证：</th>"+"<td>"+'<div data-elem="piccodeWrap" class="acountCode acountBorder">'+'<input data-elem="piccodeInput" class="in-txt"'+' type="text" value="'+this._opt.defaultText.piccode+'">'+'<span class="in-xline"></span>'+'<span class="in-tips" data-elem="piccodeTip"></span>'+'<span data-elem="yzimg" class="yzimg">'+'<img src="">'+"</span>"+"</div>"+"</td>"+"</tr>"+"<tr>"+'<td colspan="2" class="userPact">'+'<div class="itemregLast">'+'<div class="logAuto">'+'<span data-elem="protocol" class="selected">'+"阅读并同意"+'<a target="_blank" href="http://passport.iqiyi.com/'+'register/protocol.php">《用户服务协议》</a>'+"</span>"+"</div>"+'<a class="ac666" data-elem="refreshPiccode">换一张</a>'+"</div>"+"</td>"+"</tr>"+"<tr>"+"<th></th>"+'<td class="pb0">'+'<div class="con0520Btn">'+'<a href="#" class="all520Btn all520Btn_green"'+' data-elem="registerBtn" '+'j-delegate="j-registerBtn" data-canClick="false" >'+'<span class="lt520Btn">立即注册</span>'+"</a>"+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"+"</div>"+'<div class="bindOther-box">'+'<p data-elem="rightTitle">使用合作帐号一键登录：</p>'+'<div class="bindOther-box_ico">'+i.weibo()+i.qq()+i.baidu()+i.renren()+i.kaixin()+i.zhifubao()+"</div>"+'<div class="noUser" data-elem="loginLink">'+"<p>已有爱奇艺帐号？</p>"+'<p>请<a href="#" class="green" j-delegate="loginscroll">登录</a></p>'+"</div>"+'<div class="noUser" style="display:none;" data-elem="bindLink">'+'<p>返回<a href="#" class="green">绑定</a></p>'+"</div>"+"</div>"+"</div> "+"</div>"+'<iframe class="frameLayer" data-elem="bg"></iframe> ',b=this._doms.wrapper;b&&(b.html(a),this._doms.inputs=b.down("input"),this._doms.inputTips=b.down("span.in-tips"),this._doms.emailInput=b.down("[data-elem='emailInput']"),this._doms.emailWrap=b.down("[data-elem='emailWrap']"),this._doms.emailTip=b.down("[data-elem='emailTip']"),this._doms.emailTr=b.down("[data-elem='emailTr']"),this._doms.passwdInput=b.down("[data-elem='passwdInput']"),this._doms.passwdTip=b.down("[data-elem='passwdTip']"),this._doms.passwdDefaultCover=b.down("[data-elem='passwdDefaultCover']"),this._doms.passwdWrap=b.down("[data-elem='passwdWrap']"),this._doms.passwdTr=b.down("[data-elem='passwdTr']"),this._doms.repasswdInput=b.down("[data-elem='repasswdInput']"),this._doms.repasswdTip=b.down("[data-elem='repasswdTip']"),this._doms.repasswdWrap=b.down("[data-elem='repasswdWrap']"),this._doms.repasswdDefaultCover=b.down("[data-elem='repasswdDefaultCover']"),this._doms.repasswdTr=b.down("[data-elem='repasswdTr']"),this._doms.piccodeInput=b.down("[data-elem='piccodeInput']"),this._doms.piccodeWrap=b.down("[data-elem='piccodeWrap']"),this._doms.piccodeTip=b.down("[data-elem='piccodeTip']"),this._doms.piccodeTr=b.down("[data-elem='piccodeTr']"),this._doms.refreshPiccode=b.down("[data-elem='refreshPiccode']"),this._doms.yzimg=b.down("[data-elem='yzimg']"),this._doms.regBtnWrap=b.down("[data-elem='regBtnWrap']"),this._doms.regBtn=b.down("[data-elem='registerBtn']"),this._doms.thirdLoginBtnWrap=b.down("[data-elem='thirdLoginBtnWrap']"),this._doms.loginLink=b.down("[data-elem='loginLink']"),this._doms.bindLink=b.down("[data-elem='bindLink']"),this._doms.rightTitle=b.down("[data-elem='rightTitle']"),this._doms.arrow=b.down("[data-elem='arrow']"),this._doms.protocol=b.down("[data-elem='protocol']"),this._doms.main=b.down("[data-elem='main']"),this._doms.bg=b.down("[data-elem='bg']"),this.domReady=!0,t?k.fire({type:"pcUserRegDomReady",data:{wrapper:b.down("*[data-elem='regmailsuggest']"),html:a,input:this._doms.emailInput}}):k.fire({type:"pcUserRegDomReady",data:{wrapper:b,html:a}}))},_bindEvent:function(){var a=this._doms,b=this;b._isBinding=!1,r=this.changeInputBig.bind(this),s=this.changeInputSmall.bind(this),a.bindLink.down("a").on("click",function(a){Q.event.get(a).stop(),b.hide(),k.fire({type:"backAccountBind",data:{}})}),b.protocol=a.protocol.hasClass("selected"),a.protocol.on("click",function(c){var d=this,e=Q.$(d),f="";e.hasClass("selected")?(b.protocol=!1,e.removeClass("selected"),a.regBtn.addClass("iconlogbg_disable"),f="false"):(b.protocol=!0,a.regBtn.removeClass("iconlogbg_disable"),e.addClass("selected"),f="true"),a.regBtn.attr("data-canclick",f)}),a.inputs&&a.inputs.on("focus",function(a){b._changeFocus(a,this)}),a.repasswdDefaultCover&&a.repasswdDefaultCover.on("click",function(a){b._changeFocus(a,this)}),a.passwdDefaultCover&&a.passwdDefaultCover.on("click",function(a){b._changeFocus(a,this)}),a.piccodeInput&&a.piccodeInput.on("focus",function(){b.protocol&&a.regBtn.attr("data-canClick","true")}),Q.event.customEvent.on("mailSuggestHide",function(b){b.data.input[0]===a.emailInput[0]&&(Q.browser.SAFARI||Q.browser.CHROME?(b=document.createEvent("MouseEvents"),b.initMouseEvent("click",!1,!1),a.passwdDefaultCover[0].focus(),a.passwdDefaultCover[0].dispatchEvent(b)):a.passwdDefaultCover[0].click())}),a.inputs&&a.inputs.on("blur",b._blur.bind(b)),a.refreshPiccode&&a.refreshPiccode.on("click",function(a){Q.event.get(a).preventDefault(),b.refreshPiccode()}),a.wrapper.delegate("j-registerBtn",function(a){Q.event.get(a).preventDefault();var c=Q.$(a.target).attr("data-canClick");if(c&&c=="false")return!1;b.doReg()}),a.inputs.on("keydown",function(c){c.keyCode==13&&a.regBtn.attr("data-canClick")=="true"&&(Q.event.get(c).preventDefault(),b.doReg())}),a.wrapper.delegate("authLoginBtn",function(a){Q.event.get(a.event).preventDefault();var b=Q.$(a.target),c=b.attr("data-sourceId"),d=b.attr("href");c=="2"?h.send("weiboclk"):c=="4"?h.send("qqclk"):h.send("extendclk")})},doBind:function(){var a=this._doms,b=this;b._isBinding=!0,a.loginLink.hide(),a.bindLink.show();var c=a.wrapper.down("*[j-delegate=authLoginBtn]");c&&c.forEach(function(a){a=Q.$(a);var b=a.attr("orgn-href")||a.attr("href");a.attr("orgn-href",b),a.attr("href",b+"&requestType=1")});var d=a.rightTitle;d.attr("orgn-html",d.attr("orgn-html")||d.html()),d.html("绑定到爱奇艺合作帐号："),a.wrapper.css("marginLeft","-24px"),a.arrow.css("marginLeft","-24px")},doEndBind:function(){var a=this._doms,b=this;b._isBinding=!1,a.loginLink.show(),a.bindLink.hide();var c=a.wrapper.down("*[j-delegate=authLoginBtn]");c&&c.forEach(function(a){a=Q.$(a);var b=a.attr("orgn-href");b&&a.attr("href",b)});var d=a.rightTitle;d.attr("orgn-html")&&d.html(d.attr("orgn-html")),a.wrapper.css("marginLeft",""),a.arrow.css("marginLeft","")},validate:function(a,b,c){var d=this._doms.passwdTip;clearTimeout(l),d.un("mouseenter",r),d.un("mouseleave",s);if(!b||b=="email"){var e=!j.empty(a.email)||!j.mail(a.email)&&!j.mobile(a.email);if(e)return(!c||c&&a.email!=this._opt.defaultText.email)&&this.showErrorMsg("email","格式错误"),!1}if(!b||b=="passwd")if(!j.empty(a.passwd)||!j.pwd(a.passwd))return(!c||c&&this._doms.passwdDefaultCover.css("display")!="block")&&this.showErrorMsg("passwd","密码须为4-20位字母或数字"),!1;if(!b||b=="repasswd")if(a.repasswd!=a.passwd)return(!c||c&&this._doms.repasswdDefaultCover.css("display")!="block")&&this.showErrorMsg("repasswd","密码不一致"),!1;return!b&&!j.empty(a.piccode)?(this.showErrorMsg("piccode","验证码错误"),!1):!0},showErrorMsg:function(a,b){var c=b||"";this.resetTips("all");var d=this._doms;d.wrapper.down("tr").removeClass("error-tabs");switch(a){case"email":d.emailTr.addClass("error-tds"),d.emailTip.html(c);break;case"passwd":d.passwdTr.addClass("error-tds"),d.passwdTip.html(c);break;case"repasswd":d.repasswdTr.addClass("error-tds"),d.repasswdTip.html(c);break;case"piccode":d.piccodeTr.addClass("error-tds"),d.piccodeTip.html(c);break;default:}},doReg:function(){var a=this,b=a.getRegisterData();if(this._isBinding){b.requestType=1;var c=navigator.userAgent.toLowerCase(),d=/ipad/.test(c)?10:Q.browser.android?13:Q.browser.iPhone?12:1;b.agenttype=d}var e=a.validate(b);e&&(delete b.repasswd,b.cb="__pc__register",f.regist({param:b,method:"POST"}))},_changeFocus:function(a,b){this._empty=!1;var c=Q.event.get(a);c.preventDefault();var d=Q.$(c.target),e,f=d.attr("data-elem"),g=c.target.tagName.toLowerCase(),h=this._doms,i;if(g=="input")if(f.indexOf("email")>=0)e=h.emailWrap,d.value().trim()==this._opt.defaultText.email&&d.value("");else if(f.indexOf("repasswd")>=0){e=h.repasswdWrap,i=h.repasswdDefaultCover.css("display");if(!i||i=="block")d.value(""),h.repasswdDefaultCover.hide()}else if(f.indexOf("passwd")>=0){i=h.passwdDefaultCover.css("display");if(!i||i=="block")d.value(""),h.passwdDefaultCover.hide()}else f.indexOf("piccode")>=0&&d.value().trim()==this._opt.defaultText.piccode&&d.value("");else f.indexOf("repasswd")>=0?(e=h.repasswdWrap,h.repasswdInput.value(""),h.repasswdDefaultCover.hide(),h.repasswdInput[0].focus()):f.indexOf("passwd")>=0&&(e=h.passwdWrap,h.passwdInput.value(""),h.passwdDefaultCover.hide(),h.passwdInput[0].focus());e&&e.addClass("acountIn")},_blur:function(a){var b=this;clearTimeout(b.st);var c=Q.event.get(a);c.preventDefault();var d=Q.$(c.target),e,f=d.attr("data-elem"),g=d.value(),h;f.indexOf("email")>=0?(h="email",e=b._doms.emailWrap,g.trim()===""&&d.value(b._opt.defaultText.email),b._doms.emailTr.hasClass("error-tds")&&b.resetTips("email")):f.indexOf("repasswd")>=0?(h="repasswd",e=b._doms.repasswdWrap,g===""&&b._doms.repasswdDefaultCover.show(),b._doms.repasswdTr.hasClass("error-tds")&&b.resetTips("repasswd")):f.indexOf("passwd")>=0?(h="passwd",e=b._doms.passwdWrap,g===""&&b._doms.passwdDefaultCover.show(),b._doms.passwdTr.hasClass("error-tds")&&b.resetTips("passwd"),clearTimeout(l)):f.indexOf("piccode")>=0&&(h="piccode",e=b._doms.piccodeWrap,g===""&&d.value(b._opt.defaultText.piccode),b._doms.piccodeTr.hasClass("error-tds")&&b.resetTips("piccode")),setTimeout(function(){var a=b.getRegisterData();b.validate(a,h,!0)},200),e.removeClass("acountIn")},getDefaultText:function(){return this._opt.defaultText},getRegisterData:function(){var a=this._doms;return{email:a.emailInput&&a.emailInput.value().trim(),passwd:a.passwdInput&&a.passwdInput.value(),repasswd:a.repasswdInput&&a.repasswdInput.value(),piccode:a.piccodeInput&&(a.piccodeInput.value()==this._opt.defaultText.piccode?"":a.piccodeInput.value()),source:"3",fromurl:""}},resetInput:function(a){var b=this._doms,c=this;a&&b.emailInput.value(c._opt.defaultText.email),b.passwdInput.value(""),b.passwdDefaultCover.show(),b.repasswdInput.value(""),b.repasswdDefaultCover.show(),b.piccodeInput.value(c._opt.defaultText.piccode)},resetTips:function(a){var b=this._doms;if(a=="email"||a=="all")b.emailTip.html(""),b.emailTr.removeClass("error-tds");if(a=="passwd"||a=="all")b.passwdTip.html(""),b.passwdTip.width(0),b.passwdTr.removeClass("error-tds");if(a=="piccode"||a=="all")b.piccodeTip.html(""),b.piccodeTr.removeClass("error-tds");if(a=="repasswd"||a=="all")b.repasswdTip.html(""),b.repasswdTr.removeClass("error-tds")},initCode:function(){this.refreshPiccode()},refreshPiccode:function(){var a=this;a._doms.yzimg.html("<img src='"+g.getVcode()+"'/> ")},errorMsgAnim:function(a,b,c){var d=this;p=b,q=c,a.css("visibility","hidden"),a.css("width",""),a.html(c),m=a.width(),a.width(0),a.html(b),n=a.width(),a.css("visibility","visible"),l=setTimeout(function(){d.change(a,m,c)},3e3),o=a,a.un("mouseenter",r),a.un("mouseleave",s),a.on("mouseenter",r),a.on("mouseleave",s)},changeInputBig:function(){this.change(o,n,p)},changeInputSmall:function(){this.change(o,m,q)},change:function(a,b,c){clearTimeout(l),e({elem:a,from:a.width(),to:b,style:"width",done:function(){a.html(c)}})}}})});
define("../../kit/pcUserRegistKit",["../interfaces/pcUserRegistInterface","../config/loginMsg"],function(a,b,c){var d=a("../interfaces/pcUserRegistInterface"),e=Q.event.customEvent,f=a("../config/loginMsg"),g=new Q.ic.InfoCenter({moduleName:"pcUserRegistKit"});c.exports={regist:function(a,b){a=a||{};var c=new d;c.request(a,function(a){a=a||{},a.code=="A00000"?e.fire({type:"registed",data:a.data}):(g.log(a.code+f[a.code]),e.fire({type:"registFail",data:{code:a.code,msg:f[a.code]}}))})}}});
define("../../interfaces/pcUserRegistInterface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("pcUserRegistInterface",{construct:function(){this._remoteInterface=new d({url:"http://passport.iqiyi.com/apis/register/reg.php",struct:{code:{type:"string",empty:"false"},data:{type:"array",empty:"true"}}})},methods:{request:function(a,b){a=a||"",this._remoteInterface.send(a,function(a){b&&b(a)})}}})});
define("../../action/pcUserBox",["../components/action/adapter"],function(a,b,c){var d=a("../components/action/adapter"),e=Q.event.customEvent;c.exports=Q.Class("PcUserBox",{ns:Q.action,extend:d,construct:function(a){this.callsuper(a),this.init(),this.bindEvent()},properties:{timer:null},methods:{init:function(){},bindEvent:function(){e.on("login",this.login.bind(this)),e.on("logout",this.logout.bind(this))},login:function(){this._view.initUserInfo(),this._view.startSync()},logout:function(){this._view.resetUserInfo(),this._view.resetInbox(),this._view.stopSync()},show:function(a){var b=this;b.timer&&clearTimeout(b.timer),a?b.timer=setTimeout(function(){b._view.show()},a):b._view.show()},hide:function(a){var b=this;b.timer&&clearTimeout(b.timer),a?b.timer=setTimeout(function(){b._view.hide()},a):b._view.hide()},toggle:function(a){var b=this;b.timer&&clearTimeout(b.timer),a?b.timer=setTimeout(function(){b._view.toggle()},a):b._view.toggle()}}})});
define("../../view/pcUserBoxView",["../components/view/view","../kit/anim","../kit/userInfo","../units/history20_pingback","../kit/pcLogin","../interfaces/inbox","../kit/iframeLocation","../kit/period","../kit/loadDivPingback"],function(a,b,c){var d=a("../components/view/view"),e=a("../kit/anim"),f=a("../kit/userInfo"),g=a("../units/history20_pingback"),h=a("../kit/pcLogin"),i=a("../interfaces/inbox"),j=a("../kit/iframeLocation"),k=Q.event.customEvent,l=a("../kit/period").create(),m=a("../kit/loadDivPingback");c.exports=Q.Class("PcUserBoxView",{ns:Q.view,extend:d,construct:function(a,b){this._doms=a||{},this._opt=b||{}},properties:{visible:!0,syncTimer:null,domReady:!1},methods:{init:function(){this.hide()},_rendererPanel:function(){var a='<div class="usrTx-inner-box usrTx-box_popup" data-elem="main"><i class="nav_arrow"></i><ul class="usrTx-inner-box_bd"><li class="usrTx-inner-box_userInfo"><span class="usrTx-img"><a data-elem="homeLink" href="http://i.iqiyi.com/home/"><img defaultsrc="http://www.qiyipic.com/common/fix/record_images/usrsmall_index.png" src="" data-userbox-elem="avatar"></a></span><span data-private-display="block" class="usrTx-name" style="display: block;"><span><a data-elem="homeLink" href="http://i.iqiyi.com/home/" class="myName" data-userbox-elem="username"></a><i class="kthy0201" style="display: none;" data-userbox-elem="vipicon"></i><i class="no-kthy0201" style="display: block;" data-userbox-elem="notvipicon"></i></span></span>  <p class="txjifen"><a href="" data-credit="topcreditlink" data-credit-num="pingback" title="积分">积分： <span data-credit="topcreditnumber"></span></a></p></li><li><a data-elem="homeLink" href="http://i.iqiyi.com/home/">个人中心</a></li> <li><a data-userbox-elem="cloudVideoLink" href="http://www.iqiyi.com/common/cloudvideo.html">我的云视频</a></li> <li data-userbox-elem="inboxCtl" class="mailIn-box mailIn-box_show">   <div class="mailIn-hd"> <span data-userbox-elem="inboxIcon"></span><a data-userbox-elem="inboxLink" href="http://i.iqiyi.com/tongzhi">我的收件箱：(<em data-userbox-elem="inboxCount"></em>)</a></div><div data-userbox-elem="inboxCon" class="mailin-bd" style="height:0;"><ul data-userbox-elem="inboxList" class="inboxList"></ul></div>  <li><a data-userbox-elem="accountLink" href="http://account.iqiyi.com/">我的帐户</a></li> <li><a data-userbox-elem="qitanLink" href="http://t.iqiyi.com/">奇谈社区</a></li> <li><a target="_blank" data-userbox-elem="ppsGameLink" href="#">我的PPS游戏</a></li> <li><a data-userbox-elem="settingLink" href="http://i.iqiyi.com/shezhi">个人设置</a></li> <li><a href="#" j-delegate="j-logoutBtn">退出登录</a></li> </ul></div><iframe class="frameLayer" data-elem="bg"></iframe> ',b=this._doms.wrapper;b&&(b.html(a),this._doms.avatar=b.down('[data-userbox-elem="avatar"]'),this._doms.username=b.down('[data-userbox-elem="username"]'),this._doms.vipicon=b.down('[data-userbox-elem="vipicon"]'),this._doms.notvipicon=b.down('[data-userbox-elem="notvipicon"]'),this._doms.homeLink=b.down('[data-elem="homeLink"]'),this._doms.accountLink=b.down('[data-userbox-elem="accountLink"]'),this._doms.qitanLink=b.down('[data-userbox-elem="qitanLink"]'),this._doms.cloudVideoLink=b.down('[data-userbox-elem="cloudVideoLink"]'),this._doms.inboxLink=b.down('[data-userbox-elem="inboxLink"]'),this._doms.inboxList=b.down('[data-userbox-elem="inboxList"]'),this._doms.inboxCon=b.down('[data-userbox-elem="inboxCon"]'),this._doms.inboxCtl=b.down('[data-userbox-elem="inboxCtl"]'),this._doms.inboxIcon=b.down('[data-userbox-elem="inboxIcon"]'),this._doms.inboxCount=b.down('[data-userbox-elem="inboxCount"]'),this._doms.ppsGameLink=b.down('[data-userbox-elem="ppsGameLink"]'),this._doms.settingLink=b.down('[data-userbox-elem="settingLink"]'),this._doms.main=b.down("[data-elem='main']"),this._doms.bg=b.down("[data-elem='bg']"),f.isLogin()&&(l.begin(),this.initUserInfo(),this.startSync())),this.domReady=!0,k.fire({type:"pcUserBoxDomReady",data:{wrapper:b,html:a}})},_bindEvent:function(){var a=this._doms,b=this;a.wrapper.delegate("j-logoutBtn",function(a){Q.event.get(a.event).preventDefault(),h.logout()}),a.inboxIcon.on("click",function(){var b=a.inboxCtl.hasClass("mailIn-box_hide");b?(a.inboxCtl.removeClass("mailIn-box_hide").addClass("mailIn-box_show"),Q.browser.IE6||Q.browser.IE7||Q.browser.IE8?(a.inboxCon.css("height",0),a.bg.css("height",a.main.height())):(e({elem:a.inboxCon,from:a.inboxList.height(),to:0,style:"height"}),e({elem:a.bg,from:a.main.height(),to:a.main.height()-a.inboxList.height(),style:"height"}))):(a.inboxCtl.removeClass("mailIn-box_show").addClass("mailIn-box_hide"),Q.browser.IE6||Q.browser.IE7||Q.browser.IE8?(a.inboxCon.css("height",a.inboxList.height()),a.bg.css("height",a.main.height())):(e({elem:a.inboxCon,from:0,to:a.inboxList.height(),style:"height"}),e({elem:a.bg,from:a.main.height(),to:a.main.height()+a.inboxList.height(),style:"height"})))}),a.inboxCon.delegate("inboxItem",function(a){var b=Q.event.get(a.event);b.preventDefault();var c=Q.$(b.target).attr("href");g.send("inboxclk",function(){j.href(c)})});var c=function(a,b,c){var d=Q.event.get(b.event);d.preventDefault();var e=Q.$(a).attr("href");g.send(c,function(){j.href(e)})},d=function(a,b,c){var d=Q.$(a).attr("href");g.send(c)};a.homeLink.on("click",function(a){c(this,a,"gerenzhongxinclk")}),a.inboxLink.on("click",function(a){c(this,a,"inboxclk")}),a.settingLink.on("click",function(a){c(this,a,"accsetclk")}),a.qitanLink.on("click",function(a){c(this,a,"qitanclk")}),a.cloudVideoLink.on("click",function(a){c(this,a,"mycloudvclk")}),a.ppsGameLink.on("click",function(a){d(this,a,"myppsgameclk")}),a.accountLink.on("click",function(a){c(this,a,"myaccountclk")})},initUserInfo:function(){var a=this._doms;f.getIsLoginInfo(function(b){var c=a.avatar,d=a.username;if(b&&b.icon)c.attr("src",b.icon);else{var e=c.attr("defaultSrc");c.attr("src",e)}var g=f.getName();Q.browser.IE6&&d.css("width",Math.min(g.length*12,96)+"px"),d.html(g)}),f.isVip(function(b){b?(a.vipicon.show(),a.notvipicon.hide()):(a.vipicon.hide(),a.notvipicon.show())});var b=encodeURIComponent(f.getAuthCookies()),c="http://i.pps.tv/auth_login.php?P00001="+b+"&pre_url="+encodeURIComponent("http://g.pps.tv/");a.ppsGameLink.attr("href",c);var d="http://i.pps.tv/auth_login.php?P00001="+b+"&pre_url="+encodeURIComponent("http://my.ipd.pps.tv/upload_external.php");a.inboxCon.css("height",0),this.updateInbox()},startSync:function(){var a=this;a.syncTimer||(a.syncTimer=setTimeout(function(){a.updateInbox()},6e4))},stopSync:function(){this.syncTimer&&(clearTimeout(this.syncTimer),this.syncTimer=null)},resetUserInfo:function(){},resetInbox:function(){var a=this._doms;a.inboxCtl.removeClass("mailIn-box_hide").addClass("mailIn-box_show"),a.inboxCon.css("height",0),a.inboxList.html("")},updateInbox:function(){var a=this,b=new i,c={};b.getUnreadMsg(c,function(b){a.renderInboxMsg(b),l.end(function(a){m.send("micropersoncenter",a)})})},renderInboxMsg:function(a){var b=a.data.unread_notice_total||0,c=a.data.notice||{},d=4,e="";this._doms.inboxCount.html(b);var f=[];for(var g in c)c.hasOwnProperty(g)&&f.push(c[g]);var h="",i=f.length;for(var j=0;j<i;j++)for(var k=j+1;k<i;k++)parseInt(f[j].addtime,10)<parseInt(f[k].addtime,10)&&(h=f[j],f[j]=f[k],f[k]=h);for(j=0;j<i&&j<d;j++){var l=f[j],m=l.title;e+="<li><a j-delegate='inboxItem' href='"+l.notice_url+"'>"+m+"</a></li>"}i>d&&(e+='<li data-userbox-elem="inboxMore"><a href="http://i.iqiyi.com/tongzhi" class="fr">更多&gt;&gt;</a></li>'),this._doms.inboxList.html(e),this._doms.inboxList.css("height",e?"":"0px")},show:function(){if(this.visible)return;this.domReady||(this._rendererPanel(),this._bindEvent()),this._doms.wrapper.show(),this.visible=!0,this._doms.bg&&this._doms.main&&this._doms.bg.css("height",this._doms.main.height()+"px"),g.send("microperdivshow"),k.fire({type:"pcUserBoxShow",data:{wrapper:this._doms.wrapper}})},hide:function(){if(!this.visible)return;this._doms.wrapper.hide(),this.visible=!1,k.fire({type:"pcUserBoxHide",data:{wrapper:this._doms.wrapper}})},toggle:function(){this.visible?this.hide():this.show()}}})});
define("../../interfaces/inbox",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("RIInbox",{construct:function(){this._remoteInterface=new d({getUnreadMsg:{url:"http://i.iqiyi.com/apis/notice/list.action",struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{getUnreadMsg:function(a,b){a=a||{},a.cb=a.cb||"__pc__getUnreadMsg",a.status="1",a.pagesize=a.pagesize||"20",this._remoteInterface.send({ifname:"getUnreadMsg",param:a},function(a){a.code=="A00000"&&b&&b(a)})}}})});
define("../../kit/iframeLocation",[],function(a,b,c){function g(){var a=window.self!=window.top,b=null;return a&&(b=document.referrer),b||location.href}var d=["baidu.com","139life.com"],e=[],f=function(a){var b=d.length,c=e.length,f,g=!1;for(f=0;f<b;f++)a.indexOf(d[f])!=-1&&(g=!0);if(g)for(f=0;f<c;f++)a.indexOf(e[f])!=-1&&(g=!1);return g};c.exports={test:f,check:function(){return f(g())},url:g,href:function(a,b){this.check()?window.open(a):b?(b=b||{},setTimeout(function(){window.location.href=a},b.time||0)):window.location.href=a}}});
define("../../kit/period",[],function(a,b,c){var d=function(){this.beginPoint=null};d.prototype.begin=function(){return this.beginPoint=Date.now&&Date.now()||(new Date).getTime(),this.beginPoint},d.prototype.end=function(a){if(this.beginPoint===null)return null;var b=(Date.now&&Date.now()||(new Date).getTime())-this.beginPoint;return this.beginPoint=null,a&&a(b),b},b.create=function(){return new d}});
define("../../kit/loadDivPingback",["../kit/userInfo"],function(a,b,c){var d=a("../kit/userInfo"),e=function(a){return(Math.random()+"").slice(2,a+2)};b.send=function(a,b,c){Q.log.server({type:"navdivshowltd20130813",divtype:a,ltd:b,jsuid:Q.cookie.get("QC006"),flshuid:Q.cookie.get("QC005"),ppuid:d.getUid()||"",qtcurl:window.location.href},"http://msg.video.qiyi.com/tmpstats.gif"),c&&c()}});
define("../../units/compatible",["../components/units/pageJob"],function(a,b,c){var d=a("../components/units/pageJob"),e="compatible",f=Q.$("*[data-widget-compatible=wrap]");c.exports=!!f});
define("../../units/navHackForIpad",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","./compatible"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/userInfo"),g=a("./compatible"),h="removeUpload",i;d.create(h,{getDependentDoms:function(){var a=Q.$("#data-widget-upload");return i={upload:a,uploadBtn:a.down("a"),splitline:Q.$("#data-upload-splitline")},i},check:function(a){return e(a),!0},init:function(){if(!g)return;i.uploadBtn.on("click",function(a){Q.event.get(a).preventDefault();var b=encodeURIComponent(f.getAuthCookies()||""),c="http://i.pps.tv/auth_login.php?P00001="+b+"&pre_url="+encodeURIComponent(i.uploadBtn.attr("href")),d=i.uploadBtn.attr("target");d=="_blank"?window.open(c):window.location.href=c});if(Q.browser.iPad){i.upload[0].style.display="none",i.splitline[0].style.display="none";var a=Q.$("*[data-ipadhack-elem=nav]");a&&a.addClass("forpad")}}}),d.add(h)});
define("../../widgets/sso/job",["../../components/units/pageJob","../../action/ppsSync","../../flows/pc/sso/index","../../flows/pc/sso/steps/setProperty","../../flows/pc/sso/steps/getYingYinPlugin","../../flows/pc/sso/steps/getInfoFromYingyin","../../flows/pc/sso/steps/buildEvent","../../flows/pc/sso/steps/setSideInfo","../../flows/pc/sso/steps/setSelfInfo","../../flows/pc/sso/steps/yingyinSyncData","../../flows/pc/sso/steps/webLogout","../../flows/pc/sso/steps/isUserLogin","../../flows/pc/sso/steps/getVisitCode","../../flows/pc/sso/steps/popBindView","../../flows/pc/sso/steps/initSyncList","../../flows/pc/sso/steps/execTask","../../flows/pc/sso/steps/yingyinSyncAuth","../../flows/pc/sso/steps/baiduSyncAuth","../../flows/pc/sso/steps/hasAuth","../../flows/pc/sso/steps/authLogin"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"units/ssofollow"}),e=a("../../components/units/pageJob"),f=a("../../action/ppsSync"),g=a("../../flows/pc/sso/index");e.create("ssofollow",{check:function(){return!0},init:function(){this.sync=new f({setUrl:"http://l.pps.tv/user/setcookie.php",delUrl:"http://l.pps.tv/user/delcookie.php"}),this.sync.init(),this.flow=new g},exec:function(){var b=this,c={"设置属性":a("../../flows/pc/sso/steps/setProperty"),"获取影音插件":a("../../flows/pc/sso/steps/getYingYinPlugin"),"获取影音登录信息":a("../../flows/pc/sso/steps/getInfoFromYingyin"),"绑定登录登出事件":a("../../flows/pc/sso/steps/buildEvent"),"设置影音插件中对方信息":a("../../flows/pc/sso/steps/setSideInfo"),"设置影音插件中本端信息":a("../../flows/pc/sso/steps/setSelfInfo"),"影音获取同步登出信息":a("../../flows/pc/sso/steps/yingyinSyncData"),"主站退出":a("../../flows/pc/sso/steps/webLogout"),"判断用户是否登录":a("../../flows/pc/sso/steps/isUserLogin"),"获取用户访问标识":a("../../flows/pc/sso/steps/getVisitCode"),"弹出pps账号绑定浮层":a("../../flows/pc/sso/steps/popBindView"),"初始化同步登录队列":a("../../flows/pc/sso/steps/initSyncList"),"执行队列任务":a("../../flows/pc/sso/steps/execTask"),"影音获取auth":a("../../flows/pc/sso/steps/yingyinSyncAuth"),"baidu获取auth":a("../../flows/pc/sso/steps/baiduSyncAuth"),"是否获取到auth":a("../../flows/pc/sso/steps/hasAuth"),"使用auth登录":a("../../flows/pc/sso/steps/authLogin")};if(!this.flow){d.warn("flow null");return}for(var e in c)c.hasOwnProperty(e)&&b.flow.implement(e,c[e]);this.flow.init()}}),e.add("ssofollow")});
define("../../action/ppsSync",["../kit/iframeRequest","../kit/userInfo"],function(a,b,c){var d=a("../kit/iframeRequest"),e=Q.event.customEvent,f=a("../kit/userInfo");c.exports=Q.Class("PpsSync",{construct:function(a){a=a||{},this.setUrl=a.setUrl,this.delUrl=a.delUrl},properties:{setUrl:"",delUrl:""},methods:{init:function(){this.req=new d,e.on("beforeLogout",this._doSync.bind(this,this.delUrl)),e.on("login",this._doSync.bind(this,this.setUrl))},_doSync:function(a){if(!a)return;var b=f.getAuthCookies();this.req.getFrame()&&this.req.request(a,{authcookie:b})}}})});
define("../../kit/iframeRequest",[],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"kit/iframeRequest"}),e=Q.Class("iframeRequest",{construct:function(a){a=a||{},this.param=a,this.createFrame()},methods:{createFrame:function(){var a="loadingIframe_thread"+Math.ceil(Math.random()*1e4);this.loadFrames=a;var b=['<iframe id="'+a+'" name="'+a+'" class="invisible"',' scrolling="no" src=""',' allowTransparency="true" style="display:none;" frameborder="0"'," ></iframe>"].join(""),c=document.createElement("div");c.id="iframe_request",c.innerHTML=b,document.body.appendChild(c),this.ifr=c,this.frame=document.getElementById(this.loadFrames)},getFrame:function(){return this.frame||this.createFrame(),this.frame},request:function(a,b){this._initFrame(b);if(a&&this.ifr&&this.frame!=null){var c="sIframe_"+(new Date).getTime(),d=[];b=b||{},b.t=c;for(var e in b)d.push(e+"="+encodeURIComponent(b[e]));this.frame.src=a+"?"+d.join("&")}},_initFrame:function(a){var b=this;this.ifr&&this.frame&&(this.frame.onload=this.frame.onerror=this.frame.onabort=function(c){d.log(b.frame.innerHTML),a.callback&&a.callback(),b.ifr.onload=b.ifr.onerror=b.ifr.onabort=null,b.param.remove&&(document.body.removeChild(b.ifr),b.ifr=b.frame=null)})}}});c.exports=e});
define("../../flows/pc/sso/index",["../../../kit/userInfo","./stepDef/setProperty","./stepDef/getYingYinPlugin","./stepDef/getInfoFromYingyin","./stepDef/buildEvent","./stepDef/isUserLogin","./stepDef/setSideInfo","./stepDef/setSelfInfo","./stepDef/yingyinSyncData","./stepDef/webLogout","./stepDef/getVisitCode","./stepDef/popBindView","./stepDef/initSyncList","./stepDef/execTask","./stepDef/yingyinSyncAuth","./stepDef/baiduSyncAuth","./stepDef/hasAuth","./stepDef/authLogin"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"flows/sso/index"}),e=a("../../../kit/userInfo");c.exports=window.Flowjs.Class({extend:Flowjs.Flow,construct:function(b){b=b||{},this.callsuper(b),this._addStep("设置属性",a("./stepDef/setProperty")),this._addStep("获取影音插件",a("./stepDef/getYingYinPlugin")),this._addStep("获取影音登录信息",a("./stepDef/getInfoFromYingyin")),this._addStep("绑定登录登出事件",a("./stepDef/buildEvent")),this._addStep("判断用户是否登录",a("./stepDef/isUserLogin")),this._addStep("设置影音插件中对方信息",a("./stepDef/setSideInfo")),this._addStep("设置影音插件中本端信息",a("./stepDef/setSelfInfo")),this._addStep("影音获取同步登出信息",a("./stepDef/yingyinSyncData")),this._addStep("主站退出",a("./stepDef/webLogout")),this._addStep("获取用户访问标识",a("./stepDef/getVisitCode")),this._addStep("弹出pps账号绑定浮层",a("./stepDef/popBindView")),this._addStep("初始化同步登录队列",a("./stepDef/initSyncList")),this._addStep("执行队列任务",a("./stepDef/execTask")),this._addStep("影音获取auth",a("./stepDef/yingyinSyncAuth")),this._addStep("baidu获取auth",a("./stepDef/baiduSyncAuth")),this._addStep("是否获取到auth",a("./stepDef/hasAuth")),this._addStep("使用auth登录",a("./stepDef/authLogin")),this._userInfo=null},methods:{init:function(){var a=this;a._go("设置属性"),a._go("获取影音插件"),a._go("获取影音登录信息"),a._go("绑定登录登出事件",{},{inputs:{"登录":function(){a._userInfo={uid:e.getUid(),auth:e.getAuthCookies()},a._go("设置影音插件中本端信息",{setInfo:a._userInfo,state:1}),a._go("设置影音插件中对方信息",{setInfo:a._userInfo,state:1})},"登出":function(b){a._go("设置影音插件中本端信息",{setInfo:a._userInfo,state:0}),a._go("设置影音插件中对方信息",{setInfo:a._userInfo,state:0})},"更改密码":function(){a._userInfo={uid:e.getUid(),auth:e.getAuthCookies()},a._go("设置影音插件中本端信息",{setInfo:a._userInfo,state:1})}}}),a._go("判断用户是否登录",{},{cases:{"已登录":function(b){a._userInfo={uid:b.property.uid},a._userInfo.auth=e.getAuthCookies(),a._go("获取用户访问标识",{code:"QC107"},{inputs:{"第一次登录":function(){a._go("弹出pps账号绑定浮层")},"非第一次登录":function(){}}}),a._go("影音获取同步登出信息",{setInfo:a._userInfo},{inputs:{"使用网页登录后未同步影音":function(){a._go("设置影音插件中对方信息",{setInfo:a._userInfo,state:1}),a._go("设置影音插件中本端信息",{setInfo:a._userInfo,state:1})},"影音同步退出":function(){d.log("跟随影音同步退出"),a._go("主站退出"),a._go("设置影音插件中本端信息",{setInfo:a._userInfo,state:0})},"影音同步登录":function(){a._go("设置影音插件中本端信息",{setInfo:a._userInfo,state:1})}}})},"未登录":function(){a._go("初始化同步登录队列"),a._go("执行队列任务",{},a._goOnCondition())}}})},_goOnCondition:function(){var a=this;return{cases:{"继续执行":function(b){a._go(b.command,b),a._go("是否获取到auth",{},{cases:{"继续执行任务":function(){a._go("执行队列任务",b,a._goOnCondition())},"获取到auth":function(c){d.log("get auth"+b.command+"______"+c.authcookie?c.authcookie:""),c.property.uid&&(a._userInfo={uid:c.property.uid,auth:c.authcookie}),a._go("使用auth登录",c)}}})},"此网页不执行auth同步":function(){d.log("skip auth sync_____")},"结束":function(){d.log("no auth_____")}}}}}})});
define("../../flows/pc/sso/stepDef/setProperty",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{},output:{property:{type:"object",empty:!0}}}}}});c.exports=e});
define("../../flows/pc/sso/stepDef/getYingYinPlugin",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{property:{type:"object"}},output:{property:{type:"object"}}}}}});c.exports=e});
define("../../flows/pc/sso/stepDef/getInfoFromYingyin",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{property:{type:"object"}},output:{yingyinInfo:{type:"object",empty:!0},selfInfo:{type:"object",empty:!0}}}}}})});
define("../../flows/pc/sso/stepDef/buildEvent",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Input,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{property:{type:"object"},userInfo:{type:"object",empty:!0}},output:{}}}}})});
define("../../flows/pc/sso/stepDef/isUserLogin",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Condition,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{property:{type:"object"}},output:{}}}}})});
define("../../flows/pc/sso/stepDef/setSideInfo",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{property:{type:"object"},yingyinInfo:{type:"object",empty:!0},setInfo:{type:"object",empty:!0},state:{type:"number"}},output:{yingyinInfo:{type:"object",empty:!0}}}}}})});
define("../../flows/pc/sso/stepDef/setSelfInfo",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{property:{type:"object"},selfInfo:{type:"object",empty:!0},setInfo:{type:"object",empty:!0},state:{type:"number"}},output:{selfInfo:{type:"object",empty:!0}}}}}})});
define("../../flows/pc/sso/stepDef/yingyinSyncData",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Input,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{yingyinInfo:{type:"object",empty:!0},setInfo:{type:"object"}}}}}})});
define("../../flows/pc/sso/stepDef/webLogout",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{},output:{}}}}})});
define("../../flows/pc/sso/stepDef/getVisitCode",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Input,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{property:{type:"object"}},output:{}}}}})});
define("../../flows/pc/sso/stepDef/popBindView",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{property:{type:"object"}},output:{property:{type:"object"}}}}}})});
define("../../flows/pc/sso/stepDef/initSyncList",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{},output:{synclist:{type:"object",item:{type:"string"},empty:!0}}}}}})});
define("../../flows/pc/sso/stepDef/execTask",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Condition,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{synclist:{type:"array",item:{type:"string"},empty:!0}},output:{command:{type:"string",empty:!0},synclist:{type:"array",item:{type:"string"},empty:!0},property:{type:"object"}}}}}})});
define("../../flows/pc/sso/stepDef/yingyinSyncAuth",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(a){return{input:{synclist:{type:"array",item:{type:"string"},empty:!0},command:{type:"string",empty:!0},yingyinInfo:{type:"object",empty:!0},property:{type:"object"}},output:{synclist:{type:"array",item:{type:"string"},empty:!0},authcookie:{type:"string",empty:!0},property:{type:"object"}}}}}})});
define("../../flows/pc/sso/stepDef/baiduSyncAuth",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Input,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{synclist:{type:"array",item:{type:"string"},empty:!0},command:{type:"string",empty:!0},property:{type:"object"}},output:{synclist:{type:"array",item:{type:"string"},empty:!0},authcookie:{type:"string",empty:!0},property:{type:"object"}}}}}})});
define("../../flows/pc/sso/stepDef/hasAuth",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Condition,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{authcookie:{type:"string",empty:!0},property:{type:"object"}},output:{authcookie:{type:"string",empty:!0},property:{type:"object"}}}}}})});
define("../../flows/pc/sso/stepDef/authLogin",[],function(a,b,c){var d=Flowjs.Class;c.exports=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{authcookie:{type:"string"}},output:{}}}}})});
define("../../flows/pc/sso/steps/setProperty",[],function(a,b,c){c.exports={methods:{_process:function(a,b){var c={};c.buid="",c.baiduInterval=18e5,c.cUId="QC102",c.cBaidu="QC105",c.baiduTimes=Q.cookie.get(c.cBaidu)||0,c.ids=this._getBaiduId.bind(this,c.cUId);var d=c.ids();d&&(c.uid=d[1],c.buid=d[0]),c.visitCode="QC107",Q.object.extend(c,{centerCon:Q.$("*[j-container=usercenterbox]"),smallPic:Q.$("*[j-user=pic]"),smallVipPic:Q.$("*[data-pic=vip]")}),b(null,{property:c})},_getBaiduId:function(a){var b=Q.cookie.get(a),c=null;if(!b)return null;c=b.match(/\d+/g);if(c&&c.length===3)return c}}}});
define("../../flows/pc/sso/steps/getYingYinPlugin",["../../../../kit/yingyinPluginV2"],function(a,b,c){var d=a("../../../../kit/yingyinPluginV2");c.exports={methods:{_process:function(a,b){var c=a.property,e=d.getPlugin();e&&(c.plugin=!0),b(null,{property:c})}}}});
define("../../flows/pc/sso/steps/getInfoFromYingyin",["../../../../kit/yingyinSyncLogin","../../../../kit/yingyinPluginV2"],function(a,b,c){var d=a("../../../../kit/yingyinSyncLogin"),e=a("../../../../kit/yingyinPluginV2");c.exports={methods:{_process:function(a,b){if(!a.property.plugin)b(null,{});else{var c=e.getPlugin(),f=d.getLoginInfo({launcher:c,pid:100}),g=d.getLoginInfo({launcher:c,pid:101});b(null,{yingyinInfo:f,selfInfo:g})}}}}});
define("../../kit/yingyinSyncLogin",[],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"yingyinSyncLogin"});c.exports={setLoginInfo:function(a){if(a.launcher)try{a.loginInfo&&a.launcher.SetLoginInfo(101,a.loginInfo.uid,a.loginInfo.auth,1)}catch(b){}},setLogoutInfo:function(a){if(a.launcher)try{a.loginInfo&&a.launcher.SetLoginInfo(101,a.loginInfo.uid,a.loginInfo.auth,0)}catch(b){}},setClientInfo:function(a){if(a.launcher)try{a.loginInfo&&a.launcher.SetLoginInfo(100,a.loginInfo.uid,a.loginInfo.auth,a.clientState)}catch(b){}},getLoginInfo:function(a){if(a.launcher)try{var b=a.launcher.GetLoginInfo(a.pid);if(b){var c=b.split("|");if(c.length==3)return{uid:c[0],auth:c[1],state:c[2]}}else if(b==="")return{uid:0,auth:"",state:0}}catch(d){}return null}}});
define("../../flows/pc/sso/steps/buildEvent",["../../../../config/siteDomain"],function(a,b,c){var d=a("../../../../config/siteDomain");c.exports={methods:{_process:function(a,b){var c=this;this.pro=a.property,this._once(function(){Q.event.customEvent.on("login",c._doLogin.bind(c)),Q.event.customEvent.on("beforeLogout",c._doLogout.bind(c)),Q.event.customEvent.on("logout",c._doLogout.bind(c)),Q.event.customEvent.on("userChangePwd",c._doChangePwd.bind(c))}),b()},_doLogin:function(){this._select("登录",{})},_doLogout:function(){var a=Q.cookie.get(this.pro.cUId),b=this.pro.ids();b&&this.pro.uid&&this.pro.buid&&b[1]===this.pro.uid&&(Q.cookie.set(this.pro.cUId,a.replace("=1","=0"),{path:"/",expires:31536e6,domain:d.SITE_DOMAIN}),this.pro.buid=""),this._select("登出",{})},_doChangePwd:function(){this._select("更改密码",{})},destroy:function(a){Q.event.customEvent.un("login",this._doLogin.bind(this)),Q.event.customEvent.un("userChangePwd",this._doChangePwd.bind(this)),Q.event.customEvent.un("logout",this._doLogout.bind(this)),Q.event.customEvent.un("beforeLogout",this._doLogout.bind(this))}}}});
define("../../flows/pc/sso/steps/setSideInfo",["../../../../kit/yingyinSyncLogin","../../../../kit/yingyinPluginV2"],function(a,b,c){var d=a("../../../../kit/yingyinSyncLogin"),e=a("../../../../kit/yingyinPluginV2");c.exports={methods:{_process:function(a,b){if(!a.property.plugin)b(null,{});else{var c=e.getPlugin();a.yingyinInfo&&a.setInfo&&a.setInfo.uid===a.yingyinInfo.uid&&d.setClientInfo({launcher:c,loginInfo:a.setInfo,clientState:a.state});var f=d.getLoginInfo({launcher:c,pid:100});b(null,{yingyinInfo:f})}}}}});
define("../../flows/pc/sso/steps/setSelfInfo",["../../../../kit/yingyinSyncLogin","../../../../kit/yingyinPluginV2"],function(a,b,c){var d=a("../../../../kit/yingyinSyncLogin"),e=a("../../../../kit/yingyinPluginV2"),f=new Q.ic.InfoCenter({moduleName:"flows/sso/stpes/setSelfInfo"});c.exports={methods:{_process:function(a,b){if(!a.property.plugin)b(null,{});else{var c=e.getPlugin();a.state===0?d.setLogoutInfo({launcher:c,loginInfo:a.setInfo}):a.state===1&&d.setLoginInfo({launcher:c,loginInfo:a.setInfo});var g=d.getLoginInfo({launcher:c,pid:101});f.log("info from web by yingyin____"+JSON.stringify(g)),f.log("info from client by yingyin____"+JSON.stringify(d.getLoginInfo({launcher:c,pid:100}))),b(null,{selfInfo:g})}}}}});
define("../../flows/pc/sso/steps/yingyinSyncData",["../../../../config/siteDomain"],function(a,b,c){var d=a("../../../../config/siteDomain");c.exports={methods:{_process:function(a,b){a.setInfo&&a.yingyinInfo&&(a.setInfo.uid===a.yingyinInfo.uid&&parseInt(a.yingyinInfo.state,10)===0?Q.cookie.get("QC106")&&Q.cookie.get("QC106")=="true"?(Q.cookie.remove("QC106",{path:"/",domain:d.SITE_DOMAIN}),this._select("使用网页登录后未同步影音",{})):this._select("影音同步退出",{}):this._select("影音同步登录",{})),b()}}}});
define("../../flows/pc/sso/steps/webLogout",["../../../../kit/pcLogin"],function(a,b,c){var d=a("../../../../kit/pcLogin");c.exports={methods:{_process:function(a,b){d.logout(),b(null)}}}});
define("../../flows/pc/sso/steps/isUserLogin",["../../../../kit/userInfo"],function(a,b,c){var d=a("../../../../kit/userInfo");c.exports={methods:{_process:function(a,b){var c=this;d.isLogin()?(a.property.uid=d.getUid(),c._select("已登录",{property:a.property})):c._select("未登录",{property:a.property}),b()}}}});
define("../../flows/pc/sso/steps/getVisitCode",["../../../../interfaces/commonInterface","../../../../config/siteDomain"],function(a,b,c){var d=a("../../../../interfaces/commonInterface"),e=a("../../../../config/siteDomain");c.exports={methods:{_process:function(a,b){var c=this;this.pro=a.property;var d=Q.cookie.get(this.pro.visitCode);c._once(function(){c.on("checkback",c._doCheckBack.bind(c))}),c._checkCode(d),b()},_checkCode:function(a){var b=new d({url:"http://passport.iqiyi.com/apis/user/is_firstvisit.action"}),c=this;a&&parseInt(a,10)===1?b.request({},function(a){c.fire({type:"checkback",data:a.data})}):c._select("非第一次登录",{})},_doCheckBack:function(a){var b=this;parseInt(a.data,10)===1?(b.pro.isFirst=!0,b._select("第一次登录",{})):b._select("非第一次登录",{}),Q.cookie.remove(this.pro.visitCode,{path:"/",domain:e.SITE_DOMAIN})},destroy:function(a){Q.event.customEvent.un("showUserCenterBox",this._fireBindView.bind(this))}}}});
define("../../interfaces/commonInterface",["../kit/remoteInterface2"],function(a,b,c){var d=a("../kit/remoteInterface2");c.exports=Q.Class("CommonInterface",{construct:function(a){a.remote&&(d=a.remote),this.withCredentials=a.withCredentials,this.url=a.url;var b={url:this.url,struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!0},msg:{type:"string",empty:!0}}};!a.method||a.method.toUpperCase()==="GET"?this._remoteInterface=new d({common:b}):(this.method=a.method,this._remoteInterface=new d(b))},methods:{request:function(a,b){a=a||{};if(this.method&&this.method.toUpperCase()==="POST"){var c={};c.param=a,c.method=this.method,c.cors=!0,c.withCredentials=this.withCredentials,this._remoteInterface.send(c,function(a){b&&b(a)})}else a.cb=a.cb||"cb_interface___"+(new Date).getTime(),this._remoteInterface.send({ifname:"common",withCredentials:this.withCredentials,param:a},function(a){b&&b(a)})}}})});
define("../../flows/pc/sso/steps/popBindView",[],function(a,b,c){c.exports={methods:{_process:function(a,b){Q.event.customEvent.fire({type:"ppsAccountFirstLogin"}),b(null,{property:a.property})}}}});
define("../../flows/pc/sso/steps/initSyncList",[],function(a,b,c){c.exports={methods:{_process:function(a,b){var c=[];c[0]="影音获取auth",c[1]="baidu获取auth",b(null,{synclist:c})}}}});
define("../../flows/pc/sso/steps/execTask",["../../../../config/filterConfig"],function(a,b,c){var d=a("../../../../config/filterConfig");c.exports={methods:{_process:function(a,b){var c=this;this._checkUrl(window.location.href)?a.synclist.length===0?c._select("结束",{}):c._select("继续执行",{command:a.synclist.shift(),synclist:a.synclist,property:a.property}):c._select("此网页不执行auth同步",{})},_checkUrl:function(a){var b=0;for(;b<d.filters.length;b++)if(a.indexOf(d.filters[b])!=-1)return!1;return!0}}}});
define("../../config/filterConfig",[],function(a,b,c){c.exports={filters:["login.php","reg.php"]}});
define("../../flows/pc/sso/steps/yingyinSyncAuth",[],function(a,b,c){c.exports={methods:{_process:function(a,b){if(!a.yingyinInfo)b(null,{synclist:a.synclist,property:a.property});else{var c=this._getInfo(a.yingyinInfo);c?(a.property.uid=c.uid,b(null,{synclist:a.synclist,authcookie:c.auth,property:a.property})):b(null,{synclist:a.synclist,property:a.property})}},_getInfo:function(a){return a.uid&&parseInt(a.state,10)===1?a:null}}}});
define("../../flows/pc/sso/steps/baiduSyncAuth",["../../../../interfaces/baiduloginInterface","../../../../config/siteDomain"],function(a,b,c){var d=a("../../../../interfaces/baiduloginInterface"),e=a("../../../../config/siteDomain");c.exports={methods:{_process:function(a,b){var c=this;c._setProperty(a,b),c._beQualified&&(c._setBaiduTimes(),c._createScripts())},_setProperty:function(a,b){var c=this;this._property=a.property,this._once(function(){c.on("getAuth",c._doGetAuthBack.bind(c,a,b)),Q.event.customEvent.on("logout",c._doLogout.bind(c))})},_doGetAuthBack:function(a,b,c){c.data.data=c.data.data||{},b(null,{synclist:a.synclist,authcookie:c.data.data.authcookie,property:this._property})},_beQualified:function(){return parseInt(this._property.baiduTimes,10)<5},_setBaiduTimes:function(){Q.cookie.set(this._property.cBaidu,parseInt(this._property.baiduTimes,10)+1,{path:"/",expires:this._property.baiduInterval,domain:e.SITE_DOMAIN})},_createScripts:function(){var a=this;window.getBaiduUserInfo=function(b){b&&b.uid?a._uidCheck instanceof Function&&a._uidCheck.call(a,{uid:b.uid})&&a._getAuth(b):a.fire({type:"getAuth",data:{code:"A00001",data:null}})};var b=document.createElement("script");b.src="http://openapi.baidu.com/connect/2.0/getLoggedInUser?time="+(new Date).getTime()+Math.random()+"&client_id=VdUQE9922EiS7Qb5N7oFGX8s&callback=getBaiduUserInfo",b.charset="utf-8",b.onload=b.onfailure=b.onreadystatechange=function(){if(b&&b.readyState&&b.readyState!="loaded"&&b.readyState!="complete")return;b.onload=b.onreadystatechange=b.onfailure=null,b.src="",b.parentNode.removeChild(b),b=null},document.getElementsByTagName("head")[0].appendChild(b)},_uidCheck:function(a){var b=this._property.ids();return a.uid&&b&&b[0].toString()===a.uid.toString()&&b[2].toString()==="0"?!1:(this._property.buid=a.uid,!0)},_getAuth:function(a){var b=new d({action:"baidudirect",name:"direct"});b.request({ouid:a.uid,uname:a.uname,timestamp:a.timestamp,sign:a.sign,cb:"cb_"+Math.ceil(Math.random()*1e5).toString(32),source:a.source||1},this._getAuthBack.bind(this))},_getAuthBack:function(a){a.code==="A00000"&&this._setCookieInfo(a.data),this.fire({type:"getAuth",data:a})},_setCookieInfo:function(a){this._property.uid=a.uid,this._property.buid&&Q.cookie.set(this._property.cUId,"bid:"+this._property.buid+"uid:"+this._property.uid+"=1",{path:"/",expires:31536e6,domain:e.SITE_DOMAIN})},_doLogout:function(a){var b=Q.cookie.get(this._property.cUId),c=this._property.ids();c&&this._property.uid&&this._property.buid&&c[1]===this._property.uid&&(Q.cookie.set(this._property.cUId,b.replace("=1","=0"),{path:"/",expires:31536e6,domain:e.SITE_DOMAIN}),this._property.buid="")},destroy:function(a){Q.event.customEvent.un("logout",this._doLogout.bind(this))}}}});
define("../../interfaces/baiduloginInterface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("BaiduLogin",{construct:function(a){var b="http://passport.iqiyi.com/apis/"+a.action+"/"+a.name+".php";this._remoteInterface=new d({BaiduLogin:{url:b,struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!0,struct:{authcookie:{type:"string",empty:"false"}}}}}})},methods:{request:function(a,b){a=a||{},this._remoteInterface.send({ifname:"BaiduLogin",param:a,jsonp:{varname:a.cb}},function(a){b&&b(a)})}}})});
define("../../flows/pc/sso/steps/hasAuth",[],function(a,b,c){c.exports={methods:{_process:function(a,b){var c=this;a.authcookie?c._select("获取到auth",{authcookie:a.authcookie,property:a.property}):c._select("继续执行任务",{property:a.property})}}}});
define("../../flows/pc/sso/steps/authLogin",["../../../../kit/pcLogin"],function(a,b,c){var d=a("../../../../kit/pcLogin");c.exports={methods:{_process:function(a,b){var c={param:{authcookie:a.authcookie,cb:"cb_sso"+(new Date).getTime()}};d.login(c,"auth"),b(null)}}}});
define("../../units/pcplayHistoryV2",["../components/units/pageJob","../action/PcPlayHistoryV2","../view/pcPlayHistoryViewV2","../model/pcPlayHistoryModelV2","../model/syncLastVideo","../action/playhistoryRecorder","../components/action/checkDoms","../model/parseItem","../kit/qiyiPlayer"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"units/pcPlayHistory"}),e=a("../components/units/pageJob"),f=a("../action/PcPlayHistoryV2"),g=a("../view/pcPlayHistoryViewV2"),h=a("../model/pcPlayHistoryModelV2"),i=a("../model/syncLastVideo"),j=a("../action/playhistoryRecorder"),k=a("../components/action/checkDoms"),l=a("../model/parseItem"),m=a("../kit/qiyiPlayer"),n="PcplayHistoryV2";e.create(n,{getDependentDoms:function(){return this._widget=Q.$("#widget-playhistory"),{widget:this._widget}},check:function(a){return k(a),!0},init:function(){new i;var a=this,b=Q.browser.iPad?"click":"mouseover";a._widget.on(b,function(){a._playhistory||a.initPlayHistory(a._widget)})},exec:function(){var a=navigator.userAgent.toLowerCase();if(/ipad/.test(a)){var b=Q.$("video");if(b){var c=null;if(b.length==1)c=b.attr("id");else if(b.length>1){var d=function(a){var c=b.length,d=null;for(var e=0;e<c;e++)if(Q.$(b[e]).attr("id")==a){d=a;break}return d};c=d("video"),c||(c=d("flash"))}var e=new j({playerId:c});e.init()}}},initPlayHistory:function(a){var b={widget:a,title:a?a.down("*[data-playhistory-elem=title]"):null,body:a?a.down("*[data-playhistory-elem=body]"):null,historyList:a?a.down("*[data-playhistory-elem=historylist]"):null,nullTip:a?a.down("*[data-playhistory-elem=nulltip]"):null,tip:a?a.down("*[data-playhistory-elem=tip]"):null,tipText:a?a.down("*[data-playhistory-elem=tiptext]"):null,tipClose:a?a.down("*[data-playhistory-elem=tipclose]"):null,loadingTip:a?a.down("*[data-playhistory-elem=loadingtip]"):null,loadingTipText:a?a.down("*[data-playhistory-elem=loadingtiptext]"):null,trash:a?a.down("*[data-playhistory-elem=trash]"):null,trashText:a?a.down("*[data-playhistory-elem=trashtext]"):null,more:a?a.down("*[data-playhistory-elem=more]"):null,cbFilterShortVideo:a?a.down("*[data-playhistory-elem=filtershortvideo]"):null};this._playhistory=new f({view:new g({doms:b}),model:new h({selfItem:l.playHistoryParse})});var c=this;m.getPlayer("flash").getInitVideoInfo(function(a){c._playhistory.init(a.vid,a.tvid)})}}),e.add(n)});
define("../../action/PcPlayHistoryV2",["../components/action/adapter","../kit/getWebEventID","../kit/userInfo","../kit/qiyiPlayer","../kit/period","../kit/loadDivPingback"],function(a,b,c){var d=a("../components/action/adapter"),e=a("../kit/getWebEventID"),f=a("../kit/userInfo"),g=a("../kit/qiyiPlayer"),h=a("../kit/period").create(),i=a("../kit/loadDivPingback");c.exports=Q.Class("pcPlayHistoryV2",{ns:Q.action,extend:d,construct:function(a){this.callsuper(a)},properties:{readInterval:5e3,lastReadTime:0,showNum:0},methods:{init:function(a,b){this._model.initCurrent(a,b);var c=this;this._readPlayHistory(),Q.event.customEvent.on("login",function(){c._loginEvt()}),Q.event.customEvent.on("logout",function(){c._logoutEvt()}),Q.event.customEvent.on("navOneShow",function(){c._view.hide()}),Q.event.customEvent.on("suggestShow",function(){c._view.hide()}),Q.event.customEvent.on("hideHeaderBoxFromVipHeader",function(){c._view.hide()}),Q.event.customEvent.on("updateRecordsShow",function(){c._view.hide()}),Q.event.customEvent.on("showUserCenterBox",function(){c._view.hide()}),Q.event.customEvent.on("pcUserRegistLoginShow",function(){c._view.hide()}),Q.event.customEvent.on("updateRecordTipShow",function(){c._view.hide()}),g.getPlayer("flash").on("startplay",function(a){var b=a.data;c.refreshCurrent.apply(c,[b.vid,b.tvid])})},_loginEvt:function(){var a=a||{},b=this;a.onsuccess=function(a){b._readPlayHistory(),b._view.showImportTips()},a.onfailure=function(){},this._model.importPlayHistory(a)},_logoutEvt:function(){this._readPlayHistory()},refreshCurrent:function(a,b){this._model.refreshCurrent.apply(this._model,arguments)},getPlayHistory:function(a){this._sendPingBack({act:"phtrdivshow"}),this.showNum++;var b=new Date;if(b-this.lastReadTime<this.readInterval&&!a)return;this.lastReadTime=b,this._readPlayHistory(null,!0)},_readPlayHistory:function(a,b){a=a||{},this.hasOwnProperty("filterShortVideo")&&(a.param={},this.filterShortVideo?a.param.only_long=1:a.param.only_long=0);var c=this;b&&h.begin(),a.onsuccess=function(a){c._view.hideLoadingTip(),c._view.showPlayHistory(a),h.end(function(a){i.send("playrecord",a)})},a.onfailure=function(){},this._model.readPlayHistory(a)},delPlayHistory:function(a){a=a||{};var b=this;a.onsuccess=function(){b._view.hideLoadingTip(),b._readPlayHistory()},a.onfailure=function(){},this._model.delPlayHistory(a),this._sendPingBack({act:"delsingleclk"})},clearPlayHistory:function(a){var b=this;this._model.clearPlayHistory({onsuccess:function(a){b._view.hideLoadingTip(),b._readPlayHistory()},onfailure:function(){}}),this._sendPingBack({act:"delallclk"})},hideImportTips:function(){this._view.hideTip("import")},_sendPingBack:function(a){e(function(b){Q.log.server({type:"phtr2divstat20121204",act:a.act,jsuid:Q.cookie.get("QC006"),flshuid:Q.cookie.get("QC005"),weid:b,ppuid:f.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})}}})});
define("../../view/pcPlayHistoryViewV2",["../components/view/widgetView","../kit/userInfo","../config/siteDomain","../kit/getWebEventID","../action/underframe","../kit/iframeLocation","../units/compatible"],function(a,b,c){var d=a("../components/view/widgetView"),e=a("../kit/userInfo"),f=a("../config/siteDomain"),g=a("../kit/getWebEventID"),h=a("../action/underframe"),i=a("../kit/iframeLocation"),j=a("../units/compatible"),k=500,l=100,m=Q.$("*[data-widget-toplinefloater=blackFloater]");c.exports=Q.Class("pcPlayHistoryViewV2",{ns:Q.view,extend:d,construct:function(a){this.callsuper(a)},properties:{listTpl:['<li class="${itemStatus}" looking=${looking}>','<div class="rectxt">','<span class="icoplay ${playDevice}"></span>','<a tvId="${tvId}" ${comeFrom} ${playVideo} title="${videoName}" ','href="${videoUrl}" data-playhistory-elem="tvid" ','data-playhistory-tvid="${tvId}">${videoTrancateName}</a>','<span class="icojl-del" j-delegate="j-delHistory"></span>','<span class="playing"><a ${playVideo} ','href="${continuePlayUrl}">${playState}</a></span>',"</div>","</li>"].join(""),itemHandler:[],tipsStatus:{}},methods:{init:function(a){this._ctrl=a,this._initElement(),this._initEvent(),this._createShowTimer()},_initElement:function(){var a=this._doms;this._widget=a.widget,this._title=a.title,this._body=a.body,this._historyList=a.historyList,this._nullTip=a.nullTip,this._tip=a.tip,this._tipText=a.tipText,this._tipClose=a.tipClose,this._loadingTip=a.loadingTip,this._loadingTipText=a.loadingTipText,this._trash=a.trash,this._trashText=a.trashText,this._more=a.more;var b="http://i."+f.SITE_DOMAIN+"/bofangjilu"+this._ctrl._model.urlEx.enrperc;this._more.attr("href",b),a.tipText.css("cursor","pointer"),Q.event.customEvent.on("login",function(){a.tipText.css("cursor","default")}),Q.event.customEvent.on("logout",function(){a.tipText.css("cursor","pointer")}),this._title.on("click",function(a){Q.event.get(a).preventDefault()}),a.tipText.on("click",function(a){e.isLogin()||Q.event.customEvent.fire({type:"playHistoryTipClick",data:{evt:a}})});if(j){var c=Q.$("*[data-playhistory-elem=underframe]");(Q.browser.IE6||Q.browser.IE7)&&c&&c.hide()}},_initEvent:function(){function c(a){g(function(b){Q.log.server({type:"phtr2divstat20121204",act:a,jsuid:Q.cookie.get("QC006"),flshuid:Q.cookie.get("QC005"),weid:b,ppuid:e.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})}var a=this,b=Q.browser.iPad?"click":"mouseover";this._widget.on(b,function(b){a._clearHideTimer(),a._createShowTimer()}),Q.browser.iPad?(Q.$("body").on("touchstart",function(b){a._clearShowTimer(),a._createHideTimer()}),this._widget.on("touchstart",function(a){Q.event.get(a).stopPropagation()})):this._widget.on("mouseleave",function(b){b=Q.event.get(b),b.preventDefault(),a._clearShowTimer(),a._createHideTimer()}),this._body.on(b,function(b){a._clearHideTimer(),a._createShowTimer()});var d=this._doms.cbFilterShortVideo;if(d){d.on("click",function(){var b=Q.cookie.get("QC032");b?(Q.cookie.remove("QC032",{path:"/",domain:"iqiyi.com"}),d[0].checked=!1,a._ctrl.filterShortVideo=!1,c("filtervideocancel")):(Q.cookie.set("QC032","checked",{path:"/",domain:"iqiyi.com",expires:31536e6}),d[0].checked=!0,a._ctrl.filterShortVideo=!0,c("filtervideoclk")),a._ctrl.getPlayHistory(!0)});var f=Q.cookie.get("QC032");f?(d[0].checked=!0,this._ctrl.filterShortVideo=!0):(d[0].checked=!1,this._ctrl.filterShortVideo=!1)}this._showClearHistoryTipHandler=this._showClearHistoryTip.bind(this),this._trash.on("click",this._showClearHistoryTipHandler),this._widget.delegate("clearPlayHistory",this._clearPlayHistoryEvt.bind(this)),this._widget.delegate("j-delHistory",this._deleteHistoryEvt.bind(this)),this._widget.delegate("playVideo",this._pingbackEvt.bind(this)),this._widget.delegate("historyTip-close",this._closeTipsEvt.bind(this))},_createShowTimer:function(){if(!this._showTimer){var a=this;this._showTimer=setTimeout(function(){a.show()},k)}},_clearShowTimer:function(){this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null)},_createHideTimer:function(){if(!this.hideTimer){var a=l;this.isLoading&&(a=10*a);var b=this;this.hideTimer=setTimeout(function(){b.hide()},a)}},_clearHideTimer:function(){this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=null)},show:function(){this._clearShowTimer(),this._clearHideTimer(),this.className||(this.className=this._widget.attr("data-playhistory-cls"),this.hoverClassName1=this.className+"Hover",this.hoverClassName=this.className+"-hover");if(!this._widget.hasClass(this.hoverClassName)||!this._widget.hasClass(this.hoverClassName1))this._widget.addClass(this.hoverClassName),this._widget.addClass(this.hoverClassName1),Q.event.customEvent.fire({type:"playHistoryShow",data:{}}),this._ctrl.getPlayHistory();this._redrawUnderFrame()},_redrawUnderFrame:function(){if(!this.underFrame){var a=Q.$("*[data-playhistory-elem=underframe]"),b=0;j?Q.browser.IE6||Q.browser.IE7?(a&&a.hide(),a=null):a&&a.show():m&&(b=25),this.underFrame=new h({elem:this._body,radius:5,distHeight:-3,target:a,distTop:b})}this.underFrame.show()},hide:function(){this._clearShowTimer(),this._clearHideTimer(),this._tip.attr("data-name")=="import"&&this._hideTip(this._tip.attr("data-name")),this._widget.hasClass(this.hoverClassName)&&this._widget.removeClass(this.hoverClassName),this._widget.hasClass(this.hoverClassName1)&&this._widget.removeClass(this.hoverClassName1),this.underFrame&&this.underFrame.hide()},_showClearHistoryTip:function(a){this._trash.un("click",this._showClearHistoryTipHandler),this._tip.show(),this._trashText.show(),this._trash.addClass("defClearkong"),this._tipClose.hide(),this._tipText.html("是否清空您的电脑.电视.pad所有记录？");var b=this;Q.anim(this._tip).duration(100).ease("Linear").from("top",31).to("top",0).onDone(function(){b._trash.attr("j-delegate","clearPlayHistory"),b._closeClearHistoryTipHandler=b._closeClearHistoryTip.bind(b),b._trash.on("mouseleave",b._closeClearHistoryTipHandler)}).go()},_closeClearHistoryTip:function(){this._trash.un("mouseleave",this._closeClearHistoryTipHandler),this._trashText.hide(),this._trash.removeClass("defClearkong"),this._tip.hide(),this._trash.on("click",this._showClearHistoryTipHandler),this._trash.attr("j-delegate","")},_clearPlayHistoryEvt:function(){this._ctrl.clearPlayHistory()},_deleteHistoryEvt:function(a){a=a||window.event;var b=Q.$(a.target).parent("li"),c=b.down("*[data-playhistory-elem=tvid]"),d=c.attr("data-playhistory-tvid"),e=c.attr("data-playhistory-com"),f={tvId:d};e!==undefined&&(f.com=e),this._ctrl.delPlayHistory({param:f})},_closeTipsEvt:function(a){this._hideTip(this._tip.attr("data-name")),Q.event.stop(a.event)},_pingbackEvt:function(a){Q.event.stop(a.event),g(function(b){var c=Q.$(a.target).attr("href"),d=["type=phtr2divstat20121204","act=itemviewclk","jsuid="+Q.cookie.get("QC006"),"flshuid="+Q.cookie.get("QC005"),"weid="+b,"ppuid="+e.getUid()].join("&");Q.url.parse(c).host=="so.iqiyi.com"?i.href(c):i.href(c+"&"+d)})},showPlayHistory:function(a){this._more.hide(),a.length===0?(this._historyList.hide(),this._showNullTip()):(this._hideNullTip(),this._historyList.show(),this._renderList(a),a.length>=10&&e.isLogin()&&this._more.show()),this._redrawUnderFrame()},_formatData:function(a){return a.hasOwnProperty("com")?a.comeFrom="data-playhistory-com="+a.com:a.comeFrom="",a.com==2?(a.playVideo="target=_blank",a.playState="到PPS观看"):a.playVideo='j-delegate="playVideo"',a},_renderList:function(a){var b=new Q.plugins.Template(this.listTpl),c=[],d=a.length;for(var f=0;f<d&&f<10;f++)c.push(b.evaluate(this._formatData(a[f])));d>=1&&d<=5&&!e.isLogin()&&!this._isTipClose("exactRecord")?this._showTip("登录后可保存最准确的播放记录","exactRecord"):d>5&&!e.isLogin()&&!this._isTipClose("moreRecord")&&this._showTip("登录后可保存更多播放记录","moreRecord"),this._unbindItem(),this._historyList.html(c.join(""));var g=this._historyList.down("li");g&&g.length>=6&&Q.$(g[g.length-1]).addClass("last"),this._bindItem(),a&&a.length<=6?this._historyList.css("height","200px"):this._historyList.css("height","auto")},_hidePlayHistory:function(){this._historyList.hide(),this._hideNullTip()},_showNullTip:function(){this._nullTip.show()},_hideNullTip:function(){this._nullTip.hide()},_unbindItem:function(){var a=this,b=this._historyList.down("li");b&&b.forEach(function(b,c){var d=Q.$(b),e=d.attr("data-idx");if(!e)return;d.un("mouseenter",a.itemHandler[e].over),d.un("mouseleave",a.itemHandler[e].out)})},_bindItem:function(){var a=this;a.itemHandler=[];var b=this._historyList.down("li");b.forEach(function(b,c){var d=Q.$(b);a.itemHandler[c]={},a.itemHandler[c].over=a._itemOver.bind(a),a.itemHandler[c].out=a._itemOut.bind(a),d.attr("data-idx",c),d.on("mouseenter",a.itemHandler[c].over),d.on("mouseleave",a.itemHandler[c].out)})},_itemOver:function(a){a=a||window.event;var b=Q.$(a.currentTarget||a.srcElement);b.attr("looking")=="true"?b.addClass("watchSelected"):b.addClass("selected")},_itemOut:function(a){a=a||window.event;var b=Q.$(a.currentTarget||a.srcElement);b.attr("looking")=="true"?b.removeClass("watchSelected"):b.removeClass("selected")},_showTip:function(a,b){this._tip.show(),b&&this._tip.attr("data-name",b),this._tipClose.show(),this._tipText.html(a)},_hideTip:function(a){this._tip.attr("data-name")==a&&(this._tip.hide(),this.tipsStatus[a]=!0)},_isTipClose:function(a){return this.tipsStatus[a]===!0},showLoadingTip:function(a){this._more.hide(),this.isLoading=!0,this._hidePlayHistory(),this._loadingTip.show(),this._loadingTipText.html(a)},hideLoadingTip:function(){this.isLoading=!1,this._loadingTip.hide()},showImportTips:function(){this._showTip("已为您导入未登录时播放记录","import")}}})});
define("../../action/underframe",[],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"kit/underframe"});c.exports=Q.Class("UnderFrame",{construct:function(a){a=a||{},a.elem?(this.elem=typeof a.elem=="string"?Q.$("#"+a.elem):a.elem,this.target=a.target||Q.$("body"),this.attrs=a.attrs||{},this.distTop=a.distTop||0,this.distLeft=a.distLeft||0,this.distHeight=a.distHeight||0,this.distWidth=a.distWidth||0,this.distRadius=a.radius||0,this.createIframe()):d.warn("opt.elem不存在！")},methods:{createIframe:function(){var a=Q.$(document.createElement("iframe")),b=this.elem.css("zIndex");b=="auto"?b=0:b-=1,a.attr("src","about:blank"),a.attr("frameBorder","0"),a.css("display","none"),this.target.append(a),a.css("position","absolute"),a.css("zIndex",b);var c=this.elem.width()+this.distWidth;c<0&&(c=0);var d=this.elem.height()+this.distHeight;d<0&&(d=0),a.css("top",this.elem.top()+this.distTop+"px"),a.css("left",this.elem.left()+this.distLeft+"px"),a.css("width",c+"px"),a.css("height",d+"px"),a.css("background","#FFFFFF"),this.distRadius&&a.css("borderRadius",this.distRadius+"px");for(var e in this.attrs)a.css(e,this.attrs[e]);this.iframe=a},show:function(){var a=this.iframe,b=this.elem.width()+this.distWidth;b<0&&(b=0);var c=this.elem.height()+this.distHeight;c<0&&(c=0),a.css("top",this.elem.top(this.target)+this.distTop+"px"),a.css("left",this.elem.left(this.target)+this.distLeft+"px"),a.css("width",b+"px"),a.css("height",c+"px"),a.css("display","")},hide:function(){this.iframe.hide()},get:function(){return this.iframe}}})});
define("../../model/pcPlayHistoryModelV2",["./../components/model/model","./playhistoryModel","../kit/userInfo"],function(a,b,c){var d=a("./../components/model/model"),e=a("./playhistoryModel"),f=new e,g=a("../kit/userInfo");c.exports=Q.Class("pcPlayHistoryModelV2",{ns:Q.model,extend:d,construct:function(a){this.callsuper(),a=a||{},this._selfItem=a.selfItem||null},properties:{INFO:window.info||{},entireUrl:null,showCurrent:!0,urlEx:{},TERMINAL:{11:"电脑",12:"电脑",21:"平板",22:"平板",31:"手机",32:"手机",51:"电视"}},methods:{init:function(a){this._ctrl=a,this._initInfo(),this.isFinalPlayer()||(this.showCurrent=!1),this.entireUrl=function(a){return a.protocol+"//"+a.host+a.pathname}(window.location);var b=navigator.userAgent.toLowerCase(),c="?"+["pltfm="+(/ipad/.test(b)?"21":"11"),"pos="].join("&");this.urlEx={ctnvw:c+"ctnvw",title:c+"title",enrperc:c+"enrperc"}},isFinalPlayer:function(){return!!Q.$("#flashArea")},_initInfo:function(){var a=navigator.userAgent.toLowerCase(),b=/ipad/.test(a)?21:/iphone os/.test(a)?31:11,c=this.INFO||{};this.currentCache={tvId:c.tvId,videoId:c.videoId,videoName:c.title,videoUrl:c.url||this.entireUrl,albumId:c.albumId,terminalId:b}},readPlayHistory:function(a){var b=a.param,c=this;a=a||{};var d=function(b){var d=[],e;for(var f=0,g=b.length;f<g;f++)e=c._parseItem(b[f]),c._selfItem&&(e=c._selfItem(e,b[f])),e.looking?d.unshift(e):d.push(e);a.onsuccess(d)},e=a.onfailure||function(){};f.getPlayhistory({param:b,onsuccess:d,onfailure:e})},_parseItem:function(a){var b={},c,d="",e=this.getCurrentInfo(),f=a.videoUrl||this.entireUrl,g=a.tvId,h=this.TERMINAL[a.terminalId];h==="电脑"?b.playDevice="icojl-pc":h==="手机"||h==="平板"?b.playDevice="icojl-phone":b.playDevice="icojl-pc";var i=a.channelId,j="",k={2:"电视剧",3:"纪录片",4:"动漫"},l={6:"综艺",14:"时尚综艺"};i in k?j=a.albumName+" 第"+a.videoOrder+"集":i in l?j=a.sourceName+" 第"+a.tvYear+"期":j=a.albumName;var m=parseInt(a.videoPlayTime,10)===0?1:a.videoPlayTime/a.videoDuration;m=parseInt(a.videoPlayTime,10)===-1?0:m;var n=parseInt(a.videoPlayTime,10)===0?0:a.videoDuration-a.videoPlayTime;n=n<0?0:n;var o=parseInt(n/60,10),p=n%60,q=o===0&&p===0,r=this.showCurrent&&g==e["tvId"],s="正在观看";d=q?"重新观看":r?s:"继续观看";var t=r&&!q;c=t?"looking":"belooked";var u="javascript:void(0);",v=t?u:f+this.urlEx.title,w=Q.url.parse(f).host==="so.iqiyi.com"?!0:!1;w?(v=f+"_p1_"+(/ipad/.test(navigator.userAgent.toLowerCase())?"21":"11")+"_f_title",f=v,d="搜索观看",j=a.albumName):f=t?u:q?v:f+this.urlEx.ctnvw;var x=24,y=t?"itemLook":"";return b.itemStatus=y,b.videoName=j.length>x/2?j:"",b.playPercent=m*100+"%",b.videoTrancateName=Q.string.truncate(j,x),b.videoUrl=v,b.continuePlayUrl=f,b.playState=d,b.playStateCls=c,b.tvId=g,b.looking=t,a.hasOwnProperty("com")&&(b.com=a.com,b.com==2&&(b.videoUrl=encodeURI(a.videoUrl),b.continuePlayUrl=encodeURI(a.videoUrl))),b},refreshCurrent:function(a,b){this.currentCache.videoId=a,this.currentCache.tvId=b},getCurrentInfo:function(){return this.currentCache},delPlayHistory:function(a){f.delPlayHistory(a)},clearPlayHistory:function(a){f.clearPlayHistory(a)},initCurrent:function(a,b){this.currentCache.videoId=a,this.currentCache.tvId=b},importPlayHistory:function(a){f.importPlayHistory(a)}}})});
define("../../model/playhistoryModel",["../components/model/widgetModel","../interfaces/playhistory","../kit/storage","../kit/userInfo"],function(a,b,c){function k(){return j==11?Q.cookie.get("QC005"):j==21||j==31?Q.cookie.get("QC006"):null}var d=a("../components/model/widgetModel"),e=a("../interfaces/playhistory"),f=a("../kit/storage"),g=a("../kit/userInfo"),h=new Q.ic.InfoCenter({moduleName:"Playhistory"}),i=navigator.userAgent.toLowerCase(),j=/ipad/.test(i)?21:Q.browser.android||Q.browser.iPhone||Q.browser.WP?31:11;c.exports=Q.Class("PlayhistoryModel",{extend:d,properties:{_storageKey:"playhistory"},construct:function(){this.callsuper()},methods:{getPlayhistory:function(a){var b=g.isLogin();h.log("Is login : "+b),b?this.getLoginPlayHistory(a):this.getUnLoginPlayHistory(a)},setPlayhistory:function(a){var b=g.isLogin(),c=a.data||[];h.log("Is login : "+b),b?this.setLoginPlayHistory(a):this.setUnLoginPlayHistory(a)},getByAlbumId:function(a){a=a||{};var b=a.albumId,c=a.onsuccess,d=a.onfailure;this.getPlayhistory({onsuccess:function(a){var e=[];a.length&&(e=a.filter(function(a){if(a.albumId==b)return!0})),e.length>0?c&&c(e[0]):d&&d()},onfailure:d})},getByTvId:function(a){a=a||{};var b=a.tvId,c=a.onsuccess,d=a.onfailure;this.getPlayhistory({onsuccess:function(a){var e=[];a.length&&(e=a.filter(function(a){if(a.tvId==b)return!0})),e.length>0?c&&c(e[0]):d&&d()},onfailure:d})},getLocalPlayhistory:function(a){a=a||{};var b=a.param||{limit:10},c=a.onsuccess,d=a.onfailure,e=f.read(this._storageKey);e?e=JSON.parse(e):e=[],c&&c(e)},getRemotePlayhistory:function(a){a=a||{};var b=a.param||{limit:10},c=a.onsuccess,d=a.onfailure,f=new e;f.get(Q.url.jsonToQuery(b),function(a){a.code=="A00000"?(h.log("Success getting remote data : "+JSON.stringify(a.data)),c&&c(a.data)):(h.log("Failed to get remote data. Error code : "+JSON.stringify(a.code)),d&&d(a))})},setLocalPlayhistory:function(a){var b=this;a=a||{};var c=a.data||[];this.getLocalPlayhistory({onsuccess:function(d){Q.array.isArray(c)||(c=[c]),d.length===0?d=c:c.forEach(function(a){d.forEach(function(b,c){b.tvId==a.tvId&&b.videoId==a.videoId&&d.splice(c,1)}),d.splice(0,0,a)});var e=a.onsuccess,g=a.onfailure;f.write(b._storageKey,JSON.stringify(d)),e&&e()}})},setRemotePlayhistory:function(a){a=a||{};var b=a.data;b.terminalId="31";var c=a.onsuccess,d=a.onfailure,f=new e;f.set(Q.url.jsonToQuery(b),function(a){a.code=="A00000"?c&&c():d&&d(a)})},getLoginPlayHistory:function(a){a=a||{};var b=a.param||{limit:10};b.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36),a.noPPS||(b.dp=3),b.terminalId=b.terminalId||j;var c=a.onsuccess,d=a.onfailure,f=new e;f.getPcLogin(b,function(a){h.log("getLoginPlayHistory, length:"+a.data.length),a.code=="A00000"?c&&c(a.data):d&&d(a)})},getUnLoginPlayHistory:function(a){a=a||{};var b=a.param||{};b.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36),a.noPPS||(b.dp=3),b.limit=10,b.terminalId=b.terminalId||j,k()&&(b.ckuid=b.ckuid||k());var c=a.onsuccess,d=a.onfailure,f=new e;h.log("getUnLoginPlayHistory, param: "+JSON.stringify(b)),f.getPcUnLogin(b,function(a){h.log("getUnLoginPlayHistory, length:"+a.data.length+" "+JSON.stringify(a.data)),a.code=="A00000"?c&&c(a.data):d&&d(a)})},setLoginPlayHistory:function(a){h.log("setLoginPlayHistory, videoName:"+a.data.videoName+", videoPlayTime:"+a.data.videoPlayTime),a=a||{};var b=a.data||{};b.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36),b.terminalId=b.terminalId||j;var c=a.onsuccess,d=a.onfailure,f=new e;f.setPcLogin(b,function(a){a.code=="A00000"?c&&c(a.data):d&&d(a)})},setUnLoginPlayHistory:function(a){h.log("setUnLoginPlayHistory, videoName:"+a.data.videoName+", videoPlayTime:"+a.data.videoPlayTime),a=a||{};var b=a.data||{};b.terminalId=b.terminalId||j,k()&&(b.ckuid=b.ckuid||k()),b.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36);var c=a.onsuccess,d=a.onfailure,f=new e;f.setPcUnLogin(b,function(a){a.code=="A00000"?c&&c(a.data):d&&d(a)})},delPlayHistory:function(a){var b=g.isLogin();b?this.delLoginHistory(a):this.delUnLoginPlayHistory(a)},delLoginHistory:function(a){a=a||{};var b=a.param||{};b.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36);var c=a.onsuccess,d=a.onfailure,f=new e;f.delPcLogin(b,function(a){a.code=="A00000"?c&&c(a.data):d&&d(a)})},delUnLoginPlayHistory:function(a){a=a||{};var b=a.param||{};k()&&(b.ckuid=b.ckuid||k()),b.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36);var c=a.onsuccess,d=a.onfailure,f=new e;f.delPcUnLogin(b,function(a){a.code=="A00000"?c&&c(a.data):d&&d(a)})},clearPlayHistory:function(a){var b=g.isLogin();h.log("Is login : "+b),b?this.clearLoginPlayHistory(a):this.clearUnLoginPlayHistory(a)},clearLoginPlayHistory:function(a){a=a||{};var b=a.param||{};b.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36);var c=a.onsuccess,d=a.onfailure,f=new e;f.clearPcLogin(b,function(a){a.code=="A00000"?c&&c(a.data):d&&d(a)})},clearUnLoginPlayHistory:function(a){a=a||{};var b=a.param||{};k()&&(b.ckuid=b.ckuid||k()),b.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36);var c=a.onsuccess,d=a.onfailure,f=new e;f.clearPcUnLogin(b,function(a){a.code=="A00000"?c&&c(a.data):d&&d(a)})},importPlayHistory:function(a){this.importLoginPlayHistory(a)},importLoginPlayHistory:function(a){a=a||{};var b=a.param||{};k()&&(b.ckuid=b.ckuid||k()),b.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36);var c=a.onsuccess,d=a.onfailure,f=new e;f.importPcLogin(b,function(a){a.data?c&&c(a.data):d&&d(a)})},importSearchLogin:function(a){a=a||{};var b=a.data||{};b.terminalId=b.terminalId||j,b.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36);var c=a.onsuccess,d=a.onfailure,f=new e;f.importSearchLogin(b,function(a){a.code=="A00000"?c&&c(a.data):d&&d(a.data)})},importSearchUnLogin:function(a){a=a||{};var b=a.data||{};b.terminalId=b.terminalId||j,b.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36),k()&&(b.ckuid=b.ckuid||k());var c=a.onsuccess,d=a.onfailure,f=new e;f.importSearchUnLogin(b,function(a){a.code=="A00000"?c&&c(a.data):d&&d(a.data)})}}})});
define("../../components/model/widgetModel",["./model"],function(a,b,c){var d=a("./model");c.exports=Q.Class("WidgetModel",{ns:"Q.model",extend:d,construct:function(){this.callsuper()}})});
define("../../interfaces/playhistory",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("RIPlayhistory",{construct:function(){this._remoteInterface=new d({get:{url:"http://passport.m."+e.SITE_DOMAIN+"/apis/qiyirc/getrc.php",struct:{code:{type:"string"},data:{type:"array",empty:!0,item:{type:"object",struct:{tvId:{type:"number"},videoId:{type:"string"},videoName:{type:"string"},videoUrl:{type:"string"},videoDuration:{type:"string"},albumId:{type:"number"},albumName:{type:"string"},albumUrl:{type:"string"},charge:{type:"number"},channelId:{type:"number"},allSet:{type:"number"},nextTvid:{type:"number",empty:!0},nextVideoUrl:{type:"string",empty:!0},userId:{type:"number"},terminalId:{type:"number"},videoPlayTime:{type:"string"},addtime:{type:"string"}}}}}},set:{url:"http://passport.m."+e.SITE_DOMAIN+"/apis/qiyirc/setrc.php",struct:{code:{type:"string"}}},getPcLogin:{url:"http://l.rcd."+e.SITE_DOMAIN+"/apis/qiyirc/getrc.php",struct:{code:{type:"string"}}},getPcUnLogin:{url:"http://nl.rcd."+e.SITE_DOMAIN+"/apis/urc/getrc",struct:{code:{type:"string"}}},setPcLogin:{url:"http://l.rcd."+e.SITE_DOMAIN+"/apis/qiyirc/setrc.php",struct:{code:{type:"string"}}},setPcUnLogin:{url:"http://nl.rcd."+e.SITE_DOMAIN+"/apis/urc/setrc",struct:{code:{type:"string"}}},delPcLogin:{url:"http://l.rcd."+e.SITE_DOMAIN+"/apis/qiyirc/delrc.php",struct:{code:{type:"string"}}},delPcUnLogin:{url:"http://nl.rcd."+e.SITE_DOMAIN+"/apis/urc/delrc",struct:{code:{type:"string"}}},clearPcLogin:{url:"http://l.rcd."+e.SITE_DOMAIN+"/apis/qiyirc/delall.php",struct:{code:{type:"string"}}},clearPcUnLogin:{url:"http://nl.rcd."+e.SITE_DOMAIN+"/apis/urc/delall",struct:{code:{type:"string"}}},importPcLogin:{url:"http://nl.rcd."+e.SITE_DOMAIN+"/apis/urc/merge",struct:{code:{type:"string"}}},importSearchLogin:{url:"http://l.rcd."+e.SITE_DOMAIN+"/apis/qiyirc/setsrc",struct:{code:{type:"string"}}},importSearchUnLogin:{url:"http://l.rcd."+e.SITE_DOMAIN+"/apis/urc/setsrc",struct:{code:{type:"string"}}}})},methods:{get:function(a,b){a=a||"",this._remoteInterface.send({ifname:"get",param:a,cors:!0,withCredentials:!0},function(a){b&&b(a)})},set:function(a,b){a=a||"",this._remoteInterface.send({method:"POST",ifname:"set",param:a,cors:!0,withCredentials:!0},function(a){b&&b(a)})},getPcLogin:function(a,b){a=a||"",this._remoteInterface.send({ifname:"getPcLogin",param:a,timeout:3e3},function(a){b&&b(a)})},getPcUnLogin:function(a,b){a=a||"",this._remoteInterface.send({ifname:"getPcUnLogin",param:a,timeout:3e3},function(a){b&&b(a)})},setPcLogin:function(a,b){a=a||"",a.t=(new Date).getTime(),this._remoteInterface.send({ifname:"setPcLogin",param:a},function(a){b&&b(a)})},setPcUnLogin:function(a,b){a=a||"",this._remoteInterface.send({method:"POST",ifname:"setPcUnLogin",param:a},function(a){b&&b(a)})},clearPcLogin:function(a,b){a=a||"",this._remoteInterface.send({ifname:"clearPcLogin",param:a},function(a){b&&b(a)})},clearPcUnLogin:function(a,b){a=a||"",this._remoteInterface.send({ifname:"clearPcUnLogin",param:a},function(a){b&&b(a)})},delPcLogin:function(a,b){a=a||"",a.t=(new Date).getTime(),this._remoteInterface.send({ifname:"delPcLogin",param:a},function(a){b&&b(a)})},delPcUnLogin:function(a,b){a=a||"",this._remoteInterface.send({ifname:"delPcUnLogin",param:a},function(a){b&&b(a)})},importPcLogin:function(a,b){a=a||"",this._remoteInterface.send({ifname:"importPcLogin",param:a},function(a){b&&b(a)})},importSearchLogin:function(a,b){a=a||"",this._remoteInterface.send({method:"GET",ifname:"importSearchLogin",param:a,timeout:3e3},function(a){b&&b(a)})},importSearchUnLogin:function(a,b){a=a||"",this._remoteInterface.send({method:"GET",ifname:"importSearchUnLogin",param:a,timeout:3e3},function(a){b&&b(a)})}}})});
define("../../model/syncLastVideo",["../kit/qiyiPlayer","./playhistoryModel"],function(a,b,c){var d=a("../kit/qiyiPlayer"),e=a("./playhistoryModel"),f=new e,g=null;c.exports=Q.Class("SyncLastVideo",{construct:function(a){this.init()},properties:{timer:1e4,cookieName:"QC018",terminalId:null,handler:null,cookieOpt:{path:"/",expires:31536e6,domain:"iqiyi.com"}},methods:{init:function(){document.referrer==""&&this.syncLastVideo(),this.terminalId=Q.browser.iPad?21:Q.browser.android||Q.browser.iPhone?31:11,g=d.getPlayer("video");var a=this;this.handler=setTimeout(a.writeCurrentVideoToCookie.bind(a),a.timer)},syncLastVideo:function(){var a=Q.cookie.get(this.cookieName);if(!a)return;var b=parseInt(Q.url.getQueryValue(a,"tvid")),c=parseFloat(Q.url.getQueryValue(a,"videoPlayTime")),d=parseInt(Q.url.getQueryValue(a,"terminalId"));if(!b||!c||!d)return;var e={tvId:b,videoPlayTime:c,terminalId:d};f.setPlayhistory({data:e},function(a){a.code!="A00000"}),clearTimeout(this.handler),Q.cookie.set(this.cookieName,"",this.cookieOpt)},writeCurrentVideoToCookie:function(a){var b=this;g.getPlayInfo(function(a){var c="tvid="+(a.tvid||a.tvId)+"&videoPlayTime="+a.currentTime+"&terminalId="+b.terminalId;Q.cookie.set(b.cookieName,c,b.cookieOpt),b.handler=setTimeout(b.writeCurrentVideoToCookie.bind(b),b.timer)})}}})});
define("../../action/playhistoryRecorder",["../kit/qiyiPlayer","../model/playhistoryModel","../kit/userInfo","../kit/page"],function(a,b,c){var d=a("../kit/qiyiPlayer"),e=a("../model/playhistoryModel"),f=0,g=a("../kit/userInfo"),h=new Q.ic.InfoCenter({moduleName:"PlayhistoryRecorder"}),i=a("../kit/page"),j,k=function(a){var b=a.data;f=b.ads[0].duration};c.exports=Q.Class("PlayhistoryRecorder",{construct:function(a){a.playerId=a.playerId||"video",this._player=d.getPlayer(a.playerId),this._interval=a.interval||12e4,this._timer=null,this._data={}},methods:{init:function(){this._initEvent(),this._historyModel=new e,this._hasStoped=!1},destroy:function(){this._stopTimer(),f=0,Q.event.customEvent.un("adloaded",k),j.un("beforeunload",this.beforeunloadHandler),Q.$(window).un("unload",this.windowUnload),Q.$(window).un("pagehide",this.windowUnload)},_initEvent:function(){var a=this;a.unloaded=!1,this._player.on("StartPlay",function(){a._hasStoped=!1,h.log("StartPlay"),a._record()}),this._player.on("Play",function(b){a._hasStoped=!1,h.log("Play"),a._startTimer()}),this._player.on("Paused",function(b){h.log("Paused before1");if(Q.browser.iPad&&a.unloaded)return;h.log("Paused before2");if(a._hasStoped)return;h.log("Paused"),a._recording()}),this._player.on("Stoped",function(b){h.log("Stoped"),a._hasStoped=!0,a._stopTimer(),a._stoped()}),j=i.getCurrent(),this.beforeunloadHandler=function(){h.log("beforeunloadHandler"),a._recording()},j&&j.on("beforeunload",this.beforeunloadHandler),this.windowUnload=function(){h.log("windowUnload"),a.unloaded=!0,a._recording()},"onpagehide"in window?Q.$(window).on("pagehide",this.windowUnload):Q.$(window).on("unload",this.windowUnload),Q.event.customEvent.on("adloaded",k)},_record:function(){var a=this;this._player.getVideoInfo(function(b){var c=b.tvid;a._historyModel.getByTvId({tvId:c,onsuccess:function(b){h.log("data.videoPlayTime"+b.videoPlayTime),b.videoPlayTime<=0&&a._recording()},onfailure:function(){a._recording()}})})},_startTimer:function(){var a=g.isLogin();a&&!this._timer&&(h.debug("Recorder start."),this._timer=setInterval(this._recording.bind(this),this._interval))},_stopTimer:function(){this._timer&&(h.debug("Recorder stop."),clearInterval(this._timer),this._timer=null)},_stoped:function(){var a=this;this._hasStoped=!0,this._getData(function(b){b.videoPlayTime=0,h.log(b.videoPlayTime),a._historyModel.setPlayhistory({data:b})})},_getData:function(a){var b=this;this._player.getPlayInfo(function(c){b._data.videoPlayTime=parseInt(c.currentTime,10),b._player.getVideoInfo(function(c){b._data.videoName=c.vn,b._data.albumName=c.an,b._data.videoId=c.vid,b._data.albumId=c.aid,b._data.tvId=c.tvid,b._data.nextTvid=c.ntvd||"",b._data.nextVid=c.nvid||"",a(b._data)})})},_recording:function(){var a=this;h.log("_recording"),this._getData(function(b){h.log("recording 1 : "+b.videoPlayTime);if(b.videoPlayTime<f)return;if(!b.videoName)return;b.videoPlayTime=b.videoPlayTime-f,h.log("Recording 2 : "+b.videoPlayTime),b.videoPlayTime===0&&(b.videoPlayTime=-1),a._hasStoped&&(b.videoPlayTime=0),h.log("Recording : "+b.videoPlayTime),a._historyModel.setPlayhistory({data:b})})}}})});
define("../../model/parseItem",[],function(a,b,c){var d=function(a,b){var c=Q.url.parse(a);return c?(c.search=a.replace(c.protocol+"://"+c.host+c.path,""),b+c.search):b};c.exports={playHistoryParse:function(a,b){return a.playState==="重新观看"&&b.nextTvid&&b.nextVideoUrl!==""&&(a.tvId=b.nextTvid,a.videoName=b.nextVideoName||b.videoName,a.videoUrl=d(a.videoUrl,b.nextVideoUrl),a.playState="继续观看",a.continuePlayUrl=d(a.continuePlayUrl,b.nextVideoUrl)),a},updateRecordInfoParse:function(a){return parseInt(a.videoPlayTime,10)===0&&a.nextTvid&&a.nextVideoUrl!==""&&(a.updateCurrentUrl===a.updateVideoUrl?a.updateCurrentUrl=a.updateVideoUrl=d(a.updateCurrentUrl,a.nextVideoUrl):a.updateVideoUrl=d(a.updateCurrentUrl,a.nextVideoUrl)),a},parse:function(a,b){var c=new Q.plugins.Template(a);return c.evaluate(b)},parseLimit:function(a,b,c){c&&c.forEach(function(a){b[a.key]=Q.string.truncate(b[a.key],a.value)});var d=new Q.plugins.Template(a);return d.evaluate(b)}}});
define("../../units/compatiblePlayHistory",["../components/units/pageJob","../model/playhistoryModel"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../model/playhistoryModel"),f=new e;d.create("CompatiblePlayHistory",{check:function(){return!0},init:function(){},exec:function(){var a=window,b="lib.action.NewPlayHistory.instance";Q.object.forEach(b.split("."),function(b,c){a[b]=a[b]||{},a=a[b]}),lib.action.NewPlayHistory.instance.getAlbum=function(a,b){var c={albumId:a,onsuccess:b,onfailure:b};f.getByAlbumId(c)},lib.action.NewPlayHistory.instance.history2string=function(a){var b={};a=a||function(){},b.onsuccess=function(b){var c=b.length,d=[];for(var e=0;e<c;e++)d.push([b[e].videoName,b[e].videoPlayUrl,b[e].videoPlayTime,b[e].videoId].join("*"));a(d.join("|"))},b.onfailure=a,f.getPlayhistory(b)},lib.action.NewPlayHistory.instance.getByTvId=function(a,b){var c={};c.tvId=a,c.onsuccess=b,c.onfailure=b,f.getByTvId(c)}}}),d.add("CompatiblePlayHistory")});
define("../../units/updateRecordsV2",["../components/units/pageJob","../action/updateRecordsV2","../kit/getWebEventID","../kit/userInfo","../action/underframe","../components/action/checkDoms"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"units/updateRecordsV2"}),e=a("../components/units/pageJob"),f=a("../action/updateRecordsV2"),g=a("../kit/getWebEventID"),h=a("../kit/userInfo"),i=a("../action/underframe"),j=a("../components/action/checkDoms"),k=Q.$("*[data-widget-updaterecords=updaterecords]"),l={widget:k,body:k?k.down("*[data-updaterecords-elem=body]"):null,title:k?k.down("*[data-updaterecords-elem=title]"):null,icon:k?k.down("*[data-updaterecords-elem=icon]"):null,em:k?k.down("*[data-updaterecords-elem=num]"):null,info:k?k.down("*[data-updaterecords-elem=info]"):null,infoLabel:k?k.down("*[data-updaterecords-elem=infolabel]"):null,noTipBtn:k?k.down("*[data-updaterecords-elem=notipbtn]"):null,noUpdateCon:k?k.down("*[data-updaterecords-elem=noupdatecon]"):null,closeBtn:k?k.down("*[data-updaterecords-elem=closebtn]"):null},m=Q.$("*[data-widget-toplinefloater=blackFloater]"),n=500,o=100;e.create("updateRecordsV2",{check:function(){return j(l),!0},init:function(){this.updateRecords=new f(l);var a=this;Q.event.customEvent.on("navOneShow",function(){a._hide()}),Q.event.customEvent.on("suggestShow",function(){a._hide()}),Q.event.customEvent.on("hideHeaderBoxFromVipHeader",function(){a._hide()}),Q.event.customEvent.on("playHistoryShow",function(){a._hide()}),Q.event.customEvent.on("showUserCenterBox",function(){a._hide()}),Q.event.customEvent.on("updateRecordTipShow",function(){a._hide()});var b=l.widget,c=Q.browser.iPad?"click":"mouseover";b.on(c,function(b){a._clearHideTimer(),a._createShowTimer()}),Q.browser.iPad?(Q.$("body").on("touchstart",function(b){a._clearShowTimer(),a._createHideTimer()}),b.on("touchstart",function(a){Q.event.get(a).stopPropagation()})):b.on("mouseleave",function(b){b=Q.event.get(b),b.preventDefault(),a._clearShowTimer(),a._createHideTimer()}),l.body.on(c,function(b){a._clearHideTimer(),a._createShowTimer()})},_createHideTimer:function(){if(!this._hideTimer){var a=this;this._hideTimer=setTimeout(function(){a._hide()},o)}},_clearHideTimer:function(){this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=null)},_createShowTimer:function(){if(!this._showTimer){var a=this;this._showTimer=setTimeout(function(){a._show()},n)}},_clearShowTimer:function(){this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null)},_show:function(){this._clearShowTimer(),this._clearHideTimer();var a=this,b=l.widget;this.className||(this.className=b.attr("data-updaterecords-cls"),this.hoverClassName1=this.className+"Hover",this.hoverClassName=this.className+"-hover");if(!b.hasClass(this.hoverClassName)||!b.hasClass(this.hoverClassName1))b.addClass(this.hoverClassName),b.addClass(this.hoverClassName1),Q.event.customEvent.fire({type:"updateRecordsShow",data:{}}),g(function(b){Q.log.server({type:"phtr2divstat20121204",act:a.updateRecords.hasData?"updatenotifydivshowhasdata":"updatenotifydivshownodata",jsuid:Q.cookie.get("QC006"),flshuid:Q.cookie.get("QC005"),weid:b,ppuid:h.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")});var c=l.body;if(!this.underFrame){var d=0;Q.$("*[data-usercenterbox-elem]")&&(d=5),this.underFrame=new i({elem:c,radius:d,target:Q.$('*[data-updaterecords-elem="underframe"]')})}c.height()>5?(m?(this.underFrame.distTop=25,this.underFrame.distHeight=-3):(this.underFrame.distTop=5,this.underFrame.distHeight=-5),this.underFrame.show()):this.underFrame.hide()},_hide:function(){this._clearShowTimer(),this._clearHideTimer();var a=l.widget;a.hasClass(this.hoverClassName)&&a.removeClass(this.hoverClassName),a.hasClass(this.hoverClassName1)&&a.removeClass(this.hoverClassName1),this.underFrame&&this.underFrame.hide()}}),e.add("updateRecordsV2")});
define("../../action/updateRecordsV2",["../config/siteDomain","../kit/userInfo","../kit/getWebEventID","./updateRecordsGetter","./updateRecordsTipV2","./updateRecordInfoV2","../view/updateRecordInfoViewV2","./updateRecordMoreEnjoy","../view/updateRecordMoreEnjoyView"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"action/updateRecordsV2"}),e=a("../config/siteDomain"),f=a("../kit/userInfo"),g=a("../kit/getWebEventID"),h=a("./updateRecordsGetter"),i=a("./updateRecordsTipV2"),j=a("./updateRecordInfoV2"),k=a("../view/updateRecordInfoViewV2"),l=a("./updateRecordMoreEnjoy"),m=a("../view/updateRecordMoreEnjoyView");c.exports=Q.Class("UpdateRecordsV2",{construct:function(a){this.title=a.title,this.icon=a.icon,this.em=a.em,this.info=a.info,this.infoLabel=a.infoLabel,this.noTipBtn=a.noTipBtn,this.noUpdateCon=a.noUpdateCon,this.moreEnjoyCon=a.moreEnjoyCon,this.closeBtn=a.closeBtn,this.initDataGetter(),this.initInfo(),this.initMoreEnjoy()},methods:{initDataGetter:function(){var a=new h;a.on("updateRecords",this.queryDataCallBack.bind(this)),window.setTimeout(function(){a.getUpdataRecords()},500),window.setInterval(function(){a.getUpdataRecords()},18e5),this.queryData=a},queryDataCallBack:function(a){a.data&&a.data.length>0?this.hasData=!0:this.hasData=!1,a?(this.setTitle(a.data),this.setIcon(a.data),this.recordInfo&&this.recordInfo.syncSet(a),this.recordMoreEnjoy&&this.recordMoreEnjoy.doUpdateRecords(a)):this.recordInfo&&this.recordInfo.syncSet({})},setTitle:function(a){this.title?a&&a.length>0?this.title.css("display",""):this.title.css("display",""):d.warn("this.title不存在！")},setIcon:function(a){if(this.em){if(!Q.cookie.get("noUpdateRecordIcon"))if(a&&a.length>0){var b=a.length>99?"99+":a.length;this.em.html(b),this.icon.css("display",""),this.noTipBtn.css("display","")}else this.em.html(0),this.icon.hide(),this.noTipBtn.hide()}else d.warn("this.em不存在！")},deleteIcon:function(){this.em&&(this.em.html(0),this.icon.hide(),this.noTipBtn.hide(),Q.cookie.set("noUpdateRecordIcon","true",{duration:0,path:"/",domain:e.SITE_DOMAIN}))},initTip:function(){this.title?this.tip=new i({title:this.title}):d.warn("this.title不存在！")},initInfo:function(){if(this.info&&this.infoLabel&&this.noTipBtn&&this.noUpdateCon){this.recordInfo=new j(null,new k({doms:{infoCon:this.info,infoLabel:this.infoLabel,noTipBtn:this.noTipBtn,noUpdateCon:this.noUpdateCon,closeBtn:this.closeBtn}}));var a=this;this.recordInfo.on("noUpdateRecords",function(b){a.deleteIcon(),g(function(a){Q.log.server({type:"phtr2divstat20121204",act:"nonotifyclk",jsuid:Q.cookie.get("QC006"),flshuid:Q.cookie.get("QC005"),weid:a,ppuid:f.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})})}else d.warn("this.info或this.infoLabel或this.noTipBtn或this.noUpdateCon不存在！")},initMoreEnjoy:function(){if(this.moreEnjoyCon){var a=new l(null,new m({doms:{moreEnjoyCon:this.moreEnjoyCon}}));lib._PAGE_EVENT.on("buildMayBeEnjoyDataEnd",function(){a.doBuildMayBeEnjoyDataEnd()}),this.moreEnjoyCon.attr("qiyubuildend")=="true"&&a.doBuildMayBeEnjoyDataEnd(),this.recordMoreEnjoy=a}else d.warn("this.moreEnjoyCon不存在！")},doHideUserCenterBox:function(){},doShowCreditTip:function(){},doHideCreditTip:function(){}}})});
define("../../action/updateRecordsGetter",["../interfaces/dispatcherVideo_aupInterface","../kit/eventPlugin","../kit/userInfo"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"action/updateRecordsGetter"}),e=a("../interfaces/dispatcherVideo_aupInterface"),f=a("../kit/eventPlugin"),g=a("../kit/userInfo");c.exports=Q.Class("UpdateRecordsGetter",{plugins:[new f],construct:function(){this.init()},methods:{init:function(){this.initParam(),this.bindEvent()},initParam:function(){var a=navigator.userAgent.toLowerCase(),b=/ipad/.test(a)?21:Q.browser.android||Q.browser.iPhone?31:11,c=b==11?Q.cookie.get("QC005"):b==21||b==31?Q.cookie.get("QC006"):null;this.terminalId=b,this.ckuid=c},queryDataCallBack:function(a){if(a.code=="A00000"){var b=a.data;d.debug("更新数据返回成功！"),this.fire({type:"updateRecords",data:b})}else d.debug("更新数据返回失败！"),this.fire({type:"updateRecords",data:null})},getUpdataRecords:function(){var a=this;a.updateRecords()},bindEvent:function(){var a=this;Q.event.customEvent.on("login",function(){a.getUpdataRecords()}),Q.event.customEvent.on("logout",function(){a.getUpdataRecords()})},updateRecords:function(){var a={};a.terminalId=this.terminalId,a.ckuid=this.ckuid,a.limit=10,a.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36),g.isLogin()?(new e).getLoginUpdate(a,this.queryDataCallBack.bind(this)):(new e).getUnLoginUpdate(a,this.queryDataCallBack.bind(this))}}})});
define("../../interfaces/dispatcherVideo_aupInterface",["../config/siteDomain","../kit/remoteInterface"],function(a,b,c){var d=a("../config/siteDomain"),e=a("../kit/remoteInterface");c.exports=Q.Class("Vrs_aInterface",{construct:function(a){this._remoteInterface=new e({loginUpdate:{url:"http://l.rcd."+d.SITE_DOMAIN+"/apis/qiyirc/getUpdateReminder",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{albumId:{type:"number",empty:!1}}}}},unloginUpdate:{url:"http://nl.rcd."+d.SITE_DOMAIN+"/apis/urc/getUpdateReminder",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{albumId:{type:"number",empty:!1}}}}}})},methods:{getUnLoginUpdate:function(a,b){var a=a||{};this._remoteInterface.send({ifname:"unloginUpdate",param:a,spliter:"0"},function(a){b&&b(a)})},getLoginUpdate:function(a,b){var a=a||{};this._remoteInterface.send({ifname:"loginUpdate",param:a,spliter:"0"},function(a){b&&b(a)})}}})});
define("../../action/updateRecordsTipV2",["../config/siteDomain","../components/action/floater","../components/view/floaterCustomView","../kit/userInfo","../kit/eventPlugin"],function(a,b,c){var d=a("../config/siteDomain"),e=a("../components/action/floater"),f=a("../components/view/floaterCustomView"),g=a("../kit/userInfo"),h=a("../kit/eventPlugin");c.exports=Q.Class("UpdateRecordsGetterV2",{plugins:[new h],properties:{info:['<div id="recordtipid" class="remindBox">','<div class="txBg"></div>','<div class="remindDesc">',"<p>您看过的内容有更新啦！</p>",'<a href="javascript:void(0)" j-recordtip="closebtn" title="关闭" class="x"></a>','<p class="toknown"><a href="javascript:" j-recordtip="closebtn">知道了</a><a href="javascript:" j-recordtip="lookbtn">去看看&gt;&gt;</a></p>',"</div>","</div>"].join(""),isCreditTipShow:!1},construct:function(a){a=a||{},this.title=a.title,this.init()},methods:{init:function(){var a=new f({pos:function(){return{top:0,left:0}}});this.floater=new e({view:a}),Q.$(window).on("resize",this.pos.bind(this))},pos:function(){var a=this.title.top()+this.title.height(),b=this.title.left()+this.title.width();this.floater.pos({top:a,left:b-179})},tempShow:function(a){this.isCreditTipShow?this.lazyShow=!0:this.show(a)},show:function(a){var b=Q.cookie.get("firstRecordTip");if(a&&a.length>0&&!b){this.floater.show({html:this.info}),this.showed=!0,this.pos();var c=this;this.closeBtn||(this.closeBtn=this.floater.getFloater().down("*[j-recordtip=closebtn]"),this.closeBtn.on("click",function(a){Q.event.stop(a),c.floater.hide()})),this.lookBtn||(this.lookBtn=this.floater.getFloater().down("*[j-recordtip=lookbtn]"),this.lookBtn.on("click",function(a){Q.event.stop(a),Q.event.customEvent.fire({type:"tipGoLook",data:{e:a}})})),Q.event.customEvent.fire({type:"updateRecordTipShow",data:{}}),Q.event.customEvent.on("showUserCenterBox",function(){c.floater.hide()}),Q.event.customEvent.on("navOneShow",function(){c.floater.hide()}),Q.event.customEvent.on("suggestShow",function(){c.floater.hide()}),Q.event.customEvent.on("hideHeaderBoxFromVipHeader",function(){c.floater.hide()}),Q.event.customEvent.on("playHistoryShow",function(){c.floater.hide()}),Q.event.customEvent.on("updateRecordsShow",function(){c.floater.hide()}),Q.cookie.set("firstRecordTip","true",{duration:0,path:"/",domain:d.SITE_DOMAIN})}},doShowCreditTip:function(){this.isCreditTipShow=!0,this.showed&&(this.lazyShow=!0,this.floater.hide())},doHideCreditTip:function(){this.isCreditTipShow=!1,this.lazyShow&&(this.floater.reShow(),this.pos())}}})});
define("../../components/view/floaterCustomView",["./floaterNoCoverView"],function(a,b,c){var d=a("./floaterNoCoverView");c.exports=Q.Class("FloaterCustomView",{ns:Q.view,extend:d,construct:function(a){this.callsuper(a),this._opt=a||{}},methods:{adjustPosition:function(){if(this._opt.pos){var a=this._opt.pos();this._elem.css("top",a.top+"px"),this._elem.css("left",a.left+"px")}if(this._opt.boxSize){var b=this._opt.boxSize();this._elem.css("width",b.width+"px"),this._elem.css("height",b.height+"px")}}}})});
define("../../components/view/floaterNoCoverView",["./floaterView"],function(a,b,c){var d=a("./floaterView");c.exports=Q.Class("FloaterNoCoverView",{ns:Q.view,extend:d,construct:function(a){a=a||{},this.callsuper(a)},methods:{showCover:function(){},hideCover:function(){},hidePlayer:function(){},showPlayer:function(){}}})});
define("../../action/updateRecordInfoV2",["../components/action/widget","../model/updateRecordInfoModelV2","../view/updateRecordInfoViewV2","../kit/eventPlugin","../model/parseItem"],function(a,b,c){var d=a("../components/action/widget"),e=a("../model/updateRecordInfoModelV2"),f=a("../view/updateRecordInfoViewV2"),g=a("../kit/eventPlugin"),h=a("../model/parseItem");c.exports=Q.Class("UpdateRecordInfoV2",{extend:d,plugins:[new g],properties:{events:{noTip:function(a){this.fire({type:"noUpdateRecords",e:a.data.e}),Q.event.customEvent.fire({type:"noUpdateRecords",e:a.data.e})}}},construct:function(a,b){this.callsuper({model:a||new e({selfItem:h.updateRecordInfoParse}),view:b||new f})},methods:{}})});
define("../../model/updateRecordInfoModelV2",["../components/model/model","../kit/userInfo"],function(a,b,c){var d=a("../components/model/model"),e=new Q.ic.InfoCenter({moduleName:"model/updateRecordInfoModelV2"}),f=a("../kit/userInfo");c.exports=Q.Class("UpdateRecordInfoModelV2",{extend:d,construct:function(a){this.callsuper(a),a.selfItem&&(this.selfItem=a.selfItem)},properties:{urlParams:"?type=phtr2divstat20121204&act=updateitemviewclk&jsuid="+Q.cookie.get("QC006")+"&flshuid="+Q.cookie.get("QC005")+"&ppuid="+f.getUid()},methods:{set:function(a){var b=a.data,c=[];if(b){for(var d=0,e=b.length;d<e;d++)c.push(this.format(Q.object.extend({},b[d])));Q.object.extend(this._data,{data:c})}else this._data.data=[];return this._data},format:function(a){return this.formatName(a),this.formatUrl(a),this.formatUpdateTitle(a),this.selfItem&&typeof this.selfItem=="function"&&this.selfItem(a),a},formatName:function(a){if(a.channelId==6||a.channelId==14)a.shortVideoName=Q.string.truncate(a.sourceName,16),a.titleName=a.sourceName;else if(a.channelId==10)a.shortVideoName=Q.string.truncate(a.reminder.tvName,16),a.titleName=a.reminder.tvName;else{var b=16;if(a.channelId==2||a.channelId==3||a.channelId==4){var c=(a.videoOrder+""+a.reminder.mpd).length;c>4&&(b=16-(c-4))}a.shortVideoName=Q.string.truncate(a.albumName,b),a.titleName=a.albumName}},formatUrl:function(a){var b=null;a.toFree?b=a.videoUrl:a.channelId==2||a.channelId==3||a.channelId==4||a.channelId==7?b=a.videoUrl||a.reminder.vurl:a.channelId==6||a.channelId==14||a.channelId==10?b=a.reminder.vurl||a.videoUrl:a.channelId==1&&a.dsid==1&&(b=a.videoUrl),a.videoUrl?a.updateVideoUrl=a.videoUrl+this.urlParams:a.reminder&&a.reminder.vurl?a.updateVideoUrl=a.reminder.vurl+this.urlParams:a.updateVideoUrl="javascript:void(0)",b?a.updateCurrentUrl=b+this.urlParams:a.updateCurrentUrl="javascript:void(0)",a.channelId==10&&(a.updateVideoUrl=a.updateCurrentUrl)},formatUpdateTitle:function(a){if(a.toFree)a.updateTitle="付费电影转免费";else if(a.channelId==2||a.channelId==3||a.channelId==4)a.updateTitle="看到"+(a.videoOrder<a.reminder.mpd?a.videoOrder:a.reminder.mpd)+"集/更新至"+a.reminder.mpd+"集";else if(a.channelId==6||a.channelId==14){var b=a.reminder.mpd+"";a.updateTitle=b.length==8?"更新至"+b.substring(0,4)+"-"+b.substring(4,6)+"-"+b.substring(6,8)+"期":b}else a.channelId==10?(a.updateTitle="电影正片新上映",a.dsid==1&&a.reminder.cid==1&&(a.updateTitle="订阅内容更新")):a.channelId==7?a.updateTitle="娱乐事件新进展":a.channelId==1&&a.dsid==1?a.updateTitle="订阅内容更新":a.updateTitle=""}}})});
define("../../view/updateRecordInfoViewV2",["../components/view/widgetView","../kit/getWebEventID","../kit/userInfo"],function(a,b,c){var d=a("../components/view/widgetView"),e=new Q.ic.InfoCenter({moduleName:"view/updateRecordInfoViewV2"}),f=a("../kit/getWebEventID"),g=a("../kit/userInfo");c.exports=Q.Class("UpdateRecordInfoViewV2",{extend:d,properties:{liInfo:['<li index="{{liIndex}}">','<div class="rectxt">','<span class="icoplay icojl-gx"></span>','<a href="{{updateVideoUrl}}" j-delegate="pingback_webevent" {{titleVideoName}}>{{shortVideoName}}</a>','<span class="playing"><a href="{{updateCurrentUrl}}" j-delegate="pingback_webevent">{{updateTitle}}</a></span>',"</div>","</li>"].join("")},construct:function(a){this.callsuper(a),g.isLogin()&&this._doms.infoLabel.hide(),this.labelCloseBtn=this._doms.closeBtn},methods:{init:function(a){this._ctrl=a,this._doms.noTipBtn.hide(),this.bindEvent()},update:function(a){var b=this,c=this._doms.infoCon,d=c.down("li");if(d){var e=null,f=0;d.forEach(function(a){var c=Q.$(a);e=b.handerObj[c.attr("index"+f)],c.un("mouseenter",e.mouseEnter),c.un("mouseleave",e.mouseLeave),f++})}var g=a.data,h=[];if(g&&g.length>0){for(var f=0,i=g.length;f<i&&f<10;f++)g[f].liIndex="index"+f,this.formatView(g[f]),h.push(Q.plugins.Mustache.render(this.liInfo,g[f]));c.html(h.join("")),this._doms.noUpdateCon.hide(),c.css("display",""),d=c.down("li");if(d){this.handerObj={};var f=0,j=null,k=null;d.forEach(function(a){var c=Q.$(a);j=b.doInfoConMouseEnter.bind(b),k=b.doInfoConMouseLeave.bind(b),b.handerObj[c.attr("index"+f)]={mouseEnter:j,mouseLeave:k},c.on("mouseenter",j),c.on("mouseleave",k),f++}),d.length>=6&&Q.$(d[d.length-1]).addClass("last")}}else this._doms.noUpdateCon.css("display",""),c.html(""),c.hide();g&&g.length<=6?c.css("height","200px"):c.css("height","auto")},_escapeDBCString:function(a){var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);if(d==32){b+=String.fromCharCode(12288);continue}b+=a.charAt(c)}return b},formatView:function(a){a.titleVideoName=a.shortVideoName==a.titleName?"":"title="+this._escapeDBCString(a.titleName)},doInfoConMouseEnter:function(a){a=Q.event.get(a),Q.$(a.currentTarget||a.target).addClass("selected")},doInfoConMouseLeave:function(a){a=Q.event.get(a),Q.$(a.currentTarget||a.target).removeClass("selected")},bindEvent:function(){var a=this;this.labelCloseBtn&&this.labelCloseBtn.on("click",function(b){Q.event.stop(b),a._doms.infoLabel.hide()});var b=this._doms.noTipBtn;b&&b.on("click",function(b){Q.event.stop(b),a._ctrl.notice({type:"noTip",data:{e:Q.event.get(b)}})}),this._doms.infoCon.delegate("pingback_webevent",function(a){Q.event.stop(a.event),f(function(b){a=a||window.event;var c=Q.$(a.target||a.srcElement);location.href=c.attr("href")+"&weid="+b})}),Q.event.customEvent.on("login",this.doLogin.bind(this)),Q.event.customEvent.on("logout",this.doLogout.bind(this))},doLogin:function(a){this._doms.infoLabel.hide()},doLogout:function(a){this._doms.infoLabel.css("display","")}}})});
define("../../action/updateRecordMoreEnjoy",["../components/action/widget","../model/updateRecordMoreEnjoyModel","../view/updateRecordMoreEnjoyView","../kit/eventPlugin"],function(a,b,c){var d=a("../components/action/widget"),e=a("../model/updateRecordMoreEnjoyModel"),f=a("../view/updateRecordMoreEnjoyView"),g=a("../kit/eventPlugin");c.exports=Q.Class("UpdateRecordMoreEnjoy",{extend:d,plugins:[new g],construct:function(a,b){this.callsuper({model:a||new e,view:b||new f})},properties:{param:null,qiyuEnd:!1},methods:{doUpdateRecords:function(a){this.param=a,this.sendBuild()},doBuildMayBeEnjoyDataEnd:function(){this.qiyuEnd=!0,this._view.getQiyuHtml(),this.sendBuild()},sendBuild:function(){this.qiyuEnd&&this.param&&this.syncSet(this.param)}}})});
define("../../model/updateRecordMoreEnjoyModel",["../components/model/model"],function(a,b,c){var d=a("../components/model/model"),e=new Q.ic.InfoCenter({moduleName:"model/updateRecordMoreEnjoyModel"});c.exports=Q.Class("UpdateRecordMoreEnjoyModel",{extend:d,construct:function(a){this.callsuper(a)},properties:{urlParams:"?type=gengxintixingv14&jsuid="+Q.cookie.get("QC006")+"&flshuid="+Q.cookie.get("QC005")+"&flag=recstringclick"},methods:{set:function(a){var b=a.data,c=[];if(b){for(var d=0,e=b.length;d<e;d++)c.push(this._format(Q.object.extend({},b[d])));Q.object.extend(this._data,{data:c})}return this._data},_format:function(a){return this._formatPicUrl(a),this._formatName(a),this._formatUrl(a),this._formatUpdateTitle(a),a},_formatPicUrl:function(a){a.reminder.albumPic&&(a.reminder.albumPic.indexOf("http://")==-1&&(a.reminder.albumPic="http://www.qiyipic.com/thumb"+a.albumPic),a.albumPic=a.reminder.albumPic.replace(/(\.[\w]*$)/,"_116_65$1"))},_formatName:function(a){a.channelId==6||a.channelId==14?(a.shortVideoName=Q.string.truncate(a.sourceName,16),a.titleName=a.sourceName):a.channelId==10?(a.shortVideoName=Q.string.truncate(a.videoName,16),a.titleName=a.videoName):(a.shortVideoName=Q.string.truncate(a.albumName,16),a.titleName=a.albumName)},_formatUrl:function(a){if(a.reminder.vurl){var b=this;a.updateVUrl=a.reminder.vurl+b.urlParams}else a.updateVUrl="javascript:void(0)"},_formatUpdateTitle:function(a){if(a.channelId==2||a.channelId==3||a.channelId==4)a.updateTitle="更新至第"+a.reminder.mpd+"集";else if(a.channelId==6||a.channelId==14){var b=a.reminder.mpd+"";a.updateTitle=b.length==8?"更新至第"+b.substring(0,4)+"-"+b.substring(4,6)+"-"+b.substring(6,8)+"期":b}else a.channelId==10?a.updateTitle="正片上映":a.channelId==7?a.updateTitle="事件更新":a.updateTitle=""}}})});
define("../../view/updateRecordMoreEnjoyView",["../components/view/widgetView","../kit/getWebEventID"],function(a,b,c){var d=a("../components/view/widgetView"),e=new Q.ic.InfoCenter({moduleName:"view/updateRecordMoreEnjoyView"}),f=a("../kit/getWebEventID");c.exports=Q.Class("UpdateRecordMoreEnjoyView",{extend:d,construct:function(a){this.callsuper(a),this.con=this._doms.moreEnjoyCon},properties:{con:Q.$("#j-lookingBd"),ad:Q.$("data-widget-ad=temp"),liTemplate:["<li>",'<a href="{{updateVUrl}}" class="imgBg1" j-delegate="pingback_webevent">','<img height="65" width="116" src="{{albumPic}}" alt="{{source}}" title="{{source}}" />','<span class=""></span>','<span class="timeBj001"></span>','<span class="timeBj002"></span>',"</a>",'<h6 style="text-align:center;">','<a href="{{updateVUrl}}" title="{{titleName}}" j-delegate="pingback_webevent">{{shortVideoName}}</a>',"</h6>",'<span style="color:red;text-align:center;margin-left:-4px;display:block;">{{updateTitle}}</span>',"</li>"].join(""),recordMaxLen:15,shishangRecordMaxLen:10,updateRecordMaxLen:1,isPingBackSended:!1},methods:{init:function(){this.ulCon=this.con.down("ul"),this.bindEvent()},bindEvent:function(){this.ulCon.delegate("pingback_webevent",function(a){Q.event.stop(a.event),f(function(b){a=a||window.event;var c=Q.$(a.target||a.srcElement);location.href=c.attr("href")+"&weid="+b})})},getQiyuHtml:function(){this.qiyuHtml=this.ulCon.html()},update:function(a){var b=a.data;this.ulCon.html(this.qiyuHtml);if(b&&b.length>0){var c=this.getRecordData(b);this.changeQiyuData(),this.ulCon.html(c+this.ulCon.html()),this.isPingBackSended||(this.sendPingBack(),this.isPingBackSended=!0)}this.ad&&this.addaad(),lib&&lib.action&&lib.action.lazy&&lib.action.lazy.add()},addaad:function(){},changeQiyuData:function(){var a=this.ulCon,b=a.down("li"),c=(info||{data:""}).data.categoryId,d=(c=="13"||c=="14"?this.shishangRecordMaxLen:this.recordMaxLen)-this.cRecords,e=0,f=this;b.forEach(function(b){var c=Q.$(b).down("img[title]");if(c){var g=c.attr("title");g&&f.cTitle.indexOf(g)!=-1?a[0].removeChild(b):e+=1}else e+=1;e>d&&a[0].removeChild(b)})},getRecordData:function(a){var b=[],c=[],d=info||{},e=(info||{data:""}).data.categoryId;for(var f=0,g=a.length;f<g;f++){d.albumId!=a[f].albumId&&e+""==a[f].channelId+""&&(b.push(Q.plugins.Mustache.render(this.liTemplate,a[f])),c.push(a[f].titleName));if(b.length>=this.updateRecordMaxLen)break}return this.cTitle=c.join(";"),this.cRecords=b.length,b.join("")},sendPingBack:function(){f(function(a){Q.log.server({type:"gengxintixingv14",jsuid:Q.cookie.get("QC006"),flshuid:Q.cookie.get("QC005"),weid:a,flag:"recstrongshow"},"http://msg.video.qiyi.com/tmpstats.gif")})}}})});
define("../../units/qidan",["../components/units/pageJob","../action/qidan","../components/action/checkDoms"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../action/qidan"),f=a("../components/action/checkDoms"),g="qidan";d.create(g,{getDependentDoms:function(){var a=Q.$("*[data-widget-qidan=qidan]"),b={widget:a,body:a?a.down("*[data-qidan-elem=body]"):null,title:a?a.down("*[data-qidan-elem=title]"):null,icon:a?a.down("*[data-qidan-elem=icon]"):null,num:a?a.down("*[data-qidan-elem=num]"):null,qidanCon:a?a.down("*[data-qidan-elem=qidancon]"):null,infoLabel:a?a.down("*[data-qidan-elem=infolabel]"):null,infoLabelText:a?a.down("*[data-qidan-elem=infolabeltext]"):null,importLabelText:a?a.down("*[data-qidan-elem=importlabeltext]"):null,btnImport:a?a.down("*[data-qidan-elem=btnimport]"):null,noTipBtn:a?a.down("*[data-qidan-elem=notipbtn]"):null,noQidanCon:a?a.down("*[data-qidan-elem=noqidancon]"):null,closeInfoBtn:a?a.down("*[data-qidan-elem=closebtn]"):null};return b},check:function(a){var b=!0;return f(a),b},init:function(){var a=new e({doms:this.getDependentDoms()});a.init()}}),d.add(g)});
define("../../action/qidan",["../components/action/widget","../model/qidanModel","../view/qidanView","../kit/qidan","../model/parseItem","../kit/userInfo","../kit/period","../kit/loadDivPingback"],function(a,b,c){var d=a("../components/action/widget"),e=a("../model/qidanModel"),f=a("../view/qidanView"),g=a("../kit/qidan"),h=a("../model/parseItem"),i=a("../kit/userInfo"),j=a("../kit/period").create(),k=a("../kit/loadDivPingback");c.exports=Q.Class("Qidan",{extend:d,construct:function(a){a=a||{},a.model=a.model||new e({selfItem:h.updateRecordInfoParse}),a.view=a.view||new f(a),this.callsuper(a)},properties:{events:{noTipBtnClick:function(a){Q.event.customEvent.fire({type:"noUpdateRecords",e:a.data.e})},onDisplay:function(a){function c(){var a=b._model.get().data.length!==0?"updatenotifydivshowhasdata":"updatenotifydivshownodata";b._view.sendPingbackV1({act:a})}var b=this;g.needRefresh()?(j.begin(),g.refresh(function(){c(),j.end(function(a){k.send("qidan",a)})},function(){c()})):c(),Q.event.customEvent.fire({type:"updateRecordsShow",data:{}})},btnImportClick:function(a){g.loginImport()},btnItemDelClick:function(a){var b=a.data,c=parseInt(b.dsid,10);delete b.dsid,c==1?g.delVideo(1,a.data):c==2?g.delVideo(2,a.data):c===0&&g.delVideo(3,a.data)}}},methods:{init:function(){function b(){var a=g.getSwKeysCount();return a?!0:!1}var a=this;Q.event.customEvent.on("navOneShow",function(){a._view.hide()}),Q.event.customEvent.on("suggestShow",function(){a._view.hide()}),Q.event.customEvent.on("hideHeaderBoxFromVipHeader",function(){a._view.hide()}),Q.event.customEvent.on("playHistoryShow",function(){a._view.hide()}),Q.event.customEvent.on("showUserCenterBox",function(){a._view.hide()}),Q.event.customEvent.on("pcLoginBoxShow",function(){a._view.hide()}),Q.event.customEvent.on("login",function(){b()?a._view.showTip(!0,!0):a._view.showTip(!0,!1),g.reset(),g.refresh()}),Q.event.customEvent.on("logout",function(){a._view.showTip(!1,!0),g.reset(),g.refresh()}),i.isLogin()?b()?a._view.showTip(!0,!0):a._view.showTip(!0,!1):a._view.showTip(!1,!0),this.syncSet(g.get()),g.on("qidanDataChange",function(b){a.syncSet(b.data.data),a._view.setIcon(g.getDataCount())})},syncSet:function(a){var b=this._model.set(a);this._view.update(b)}}})});
define("../../model/qidanModel",["../components/model/model","../kit/userInfo"],function(a,b,c){var d=a("../components/model/model"),e=a("../kit/userInfo");c.exports=Q.Class("QidanModel",{extend:d,construct:function(a){this.callsuper(a)},properties:{urlParams:"type=phtr2divstat20121204&flashvars=videoIsFromQidan%3Dupdateitemviewclk&act=updateitemviewclk&jsuid="+Q.cookie.get("QC006")+"&flshuid="+Q.cookie.get("QC005")+"&ppuid="+e.getUid()},methods:{init:function(a){this.callsuper("init",a)},set:function(a){var b=a,c=[];if(a.data&&a.data.length)for(var d=0;d<a.data.length;d++)c.push(this._format(a.data[d]));return b.data=c,this._data=b,this._data},_format:function(a){return this._formatName(a),this._formatUrl(a),this._formatUpdateTitle(a),this.selfItem&&typeof this.selfItem=="function"&&this.selfItem(a),a},_formatName:function(a){a.dsid==2?a.title=a.videoName:a.channelId==6||a.channelId==14?a.title=a.sourceName:a.channelId==10?a.reminder?a.title=a.reminder.tvName:a.title=a.albumName:a.title=a.albumName},_appendParam:function(a,b){var c=Q.url.parse(a),d=c.protocol+"://"+c.host+c.path,e=a.replace(d,""),f="";return e.indexOf("?")===0&&(f=e.substr(1)),f&&f.length&&(b=f+"&"+b),d+"?"+b},_formatUrl:function(a){var b=null;if(a.dsid===0){if(a.channelId==1)b=a.videoUrl;else if(a.channelId==2||a.channelId==3||a.channelId==4||a.channelId==7)b=a.videoUrl,b||(b=a.reminder.vurl);else if(a.channelId==6||a.channelId==14||a.channelId==10)b=a.reminder.vurl,b||(b=a.videoUrl);b?a.updateCurrentUrl=this._appendParam(b,this.urlParams):a.updateCurrentUrl="javascript:void(0)",a.videoUrl?a.updateVideoUrl=this._appendParam(a.videoUrl,this.urlParams):a.updateVideoUrl=a.updateCurrentUrl,a.channelId==10&&(a.updateVideoUrl=a.updateCurrentUrl)}else if(a.dsid==1){if(a.channelId==1)b=a.videoUrl;else if(a.channelId==2||a.channelId==3||a.channelId==4||a.channelId==7)a.reminder?(b=a.videoUrl,b||(b=a.reminder.vurl)):b=a.videoUrl;else if(a.channelId==6||a.channelId==14||a.channelId==10)a.reminder?(b=a.reminder.vurl,b||(b=a.videoUrl)):b=a.videoUrl;b?a.updateCurrentUrl=this._appendParam(b,this.urlParams):a.updateCurrentUrl="javascript:void(0)",a.videoUrl?a.updateVideoUrl=this._appendParam(a.videoUrl,this.urlParams):a.updateVideoUrl=a.updateCurrentUrl,a.channelId==10&&(a.updateVideoUrl=a.updateCurrentUrl)}else a.dsid==2&&(a.updateVideoUrl=this._appendParam(a.videoUrl,this.urlParams),a.updateCurrentUrl=a.updateVideoUrl)},_formatUpdateTitle:function(a){if(a.dsid===0)if(a.channelId==1)a.updateTitle="付费电影转免费";else if(a.channelId==2||a.channelId==3||a.channelId==4)a.updateTitle="看到"+(a.videoOrder<a.reminder.mpd?a.videoOrder:a.reminder.mpd)+"集/更新至"+a.reminder.mpd+"集";else if(a.channelId==6||a.channelId==14){var b=a.reminder.mpd+"";a.updateTitle=b.length==8?"更新至"+b.substring(0,4)+"-"+b.substring(4,6)+"-"+b.substring(6,8)+"期":b}else a.channelId==10?a.reminder.cid==1?a.updateTitle="电影正片新上映":a.updateTitle="":a.channelId==7?a.updateTitle="娱乐事件新进展":a.updateTitle="";else if(a.dsid==1)if(a.channelId==1)a.updateTitle="订阅内容更新";else if(a.channelId==2||a.channelId==3||a.channelId==4)a.reminder?a.videoPlayTime===null?a.updateTitle="更新至"+a.reminder.mpd+"集":a.videoPlayTime===0?a.updateTitle="已看完":a.updateTitle="看到"+(a.videoOrder<a.reminder.mpd?a.videoOrder:a.reminder.mpd)+"集/更新至"+a.reminder.mpd+"集":a.videoPlayTime===0?a.updateTitle="已看完":a.updateTitle="已订阅";else if(a.channelId==6||a.channelId==14)if(a.reminder)if(a.videoPlayTime===0)a.updateTitle="已看完";else{var c=a.reminder.mpd+"";a.updateTitle=c.length==8?"更新至"+c.substring(0,4)+"-"+c.substring(4,6)+"-"+c.substring(6,8)+"期":c}else a.videoPlayTime===0?a.updateTitle="已看完":a.updateTitle="已订阅";else a.channelId==10?a.reminder?a.reminder.cid==1?a.updateTitle="订阅内容更新":a.reminder.cid==2&&(a.videoPlayTime===null?a.updateTitle="更新至"+a.reminder.mpd+"集":a.videoPlayTime===0?a.updateTitle="已看完":a.updateTitle="看到"+(a.videoOrder<a.reminder.mpd?a.videoOrder:a.reminder.mpd)+"集/更新至"+a.reminder.mpd+"集"):a.videoPlayTime===0?a.updateTitle="已看完":a.updateTitle="已订阅":a.channelId==7?a.updateTitle="娱乐事件新进展":a.updateTitle="已订阅";else if(a.dsid==2){var d=0;a.videoPlayTime&&(d=parseInt(a.videoPlayTime,10));var e=parseInt(a.videoDuration,10),f=0,g=0,h=0;if(a.videoPlayTime===null)f=parseInt(e/3600,10),g=parseInt(e%3600/60,10),h=e%60,a.updateTitle="片长",f>0&&(a.updateTitle+=Q.number.pad(f,2)+":"),a.updateTitle+=Q.number.pad(g,2)+":"+Q.number.pad(h,2);else if(d===0||d>=e*.7)a.updateTitle="已看完";else{d==-1&&(d=0);var i=e-d;f=parseInt(i/3600,10),g=parseInt(i%3600/60,10),h=i%60,a.updateTitle="剩余",f>0&&(a.updateTitle+=Q.number.pad(f,2)+":"),a.updateTitle+=Q.number.pad(g,2)+":"+Q.number.pad(h,2)}}}}})});
define("../../view/qidanView",["../components/view/widgetView","../action/underframe","../kit/getWebEventID","../config/siteDomain","../kit/userInfo","../units/compatible"],function(a,b,c){var d=a("../components/view/widgetView"),e=a("../action/underframe"),f=a("../kit/getWebEventID"),g=a("../config/siteDomain"),h=a("../kit/userInfo"),i=a("../units/compatible"),j=500,k=100;c.exports=Q.Class("QidanView",{extend:d,construct:function(a){this.callsuper(a)},properties:{liTpl:['<li index="{{index}}" tvid={{tvId}} channelId={{channelId}} albumId={{albumId}} sourceId={{sourceId}} dsid={{dsid}} style="position:relative;float:left;{{liWidth}}">','<div class="rectxt">','<span class="icoplay icojl-gx"></span>','<a curhref="{{updateVideoUrl}}" j-delegate="pingback_webevent" {{title}} style="cursor:pointer;width:{{titleWidth}}px;">{{shortTitle}}</a>','<span class="playing" style="cursor:pointer;width:{{updateTitleWidth}}px;float:{{spanFloat}};"><a href="{{updateCurrentUrl}}" j-delegate="pingback_webevent" style="width:100%; float:right;">{{updateTitle}}</a></span>','<span j-delegate="j-delItem" class="icojl-del" style="display:block;right:{{delBtnRight}};"></span>',"</div>","</li>"].join("")},methods:{init:function(a){this.callsuper("init",a),this._initIcon(),this._bindEvent();if(i){var b=this._doms.widget.down("*[data-qidan-elem=underframe]");(Q.browser.IE6||Q.browser.IE7)&&b&&b.hide()}},update:function(a){var b=this,c=this._doms.qidanCon,d=c.down("li"),e=0;if(d){var f=null;e=0,d.forEach(function(a){a=Q.$(a),f=b._handerObj[a.attr("index")],a.un("mouseenter",f.mouseEnter),a.un("mouseleave",f.mouseLeave),e++})}var g=a.data,h=[],i=this._doms.noQidanCon,j=!1;c.css("overflowX","hidden"),c.css("overflowY","hidden"),c.css("position","relative"),g.length?g.length<=6?c.css("height","200px"):g.length>10?(c.css("height","329px"),c.css("overflowY","auto"),j=!0):(c.css("height","auto"),Q.browser.IE6&&c.css("height",33*g.length-1+"px")):c.css("height","0px");if(g.length){for(e=0;e<g.length;e++)g[e].index=e,this._formatView(g[e],j),h.push(Q.plugins.Mustache.render(this.liTpl,g[e]));c.html(h.join("")),i.hide(),c.css("visibility","visible"),c.show(),d=c.down("li"),this._handerObj={},e=0;var k=null,l=null;d.forEach(function(a){a=Q.$(a),k=b._doInfoConMouseEnter.bind(b),l=b._doInfoConMouseLeave.bind(b),b._handerObj[a.attr("index")]={mouseEnter:k,mouseLeave:l},a.on("mouseenter",k),a.on("mouseleave",l),e++}),d.length>=6&&Q.$(d[d.length-1]).addClass("last")}else c.html(""),c.css("visibility","hidden"),c.css("display","none"),i.show();if(this._underFrame)try{this._underFrame.show()}catch(m){}},_escapeDBCString:function(a){var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);if(d==32){b+=String.fromCharCode(12288);continue}b+=a.charAt(c)}return b},_getStrWidth:function(a){var b=8,c=12,d=Q.string.getLength(a)-a.length,e=Q.string.getLength(a)-d*2;return d*c+e*b},_getShortTitle:function(a,b,c){var d=0,e=Q.string.getLength(a);e>c&&(e=c);for(var f=0;f<e;f++){if(this._getStrWidth(Q.string.truncate(a,f+1))>b)break;d=f+1}return Q.string.truncate(a,d)},_formatView:function(a,b){a.title=this._escapeDBCString(a.title);var c=223,d=17,e=2,f=18;a.updateTitleWidth=this._getStrWidth(a.updateTitle),b?a.titleWidth=c-d-a.updateTitleWidth:a.titleWidth=c-a.updateTitleWidth;var g=a.titleWidth-e;a.shortTitle=this._getShortTitle(a.title,g,f),Q.string.getLength(a.shortTitle)<Q.string.getLength(a.title)?a.title="title="+a.title:a.title="",Q.browser.IE6||Q.browser.IE7?(b?a.liWidth="width:256px;":a.liWidth="width:273px;",b?Q.browser.IE6&&(a.spanFloat="right",a.delBtnRight="0px"):Q.browser.IE6&&(a.delBtnRight="0px")):(a.spanFloat="right",a.delBtnRight="5px")},_doInfoConMouseEnter:function(a){a=Q.event.get(a),Q.$(a.currentTarget||a.target).addClass("selected")},_doInfoConMouseLeave:function(a){a=Q.event.get(a),Q.$(a.currentTarget||a.target).removeClass("selected")},showTip:function(a,b){var c=this._doms,d=c.infoLabelText,e=c.importLabelText,f=c.infoLabel.children();if(!b){for(var h=0;h<f.length;h++){var i=Q.$(f[h]);i.css("visibility","hidden"),i.css("display","block"),i.css("display","none")}c.infoLabel.css("display","none");return}c.infoLabel.show();for(var g=0;g<f.length;g++)Q.$(f[g]).css("visibility","visible"),Q.$(f[g]).show();a?d.css("display","none"):e.css("display","none")},_delItemEvt:function(a){a=a||window.event;var b=Q.$(a.target).parent("li"),c=b.attr("tvid"),d=b.attr("albumId"),e=b.attr("channelId"),f=b.attr("sourceId"),g=b.attr("dsid");this._sendPingbackV2({tvId:c,channelId:e}),this._ctrl.notice({type:"btnItemDelClick",data:{tvId:c,channelId:e,sourceId:f,albumId:d,dsid:g}})},sendPingbackV1:function(a){f(function(b){Q.log.server({type:"phtr2divstat20121204",act:a.act,jsuid:Q.cookie.get("QC006"),flshuid:Q.cookie.get("QC005"),weid:b,ppuid:h.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})},_sendPingbackV2:function(a){f(function(b){var c=/ipad/.test(navigator.userAgent.toLowerCase())?21:Q.browser.android||Q.browser.iPhone?31:11,d=c==11?Q.cookie.get("QC005"):Q.cookie.get("QC006"),e="";for(var f=0;f<32;f++)e+=Math.floor(Math.random()*10);var g=parseInt(Math.random()*0x45c1e2ff69ea100,10);Q.log.server({c1:a.channelId,s1:window.location.href,r:a.tvId,e:e,se:b,u:d,pu:h.getUid(),rn:g,a:26,pf:1,p:10,p1:101,p2:1014,t:5},"http://msg.iqiyi.com/b")})},_bindEvent:function(){var a=this,b=this._doms,c=b.widget,d=Q.browser.iPad?"click":"mouseover";c.on(d,function(b){a._clearHideTimer(),a._createShowTimer()}),Q.browser.iPad?(Q.$("body").on("touchstart",function(b){a._clearShowTimer(),a._createHideTimer()}),c.on("touchstart",function(a){Q.event.get(a).stopPropagation()})):c.on("mouseleave",function(b){Q.event.get(b).preventDefault(),a._clearShowTimer(),a._createHideTimer()}),b.body.on(d,function(b){a._clearHideTimer(),a._createShowTimer()}),b.closeInfoBtn.on("click",function(b){Q.event.get(b).stop(),a.showTip(!1,!1)}),b.btnImport.on("click",function(b){Q.event.get(b).stop(),a.showTip(!1,!1),a._ctrl.notice({type:"btnImportClick",data:{e:Q.event.get(b)}})});var e=b.noTipBtn;e.on("click",function(b){Q.event.get(b).stop(),a._hideIcon(),a._ctrl.notice({type:"noTipBtnClick",data:{e:Q.event.get(b)}}),a.sendPingbackV1({act:"nonotifyclk"}),a._ctrl.notice({type:"noTip",data:{e:Q.event.get(b)}})}),b.qidanCon.delegate("pingback_webevent",function(a){Q.event.get(a).stop(),f(function(b){a=a||window.event;var c=Q.$(a.target||a.srcElement);location.href=c.attr("curhref")+"&weid="+b})}),b.qidanCon.delegate("j-delItem",this._delItemEvt.bind(this))},_initIcon:function(){var a=this._doms;a.num.html(0),a.icon.hide(),a.noTipBtn.hide()},setIcon:function(a){this._num!==undefined&&this._num!=a&&Q.cookie.remove("QC028",{duration:0,path:"/",domain:g.SITE_DOMAIN}),this._num=a;var b=this._doms;if(!Q.cookie.get("QC028")&&a>0){var c=a>99?"99+":a;b.num.html(c),b.icon.show(),b.noTipBtn.show()}else b.num.html(0),b.icon.hide(),b.noTipBtn.hide()},_hideIcon:function(){var a=this._doms;a.num.html(0),a.icon.hide(),a.noTipBtn.hide(),Q.cookie.set("QC028","true",{duration:0,path:"/",domain:g.SITE_DOMAIN})},_show:function(){var a=this,b=this._doms,c=b.widget;this._className||(this._className=c.attr("data-qidan-cls"),this._hoverClassName=this._className+"-hover",this._hoverClassName1=this._className+"Hover");if(!c.hasClass(this._hoverClassName)||!c.hasClass(this._hoverClassName1))c.addClass(this._hoverClassName),c.addClass(this._hoverClassName1),a._ctrl.notice({type:"onDisplay"});var d=b.body;if(!this._underFrame){var f=b.widget.down("*[data-qidan-elem=underframe]"),g=0;i?Q.browser.IE6||Q.browser.IE7?(f&&f.hide(),f=null):f&&f.show():g=25,this._underFrame=new e({elem:d,radius:5,target:f,distTop:g,distHeight:-3})}this._underFrame.show()},hide:function(){this._clearShowTimer(),this._clearHideTimer();var a=this._doms.widget;if(a.hasClass(this._hoverClassName)||a.hasClass(this._hoverClassName1))a.removeClass(this._hoverClassName),a.removeClass(this._hoverClassName1);this._underFrame&&this._underFrame.hide()},_createHideTimer:function(){if(!this._hideTimer){var a=this;this._hideTimer=setTimeout(function(){a.hide()},k)}},_clearHideTimer:function(){this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=null)},_createShowTimer:function(){if(!this._showTimer){var a=this;this._showTimer=setTimeout(function(){a._show()},j)}},_clearShowTimer:function(){this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null)}}})});
define("../../kit/qidan",["../interfaces/qidanInterface","./eventPlugin","./userInfo"],function(a,b,c){var d=a("../interfaces/qidanInterface"),e=a("./eventPlugin"),f=a("./userInfo"),g=Q.Class("Qidan",{construct:function(a){this._data={data:[],keys:{},count:0,initSwKeys:{},swKeys:{}}},plugins:[new e],methods:{init:function(){this._fetch()},_getKeys:function(a){var b={};for(var c=0;c<a.length;c++){var d=this._getQidanKey(a[c]);b[d]=d}return b},_getQidanKey:function(a){var b="";return a.dsid==1?b=this.getKey(1,a):a.dsid==2?b=this.getKey(2,a):b=this.getKey(3,a),b},getKey:function(a,b){var c="",d=this._getAlbumIdKey(b)+this._getChannelIdKey(b)+this._getSourceIdKey(b)+this._getTvIdKey(b);if(a==1){c+="subscribe";var e=b.channelId;e==6?c+=this._getSourceIdKey(b):e==2||e==3||e==4?c+=this._getAlbumIdKey(b):c+=d}else a==2?(c+="watchlater",c+=this._getTvIdKey(b)):a==3?(c+="update",c+=d):c+=d;return c},_getAlbumIdKey:function(a){var b="aid";return a.hasOwnProperty("albumId")?b+=a.albumId:b+="0",b},_getSourceIdKey:function(a){var b="sid";return a.hasOwnProperty("sourceId")?b+=a.sourceId:b+="0",b},_getTvIdKey:function(a){var b="tid";return a.hasOwnProperty("tvId")?b+=a.tvId:b+="0",b},_getChannelIdKey:function(a){var b="cid";return a.hasOwnProperty("channelId")?b+=a.channelId:b+="0",b},_fetch:function(a,b,c){this._nextFetchTimer&&(clearTimeout(this._nextFetchTimer),this._nextFetchTimer=null);var e=navigator.userAgent.toLowerCase(),g=/ipad/.test(e)?21:Q.browser.android||Q.browser.iPhone?31:11,h=g==11?Q.cookie.get("QC005"):g==21||g==31?Q.cookie.get("QC006"):null,i=new d,j="loginGetQidan",k=f.isLogin();k||(j="unLoginGetQidan");var l=this;i[j].call(i,{terminalId:g,ckuid:h,limit:20,cb:"cb_"+Math.floor(Math.random()*2147483648).toString(36)},function(d){if(d.code=="A00000"){l._data.data=d.data.data,l._data.data||(l._data.data=[]),l._data.keys=l._getKeys(l._data.data),l._data.count=d.data.qidan_cnt;var e={},f=[];d.data.dingyue&&(f=d.data.dingyue);for(var g=0;g<f.length;g++){var h=l.getKey(1,f[g]);e[h]=h}var i=[];d.data.watchlater&&(i=d.data.watchlater);for(var j=0;j<i.length;j++){var m=l.getKey(2,i[j]);e[m]=m}l._data.swKeys=e,l._data.initSwKeys=Q.object.extend({},e),a&&a(d),c||l._notify(),l._nextFetchTimer=setTimeout(function(){l._fetch()},18e5)}else{var n="";d.code=="A00001"?k?n="用户未登录!":n="cookie id 不存在!":d.code=="A01011"&&(n="查询失败!"),Q.log.log(n),b&&b(d)}})},_del:function(a,b,c,e){var g=new d,h="loginDel";a==3&&(h="loginDelUpdate");var i=f.isLogin();i||(h="unLoginDel",a==3&&(h="unLoginDelUpdate"));var j=this,k=this.getKey(a,b);a!=3?(b.tvId&&(b.tvIds=b.tvId,delete b.tvId),a==1&&(b.tvIds="")):b={tvId:b.tvId},Q.object.extend(b,{cb:"cb_"+Math.floor(Math.random()*2147483648).toString(36)}),g[h].call(g,b,function(a){if(a.code=="A00000"){var b=j._data.data;for(var d=0;d<b.length;d++)if(j._getQidanKey(b[d])==k){b.splice(d,1),j._data.count--;break}j._data.data=b,j._data.keys=j._getKeys(b),delete j._data.initSwKeys[k],delete j._data.swKeys[k],c&&c(a)}else{var f="";a.code=="A00001"?i?f="用户未登录!":f="cookie uid 不存在!":a.code=="A01011"?f="请求删除失败!":a.code=="A01001"?f="缺少tvId!":a.code=="A01002"&&(f="tvId格式不对!"),Q.log.log(f),e&&e(a)}})},_add:function(a,b,c,e){var g=new d,h="loginAdd",i=f.isLogin();i||(h="unLoginAdd");var j=this,k={cb:"cb_"+Math.floor(Math.random()*2147483648).toString(36)};Q.object.extend(k,b),a==1&&(k.tvId=""),g[h].call(g,k,function(a){a.code=="A00000"?c&&c(a):e&&e(a)})},_clear:function(a,b){var c=new d,e="loginAllDel",g=f.isLogin();g||(e="unLoginAllDel");var h=this;c[e].call(c,{},function(c){if(c.code=="A00000")h._data.data=[],h._data.keys={},a&&a(c);else{var d="";c.code=="A00001"?g?d="用户未登录!":d="cookie uid 不存在!":c.code=="A01011"&&(d="请求删除失败!"),Q.log.log(d),b&&b(c)}})},_notify:function(){this.fire({type:"qidanDataChange",data:{data:this.get()}})},_getPropertyCount:function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},set:function(a){this._data=a},get:function(){return this._data},reset:function(){this.set({data:[],keys:{},count:0,swKeys:{},initSwKeys:{}}),this._notify()},getKeysCount:function(){return this._getPropertyCount(this._data.keys)},getSwKeysCount:function(){return this._getPropertyCount(this._data.swKeys)},refresh:function(a,b,c){this._fetch(a,b,c)},needRefresh:function(){var a=this.get(),b=a.keys,c=a.data;if(this.getKeysCount()!=c.length||this.getSwKeysCount()!=this._getPropertyCount(this._data.initSwKeys))return!0;for(var d=0;d<c.length;d++)if(b[this._getQidanKey(c[d])]===undefined)return!0;for(var e in this._data.initSwKeys)if(this._data.swKeys[e]===undefined)return!0;return!1},getDataCount:function(){var a=this._data.count;for(var b in this._data.initSwKeys)this._data.swKeys[b]===undefined&&a--;for(var c in this._data.swKeys)this._data.initSwKeys[c]===undefined&&a++;return a},setVideoAdd:function(a,b){var c=this.get(),d=c.keys,e=c.swKeys,f=this.getKey(a,b);d[f]=f,c.keys=d,e[f]=f,c.swKeys=e,this.set(c),this._notify()},setVideoDel:function(a,b){var c=this.get(),d=c.keys,e=c.swKeys,f=c.initSwKeys,g=this.getKey(a,b);d.hasOwnProperty(g)&&(delete d[g],c.count--),c.keys=d,delete e[g],c.swKeys=e,delete f[g],c.initSwKeys=f,this.set(c),this._notify()},delVideo:function(a,b,c,d){var e=this;this._del(a,b,function(a){c&&c(a),e._notify(),e.getKeysCount()<20&&e.refresh(function(){},function(){},!0)},d)},addVideo:function(a,b,c,d){var e=this;this._add(a,b,function(d){c&&c(d),e.setVideoAdd(a,b)},d)},clear:function(a,b){var c=this;this._clear(function(b){a&&a(b),c._notify()},b)},loginImport:function(a,b){var c=this;(new d).loginImport({cb:"cb_"+Math.floor(Math.random()*2147483648).toString(36)},function(d){d.code=="A00000"?(c.refresh(),a&&a(d)):b&&b(d)})}}}),h=new g;h.init(),c.exports=h});
define("../../interfaces/qidanInterface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface"),e="http://lwl.iqiyi.com",f="http://nlwl.iqiyi.com",g="http://i.iqiyi.com";c.exports=Q.Class("QidanInterface",{construct:function(){this._remoteInterface=new d({loginAdd:{url:e+"/apis/watchlater/saveqidanitem",struct:{code:{type:"string"},data:{type:"object"}}},loginDel:{url:e+"/apis/watchlater/deleteqidanitem",struct:{code:{type:"string"},data:{type:"object"}}},loginDelUpdate:{url:"http://l.rcd.iqiyi.com/apis/qiyirc/updaterc",struct:{code:{type:"string"},data:{type:"object"}}},loginAllDel:{url:e+"/apis/watchlater/deleteAll",struct:{code:{type:"string"},data:{type:"object"}}},loginFetch:{url:e+"/apis/watchlater/getqidanlistforpage",struct:{code:{type:"string"},data:{type:"object"}}},loginGetQidan:{url:"http://l.rcd.iqiyi.com/apis/qiyirc/getqd",struct:{code:{type:"string"},data:{type:"object",struct:{data:{type:"array"},qidan_cnt:"number"}}}},unLoginAdd:{url:f+"/apis/uwl/saveqidanitem",struct:{code:{type:"string"},data:{type:"object"}}},unLoginDel:{url:f+"/apis/uwl/deleteqidanitem",struct:{code:{type:"string"},data:{type:"object"}}},unLoginDelUpdate:{url:"http://nl.rcd.iqiyi.com/apis/urc/updaterc",struct:{code:{type:"string"},data:{type:"object"}}},unLoginAllDel:{url:f+" /apis/uwl/deleteAll",struct:{code:{type:"string"},data:{type:"object"}}},unLoginFetch:{url:f+"/apis/uwl/getqidanlistforpage",struct:{code:{type:"string"},data:{type:"object"}}},unLoginGetQidan:{url:"http://nl.rcd.iqiyi.com/apis/urc/getqd",struct:{code:{type:"string"},data:{type:"object",struct:{data:{type:"array"},qidan_cnt:"number"}}}},loginImport:{url:e+"/apis/uwl/merge",struct:{code:{type:"string"},data:{type:"object"}}},clearClosedAlbumUpdate:{url:g+"/apis/clearClosedAlbums.action",struct:{code:{type:"string"},data:{type:"object"}}},fetchAlbumUpdate:{url:g+"/pages/myqidan/showAlbumUpdate.action",struct:{code:{type:"string"},data:{type:"object"}}},clearWatchLater:{url:g+"/apis/clearWatchlater.action",struct:{code:{type:"string"},data:{type:"object"}}},fetchWatchLater:{url:g+"/pages/myqidan/watchlater.action",struct:{code:{type:"string"},data:{type:"object"}}},fetchHotQidan:{url:g+"/pages/myqidan/hotQidan.action",struct:{code:{type:"string"},data:{type:"object"}}},fetchRecommend:{url:g+"/pages/myqidan/recommand.action",struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{_request:function(a,b,c,d,e,f){var g={ifname:a,param:b,encodeFn:function(a){return encodeURIComponent(a)}};d&&(g.method=d),e&&(g.encodeFn=e),f&&(g.spliter=f),b.hasOwnProperty("timeout")&&(g.timeout=b.timeout,delete b.timeout),this._remoteInterface.send(g,function(a){c&&c(a)})},loginAdd:function(a,b){this._request("loginAdd",a,b,"POST")},loginDel:function(a,b){this._request("loginDel",a,b,"POST")},loginDelUpdate:function(a,b){this._request("loginDelUpdate",a,b,"GET")},loginAllDel:function(a,b){this._request("loginAllDel",a,b,"GET")},loginFetch:function(a,b){this._request("loginFetch",a,b,"GET")},loginGetQidan:function(a,b){this._request("loginGetQidan",a,b,"GET",null,"0")},unLoginAdd:function(a,b){this._request("unLoginAdd",a,b,"POST")},unLoginDel:function(a,b){this._request("unLoginDel",a,b,"POST")},unLoginDelUpdate:function(a,b){this._request("unLoginDelUpdate",a,b,"GET")},unLoginAllDel:function(a,b){this._request("unLoginAllDel",a,b,"GET")},unLoginFetch:function(a,b){this._request("unLoginFetch",a,b,"GET")},unLoginGetQidan:function(a,b){this._request("unLoginGetQidan",a,b,"GET",null,"0")},loginImport:function(a,b){this._request("loginImport",a,b,"POST")},clearClosedAlbumUpdate:function(a,b){this._request("clearClosedAlbumUpdate",a,b,"GET")},fetchAlbumUpdate:function(a,b){this._request("fetchAlbumUpdate",a,b,"GET")},clearWatchLater:function(a,b){this._request("clearWatchLater",a,b,"GET")},fetchWatchLater:function(a,b){this._request("fetchWatchLater",a,b,"GET")},fetchRecommend:function(a,b){this._request("fetchRecommend",a,b,"GET")},fetchHotQidan:function(a,b){this._request("fetchHotQidan",a,b,"GET")}}})});
define("../../units/qidanadd",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../kit/qidan","../action/qipaLogin"],function(a,b,c){var d=a("../components/units/pageJob"),e="qidanAdd",f=a("../components/action/checkDoms"),g=a("../kit/userInfo"),h=a("../kit/qidan"),i=a("../action/qipaLogin");d.create(e,{getDependentDoms:function(){var a={dependent:Q.$("*[data-widget-qidan=qidan]")};return a},check:function(a){return Q.browser.iPad?!1:(f(a),!0)},init:function(){var a=this;Q.event.customEvent.on("qidan_add_renderDone",function(b){if(b.data.wrapper){var c=b.data.wrapper.down("[data-widget-qidanadd]");a.initWidget(c)}});var b=Q.$("[data-widget-qidanadd]");b&&this.initWidget(b),a.sourceDesc={later:"加入奇单",vipLater:"加入奇单。会员/付费视频，可免费观看6分钟",added:"已添加至奇单",noLogin:"添加失败，未登录用户只能保存10条待看记录，马上登录。",addFail:"添加失败，请再试一次"}},initWidget:function(a){var b=this;a.forEach(function(a,c){var d=Q.$(a),e=b.getParam(d);if(!e.tvId&&!e.albumId&&!e.sourceId)return!1;d.on("mouseover",function(a){b.qidanAddHover(a,this)}),d.on("mouseout",function(a){b.qidanAddLeave(a,this)})})},addTrigger:function(a){var b=this,c=a.down("[data-qidanadd-ele=sub]");c||a.html("AFTERBEGIN",'<p data-qidanadd-ele="sub" class="video_brooch video_brooch-default"></p>'),a.attr("data-qidanadd-in")||(a.attr("data-qidanadd-in",1),a.down('[data-qidanadd-ele="sub"]').on("click",function(c){b.clickIcon(c,a)}))},getParam:function(a){var b=["tvId","albumId","channelId","sourceId"],c={};for(var d=0,e=b.length;d<e;d++){var f=a.attr("data-qidanadd-"+b[d].toLowerCase());f&&(c[b[d]]=f)}return c},displayHideIcon:function(a,b){var c=b.down('[data-qidanadd-ele="definition"]');if(!c)return;a=="hide"?c.hide():a=="show"&&c.show()},qidanAddHover:function(a,b){var c=this;b=Q.$(b);if(b.contains(a.relatedTarget||a.fromElement))return!1;this.getWenan(b),this.addTrigger(b);if(!b.hasClass("hover")){b.addClass("hover"),this.displayHideIcon("hide",b);var d=b.attr("data-qidanadd-vip"),e=b.attr("data-qidanadd-episode")==1?1:2,f=b.down('[data-qidanadd-ele="sub"]');if(f){var g=this.getParam(b),h="video_brooch-confirm";this.isExist(e,g)?(b.attr("data-qidanadd-status",1),f.addClass(h),f.attr("title",this.desc.added)):(b.attr("data-qidanadd-status",0),d==1?f.attr("title",this.desc.vipLater):f.attr("title",this.desc.later),f.removeClass(h))}}},qidanAddLeave:function(a,b){b=Q.$(b);if(b.contains(a.relatedTarget||a.toElement))return!1;this.displayHideIcon("show",b),b.removeClass("hover")},getWenan:function(a){this.desc={},Q.object.extend(this.desc,this.sourceDesc);var b=a.attr("data-qidanadd-unaddtip"),c=a.attr("data-qidanadd-addedtip");b&&(this.desc.later=b==="0"?"":b),c&&(this.desc.added=c==="0"?"":c)},addDeleteQidan:function(a){var b=this,c=this.getParam(a);c.terminalId=Q.browser.iPad?21:Q.browser.android||Q.browser.iPhone?31:11,this.getWenan(a);var d=a.attr("data-qidanadd-episode")==1?1:2,e="",f="",h=a.down('[data-qidanadd-ele="sub"]');a.attr("data-qidanadd-status")!=1?(e=function(){a.attr("data-qidanadd-status",1),h.attr("title",b.desc.added),h.addClass("video_brooch-confirm")},f=function(a){if(a.code=="A01011"){if(!g.isLogin()){i.openLoginWindow({btnId:"overlimit"},function(){});return}h.attr("title",b.desc.noLogin)}else h.attr("title",b.desc.addFail)},this.handleQidan("add",d,c,e,f)):(e=function(c){c.name=a.attr("data-widget-qidanadd"),Q.event.customEvent.fire({type:"qidanadd-del",data:c}),a.attr("data-qidanadd-status",0),h.attr("title",b.desc.later),h.removeClass("video_brooch-confirm")},this.handleQidan("del",d,c,e))},clickIcon:function(a,b){Q.event.get(a).stop(),b=Q.$(b);if(!g.isLogin()&&b.attr("data-qidanadd-episode")==1){i.openLoginWindow({},function(){});return}this.addDeleteQidan(b)},handleQidan:function(a,b,c,d,e){a=="add"?h.addVideo(b,c,d,e):a=="del"&&h.delVideo(b,c,d,e)},isExist:function(a,b){var c=h.get(),d=h.getKey(a,b);return c.swKeys[d]?!0:!1}}),d.add(e)});
define("../../units/creditRecord",["../config/siteDomain","../kit/getWebEventID","../components/units/pageJob","../kit/userInfo","../kit/anim","../interfaces/apiCredit_creditTipInterface","../interfaces/apiCredit_briefInterface","../components/action/floater","../components/view/floaterCustomView","../interfaces/userEventInterface","../kit/iframeLocation"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"units/creditRecord"}),e=a("../config/siteDomain"),f=a("../kit/getWebEventID"),g=a("../components/units/pageJob"),h=a("../kit/userInfo"),i=a("../kit/anim"),j=a("../interfaces/apiCredit_creditTipInterface"),k=a("../interfaces/apiCredit_briefInterface"),l=a("../components/action/floater"),m=a("../components/view/floaterCustomView"),n=a("../interfaces/userEventInterface"),o=a("../kit/iframeLocation"),p,q,r,s,t,u=Q.plugins.clearSwf,v=[{key:"creditBirthday",info:"今天是您的生日。爱奇艺祝您生日快乐"},{key:"creditRegisterday",info:"今天是您注册爱奇艺周年纪念日"},{key:"creditRegister",info:"成功注册爱奇艺"},{key:"creditLogin",info:"登录爱奇艺"},{key:"creditVideo",info:"观看视频"},{key:"creditAdd",info:"签到"},{key:"creditAd",info:"观看广告"}],w=['<div class="no-login1114"><div class="no-login1114pop">','<span class="no-loginarrow"></span>','<a href="javascript:void(0)" class="shut-btn" data-credit-tip="closebtn"></a>','<p data-credit-tip="info"></p>',"</div></div>"].join(""),x=1e3,y=['<div class="point_add1121">','<div class="point_add1121_cont">','<span class="p_aleft"></span>','<em class="p_aright" data-credit-flytip="info">积分+1</em>',"</div>","</div>"].join("");g.create("creditRecord",{check:function(){return!0},init:function(){p=Q.$("#widget-credit")||Q.$("body"),q=p.down("*[data-credit=tip]"),r=p.down("*[data-credit=flytip]"),s=p.down("*[data-widget-score=name]"),t=p.down("*[data-widget-score=score]");var a=this;a.displayNameFirst=s.css("display"),a.displayScoreFirst=t.css("display"),t.hide(),Q.event.customEvent.on("swf_uploadJiFenResult",function(b){(b==1||b=="1")&&a.setCreditNum()}),Q.event.customEvent.on("login",function(b){a.numCon&&a.numCon.html("加载中..."),u&&u.on("ready",function(){Q.player.loadSuccess||u.get().uploadJiFen()}),window.setTimeout(function(){a.setCreditNum()},1e3),a.changeCreditUrl()}),Q.event.customEvent.on("logout",function(b){a.setCreditNum(),a.changeCreditUrl()}),Q.event.customEvent.on("creditNumChanged",function(b){a.setCreditNum()}),this.iFace=new j,this.timer=window.setInterval(function(){a.getTipInfo({from:"flash"})},18e5),window.setTimeout(function(){a.getTipInfo({from:"js_login"})},1e3),Q.event.customEvent.on("qianDaoEnd",function(b){b.data.d.data.creditAdd&&a.getTipInfoCallBack({code:"A00000",data:{creditAdd:b.data.d.data.creditAdd}})}),Q.event.customEvent.on("showUserCenterBox",function(){a.floater&&a.floater.hide()}),Q.event.customEvent.on("pcUserBoxDomReady",function(){a.numCon=p.down("*[data-credit=topcreditnumber]"),a.linkCon=p.down("*[data-credit=topcreditlink]"),a.setCreditNum(),a.changeCreditUrl(),a.pingbackCon=p.down("*[data-credit-num=pingback]"),a.bindPingBack()})},exec:function(){var a=this;if(h.isLogin()){var b=h.getUid(),c=Q.cookie.get("QC025");if(c){var d=c.split("-");if(b==d[0]){var e=Q.date.format(new Date,"yyyyMMdd");parseInt(e,10)>parseInt(d[1],10)&&(a.doOftenLoginToSetCookie({uid:b}),a.doOftenLoginAccess(),a.doFromJsLogin())}else a.doOftenLoginToSetCookie({uid:b}),a.doOftenLoginAccess(),a.doFromJsLogin()}else a.doOftenLoginToSetCookie({uid:b}),a.doOftenLoginAccess(),a.doFromJsLogin()}},_getCredit:function(a){var b=this,c=9999999,d=Q.string.divideNumber(c)+"+";h.isLogin()?(new k).request({},function(e){if(e.code=="A00000"){var f=e.data.creditRest>c?d:Q.string.divideNumber(e.data.creditRest);a&&(b.numCon.attr("title",Q.string.divideNumber(e.data.creditRest)),b.numCon.html(f)),Q.event.customEvent.fire({type:"apiCreditBriefInterfaceEnd",data:{num:e.data.creditRest,creditedNum:e.data.creditExpire,creditSoonNum:e.data.creditExpireSoon}})}}):Q.browser.iPad&&a?b.numCon&&b.numCon.html("0"):u.on("ready",function(){var a=u.get().getJiFen();if(b.numCon)if(!a)b.numCon.attr("title","0"),b.numCon.html("0");else{var e=a>c?d:Q.string.divideNumber(a);b.numCon.attr("title",Q.string.divideNumber(a)),b.numCon.html(e)}})},setCreditNum:function(){this.numCon?this._getCredit(!0):this._getCredit(!1)},changeCreditUrl:function(){var a=this.linkCon;a&&(h.isLogin()?a.attr("href","http://i.iqiyi.com/jifen?lefttitlesign=credit#type=phtr2divstat20121204&act=pointclk&jsuid="+Q.cookie.get("QC006")+"&flshuid="+Q.cookie.get("QC005")+"&ppuid="+h.getUid()):a.attr("href","http://www.iqiyi.com/common/wdjfwzz.html?lefttitlesign=credit#type=phtr2divstat20121204&act=pointclk&jsuid="+Q.cookie.get("QC006")+"&flshuid="+Q.cookie.get("QC005")+"&ppuid="+h.getUid()))},bindPingBack:function(){var a=this.pingbackCon;a&&a.on("click",function(b){b=Q.event.get(b),b.stop(),f(function(b){var c=a.attr("href")+"&weid="+b;o.href(c)})})},getTipInfo:function(a){if(h.isLogin())this.iFace.request({from:a.from},this.getTipInfoCallBack.bind(this));else{var b=this;u&&u.on("ready",function(){var a=u.get().getJiFen();a>0&&b.getTipInfoCallBack({code:"A00000",data:{creditVideo:a}})})}},getTipInfoCallBack:function(a){if(a.code=="A00000"&&a.data){var b=null,c=null;for(var d=0,e=v.length;d<e;d++){c=v[d].key,b=a.data[c];if(b){q&&r&&this.showTipTemp({key:c,num:b,info:v[d].info}),r&&this.showFlyTip({key:c,num:a.data,info:v[d].info}),s&&t&&this.showNameAndAcoreTip({key:c,num:a.data,info:v[d].info});break}}this.setCreditNum()}},showTipTemp:function(a){if(a.key=="creditBirthday"||a.key=="creditRegisterday")this.showTip(a);else{var b=h.isLogin()?h.getUid():"",c=Q.cookie.get("showCreditTip"+b),d=Q.cookie.get("showCreditTipTimes"+b)||0;d=parseInt(d,10),!c&&d<5&&(Q.cookie.set("showCreditTipTimes"+b,d+1,{expires:31536e6,path:"/",domain:e.SITE_DOMAIN}),Q.cookie.set("showCreditTip"+b,"true",{expires:864e5*(Math.random()*5+1),path:"/",domain:e.SITE_DOMAIN}),this.showTip(a))}},showTip:function(a){h.isLogin()?(this.showFloater(a),a.key==v[0].key||a.key==v[1].key?this.tipInfo.html(h.getName()+"，您好，"+a.info+"，并赠送您"+a.num+"个积分，可以用来抽奖、兑换奖品，快去看看吧"):this.tipInfo.html("恭喜您，"+a.info+"获取"+a.num+"个积分，积分可以抽奖、兑换奖品，快去试试运气吧")):Q.browser.CHROME||(this.showFloater(a),this.tipInfo.html("恭喜您，"+a.info+"获取"+a.num+"个积分，我们帮您暂时保存。登录后可以用积分抽奖、兑换奖品，快去看看吧&nbsp;&nbsp;"+'<a j-delegate="loginscroll" href="javascript:void(0)">请登录</a>'))},showFloater:function(a){if(!this.floater){var b=new l({view:new m({pos:function(){return{top:r.top()+r.height()-2,left:r.left()-32}},isResize:!0})});b.show({html:w});var c=b.getFloater().down("*[data-credit-tip=closebtn]");c&&c.on("click",this.hideTip.bind(this)),this.floater=b,this.tipInfo=b.getFloater().down("*[data-credit-tip=info]")}else this.floater.reShow();Q.event.customEvent.fire({type:"showCreditTip",data:{}})},hideTip:function(a){Q.event.get(a).stop(),this.floater.hide(),Q.event.customEvent.fire({type:"hideCreditTip",data:{}})},showFlyTip:function(a){if(a.key=="creditRegister"||a.key=="creditLogin"||a.key=="creditAdd"){if(!this.fFloater){var b=this.fTop=10,c=this.fLeft=-60,d=new l({view:new m({pos:function(){return{top:r.top()+r.height()+b,left:r.left()+c}},noOverflowHidden:!0})});d.show({html:y}),this.fFloater=d,this.flyTipInfo=d.getFloater().down("*[data-credit-flytip=info]")}else this.fFloater.reShow();var e=0;for(var f in a.num)e+=a.num[f];this.flyTipInfo.html("积分+"+e),this.anim()}},showNameAndAcoreTip:function(a){var b=this;if(a.key=="creditRegister"||a.key=="creditLogin"||a.key=="creditAdd"){var c=0;for(var d in a.num)typeof a.num[d]=="number"&&(c+=a.num[d]);b.showNameAnim({num:c})}},showNameAnim:function(a){var b=this,c=a.num;i({elem:s,style:"opacity",from:1,to:0,ease:"Linear",duration:500,done:function(){s.hide(),t.html("积分+"+c).css("display",b.displayNameFirst),i({elem:t,style:"opacity",from:0,to:1,ease:"Linear",duration:500,done:function(){setTimeout(function(){i({elem:t,style:"opacity",from:1,to:0,ease:"Linear",duration:500,done:function(){t.hide(),s.css("display",b.displayNameFirst),i({elem:s,style:"opacity",from:0,to:1,ease:"Linear",duration:500})}})},4e3)}})}})},anim:function(){var a=this;i({style:"top",elem:this.fFloater.getFloater(),from:r.top()+r.height()+this.fTop,to:r.top(),ease:"Linear",duration:x,done:function(){i({style:"left",elem:a.fFloater.getFloater(),from:r.left()+a.fLeft,to:r.left(),ease:"Linear",duration:x,done:function(){a.fFloater.hide()}}),i({style:"opacity",elem:a.fFloater.getFloater(),from:1,to:0,ease:"Linear",duration:x})}}),i({style:"opacity",elem:a.fFloater.getFloater(),from:0,to:1,ease:"Linear",duration:x})},doFromJsLogin:function(){var a=this;window.setTimeout(function(){a.getTipInfo({from:"js_login"})},2e3)},doOftenLoginAccess:function(){var a=this,b=new n;b.request({eventid:"first_logon"})},doOftenLoginToSetCookie:function(a){var b=this,c=a.uid+"-"+Q.date.format(new Date,"yyyyMMdd");Q.cookie.set("QC025",c,{expires:31536e6,path:"/",domain:e.SITE_DOMAIN})}}),g.add("creditRecord")});
define("../../interfaces/apiCredit_creditTipInterface",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("CreditTipInterFace",{construct:function(){this._remoteInterface=new d({apiCreditTipData:{url:"http://api.credit."+e.SITE_DOMAIN+"/services/credit/tip",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{}}}}})},methods:{request:function(a,b){a=a||{},a.cb="varName_apiCreditTipData",a.t=(new Date).getTime(),this._remoteInterface.send({ifname:"apiCreditTipData",param:a},function(c){b&&b(c,a)})}}})});
define("../../interfaces/apiCredit_briefInterface",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("CreditBriefInterFace",{construct:function(a){this._remoteInterface=new d({apiCreditBriefData:{url:"http://api.credit."+e.SITE_DOMAIN+"/services/credit/brief/",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{albumId:{type:"number",empty:!1}}}}}})},methods:{request:function(a,b){a=a||{},a.cb="varName_apiCreditBriefData",a.t=(new Date).getTime(),this._remoteInterface.send({ifname:"apiCreditBriefData",param:a},function(c){b&&b(c,a)})}}})});
define("../../interfaces/userEventInterface",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("UserEventInterFace",{construct:function(a){this._remoteInterface=new d({userEventData:{url:"http://api.credit."+e.SITE_DOMAIN+"/services/user/event",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1}}}})},methods:{request:function(a,b){a=a||{},a.eventid=a.eventid||"sign_up",a.pid=a.pid||"0",a.cid=a.cid||"0",a.cb="varName_userEventData",this._remoteInterface.send({ifname:"userEventData",param:a},function(a){b&&b(a)})}}})});
define("../../units/thirdPartyLogin",["../components/units/pageJob","../components/action/checkDoms","../kit/thirdPartLogin"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/thirdPartLogin"),g="thirdPartyLogin";d.create(g,{getDependentDoms:function(){return{}},check:function(){return e(this.getDependentDoms()),!0},init:function(){var a=this;Q.$(document).delegate("authLoginBtn",function(a){Q.event.get(a.event).preventDefault();var b=Q.event.get(a),c=Q.$(b.target),d=c.attr("data-sourceId");if(d){var e=c.attr("href");f.show(d,e)}})},exec:function(){}}),d.add(g)});
define("../../units/userInfoCenterMailSuggest",["../components/units/pageJob","../components/action/suggestCore","../action/mailSuggest","../model/mailSuggestModel","../view/mailSuggestView","../components/action/input","../components/model/inputModel","../components/view/inputView","../components/action/menu","../components/model/menuModel","../components/view/menuView"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"units/userInfoCenterMailSuggest"}),e=a("../components/units/pageJob"),f=a("../components/action/suggestCore"),g=a("../action/mailSuggest"),h=a("../model/mailSuggestModel"),i=a("../view/mailSuggestView"),j=a("../components/action/input"),k=a("../components/model/inputModel"),l=a("../components/view/inputView"),m=a("../components/action/menu"),n=a("../components/model/menuModel"),o=a("../components/view/menuView"),p=Q.$("*[data-widget-toplinefloater=blackFloater]"),q=function(a,b){b||(b=document.createElement("div"),b.className="mailType-box",document.body.insertBefore(b,null),b=Q.$(b));var c=Q.browser.iPad?"touchstart":"click";b.on(c,function(b){b=Q.event.get(b),b.stop();var c=Q.$(b.target),f=c.attr("data-index"),g=e.getItemByIndex(parseInt(f,10));g&&g.canselected!="false"&&(a.value(g.mail),d.blur(),r.hide(),Q.event.customEvent.fire({type:"mailSuggestHide",data:{input:a}}))}),Q.event.customEvent.on("hideUserCenterBox",function(){d.blur(),r.hide()}),Q.event.customEvent.on("showPlayHistoryBox",function(){d.blur(),r.hide()}),Q.event.customEvent.on("showUserCenterBox",function(){d.blur(),r.hide()}),Q.event.customEvent.on("showUpdateRecordBox",function(){d.blur(),r.hide()}),Q.event.customEvent.on("pcUserRegistLoginShow",function(){d.blur(),r.hide()}),Q.event.customEvent.on("bindAccountWrapperShow",function(){d.blur(),r.hide()}),Q.$(window).on("resize",function(a){p||q.fixPos()}),Q.$("body").on("click",function(b){b=Q.event.get(b),b.target!=a[0]&&(d.blur(),r.hide())}),b.on("mouseover",function(a){var b=Q.$(Q.event.get(a).target);if(b[0].nodeName.toLowerCase()!="li")return;var c=b.attr("data-index"),d=e.getItemByIndex(parseInt(c,0));d&&d.canselected!="false"&&b.addClass("focus")}),b.on("mouseout",function(a){var b=Q.$(Q.event.get(a).target);if(b[0].nodeName.toLowerCase()!="li")return;var c=b.attr("data-index"),d=e.getItemByIndex(parseInt(c,0));d&&d.canselected!="false"&&b.removeClass("focus")});var d=new j({model:new k,view:new l({doms:{input:a}})}),e=new m({model:new n,view:new o({doms:{wrapper:b},tpl:['<ul class="mailType-list">',"{{#items}}","{{#desc}}",'<li data-index="{{index}}" data-mailsuggest-elem="item">{{desc}}</li>',"{{/desc}}","{{#mail}}",'<li data-index="{{index}}" data-mailsuggest-elem="item">{{mail}}</li>',"{{/mail}}","{{/items}}","</ul>"].join("")})}),i=p?"true":"false",q=new g({model:new h({mails:["qq.com","163.com","126.com","sina.com","sina.cn","hotmail.com","gmail.com","yahoo.cn","139.com"],prompt:"请选择或继续输入...",max:4}),inputObject:d,menuObject:e,referenceElement:a.attr("data-mail-refresh")?a:a.parent(),autoPos:i}),r=new f({viewObject:q});r.init()};e.create("userInfoCenterMailSuggest",{check:function(){return!0},init:function(){Q.event.customEvent.on("pcUserRegDomReady",function(a){var b=a.data.input;b||(b=a.data.wrapper.down("*[data-elem=emailInput]")),p?q(b,a.data.wrapper):q(b)}),Q.event.customEvent.on("pcUserLoginDomReady",function(a){var b=a.data.input;b||(b=a.data.wrapper.down("*[data-elem=emailInput]")),p?q(b,a.data.wrapper):q(b)}),Q.event.customEvent.on("ppsAccountBindDomReady",function(a){var b=a.data.input;b||(b=a.data.wrapper.down("*[data-elem=emailInput]")),p?q(b,a.data.wrapper):q(b)})},exec:function(){}}),e.add("userInfoCenterMailSuggest")});
define("../../components/action/suggestCore",["./nonMVCWidget"],function(a,b,c){var d=a("./nonMVCWidget");c.exports=Q.Class("SuggestCore",{extend:d,construct:function(a){a=a||{},this.callsuper(a),this.viewObject=a.viewObject,this._input=this.viewObject.getInput(),this._menu=this.viewObject.getMenu()},methods:{init:function(){this.initEvt()},initEvt:function(){this._input.on("up",this.prev.bind(this)),this._input.on("down",this.next.bind(this)),this._input.on("esc",this.hide.bind(this)),this._input.on("enter",this.apply.bind(this)),this._input.on("input",this.input.bind(this)),this._input.on("tab",this.hide.bind(this)),this._input.on("focusin",this.show.bind(this)),this._menu.on("selected",this.selected.bind(this))},show:function(){this.viewObject.show()},hide:function(){this.viewObject.hide()},apply:function(a){Q.event.get(a.data.evt).stop(),this._menu.apply(),this._input.blur()},prev:function(a){Q.event.get(a.data.evt).stop(),this._menu.prev()},next:function(a){Q.event.get(a.data.evt).stop(),this._menu.next()},selected:function(a){this.viewObject.focus(a.data)},input:function(a){var b=this;this.viewObject.input(a.data)&&this.viewObject.getData(a.data.after,function(a){b._menu.redraw(a)})}}})});
define("../../action/mailSuggest",["../components/action/widget","../model/mailSuggestModel","../view/mailSuggestView"],function(a,b,c){var d=a("../components/action/widget"),e=a("../model/mailSuggestModel"),f=a("../view/mailSuggestView");c.exports=Q.Class("MailSuggest",{extend:d,construct:function(a){a=a||{},a.model=a.model||new e,a.view=a.view||new f(a),this.callsuper(a)},methods:{focus:function(a){this._view.focus(a)},input:function(){return!0},getData:function(a,b){var c=this._model.set({curStr:a});b(c.cacheData)},show:function(){this._view.show()},hide:function(){this._view.hide()},getInput:function(){return this._view._input},getMenu:function(){return this._view._menu},fixPos:function(){this._view.fixPos()}}})});
define("../../model/mailSuggestModel",["../components/model/model"],function(a,b,c){var d=a("../components/model/model");c.exports=Q.Class("MailSuggestModel",{extend:d,construct:function(a){a=a||{},this.callsuper(a),this._mails=a.mails||[],this._max=a.max||0,this._prompt=a.prompt||"",this._data.curStr=""},methods:{set:function(a){return this.callsuper("set",a),this.assemble(this.parseMail()),this._data},parseMail:function(){var a=this._mails.concat(),b=this._data.curStr.match(/(@)(.*)/);return b&&b[2]&&(a=a.filter(function(a){return a.indexOf(b[2])>-1})),this._max&&a.length>this._max&&(a.length=this._max),a},assemble:function(a){var b=a.concat(),c=this._data.curStr.replace(/@.*/,"");b.length&&(b=b.map(function(a,b){return{mail:c+"@"+a,canselected:"true"}}),this._data.curStr&&this._data.curStr!=b[0].mail&&b.unshift({mail:this._data.curStr,canselected:"true"}),this._prompt&&b.unshift({desc:this._prompt,canselected:"false"}),b.forEach(function(a,b){a.index=b})),this._data.cacheData=b}}})});
define("../../view/mailSuggestView",["../components/view/widgetView"],function(a,b,c){var d=a("../components/view/widgetView");c.exports=Q.Class("MailSuggestView",{extend:d,construct:function(a){this._input=a.inputObject,this._menu=a.menuObject,this._reference=a.referenceElement||this._input.getDom(),this.autoPos=a.autoPos||"false"},methods:{init:function(a){this.callsuper("init",a)},update:function(){},focus:function(a){var b=this,c=this._menu.getDom().down("*[data-mailsuggest-elem=item]");c.removeClass("selected"),c.forEach(function(d,e){e==a.index&&(Q.$(c[e]).addClass("selected"),a.ctrl!="refresh"&&b._input.val(a.item.mail))}),a.ctrl=="apply"&&(this.hide(),Q.event.customEvent.fire({type:"mailSuggestHide",data:{input:b._input.getDom()}}))},show:function(){if(this._show)return!1;this.autoPos==="false"?this._menu.show(this.getPosotion()):this.autoPos==="true"&&this._menu.show({}),this._show=!0},hide:function(){if(!this._show)return!1;var a=this;a._menu.hide(),a._show=!1},fixPos:function(){this._menu.pos(this.getPosotion())},getPosotion:function(){var a=this._reference,b=a.getPosition(),c=a.width(),d=a.height(),e=function(){var b=a,c,d;while(b[0]!==document.body)d=parseInt(b.css("zIndex"),10),!isNaN(d)&&(c===undefined||d>c)&&(c=d),b=b.parent();return c}();return{width:c+"px",zIndex:(e||0)+1,top:b.top+d+"px",left:b.left+"px",position:"absolute"}}}})});
define("../../components/action/input",["./widget","../../kit/eventPlugin"],function(a,b,c){var d=a("./widget"),e=a("../../kit/eventPlugin");c.exports=Q.Class("input",{extend:d,plugins:[new e],construct:function(a){a=a||{},this.callsuper(a)},properties:{events:{ctrlKey:function(a){this.fire({type:a.data.key,data:{evt:a.data.evt}})},checkInput:function(a){var b=this._model.get().cacheStr,c=this.compareValue(b,a.text);c||(this._model.set({cacheStr:a.text}),this._fireInput(b,a.text))},focusout:function(a){this.fire({type:"focusout",data:{evt:a.data.evt}})},focusin:function(a){this.fire({type:"focusin",data:{evt:a.data.evt}})}}},methods:{_fireInput:function(a,b){this.fire({type:"input",data:{before:a,after:b}})},val:function(a){return arguments.length&&this.syncSet({cacheStr:a}),this._model.get().cacheStr},compareValue:function(a,b){return a===b},getDom:function(){return this._view.getDom()},blur:function(){this.getDom()[0].blur()}}})});
define("../../components/model/inputModel",["./model"],function(a,b,c){var d=a("./model");c.exports=Q.Class("inputModel",{extend:d,construct:function(a){a=a||{},this._data={cacheStr:a.defaultStr||""}}})});
define("../../components/view/inputView",["./widgetView"],function(a,b,c){var d=a("./widgetView"),e=new Q.ic.InfoCenter({moduleName:"inputView"});c.exports=Q.Class("inputView",{extend:d,construct:function(a){this.callsuper(a),this._keyMap={_13:"enter",_27:"esc",_37:"left",_38:"up",_39:"right",_40:"down",_9:"tab"},this.checkValueTimerId=null,this.checkDelay=a.checkDelay||250},methods:{init:function(a){this.callsuper("init",a),this._initEvt()},update:function(a){this._doms.input.value(a.cacheStr)},_initEvt:function(){var a=this,b=this._doms.input;b.on("keydown",function(b){var b=Q.event.get(b);a.checkValueTimerId&&clearInterval(a.checkValueTimerId);var c=a._keyMap["_"+b.keyCode];c?a._ctrl.notice({type:"ctrlKey",data:{key:c,evt:b}}):a.checkValueTimerId=setInterval(a._checkValue.bind(a),a.checkDelay)}),b.on("focus",function(b){a.checkValueTimerId&&clearInterval(a.checkValueTimerId),a.checkValueTimerId=setInterval(a._checkValue.bind(a),a.checkDelay),a._ctrl.notice({type:"focusin",data:{evt:b}})}),b.on("blur",function(b){clearInterval(a.checkValueTimerId),a._ctrl.notice({type:"focusout",data:{evt:b}})})},_checkValue:function(){this._ctrl.notice({type:"checkInput",text:this._doms.input.value()})},getDom:function(){return this._doms.input}}})});
define("../../components/action/menu",["./widget","../../kit/eventPlugin"],function(a,b,c){var d=a("./widget"),e=a("../../kit/eventPlugin");c.exports=Q.Class("Menu",{extend:d,plugins:[new e],construct:function(a){a=a||{},this.callsuper(a)},properties:{events:{pre:function(a){this.pre()},next:function(a){this.next()},selected:function(a){this.fire({type:"selected",data:a.data})}}},methods:{init:function(){this.syncSet({ctrl:"refresh"})},prev:function(){this._model.prev(),this.syncGet()},next:function(){this._model.next(),this.syncGet()},redraw:function(a){this._model.refresh(a),this.syncGet()},show:function(a){this._view.setStyle(a),this.syncSet({ctrl:"show"})},hide:function(a){this._view.setStyle(a),this.syncSet({ctrl:"hide"})},apply:function(){this.syncSet({ctrl:"apply"})},pos:function(a){this._view.setStyle(a)},getDom:function(){return this._view._doms.wrapper},getItemByIndex:function(a){return this._model.get().data[a]}}})});
define("../../components/model/menuModel",["./model"],function(a,b,c){var d=a("./model");c.exports=Q.Class("MenuModel",{extend:d,construct:function(a){a=a||{},this._data={focus:-1,total:(a.datas||[]).length,data:a.datas||[],item:null,ctrl:"apply"}},methods:{prev:function(){if(!this._data.total)return;var a=arguments,b=this._data.focus;if(b>-1){var c=b-1;b=c<0?this._data.total-1:c}else b=0;this._data.focus=b,this._data.item=this._data.data[b],this._data.ctrl="prev",this._data.item.canselected==="false"&&a.callee.call(this)},next:function(){if(!this._data.total)return;var a=arguments,b=this._data.focus;if(b>-1){var c=b+1;b=c>=this._data.total?0:c}else b=0;this._data.focus=b,this._data.item=this._data.data[b],this._data.ctrl="next",this._data.item.canselected==="false"&&a.callee.call(this)},refresh:function(a){this._data.total=a.length,this._data.data=a,a.length?(this._data.focus=0,this._data.item=a[0],this._data.item.canselected==="false"&&this.next()):(this._data.focus=-1,this._data.item=null),this._data.ctrl="refresh"}}})});
define("../../components/view/menuView",["./widgetView"],function(a,b,c){var d=a("./widgetView"),e=new Q.ic.InfoCenter({moduleName:"MenuView"});c.exports=Q.Class("MenuView",{extend:d,construct:function(a){this.callsuper(a),this._tpl=a.tpl||""},methods:{update:function(a){a.ctrl=="refresh"&&this.draw(a.data),(a.ctrl=="prev"||a.ctrl=="next"||a.ctrl=="apply"||a.ctrl=="refresh")&&a.data.length&&this._ctrl.notice({type:"selected",data:{index:a.focus,item:a.item,data:a.data,ctrl:a.ctrl}}),a.ctrl=="show"&&this.show(a.data),a.ctrl=="hide"&&this.hide(a.data)},draw:function(a){this._doms.wrapper.html(Q.plugins.Mustache.render(this._tpl,{items:a})),a.length?this.show(a):this.hide(a)},show:function(a){a.length&&this._doms.wrapper.css("display","")},hide:function(a){this._doms.wrapper.css("display","none")},setStyle:function(a){for(var b in a)this._doms.wrapper.css(b,a[b])}}})});
define("../../units/loginNoticeToFlash",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo"],function(a,b,c){function h(){var a=f.isLogin(),b=Q.$("#flash");b&&(b[0].userLogined?b[0].userLogined(a,f.getUid()):Q.kit.QiyiPlayer.getPlayer("video").setUserLogin({P00001:f.getAuthCookies(),login:a.toString(),passportId:f.getUid(),nickname:f.getName()}))}var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/userInfo"),g=Q.event.customEvent;d.create("loginNoticeToFlash",{check:function(){return!0},exec:function(){this.bindEvent()},bindEvent:function(){g.on("login",function(){h()}),g.on("logout",function(){h()})}}),d.add("loginNoticeToFlash")});
define("../../units/navControls",["../components/units/pageJob","../components/action/checkDoms","../config/siteDomain","../kit/anim","../action/underframe"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../config/siteDomain"),g=a("../kit/anim"),h=a("../action/underframe"),i="navControls",j=Q.$("*[data-widget-toplinefloater=blackFloater]"),k=Q.$('*[data-navctrl-elem="underframe"]'),l={navWidget:Q.$("[data-widget-navctrl=player]")||Q.$("[data-widget-navctrl=channel]"),guide:Q.$("[data-widget-navctrl-elem=guide]"),firstnav:Q.$("[data-widget-navctrl-elem=first]")};d.create(i,{check:function(){return e(l),!0},init:function(){this.class_c="dhGuide_hover",this.timer=null,j||(this.underFrame=new h({elem:l.firstnav}))},exec:function(){var a=this;l.guide.on("mouseover",function(b){window.clearTimeout(a.timer),a.showOne()}),l.guide.on("mouseleave",function(b){window.clearTimeout(a.timer),a.timer=setTimeout(function(){a.hideOne()},500)}),l.firstnav.on("mouseenter",function(b){a.timer&&(window.clearTimeout(a.timer),a.timer=null),a.showOne()}),l.firstnav.on("mouseleave",function(b){a.hideOne()});var b=1;Q.browser.iPad&&l.guide.on("click",function(c){b!=1?b%2?a.showOne():a.hideOne():a.showOne(),b++})},showOne:function(){var a=this;l.guide.addClass(a.class_c),l.firstnav.css("display","block"),j?k&&k.show():(a.underFrame.distWidth=-2,a.underFrame.show()),Q.event.customEvent.fire({type:"navOneShow"})},hideOne:function(){var a=this;l.guide.removeClass(a.class_c),l.firstnav.hide(),j?k&&k.hide():a.underFrame.hide()}}),d.add(i)});
define("../../units/suggestV3",["../components/units/pageJob","../action/suggestV3","../components/action/checkDoms"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../action/suggestV3"),f=a("../components/action/checkDoms"),g="suggestV3";d.create(g,{getDependentDoms:function(){var a=Q.$("[data-widget-suggest=suggest]"),b=[];return a&&a.length>0&&a.forEach(function(a){a=Q.$(a),b.push({widget:a,input:a.down("[data-suggest-elem=input]"),btn:a.down("[data-suggest-elem=btn]")})}),b},check:function(a){var b=!0;return a.forEach(function(a){f(a)}),b},init:function(){var a=this.getDependentDoms();a.forEach(function(a){function c(a){if(!l)window.location.href=a;else if(!m){var b=Q.element.Element.create({tagName:"a"});b.attr("href",a),b.attr("target","_blank"),b.hide(),Q.$("body").append(b);if(Q.browser.SAFARI||Q.browser.CHROME){var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!1,!1),b[0].focus(),b[0].dispatchEvent(c)}else b[0].click();Q.$("body").remove(b)}}function d(a){a&&a.length&&(n&&a==j&&Q.cookie.set("QC024",a,{path:"/",domain:"iqiyi.com",expires:31536e6}),o&&o.length?c("http://so.iqiyi.com/so/q_"+encodeURIComponent(a)+o):c("http://so.iqiyi.com/so/q_"+encodeURIComponent(a)))}var b=a.widget;if(b.attr("data-suggest-off")=="true"){var f=b.attr("data-suggest-hoverclass")||"srchHover",g=b.down("[data-suggest-elem=container]")||b;g.on("mouseover",function(){g.addClass(f)}),g.on("mouseout",function(){g.removeClass(f)});var h=a.input;h.removeAttr("name"),Q.browser.iPad&&h.removeAttr("autocomplete");var i=a.btn,j=b.attr("data-suggest-tip");h.value(j);var k=!1,l=b.down("form"),m=!1;l&&(l.attr("method","get"),l.attr("target","_blank"),l[0].onsubmit=function(){return m&&h.value()&&h.value.length});var n=!0,o=b.attr("data-suggest-pingback");h.on("focus",function(){k=!0}),h.on("click",function(a){n&&(h.value(""),n=!1)}),h.on("keydown",function(a){a.keyCode==13&&d(h.value())}),h.on("blur",function(a){var b=h.value();if(!b||!b.length)h.value(j),n=!0;k=!1}),i.on("click",function(a){d(h.value())}),i.on("keyup",function(a){a.keyCode==13&&d(h.value())});var p=h.value().trim(),q=setInterval(function(){if(k){var a=h.value().trim();p!=a&&(p=a,p&&p.length&&(o&&o.length?(l&&l.attr("action","http://so.iqiyi.com/so/q_"+encodeURIComponent(p)+o),m=!0):(l&&l.attr("action","http://so.iqiyi.com/so/q_"+encodeURIComponent(p)),m=!0)))}else m=!1},150)}else{var r=new e({doms:a});r.init()}})}}),d.add(g)});
define("../../action/suggestV3",["../components/action/widget","../model/suggestV3Model","../view/suggestV3View","../model/playhistoryModel"],function(a,b,c){var d=a("../components/action/widget"),e=a("../model/suggestV3Model"),f=a("../view/suggestV3View"),g=a("../model/playhistoryModel");c.exports=Q.Class("SuggestV3",{extend:d,construct:function(a){a=a||{},a.model=a.model||new e(a),a.view=a.view||new f(a),this.callsuper(a)},methods:{init:function(){this._view.update(this._model._data);var a=this;Q.event.customEvent.on("navOneShow",function(){a.hideSuggest()}),Q.event.customEvent.on("suggestHide",function(){a.hideSuggest()}),Q.event.customEvent.on("showUserCenterBox",function(){a.hideSuggest()}),Q.event.customEvent.on("playHistoryShow",function(){a.hideSuggest()}),Q.event.customEvent.on("updateRecordsShow",function(){a.hideSuggest()}),Q.event.customEvent.on("hideHeaderBoxFromVipHeader",function(){a.hideSuggest()})},hideSuggest:function(){var a=this._model._data;a.inputFocus?this._view._doms.input[0].blur():a.suggestFocus&&(a.suggestFocus=!1,this._redraw(a))},_getHostNotSaveDefaultWord:function(){if(!this._hostNotSaveDefaultWord){var a=this._view._doms.widget;this._hostNotSaveDefaultWord=a.attr("data-suggest-notsavedefaultword")||"so.iqiyi.com"}return this._hostNotSaveDefaultWord},inHost:function(a){var b=a&&a.length?a.split(","):[];for(var c=0;c<b.length;c++)if(b[c]==window.location.hostname)return!0;return!1},_searchKeyword:function(a,b){a&&a.length?(a==this._view.getTip()&&(!this.inHost(this._getHostNotSaveDefaultWord())&&this._view.isTipVisible?this._saveDefaultSearchWord(a):this.getDefaultSearchWord()==a&&this._removeDefaultSearchWord()),(!b||this._view.getSearchTarget()=="_self")&&this._openLink("http://so.iqiyi.com/so/q_"+encodeURIComponent(a),this._view.getSearchTarget())):this._redraw(this._model._data)},_getSuggest:function(a){var b=this;b._model._data.keyword=a,a.length?this._model._data.cachedSuggestContent[a]?(this._model._data.suggestContent=this._model._data.cachedSuggestContent[a],this._model._data.index=0,b._redraw(b._model._data)):b._model.getSuggest(a,function(a){b._model._data.index=0,b._redraw(b._model._data)}):(b._model._data.index=0,this._redraw(this._model._data))},_openLink:function(a,b){if(b=="_blank"){var c=Q.element.Element.create({tagName:"a"});c.attr("href",a),c.attr("target","_blank"),c.hide(),Q.$("body").append(c);if(Q.browser.SAFARI||Q.browser.CHROME){var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!1,!1),c[0].focus(),c[0].dispatchEvent(d)}else c[0].click();Q.$("body").remove(c)}else window.location.href=a},_saveDefaultSearchWord:function(a){Q.cookie.set("QC024",a,{path:"/",domain:"iqiyi.com",expires:31536e6})},_removeDefaultSearchWord:function(){Q.cookie.remove("QC024",{path:"/",domain:"iqiyi.com"})},getDefaultSearchWord:function(){return Q.cookie.get("QC024")||""},_openHistoryItem:function(a,b){var c=this._model._data.historyContent;this._searchKeyword(c[(a+c.length-1)%c.length].key,b)},_openSuggestItem:function(a){var b=this._model._data.suggestContent,c=b[(a+b.length-1)%b.length],d=this;c.is_series?(new g).getPlayhistory({onsuccess:function(a){for(var b=0;b<a.length;b++)if(c.aid==a[b].albumId){d._openLink(a[b].videoUrl+c.suffix+"播放记录",d._view.getSugTarget());return}d._openLink(c.link,d._view.getSugTarget())},onfailure:function(){d._openLink(c.link,d._view.getSugTarget())},param:{timeout:2e3}}):Q.url.parse(c.link).host=="so.iqiyi.com"?this._openLink(c.link,this._view.getSearchTarget()):this._openLink(c.link,this._view.getSugTarget())},_redraw:function(a){this._model.refreshHistoryFromCookie(),this._view.update(a)}},properties:{events:{btnclick:function(a){this._searchKeyword(a.data.input.value().trim(),!1)},btnkeyup:function(a){a.data.keyCode==13&&this._searchKeyword(a.data.input.value().trim(),!1)},inputfocus:function(a){var b=this._model._data;b.inputFocus||(b.inputFocus=!0,this._getSuggest(a.data.input.value().trim()))},inputblur:function(a){var b=this._model._data;b.inputFocus&&(b.inputFocus=!1,b.suggestFocus||this._redraw(b))},inputvaluechange:function(a){this._getSuggest(a.data.input.value().trim())},inputkeydown:function(a){var b=this._model._data;if(a.data.keyCode==13){if(!b.index)this._searchKeyword(a.data.input.value().trim(),!0);else if(!b.keyword.length)this._openHistoryItem(b.index,!0);else if(Q.url.parse(b.suggestContent[(b.index-1+b.suggestContent.length)%b.suggestContent.length].link).host!="so.iqiyi.com"||this._view.getSearchTarget()!="_blank")a.data.stopEvtFn(),this._openSuggestItem(b.index)}else if(a.data.keyCode==38||a.data.keyCode==40){var c=b.historyContent,d=!0;b.keyword.length&&(c=b.suggestContent,d=!1);if(c.length){var e=!1;a.data.keyCode==38?(b.index==1&&(e=!0),b.index=((b.index?b.index:1)-1)%c.length):(b.index==c.length&&(e=!0),b.index=(b.index+1)%c.length),b.index=b.index?b.index:c.length;var f=b.keyword;if(!e){var g=(b.index-1+c.length)%c.length;f=d?b.historyContent[g].key:b.suggestContent[g].name.trim();if(!d){var h=b.suggestContent[g].link;Q.url.parse(h).host=="so.iqiyi.com"&&this._view.getSearchTarget()=="_blank"&&this._view.form.attr("defaultaction",h)}}else b.index=0;a.data.stopEvtFn(),this._view.ignoreValueChange=!0,this._view.setInputValue(f),this._redraw(b)}}},suggestfocus:function(a){var b=this._model._data;b.suggestFocus||(b.suggestFocus=!0,b.inputFocus||this._redraw(b))},suggestblur:function(a){var b=this._model._data;b.suggestFocus&&(b.suggestFocus=!1,b.inputFocus||this._redraw(b))},historyitemclick:function(a){this._openHistoryItem(a.data.index,!1);if(this._view.getSearchTarget()=="_blank"){var b=this._model._data;b.suggestFocus=!1,this._redraw(b)}},suggestitemclick:function(a){this._openSuggestItem(a.data.index)}}}})});
define("../../model/suggestV3Model",["../components/model/model","../interfaces/suggestV3Interface","../kit/userInfo"],function(a,b,c){function h(){return g==11?Q.cookie.get("QC005"):Q.cookie.get("QC006")}var d=a("../components/model/model"),e=a("../interfaces/suggestV3Interface"),f=a("../kit/userInfo"),g=/ipad/.test(navigator.userAgent.toLowerCase())?21:Q.browser.android||Q.browser.iPhone||Q.browser.WP?31:11,i=10;c.exports=Q.Class("SuggestV3Model",{extend:d,construct:function(a){this.callsuper(a),this._data={inputFocus:!1,suggestFocus:!1,keyword:"",cachedSuggestContent:{},suggestContent:[],historyContent:[],index:0}},methods:{init:function(a){this.callsuper("init"),this._data.keyword="",this._data.historyContent=this._readHistoryFromCookie()},getSuggest:function(a,b){var c=new e,d=this,j={key:a,cb:"cb_"+Math.floor(Math.random()*2147483648).toString(36),rltnum:i,uid:h()||"",ppuid:f.getUid()||"",platform:g};c.request(j,function(c){if(d._data.keyword==a){c=c||{};if(c.code==="A00000"){var e=[];for(var f=0;f<i&&f<c.data.length;f++){var g={};g.rn=0,g.name=c.data[f].name,g.cname=c.data[f].cname;var h=c.data[f].cid;g.is_series=c.data[f].is_series,g.aid=c.data[f].aid,h==2||h==3||h==4?c.data[f].firstLink?g.link=c.data[f].firstLink:g.link=c.data[f].link:g.link=c.data[f].link,g.link=g.link+"?key="+a+"&from=suggest&clicked="+(c.data[f].name+"("+c.data[f].cname+")"),g.is_series&&(g.suffix="?key="+a+"&from=suggest&clicked="+(c.data[f].name+"("+c.data[f].cname+")")),g.cname||(g.link="http://so.iqiyi.com/so/q_"+g.name,g.is_series=!1),e.push(g);if(f<1&&(h==2||h==3||h==4||h==6||h==9||h==14||h==16)&&(c.data[f].firstLink||c.data[f].recentLink)){var j={};j.rn=1,j.name=c.data[f].name,j.cname=c.data[f].cname;if(h==2||h==3||h==4)c.data[f].recentLink?(j.title="观看最新一集("+c.data[f].update+")",j.link=c.data[f].recentLink):(j.title="观看第一集",j.link=c.data[f].firstLink);else if(c.data[f].recentLink){var k=c.data[f].update;j.title="观看最新一期 ("+k.substr(0,4)+"-"+k.substr(4,2)+"-"+k.substr(6,2)+")",j.link=c.data[f].recentLink}else j.title="观看第一期",j.link=c.data[f].firstLink;j.link=j.link+"?key="+a+"&from=suggest&clicked="+(c.data[f].name+"("+c.data[f].cname+")")+j.title,e.push(j);var l={};l.rn=2,l.name=c.data[f].name,l.cname=c.data[f].cname,l.title="去往剧集页",l.link=c.data[f].link+"?key="+a+"&from=suggest&clicked="+(c.data[f].name+"("+c.data[f].cname+")")+l.title,e.push(l)}}d._data.suggestContent=e,d._data.cachedSuggestContent[a]=e}else d._data.suggestContent=[];b&&b(d._data)}})},_readHistoryFromCookie:function(){return JSON.parse(Q.cookie.get("QC021"))||[]},refreshHistoryFromCookie:function(){this._data.historyContent=this._readHistoryFromCookie()},_writeHistoryToCookie:function(a){var b=window.location.hostname,c=b.split("."),d=c[c.length-2]+"."+c[c.length-1];Q.cookie.set("QC021",JSON.stringify(a),{path:"/",domain:d,expires:31536e6})}}})});
define("../../interfaces/suggestV3Interface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("SuggestV3Interface",{construct:function(){var a="http://suggest.video.iqiyi.com/";this._remoteInterface=new d({suggestV3:{url:a,struct:{code:{type:"string",empty:!1},data:{type:"array",empty:!1,struct:{limit:{type:"string",empty:!1},start:{type:"number",empty:!1},totalHits:{type:"number",empty:!1},results:{type:"array",empty:!0,struct:{name:{type:"string",empty:!1},cname:{type:"string",empty:!1}}}}}}}})},methods:{request:function(a,b){this._remoteInterface.send({ifname:"suggestV3",param:a,timeout:3e3,encodeFn:function(a){return encodeURIComponent(a)}},function(a){b&&b(a)})}}})});
define("../../view/suggestV3View",["../components/view/widgetView","../action/underframe","../kit/iframeLocation","../units/compatible"],function(a,b,c){var d=a("../components/view/widgetView"),e=a("../action/underframe"),f=Q.$("*[data-widget-toplinefloater=blackFloater]"),g=a("../kit/iframeLocation"),h=a("../units/compatible");c.exports=Q.Class("SuggestV3View",{extend:d,construct:function(a){this.callsuper(a)},methods:{init:function(a){this.callsuper("init",a),this._createBody(),this._init(),this._bindEvent()},_createBody:function(){var a=this._underSoDomain(),b=Q.element.Element.create({tagName:"div"});b.addClass("topNav_search_suggest"),b.css("left","0px");var c=Q.element.Element.create({tagName:"div"});c.addClass("suggest_t"),b.append(c);var d=this._doms;f&&!a?Q.$(d.widget).append(b):(c.css("top","0px"),c.css("left","0px"),c.css("width","100%"),Q.$(document.body).append(b));var e=this;c.on("mouseleave",function(a){e._ctrl.notice({type:"suggestblur"})}),c.on("mouseenter",function(a){e._ctrl.notice({type:"suggestfocus"})}),d.body=c,d.container=b,d.input.removeAttr("name"),Q.browser.iPad&&d.input.removeAttr("autocomplete"),d.container.hide()},_underSoDomain:function(){var a=!0;return Q.url.parse(window.location.href).host!="so.iqiyi.com"&&(a=!1),a},update:function(a){var b=this._underSoDomain(),c=this._doms,d=c.input,g=c.btn,i=c.body,j,k;if(!f||b)k=d.left(),j=d.top()+d.height();var l=g.width()+d.width()-2;h&&!b&&(l=d.width()+1),l<0&&(l=0),this.containerWidth=l,c.container.css("width",l+"px");var m=4201;if(!f||b)c.container.css("height","0px"),c.container.css("position","absolute"),c.container.css("top",j+"px"),f&&(m=f.css("zIndex")-1),c.container.css("left",k+"px");c.container.css("zIndex",m),c.container.show(),(a.inputFocus||a.suggestFocus)&&!this.showSuggestFirst?a.keyword.length?this._renderSuggest(a.suggestContent,a.index):this._renderHistory(a.historyContent,a.index):(i.hide(),this.showSuggestFirst=!1),this.underFrame||(f&&!b?this.underFrame=new e({elem:c.container,target:c.widget,radius:5}):this.underFrame=new e({elem:c.container,radius:5})),i.height()>7?this.underFrame.show():this.underFrame.hide()},_resetForm:function(){var a=this,b=this._doms;this.form||(this.form=b.widget.down("form"),this.form.attr("method","get"),this.form.attr("target","_blank"),this.form[0].onsubmit=function(b){return a._isValid}),this._isValid=!1;var c=b.input.value().trim();this.getSearchTarget()=="_blank"&&c.length&&(this.form.attr("defaultaction")?(this.form.attr("action",this.form.attr("defaultaction")),this.form.removeAttr("defaultaction")):this.form.attr("action","http://so.iqiyi.com/so/q_"+encodeURIComponent(c)),this._isValid=!0)},getTip:function(){if(!this._tip){var a=this._doms.widget;this._tip=a.attr("data-suggest-tip")||""}return this._tip},_getHostNoClearTip:function(){if(!this._hostNoClearTip){var a=this._doms.widget;this._hostNoClearTip=a.attr("data-suggest-nocleartip")||"so.iqiyi.com"}return this._hostNoClearTip},getSugTarget:function(){if(!this._sugTarget)if(window.top!==window.self&&g.test(document.referrer))this._sugTarget="_blank";else{var a=this._doms.widget;this._sugTarget=this._ctrl.inHost(a.attr("data-suggest-opensugblank"))?"_blank":"_self"}return this._sugTarget},getSearchTarget:function(){if(!this._searchTarget)if(window.top!==window.self&&g.test(document.referrer))this._searchTarget="_blank";else{var a=this._doms.widget,b=this._ctrl.inHost(a.attr("data-suggest-opensearchself")||"so.iqiyi.com");this._searchTarget=b?"_self":"_blank"}return this._searchTarget},setInputValue:function(a){this._doms.input.value(a),this._inputValue=a,this.ignoreValueChange=!1},_getMaxLen:function(){return this._maxLen=Math.floor((this.containerWidth-50)/12)+6,this._maxLen},_setKeyword:function(a){this._ctrl._model._data.keyword=a},_renderSuggest:function(a,b){var c=this._doms.body;c.html(""),c.css("height","0px");if(a.length!==0){c.show();var d=0,e=this._getMaxLen(),f,g;for(var h=0;h<a.length;h++){if(a[h].rn===0){f=Q.element.Element.create({tagName:"a"}),c.append(f),f.css("cursor","default"),g=Q.element.Element.create({tagName:"p"}),f.append(g);var i=Q.element.Element.create({tagName:"span"}),j=Q.element.Element.create({tagName:"span"});i.addClass("focus-item"),i.css("float","left"),j.attr("float","left"),g.append(i),g.append(j);var k="";a[h].cname?(k=a[h].name+" ("+a[h].cname+")",j.html(" ("+a[h].cname+")")):k=a[h].name,f.attr("title",k),k.length<=e?i.html(a[h].name):a[h].cname?i.html(a[h].name.substr(0,e-6-a[h].cname.length)+"..."):i.html(a[h].name.substr(0,e-3)+"..."),d+=f.height();var l=this;(function(){var a=h+1;f.on("click",function(b){Q.event.get(b).stop(),l._ctrl.notice({type:"suggestitemclick",data:{index:a}})})})(),f.attr("href","#")}if(a[h].rn==1||a[h].rn==2){f=Q.element.Element.create({tagName:"a"}),c.append(f),f.attr("cursor","pointer"),f.attr("target",this.getSugTarget()),f.addClass("otherH"),g=Q.element.Element.create({tagName:"p"}),f.append(g),g.addClass("txtindex");var m=Q.element.Element.create({tagName:"span"});g.append(m),m.addClass("focus-item");var n=a[h].title;if(e>36){var o=n.length<=36,p=o?n:n.substr(0,32)+"...";m.html('<span class="linec">-</span>'+p)}else{var q=n.length<=e?n:n.substr(0,e-4)+"...";m.html('<span class="linec">-</span>'+q)}f.attr("title",n),f.attr("href",a[h].link),d+=f.height()}b==h+1?f.addClass("selected"):f.removeClass("selected")}c.css("height",d+"px"),Q.event.customEvent.fire({type:"suggestShow"})}else c.hide()},_renderHistory:function(a,b){var c=this._doms.body;c.html(""),c.css("height","0px");if(a.length){c.show();var d=0,e=this._getMaxLen();for(var f=0;f<a.length;f++){var g=Q.element.Element.create({tagName:"a"});g.css("cursor","default"),c.append(g);var h=Q.element.Element.create({tagName:"p"});g.append(h);var i=Q.element.Element.create({tagName:"span"});i.addClass("focus-item"),a[f].key.length<=e?i.html(a[f].key):i.html(a[f].key.substr(0,e-4)+"..."),g.attr("title",a[f].key),h.append(i),d+=g.height(),b==f+1?g.addClass("selected"):g.removeClass("selected");var j=this;(function(){var a=f+1;g.on("click",function(b){Q.event.get(b).stop(),j._ctrl.notice({type:"historyitemclick",data:{index:a}})})})(),g.attr("href","#")}c.css("height",d+"px"),Q.event.customEvent.fire({type:"suggestShow"})}else c.hide()},_init:function(){var a=this._doms.input,b=this.getTip();this._setKeyword(b),a.value(b),this.isTipVisible=!0;if(Q.url.parse(window.location.href).host=="so.iqiyi.com"){var c=a[0],d=c.value.length;if(c.createTextRange){var e=c.createTextRange();e.move("character",d),e.collapse(),e.select()}else c.setSelectionRange(d,d),c.focus();var f=!0,g=this;this._ctrl._model._data.inputFocus=!0,a.on("click",function(){f&&(g._ctrl._model._data.inputFocus&&(g._ctrl._model._data.inputFocus=!1,g._ctrl.notice({type:"inputfocus",data:{input:a}})),f=!1)}),this.showSuggestFirst=!0}},_bindEvent:function(){function l(){if(e.isTipVisible){if(b.value()==e.getTip()){var a=e._ctrl.inHost(e._getHostNoClearTip());if(!a||b.value()==e._ctrl.getDefaultSearchWord())b.value(""),e._setKeyword("");e.isTipVisible=!1}}else!b.value()&&!b.value().length&&(b.value(e.getTip()),e._setKeyword(e.getTip()),e.isTipVisible=!0)}var a=this._doms,b=a.input,c=a.btn,d=a.body,e=this,f=a.widget,g=f.attr("data-suggest-hoverclass")||"srchHover",i=f.down("[data-suggest-elem=container]")||f,j=!1;i.on("mouseover",function(){i.addClass(g),j=!0}),i.on("mouseout",function(){e._ctrl._model._data.inputFocus||i.removeClass(g),j=!1}),c.on("click",function(a){e._ctrl.notice({type:"btnclick",data:{input:b}})}),c.on("keyup",function(a){e._ctrl.notice({type:"btnkeyup",data:{input:b,keyCode:a.keyCode}})}),b.on("keydown",function(a){e._ctrl.notice({type:"inputkeydown",data:{input:b,keyCode:a.keyCode,stopEvtFn:function(){Q.event.get(a).stop()}}})});if(h&&!this._underSoDomain()){var k="navTopBtn-hover";c.on("mouseover",function(){c.addClass(k)}),c.on("mouseout",function(){c.removeClass(k)})}b.on("focus",function(a){e._ctrl._model._data.inputFocus||(l(),e._ctrl.notice({type:"inputfocus",data:{input:b}}))}),b.on("blur",function(a){e._ctrl._model._data.inputFocus&&(l(),e._ctrl.notice({type:"inputblur"})),j||i.removeClass(g)}),this._inputValue=b.value().trim();var m=setInterval(function(){if(e._ctrl._model._data.inputFocus&&!e.ignoreValueChange){var a=b.value().trim();e._inputValue!=a&&(e._inputValue=a,e._ctrl.notice({type:"inputvaluechange",data:{input:b}}))}e._resetForm()},100);this.width=Q.page.getViewWidth(),Q.$(window).on("onresize",function(){var a=Q.page.getViewWidth();e.width!=a&&(e._doms.container.hide(),e.underFrame&&e.underFrame.hide(),e._ctrl.hideSuggest(),e.width=a)})}}})});
define("../../units/vipNoticePopbox",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../config/siteDomain","../components/action/floater","../view/rightBottomFloaterView","../action/underframe"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/userInfo"),g=a("../config/siteDomain"),h=a("../components/action/floater"),i=a("../view/rightBottomFloaterView"),j=a("../action/underframe"),k=null,l="deleCloseSubscribe",m="vip-Notiex",n="vip-contNoti",o,p,q="vipNoticePopbox";d.create(q,{getDependentDoms:function(){var a=Q.$("#data-vip-remindbox");return p={doms:a,popbox:a.down("*[data-vip-remindpop]")},p},check:function(a){return e(a),!0},init:function(){},exec:function(){var a=this;if(!p)return;a.doms=p.doms,a.popbox=p.popbox,setTimeout(function(){a.toDrawVipPopBox()},3e4),Q.event.customEvent.on("login",function(){setTimeout(function(){a.toDrawVipPopBox()},2e3)}),Q.event.customEvent.on("logout",function(){k&&(k.destroy(),k=null)})},toDrawVipPopBox:function(){var a=this,b=Q.cookie.get("deleCloseSubscribe"),c=window.info||{};c.pagename!="home"&&a.doVipExpiredHandle(),c.pagename==="home"&&b==="true"&&(a.doVipExpiredHandle(),Q.cookie.set(l,"false",{domain:g.SITE_DOMAIN,path:"/"})),setTimeout(function(){b=Q.cookie.get(l),c.pagename==="home"&&b==="none"&&(a.doVipExpiredHandle(),Q.cookie.set(l,"false",{domain:g.SITE_DOMAIN,path:"/"}))},3e3)},doVipExpiredHandle:function(){var a=this;if(!f.isLogin())return;var b=parseInt(f.getPayType(),10);if(b===1||b===2)return;o=Q.cookie.get(n+f.getUid()),f.getStatus(function(b){if(b!=="1"&&b!=="3")return;f.getDeadlineTime(function(b){a.doExpiredFloaterHandle(b)})})},doExpiredFloaterHandle:function(a){var b=this,c=(new Date).getTime();b._remainDays=Math.floor((a-c)/1e3/3600/24),b._remainDays<=6&&b._remainDays>=-7||b._remainDays==-14||b._remainDays==-30?b.isExpired=1:b.isExpired=0;var d=Q.cookie.get(m+f.getUid());if(d!="true"||d==null)b.styleNum=b.popbox.length,b.recursiveShow(),b.timingCleanCookie()},recursiveShow:function(){var a=this,b=parseInt(Math.random()*a.styleNum,10);a.isExpired?b!==2&&b!==3||o!=="true"?a.showFloater(b):a.recursiveShow():a._remainDays>=0&&b&&(b!==2&&b!==3||o!=="true"?a.showFloater(b):a.recursiveShow())},showFloater:function(a){var b=this;k=new h({view:new i});var c=f.getName();c.length>8&&(c=Q.string.truncate(c,8),c=c.substring(0,7));var d=Q.$(b.popbox[a]),e=Q.plugins.Mustache.render(d.html(),{username:c});d.html(e),k.show({elem:d}),b.doDeadlineTimeHandle(),b._bindEvent(),b.doDianpianHandle(d),a?(b.pingbackManualShow(),b.clickLinkToSendPingback()):b.pingbackAutoShow()},doDeadlineTimeHandle:function(){var a=this,b=a.doms.down("*[data-remindpop-elem=days]"),c=b.down("li"),d=k.getFloater(),e=d.down("*[data-remindpop-days=d1]"),f=d.down("*[data-remindpop-time]");if(b&&c&&c.length){var g,h,i;a._remainDays>=0?(a._remainDays=a._remainDays+1,g={_remainDays:a._remainDays},h=Q.plugins.Mustache.render(Q.$(c[0]).html(),g),i=Q.plugins.Mustache.render(Q.$(c[1]).html(),g)):(a._remainDays=Math.abs(a._remainDays),g={_remainDays:a._remainDays},h=Q.plugins.Mustache.render(Q.$(c[2]).html(),g),i=Q.plugins.Mustache.render(Q.$(c[3]).html(),g)),e&&e.html(h),f&&f.forEach(function(a){var b=Q.$(a);b.html(i)})}},_bindEvent:function(){var a=this,b=k.getFloater(),c=b.down("*[data-remindpop-elem=notremind]");c&&(b.on("mouseenter",function(a){c.show()}),b.on("mouseleave",function(a){c.hide()}));var d=b.down("*[data-remindpop-elem=noticerenewals]");d&&a.isExpired&&(d.show(),Q.log.server({type:"huiyuanxufei2btnclk",uid:Q.cookie.get("QC005"),ppuid:Q.cookie.get("P00003")},"http://msg.video.qiyi.com/tmpstats.gif"));var e=b.down("*[data-remindpop-remind=input]");e&&e.on("click",function(){e[0].checked?Q.cookie.set(n+f.getUid(),"true",{domain:g.SITE_DOMAIN,path:"/"}):Q.cookie.set(n+f.getUid(),"false",{domain:g.SITE_DOMAIN,path:"/"})});var h=b.down("*[data-remindpop-elem=close]");h&&h.on("click",function(a){Q.event.get(a).preventDefault(),k.destroy(),k=null})},timingCleanCookie:function(){var a=this,b=new Date,c,d;17-b.getHours()>0?c=new Date(b.getFullYear(),b.getMonth(),b.getDate(),17,"00","00"):c=new Date(b.getFullYear(),b.getMonth(),b.getDate()+1,17,"00","00"),d=c.getTime()-b.getTime(),Q.cookie.set(m+f.getUid(),"true",{domain:g.SITE_DOMAIN,path:"/",expires:d})},clickLinkToSendPingback:function(){var a=this,b=k.getFloater(),c=b.down("*[data-vip-elem=manualtext-1]");if(c){var d=c.down("a");d.on("click",function(a){var b=Q.$(this).attr("href").replace("http://","");a=Q.event.get(a),a.stop(),window.location.href="http://"+b+"?fc=ade29fe112dc0749"})}var e=b.down("*[data-vip-elem=manualtext-2]");if(e){var f=e.down("a");f.on("click",function(a){var b=Q.$(this).attr("href").replace("http://","");a=Q.event.get(a),a.stop(),window.location.href="http://"+b+"?fc=ade29fe112dc0749"})}Q.$(document).delegate("vip-manualtext-2",function(a){Q.event.get(a).preventDefault();var b=Q.$(a.target||a.srcElement),c=b.attr("href").replace("http://","");window.location.href="http://"+c+"?fc=ade29fe112dc0749"}),Q.$(document).delegate("vip-manualtext-3",function(a){Q.event.get(a).preventDefault();var b=Q.$(a.target||a.srcElement),c=b.attr("href").replace("http://","");window.location.href="http://"+c+"?fc=ade29fe112dc0749"})},pingbackAutoShow:function(){Q.log.server({type:"huiyuanxufeitip",uid:Q.cookie.get("QC005"),ppuid:Q.cookie.get("P00003")},"http://msg.video.qiyi.com/tmpstats.gif")},pingbackManualShow:function(){Q.log.server({type:"huiyuanxufeitip2",uid:Q.cookie.get("QC005"),ppuid:Q.cookie.get("P00003")},"http://msg.video.qiyi.com/tmpstats.gif")},doDianpianHandle:function(a){var b=this;a.css("position","relative").css("zIndex","5");var c=k.getFloater(),d=new j({elem:c,target:c,attrs:{zIndex:1}});d.show()}}),d.add(q)});
define("../../view/rightBottomFloaterView",["../components/view/floaterNoCoverView","../kit/anim"],function(a,b,c){var d=a("../components/view/floaterNoCoverView"),e=a("../kit/anim");c.exports=Q.Class("RightBottomFloaterView",{extend:d,construct:function(a){a=a||{},this.callsuper(a)},methods:{init:function(a){this.callsuper("init",a),this._loadedForFirstTime=!0,this._initEvent()},_initEvent:function(){var a=this.adjustPosition.bind(this);Q.$(window).on("scroll",a),Q.$(window).on("resize",a)},adjustPosition:function(){var a=Q.page.getViewHeight(),b=this._elem;b.css("right","0"),this._srcPos={top:a+Q.page.getScrollTop(),right:0},this.showAnim()},showAnim:function(){if(this._srcPos){var a=this._elem,b=a.height();this._destPos={top:this._srcPos.top-b,right:this._srcPos.right},this._loadedForFirstTime?(e({elem:a,style:"top",from:this._srcPos.top,to:this._destPos.top,ease:"Expo.easeOut",duration:500}),this._loadedForFirstTime=!1):a.css("top",this._destPos.top+"px")}}}})});
define("../../units/vipHeader",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../action/underframe","../interfaces/accountCenter_vipComboInterface","../kit/iframeLocation","./compatible"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"units/vipHeader"}),e=a("../components/units/pageJob"),f=a("../components/action/checkDoms"),g=a("../kit/userInfo"),h=a("../action/underframe"),i=a("../interfaces/accountCenter_vipComboInterface"),j=a("../kit/iframeLocation"),k="vipHeader",l="data-vipheader-elem=wrapper",m="data-vipheader-elem=menucontainer",n=500,o=100,p=a("./compatible"),q,r,s,t,u=Q.event.customEvent,v=Q.$("#toplinefloater")||Q.$("*[data-widget-toplinefloater=blackFloater]"),w=function(){t=0,g.isLogin()?x():y()},x=function(){var a=new i,b={};a.zidongxufeimsg(b,function(a){a.code=="A00000"&&a.data.status=="1"&&(t=1),g.checkVipInfo(y)})},y=function(){var a,b,c,e,f,h,i,k,l=z.doms.down("*[data-vipheader-elem=menu]"),m=z.doms.down("*[data-vipheader-elem=header]");if(!l||l.length<1||!m||m.length<1)return;var n=Q.cookie.get("HZ00011"),o=Q.$("a[j-data-elem=zjuser]");o&&!g.isLogin()&&n&&n=="11"&&o.on("click",function(a){a=Q.event.get(a),a.stop();var b=Q.url.parse(window.location.href),c=b.protocol+"://"+b.host+b.path,d="http://v.139site.com/pretrade.do?spid=13&preurl="+c+"&ucode=HZ00011&keystr=bf49359a5e0ef6eb0d75b0906c3c4f36";j.href(d)}),!g.isLogin()||!g.isVip()?a=0:(b=g.getVipType(),c=g.getStatus(),f=g.getDeadlineTime(),e=parseInt((f-(new Date).getTime())/864e5,10)+1,b==3&&(a=1),b==1&&(e>0&&e<=7?a=2:a=3),t==1&&b==1&&(a=4),t==1&&b==3&&(a=5)),l.hide(),m.hide(),k=Q.$(m[a]),i=Q.$(l[a]);if(k&&i){k.css("display","block"),i.css("display","block");if(e>0&&e<=7&&i.down("li")){var p="（"+String(e)+"天到期"+"）";i.down("li").down("p")&&(i.down("li").down("p").html(p),i.down("li").down("p").show())}else i.down("li")&&i.down("li").down("p")&&i.down("li").down("p").hide()}else d.warn("无法获取header中VIP部分的DOM！")},z;e.create(k,{getDependentDoms:function(){var a=Q.$("#widget-vipheader");return a&&(z={doms:a,menu:a.down("*[data-vipheader-elem=menucontainer]")}),z},check:function(a){return f(a),!0},init:function(){var a=this;a._menuDom=z.menu,a._wrapperDom=z.doms,a._wrapperDomCls=a._wrapperDom.attr("data-vipheader-cls")||"";var b=0;Q.$("*[data-usercenterbox-elem]")&&(b=5);var c=z.doms.down('*[data-vipheader-elem="underframe"]');p&&(Q.browser.IE6||Q.browser.IE7?c&&(c.hide(),c=null):c&&c.show()),a._baseIframe=new h({elem:this._menuDom,radius:b,target:c});var d;Q.browser.iPad?d="click":d="mouseover",a._wrapperDom.on(d,function(b){a._clearHideTimer(),a._createShowTimer()}),Q.browser.iPad?(Q.$("body").on("touchstart",function(b){a._clearShowTimer(),a._createHideTimer()}),a._wrapperDom.on("touchstart",function(a){Q.event.get(a).stopPropagation()})):a._wrapperDom.on("mouseout",function(b){a._clearShowTimer(),a._createHideTimer()}),Q.event.customEvent.on("navOneShow",a._hide.bind(this)),Q.event.customEvent.on("showUserCenterBox",a._hide.bind(this)),Q.event.customEvent.on("updateRecordsShow",a._hide.bind(this)),Q.event.customEvent.on("suggestShow",a._hide.bind(this)),Q.event.customEvent.on("playHistoryShow",a._hide.bind(this)),u.on("login",x),u.on("logout",y),w()},_createHideTimer:function(){if(!this._hideTimer){var a=this;this._hideTimer=setTimeout(function(){a._hide()},o)}},_clearHideTimer:function(){this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=null)},_createShowTimer:function(){if(!this._showTimer){var a=this;this._showTimer=setTimeout(function(){a._show()},n)}},_clearShowTimer:function(){this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null)},_show:function(){this._wrapperDom.addClass("hover"),this._wrapperDomCls&&this._wrapperDom.addClass(this._wrapperDomCls+"-hover"),p?this._baseIframe.distTop=0:v?this._baseIframe.distTop=23:this._baseIframe.distWidth=-2,this._baseIframe&&this._baseIframe.show(),Q.event.customEvent.fire({type:"hideHeaderBoxFromVipHeader",data:{}})},_hide:function(){this._clearShowTimer(),this._clearHideTimer(),this._wrapperDom.removeClass("hover"),this._wrapperDomCls&&this._wrapperDom.removeClass(this._wrapperDomCls+"-hover"),this._baseIframe&&this._baseIframe.hide()}}),e.add(k)});
define("../../interfaces/accountCenter_vipComboInterface",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("vipComboInterface",{construct:function(a){this._remoteInterface=new d({getComboMessage:{url:"http://serv.vip."+e.SITE_DOMAIN+"/vip/package.action",struct:{code:{type:"string"},data:{type:"object"}}},quxiaobaoyue:{url:"http://serv.vip."+e.SITE_DOMAIN+"/pay/unsubscribebank.action",struct:{code:{type:"string"},data:{type:"object"}}},shoujituiding:{url:"http://serv.vip."+e.SITE_DOMAIN+"/pay/unsubscribemobile.action",struct:{code:{type:"string"},data:{type:"object"}}},zidongxufei:{url:"http://serv.vip."+e.SITE_DOMAIN+"/services/autoRenewQuery.action",struct:{code:{type:"string"},data:{type:"object"}}},pakageInfo:{url:"http://serv.vip."+e.SITE_DOMAIN+"/content/package-info.action",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{}}}}})},methods:{request:function(a,b){a=a||{},a.version=a.version||"1.0",a.platform=a.platform||"afbe8fd3d73448",a.cid=a.cid||"afbe8fd3d73448c9",a.cb=a.cb||"vipCombo",this._remoteInterface.send({param:a,ifname:"getComboMessage"},function(a){b&&b(a)})},quxiaorequest:function(a,b){a=a||{},a.version=a.version||"1.0",a.platform=a.platform||"afbe8fd3d73448",a.cid=a.cid||"afbe8fd3d73448c9",a.cb=a.cb||"quxiao",this._remoteInterface.send({param:a,ifname:"quxiaobaoyue"},function(a){b&&b(a)})},tuidingrequest:function(a,b){a=a||{},a.version=a.version||"1.0",a.platform=a.platform||"afbe8fd3d73448",a.cid=a.cid||"afbe8fd3d73448c9",a.cb=a.cb||"tuiding",this._remoteInterface.send({param:a,ifname:"shoujituiding"},function(a){b&&b(a)})},zidongxufeimsg:function(a,b){a=a||{},a.cb=a.cb||"zidongxufeimsg",this._remoteInterface.send({param:a,ifname:"zidongxufei"},function(a){b&&b(a)})},getPakageInfo:function(a,b){a=a||{},a.version=a.version||"1.0",a.cb=a.cb||"package",a.t=(new Date).getTime(),this._remoteInterface.send({param:a,ifname:"pakageInfo"},function(a){b&&b(a)})}}})});
define("../../units/topLineFloaterV2",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../kit/getWebEventID","../kit/plugins/anim/topLineFloaterAnimPlugin","./compatible"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"units/topLineFloaterV2"}),e=a("../components/units/pageJob"),f=a("../components/action/checkDoms"),g=a("../kit/userInfo"),h=a("../kit/getWebEventID"),i=a("../kit/plugins/anim/topLineFloaterAnimPlugin"),j=a("./compatible"),k=Q.$("*[data-widget-toplinefloater=blackFloater]"),l=Q.$("*[data-widget-topnavloginbar]"),m,n;l&&(m=l.down('*[data-topnavloginbar-elem="container"]'));var o="default",p="topLineFloaterV2",q;e.create(p,{check:function(){return f({con:k}),!0},init:function(){var a=this;this.hasFixedStyleInited=k.hasClass("topNav-fixed"),this.isSendLoginSucPingBack=!1,this.shownFloater=!1,j?Q.browser.IE6||Q.browser.iPad?k.css("position","relative"):Q.$(window).on("onresize",function(){a.doFloatTop()}):Q.browser.iPad&&k.css("position","absolute");var b=Q.url.getQueryValue(location.href,"source");if(b)o=b.split(".").slice(-2,-1);else{var c=Q.url.parse(document.referrer);c&&(o=c.host.split(".").slice(-2,-1))}l&&(n=l.down("*[data-topnavloginbar-tpl='"+o+"']"),n&&m&&(m.html(n.value()),g.isLogin()||(a.showFloater(),q=setTimeout(function(){a.hideFloater()},6e4)))),this.scrollmarker=Q.$("[data-toplinefloater-elem=scrollmarker]"),this.bindEvent(),this.doWindowScroll()},exec:function(){},destroy:function(){},bindEvent:function(){Q.$(window).on("scroll",this.doWindowScroll.bind(this)),Q.event.customEvent.on("login",this.doLogin.bind(this)),Q.event.customEvent.on("loginIframeClosed",this.doLoginIframeClosed.bind(this));if(m){var a=m.down("*[data-topnavloginbar-loginbtn]");a&&a.on("click",this.doClickLoginBtn.bind(this));var b=m.down("*[data-topnavloginbar-sinabtn]");b&&b.on("click",this.doClickSinaLoginBtn.bind(this));var c=m.down("*[data-topnavloginbar-qqbtn]");c&&c.on("click",this.doClickQQLoginBtn.bind(this));var d=m.down("*[data-topnavloginbar-renrenbtn]");d&&d.on("click",this.doClickRenrenLoginBtn.bind(this))}},doFloatTop:function(){var a=!0;if(!this.hasFixedStyleInited){var b=Q.page.getScrollTop(),c=502;k.attr("data-toplinefloater-scrolltop")&&(c=k.attr("data-toplinefloater-scrolltop")),this.scrollmarker&&(c=this.scrollmarker.top()+this.scrollmarker.height()),b<=c&&(a=!1)}var d=Q.page.getViewWidth();Q.page.getViewWidth()>Q.page.getWidth()&&(d=Q.page.getWidth()),d<980&&(a=!1),a?(k.addClass("topNav-fixed"),k.css("position","fixed")):(k.removeClass("topNav-fixed"),k.css("position","relative")),k.attr("data-toplinefloater-needchangeavatar")&&Q.event.customEvent.fire({type:"indexNavClassChange",data:{top:a}})},doWindowScroll:function(){j&&!Q.browser.IE6&&!Q.browser.iPad&&this.doFloatTop();var a=Q.page.getScrollTop();k.css("position")==="absolute"&&(d.log("css position is absolute"),k.css("top",a+"px"),d.log("reset css position ..")),g.isLogin()||(n?(q&&clearTimeout(q),this.hideFloater()):a>150?this.showFloater():this.hideFloater())},doWindowResize:function(){},doLogin:function(a){var b=this;this.hideFloater(),h(function(a){b.isSendLoginSucPingBack&&Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"loginsuc",weid:a,ppuid:g.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})},doLogout:function(a){},doLoginIframeClosed:function(a){var b=this;this.isSendLoginSucPingBack=!1,window.setTimeout(function(){b.showFloater()},200)},doClickLoginBtn:function(a){a=Q.event.get(a),a.preventDefault(),h(function(a){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"cllogin",weid:a,ppuid:g.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")}),this.isSendLoginSucPingBack=!0},doClickTopRegisterBtn:function(a){a=Q.event.get(a),a.preventDefault(),h(function(a){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"clreg",weid:a,ppuid:g.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})},doClickTopLoginBtn:function(a){a=Q.event.get(a),a.preventDefault(),h(function(a){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"cllogin",weid:a,ppuid:g.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})},doClickSinaLoginBtn:function(a){a=Q.event.get(a),a.preventDefault(),n?this.thirdLoginPingBack():h(function(a){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"weiboclcooplog",weid:a,ppuid:g.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})},doClickRenrenLoginBtn:function(a){a=Q.event.get(a),a.preventDefault(),n&&this.thirdLoginPingBack()},doClickQQLoginBtn:function(a){a=Q.event.get(a),a.preventDefault(),n?this.thirdLoginPingBack():h(function(a){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"qqclcooplog",weid:a,ppuid:g.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})},showFloater:function(){if(!this.shownFloater){m&&m.show(),this.shownFloater=!0;var a=Q.$('*[data-topnavloginbar-elem="underframe"]');a&&a.show(),n?h(function(a){Q.log.server({type:"snsusrlog20121112",jsuid:Q.cookie.get("QC006"),sns:o,flashuid:Q.cookie.get("QC005"),act:"showdiv",weid:a,ppuid:g.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")}):h(function(a){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,jsact:"show",weid:a,ppuid:g.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})}},hideFloater:function(){if(this.shownFloater){this.shownFloater=!1,m&&m.hide();var a=Q.$('*[data-topnavloginbar-elem="underframe"]');a&&a.hide(),n||h(function(a){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,jsact:"hide",weid:a,ppuid:g.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})}},thirdLoginPingBack:function(){h(function(a){Q.log.server({type:"snsusrlog20121112",jsuid:Q.cookie.get("QC006"),sns:o,flashuid:Q.cookie.get("QC005"),act:"clklogin",weid:a,ppuid:g.getUid()},"http://msg.video.qiyi.com/tmpstats.gif")})}}),e.add(p)});
define("../../kit/plugins/anim/topLineFloaterAnimPlugin",["./animPlugin"],function(a,b,c){var d=a("./animPlugin");c.exports=Q.Class("TopLineFloaterAnimPlugin",{extend:d,construct:function(){},methods:{_createAnim:function(a){this._anim1?this._anim1.stop():(this._anim1=Q.anim(a.elem),this._anim1.duration(a.duration)),this._anim2?this._anim2.stop():(this._anim2=Q.anim(a.elem),this._anim2.duration(a.duration)),this._anim3?this._anim3.stop():(this._anim3=Q.anim(a.elem),this._anim3.duration(a.duration))},_playAnim:function(a,b){!Q.browser.IE6&&!Q.browser.IE7&&!Q.browser.IE8&&this._anim1.from("opacity",0).to("opacity",1).go(),this._anim2.from("width",0).to("width",Q.page.getViewWidth()).go().onDone(b),this._anim3.from("height",0).to("height",a.height||71).go()}}})});
define("../../kit/plugins/anim/animPlugin",["../../eventPlugin"],function(a,b,c){var d=a("../../eventPlugin");c.exports=Q.Class("AnimPlugin",{plugins:[new d],construct:function(){},methods:{play:function(a){this._createAnim(a);var b=this;this._playAnim(a,function(){b.fire({type:"done"})})},pause:function(){},reset:function(){this._clearAnim()},done:function(){this._doneAnim()},_createAnim:function(a){this._anim||(this._anim=Q.anim(a.elem))},_playAnim:Q.fn.abstractMethod,_clearAnim:function(){this._anim=null},_doneAnim:function(){this._anim.done()}}})});
define("../../units/lazyloadFade",["../components/units/pageJob","../action/lazyloadFade"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../action/lazyloadFade"),f="lazyloadFade";d.create(f,{getDependentDoms:function(){var a={};return a},check:function(){return!0},exec:function(){e.init()},destroy:function(){e.destroy()}}),d.add(f),c.exports=f});
define("../../action/lazyloadFade",["../components/units/pageJob","../kit/lazyloadV2","../kit/anim"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/lazyloadV2"),f=a("../kit/anim"),g=250,h=new e({flag:"data-fadelazy",ready:function(a){var b=a[0].style.cssText;f({elem:a,style:"opacity",from:0,to:1,ease:"Linear",duration:g,done:function(){a[0].style.cssText=b}})}});c.exports=h});
define("../../kit/lazyloadV2",[],function(a,b,c){var d=Q.Class("LazyloadV2",{construct:function(a){this.imgs=null,this.timer=null,this.flag=a.flag||"data-lazy",this.ready=a.ready||function(){},this.handlerBinded=this.handler.bind(this)},methods:{init:function(){Q.$(window).on("scroll",this.handlerBinded),Q.$(window).on("resize",this.handlerBinded),this.check()},handler:function(){var a=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){a.imgs=null},100),this.check()},check:function(){var a=this;this.imgs=Q.$("img["+this.flag+"]"),this.imgs&&this.imgs.length>0&&this.imgs.forEach(function(b,c){b=Q.$(b);var d=b.attr(a.flag);d&&b.isInScreen()&&(b.attr("src",d),b.removeAttr(a.flag),a.ready(b))})},destroy:function(){Q.$(window).un("scroll",this.handlerBinded),Q.$(window).un("resize",this.handlerBinded),this.imgs=null}}});c.exports=d});
define("../../units/strongVoiceAward",["../components/units/pageJob","../kit/userInfo","../interfaces/strongVoiceAward","../kit/qiyiPlayer","../kit/userInfo","../action/qipaLogin"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/userInfo"),f=a("../interfaces/strongVoiceAward"),g=a("../kit/qiyiPlayer"),h=g.getPlayer("video"),i=a("../kit/userInfo"),j=a("../action/qipaLogin"),k=new Q.ic.InfoCenter({moduleName:"units/strong_voice"});d.create("strongVoiceAward",{check:function(){return!0},init:function(){k.debug("strong voice start"),this._clear=Q.plugins.clearSwf,h&&h.on("flashRequestLogin",function(a){j.openLoginWindow(this),k.debug("flash call openLoginWindow")})},exec:function(){var a=this;this._clear.on("ready",function(){i.isLogin()&&a._getAwardInfo(),Q.event.customEvent.on("login",function(b){a._getAwardInfo()}),Q.event.customEvent.on("loginIframeClosed",function(){a.needRefresh=!1})})},_getAwardInfo:function(){this._clear.get().getQiyiActivityCookie||k.debug("clear no getQiyiActivityCookie");var a=this._clear.get().getQiyiActivityCookie&&this._clear.get().getQiyiActivityCookie();if(a){var b=this._formatData(a);k.debug("clear get QiyiActivityCookie: "+b);if(b!==""){var c=new f;c.request({flashid:Q.cookie.get("QC005"),codes:b},this._databack.bind(this))}}},_formatData:function(a){var b=JSON.parse(a),c="";return b&&b.tickets&&(b.tickets.forEach(function(a){c+=a+","}),c=c.substring(0,c.length-1)),c},_databack:function(a){a.code=="A0000"&&a.data.award&&a.data.award.length>0?(k.debug("success for award"),this._clear.get().clearQiyiActivityCookie?(this._clear.get().clearQiyiActivityCookie(),h&&h.setQiyiUserRewardInfo({checked:"true",rewardName:a.data.award[a.data.award.length-1].name})):k.debug("clear no clearQiyiActivityCookie")):k.debug("failed for award")}}),d.add("strongVoiceAward")});
define("../../interfaces/strongVoiceAward",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("StrongVoiceAwardInterFace",{construct:function(a){this._remoteInterface=new d({StrongVoiceAwardInterFace:{url:"http://api.credit."+e.SITE_DOMAIN+"/services/promotion/chinaxfactor/lotteryaward",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{award:{type:"object",empty:!0,struct:{name:{type:"string",empty:!1},desc:{type:"string",empty:!1},amount:{type:"string",empty:!1},img:{type:"string",empty:!1}}}}}}}})},methods:{request:function(a,b){a=a||{},a.cb="cb_strongvoice_award"+(new Date).getTime(),this._remoteInterface.send({ifname:"StrongVoiceAwardInterFace",param:a},function(a){b&&b(a)})}}})});
define("../../units/bindAccount",["../components/units/pageJob","../components/action/checkDoms","../kit/thirdPartLogin","../interfaces/ppsBindQiyi","../kit/validate","../kit/anim","../interfaces/pcLogin","../kit/getWebEventID","../kit/userInfo","../kit/thirdPartyBtn"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/thirdPartLogin"),g=a("../interfaces/ppsBindQiyi"),h=a("../kit/validate"),i=a("../kit/anim"),j=a("../interfaces/pcLogin"),k=a("../kit/getWebEventID"),l=a("../kit/userInfo"),m=a("../kit/thirdPartyBtn"),n="bindAccount",o,p,q,r,s,t,u,v;d.create(n,{getDependentDoms:function(){return this._wrapper=Q.$("#widget-bindaccount"),{wrapper:this._wrapper}},check:function(a){return e(a),!0},_sendPingback:function(a,b){k(function(c){var d={type:"ppszhanghaoguanlian",flshuid:Q.cookie.get("QC005"),ppuid:Q.cookie.get("P00003")||"",weid:c,act:a};b&&(d.dialog=b),Q.log.server(d,"http://msg.video.qiyi.com/tmpstats.gif")})},_renderDom:function(a){var b=["<!--绑定帐号 开始-->",'<div class="usrTxGeneral-box usrTx-box_popup usrTx-bind-box"',' style="display: none" data-bindaccount-elem="bindwindow" >','<i data-centerbox-elem="loginArrow" class="nav_arrow"></i>',"<h2>绑定爱奇艺帐号</h2>",'<div class="usrTxGeneral-box_bd">','<div class="mailType-box-bind" style="display: none" data-elem="bindmailsuggest" ></div>','<div class="logReg-form">','<table class="tabs-regRorm notest-tabs" data-elem="login-table">',"<tbody>",'<tr data-elem="emailTr">',"<th>帐号：</th>","<td>",'<div data-elem="emailWrap" class="acountBorder">','<input type="text" value="请输入邮箱或手机…" class="in-txt" data-elem="emailInput"',' data-bindaccount-username="username"> ','<span class="in-tips" data-elem="emailTip"></span>',"</div>","</td>","</tr>",'<tr data-elem="passwdTr">',"<th>密码：</th>","<td>",'<div data-elem="passwdWrap" class="acountBorder">','<input type="password" data-elem="passwdInput" class="in-txt"',' data-bindaccount-password="password">','<span class="in-tips" data-elem="passwdTip" style="width: 48px;">','<a href="http://passport.iqiyi.com/user/backpwd.php" tabindex="-1" class="toforget">忘记密码</a>',"</span>",'<span data-elem="passwdDefaultCover" class="in-pwd" style="display: block;">请输入密码…</span>',"</div> ","</td>","</tr>","<tr>","<th></th>",'<td class="pb0">','<div class="con0520Btn">','<a href="#" class="all520Btn all520Btn_green" data-bindaccount-elem="btnbind">','<span class="lt520Btn">绑  定</span>',"</a>","</div>","</td>","</tr>","</tbody>","</table>","</div>",'<div class="bindOther-box" data-bindaccount-elem="thirdwrap">',"<p>绑定到爱奇艺合作帐号：</p>",'<div class="bindOther-box_ico">',m.weibo(!0),m.qq(!0),m.baidu(!0),m.renren(!0),m.kaixin(!0),m.zhifubao(!0),"</div>",'<div class="noUser">',"<p>没有爱奇艺帐号？</p>",'<p><a href="#" data-bindaccount-elem="btnregister">现在注册</a></p>',"</div>","</div>","</div> ","</div>","<!--绑定帐号 结束-->","<!--登录成功 开始-->",'<div class="usrTxGeneral-box usrTx-box_popup usrTx-bindOperate-box"',' style="display: none" data-bindaccount-elem="bindtip" >','<i data-centerbox-elem="loginArrow" class="nav_arrow"></i>','<h2 class="green">恭喜您成功登录</h2>','<div class="usrTxGeneral-box_bd p25100">',"<p>您可以：</p>","<p>绑定您已有的爱奇艺帐号，实现信息共通。</p>",'<div class="usrTxGeneral_btnBox">','<div class="con0520Btn">','<a href="#" class="all520Btn all520Btn_green" data-bindaccount-elem="btnstartbind" ','data-bindaccount-param="first" >','<span class="lt520Btn">绑定爱奇艺帐号</span>',"</a>","</div> ","</div>",'<p class="tc">不进行绑定，<a href="#" class="green" data-bindaccount-elem="btnskipbind">跳过此步骤</a></p>',"</div> ","</div>","<!--登录成功 结束--> ","<!--跳过绑定 开始-->",'<div class="usrTxGeneral-box usrTx-box_popup usrTx-bindOperate-box"',' style="display: none" data-bindaccount-elem="skiptip" >','<i data-centerbox-elem="loginArrow" class="nav_arrow"></i>',"<h2>您跳过了帐号绑定</h2>",'<div class="usrTxGeneral-box_bd p2590">',"<p>此帐号将无法与爱奇艺帐号绑定。</p>","<p>您帐号中的播放记录、VIP信息等将无法共通。</p>","<p>您是否要跳过帐号绑定？</p>",'<div class="usrTxGeneral_btnBox">','<div class="con0520Btn">','<a href="#" class="all520Btn all520Btn_green" data-bindaccount-elem="btnstartbind">','<span class="lt520Btn">绑定</span>',"</a>","</div> ",'<div class="con0520Btn">','<a href="#" class="all520Btn all520Btn_green" data-bindaccount-elem="btncancelbind">','<span class="lt520Btn">跳过</span>',"</a>","</div> ","</div> ","</div> ","</div>","<!--跳过绑定 结束-->   ","<!--绑定提示 开始--> ",'<div class="usrTxGeneral-box usrTx-box_popup usrTx-bindOperate-box" style="display: none"',' data-bindaccount-elem="failwindow">','<i data-centerbox-elem="loginArrow" class="nav_arrow"></i>',"<h2>绑定爱奇艺帐号</h2>",'<div class="usrTxGeneral-box_bd p2040040">',"<p>您的爱奇艺帐号可能存在以下问题：</p>","<p>1、已被别的帐号绑定；</p>","<p>2、您的帐号具有爱奇艺会员权益，为了保障您的权益不受损害；</p>","<p>不提供自动绑定；</p>","<p>如果您仍需绑定，请拨打爱奇艺客服热线：400-800-7171</p> ",'<div class="usrTxGeneral_btnBox">','<div class="con0520Btn">','<a href="#" class="all520Btn all520Btn_green" data-bindaccount-elem="btnknow">','<span class="lt520Btn">我知道了</span>',"</a>","</div> ","</div> ","</div> ","</div> ","<!--绑定提示 结束-->",'<iframe class="frameLayer" data-bindaccount-elem="bg"></iframe>'].join("");a.html(b),this._doms={widget:a,bindTip:a.down("[data-bindaccount-elem=bindtip]"),skipTip:a.down("[data-bindaccount-elem=skiptip]"),bindWindow:a.down("[data-bindaccount-elem=bindwindow]"),btnStartBind:a.down("[data-bindaccount-elem=btnstartbind]"),btnSkipBind:a.down("[data-bindaccount-elem=btnskipbind]"),btnCancelBind:a.down("[data-bindaccount-elem=btncancelbind]"),btnBind:a.down("[data-bindaccount-elem=btnbind]"),thirdAuthWrap:a.down("[data-bindaccount-elem=thirdwrap]"),btnRegister:a.down("[data-bindaccount-elem=btnregister]"),failWindow:a.down("[data-bindaccount-elem=failwindow]"),btnKnow:a.down("[data-bindaccount-elem=btnknow]"),bg:a.down("[data-bindaccount-elem=bg]")}},init:function(){var a=this;a._wrapper.html().trim()||a._wrapper.hide(),Q.event.customEvent.on("ppsAccountFirstLogin",function(){a._doms||a._initDom(),a._showBindTip()})},_initDom:function(){this._renderDom(this._wrapper);var a=this._doms;this._displayOfChildren=[];var b=a.widget.children();if(b){b=b.filter(function(a){return a.nodeName.toLowerCase()=="div"});for(var c=0;c<b.length;c++)this._displayOfChildren.push(Q.$(b[c]).css("display"))}var d=this,e=a.btnStartBind;e.on("click",function(a){Q.event.get(a).stop(),d._showBindWindow(),Q.$(this).attr("data-bindaccount-param")?d._sendPingback("clickbind"):d._sendPingback("clickunion")});var h=a.btnSkipBind;h.on("click",function(a){Q.event.get(a).stop(),d._showSkipBindTip(),d._sendPingback("clickskiplink")});var i=a.btnCancelBind;i.on("click",function(a){Q.event.get(a).stop(),d._cancelBind(),d._sendPingback("clickskip")});var k=a.btnKnow;k.on("click",function(a){Q.event.get(a).stop(),d._cancelBind()});var m=a.btnRegister;m.on("click",function(a){Q.event.get(a).stop(),d._hideAllChildren(),Q.event.customEvent.fire({type:"regIqiyiAccount"})}),Q.event.customEvent.on("backAccountBind",function(){d._showBindWindow()}),Q.event.customEvent.on("ppsAccountCancelBind",function(){d._cancelBind()}),Q.event.customEvent.on("iqiyiAccountRegSuccess",function(a){d._bindAccount(a.data)}),Q.event.customEvent.fire({type:"ppsAccountBindDomReady",data:{input:a.widget.down("[data-bindaccount-username=username]"),wrapper:a.bindWindow.down("[data-elem=bindmailsuggest]")}});var n=["hideHeaderBoxFromVipHeader","playHistoryShow","updateRecordsShow","navOneShow","suggestShow","updateRecordTipShow","pcLoginBoxShow","pcUserBoxShow"];n.forEach(function(a){Q.event.customEvent.on(a,d._cancelBind.bind(d))}),this.bindCheckInputEvent(),this.ppsBindQiyi=!1,Q.event.customEvent.on("login",function(a){!a.data&&d.ppsBindQiyi&&d._successBind()}),Q.event.customEvent.on("logout",function(a){d.ppsBindQiyi=!1});var o=navigator.userAgent.toLowerCase(),p=/ipad/.test(o)?10:Q.browser.android?13:Q.browser.iPhone?12:1;a.thirdAuthWrap.delegate("bindAuthLogin",function(a){Q.event.get(a.event).preventDefault();var b=Q.event.get(a),c=Q.$(b.target),e=c.attr("data-sourceId");if(e){var g=c.attr("href");g+="&agenttype="+p,f.show(e,g),d.ppsBindQiyi=!0}});var q=a.btnBind;q.on("click",function(b){Q.event.get(b).preventDefault();var c=a.widget.down("[data-bindaccount-username=username]"),e=a.widget.down("[data-bindaccount-password=password]"),f=new g,h=c.value().trim(),i=e.value().trim();if(h==d._opt.defaultText.email||!i)return;var k={};k.email=h,k.passwd=i,k.agenttype=p,k.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36),f.bindQiyi(k,function(a){if(a.code=="A00000"){var b=a.data.authcookie,c={authcookie:b},e=new j("auth");e.request(c,function(a){l.clearUserInfo(),Q.event.customEvent.fire({type:"login",data:a.data}),d._successBind()})}else a.code=="P00406"||a.code=="P00104"?d.showErrorMsg("passwd","密码错误"):(a.code=="P00136"||a.code=="P00137")&&d._showFailBindWindow(),console.info("绑定失败")})})},bindCheckInputEvent:function(){var a=this._doms.widget;this._doms.emailWrap=a.down("[data-elem='emailWrap']"),this._doms.passwdWrap=a.down("[data-elem='passwdWrap']"),this._doms.passwdDefaultCover=a.down("[data-elem='passwdDefaultCover']"),this._doms.emailTr=a.down("[data-elem='emailTr']"),this._doms.emailTip=a.down("[data-elem='emailTip']"),this._doms.passwdTip=a.down("[data-elem='passwdTip']"),this._doms.passwdTr=a.down("[data-elem='passwdTr']"),this._doms.wrapper=a;var b=this;this._doms.emailInput=a.down("[data-bindaccount-username=username]"),this._doms.passwdInput=a.down("[data-bindaccount-password=password]"),b._opt={},b._opt.defaultText={},b._opt.defaultText.email="请输入邮箱或手机…",a.down("input").on("blur",this._blur.bind(this)),this._doms.passwdDefaultCover.on("click",function(a){b._changeFocus(a,this)}),this._doms.emailInput.on("focus",function(a){b._changeFocus(a,this)}),this._doms.passwdInput.on("focus",function(a){b._changeFocus(a,this)});var c=this._doms;Q.event.customEvent.on("mailSuggestHide",function(a){a.data.input[0]===c.emailInput[0]&&(Q.browser.SAFARI||Q.browser.CHROME?(a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!1,!1),c.passwdDefaultCover[0].focus(),c.passwdDefaultCover[0].dispatchEvent(a)):c.passwdDefaultCover[0].click())})},resetTips:function(a){var b=this._doms;if(a=="email"||a=="all")b.emailTip.html(""),b.emailTr.removeClass("error-tds");if(a=="passwd"||a=="all"){var c="<a class='toforget' tabIndex='-1' href='http://passport.iqiyi.com/user/backpwd.php'>忘记密码</a>";b.passwdTip.html(c),b.passwdTr.removeClass("error-tds"),clearTimeout(o),b.passwdTip.css("width","48px")}},_blur:function(a){var b=this;clearTimeout(b.st);var c=Q.event.get(a);c.preventDefault();var d=Q.$(c.target),e,f=d.attr("data-elem"),g=d.value(),h;f.indexOf("email")>=0?(h="email",e=b._doms.emailWrap,g.trim()===""&&d.value(b._opt.defaultText.email),b._doms.emailTr.hasClass("error-tds")&&b.resetTips("email")):f.indexOf("passwd")>=0&&(h="passwd",e=b._doms.passwdWrap,g===""&&b._doms.passwdDefaultCover.show(),b._doms.passwdTr.hasClass("error-tds")&&b.resetTips("passwd")),e.removeClass("acountIn"),setTimeout(function(){b.validate(b.getLoginData(),h,!0)},200)},validate:function(a,b,c){if(!b||b=="email")if(!h.empty(a.email))return(!c||c&&a.email!=this._opt.defaultText.email)&&this.showErrorMsg("email","格式错误"),!1;if(!b||b=="passwd")if(!h.empty(a.passwd))return(!c||c&&this._doms.passwdDefaultCover.css("display")!="block")&&this.showErrorMsg("passwd","密码错误"),!1;return!0},showErrorMsg:function(a,b){var c=b||"";this.resetTips("all");var d=this._doms;d.wrapper.down("tr").removeClass("error-tabs");switch(a){case"email":d.emailTr.addClass("error-tds"),d.emailTip.html(c);break;case"passwd":d.passwdTr.addClass("error-tds"),b.indexOf("4-20")>=0&&this.errorMsgAnim(d.passwdTip,c,"格式错误"),d.passwdTip.html(c);break;default:}},errorMsgAnim:function(a,b,c){var d=this;s=b,t=c,a.css("visibility","hidden"),a.css("width",""),a.html(c),p=a.width(),a.width(0),a.html(b),q=a.width(),a.css("visibility","visible"),o=setTimeout(function(){d.change(a,p,c)},3e3),r=a,a.un("mouseenter",u),a.un("mouseleave",v),a.on("mouseenter",u),a.on("mouseleave",v)},change:function(a,b,c){clearTimeout(o),i({elem:a,from:a.width(),to:b,style:"width",done:function(){a.html(c)}})},getLoginData:function(){var a=this._doms,b={};return b.email=a.emailInput&&a.emailInput.value().trim(),b.passwd=a.passwdInput&&a.passwdInput.value().trim(),b.fromurl="",b},_changeFocus:function(a,b){this._empty=!1;var c=Q.event.get(a);c.preventDefault();var d=Q.$(c.target),e,f=c.target.tagName.toLowerCase(),g=d.attr("data-elem"),h=this._doms;if(f=="input"){if(g.indexOf("email")>=0)e=h.emailWrap,d.value().trim()=="请输入邮箱或手机…"&&d.value("");else if(g.indexOf("passwd")>=0){e=h.passwdWrap;var i=h.passwdDefaultCover.css("display");if(!i||i=="block")d.value(""),h.passwdDefaultCover.hide()}}else g.indexOf("passwd")>=0&&(e=h.passwdWrap,h.passwdInput.value(""),h.passwdDefaultCover.hide(),h.passwdInput[0].focus());var j=e&&e.addClass("acountIn")},_resetDisplayOfChildren:function(){var a=this._doms.widget.children();if(a){a=a.filter(function(a){return a.nodeName.toLowerCase()=="div"});for(var b=0;b<a.length;b++)Q.$(a[b]).css("display",this._displayOfChildren[b])}this._doms.widget.hide()},_hideAllChildren:function(){var a=this._doms.widget.children();if(a){a=a.filter(function(a){return a.nodeName.toLowerCase()=="div"});for(var b=0;b<a.length;b++)Q.$(a[b]).hide()}this._doms.widget.hide()},_showWrapper:function(){this._doms.widget.show(),Q.event.customEvent.fire({type:"bindAccountWrapperShow"})},_showBindTip:function(){this._hideAllChildren();var a=this._doms,b=a.bindTip;this._showWrapper(),b.show(),a.bg.css("height",b.height()+"px"),this._sendPingback("show","remind")},_showBindWindow:function(){this._hideAllChildren();var a=this._doms,b=a.bindWindow;this._doms&&(this._doms.emailInput.value(this._opt.defaultText.email),this._doms.passwdDefaultCover.show(),this._doms.emailTr.hasClass("error-tds")&&this.resetTips("email"),this._doms.passwdInput.value(""),this._doms.passwdDefaultCover.show(),this._doms.passwdTr.hasClass("error-tds")&&this.resetTips("passwd")),this._showWrapper(),b.show(),a.bg.css("height",b.height()+"px"),this._sendPingback("show","bind")},_showSkipBindTip:function(){this._hideAllChildren();var a=this._doms,b=a.skipTip;this._showWrapper(),b.show(),a.bg.css("height",b.height()+"px"),this._sendPingback("show","skip")},_showFailBindWindow:function(){this._hideAllChildren();var a=this._doms,b=a.failWindow;this._showWrapper(),b.show(),a.bg.css("height",b.height()+"px")},_cancelBind:function(){this._resetDisplayOfChildren(),Q.event.customEvent.fire({type:"ppsAccountEndBind"})},_bindAccount:function(a){l.clearUserInfo(),Q.event.customEvent.fire({type:"login",data:a}),this._successBind()},_successBind:function(){this._resetDisplayOfChildren(),Q.event.customEvent.fire({type:"ppsAccountEndBind"}),Q.event.customEvent.fire({type:"ppsAccountSuccBind"}),this._sendPingback("bindsucc")}}),d.add(n)});
define("../../interfaces/ppsBindQiyi",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("snsAccounts",{construct:function(){this._remoteInterface=new d({bindQiyi:{url:"http://passport.iqiyi.com/apis/user/bind_iqiyi_user.php",struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{bindQiyi:function(a,b){a=a||"",a.cb=a.cb||"ppsBindQiyi",a.t=(new Date).getTime(),this._remoteInterface.send({ifname:"bindQiyi",param:a},function(a){b&&b(a)})}}})});
define("../../units/dramaKingAddToDesktop",["../components/units/pageJob","../components/action/checkDoms","../kit/yingyinPluginV2","../kit/qiyiPlayer","../kit/getWebEventID","../kit/userInfo","../kit/anim","../config/siteDomain"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/yingyinPluginV2"),g=a("../kit/qiyiPlayer"),h=a("../kit/getWebEventID"),i=a("../kit/userInfo"),j=a("../kit/anim"),k=a("../config/siteDomain"),l=new Q.ic.InfoCenter({moduleName:"dramaKingAddToDesktop"}),m="dramaKingAddToDesktop",n=Q.plugins.clearSwf,o=g.getPlayer("video"),p="QC029",q=!1,r,s,t,u,v,w={},x=window.info||{};x.data=x.data||{};var y=window.albumInfo||{},z=[],A;d.create(m,{getDependentDoms:function(){var a=Q.$('*[data-widget-drama="desktop"]');return a&&a.length>0&&a.forEach(function(a){var b=Q.$(a);z.push({doms:b,installWidget:b.down("[data-drama-check=install]"),installNoWidget:b.down("[data-drama-checkinstall=no]"),installYesWidget:b.down("[data-drama-checkinstall=yes]"),progressbarWidget:b.down("[data-drama-checkinstall=progressbar]"),titleWidget:b.down("[data-drama-elem=title]"),progressWidget:b.down("[data-drama-elem=progress]")})}),z},check:function(a){var b=!0;return a.forEach(function(a){e(a)}),b},init:function(){var a=this,b=Q.browser.getOS().toLowerCase().indexOf("win");if(b==-1)return!1;q=f.checkDramaKing(),a.initDefaultData(),a.initStyle(),o.on("addToTable",function(){q?(a.sendPingback({tvid:r,c1:A.ChannelID,url:A.VideoUrl,isInstall:1,from:"suggest"}),a.installYingyinHandle({data:A})):(a.sendPingback({tvid:r,c1:A.ChannelID,url:A.VideoUrl,isInstall:0,from:"suggest"}),a.sendDataToFlash({data:A}),a.unInstallYingyinHandle({file:s}))}),o.on("videoChanged",function(a){var b=a.data||{};A.AlbumID=parseInt(b.aid,10)||0,A.AlbumName=b.an||"",A.PicUrl=b.apic||"",A.TvYear=parseInt(b.ty,10)||0,A.VideoUrl=b.vu||"",r=b.tvid}),Q.$(document).delegate("installdrama",a.doDeskClickHander.bind(this)),setTimeout(function(){a.initStyle()},3e4),setTimeout(function(){a.initStyle()},6e4),setTimeout(function(){a.initStyle()},12e4)},initDefaultData:function(){s||(s=z[0].installWidget.attr("data-drama-exefile")||"http://static.qiyi.com/ext/common/QYFollowVideo/QiyiInstaller.exe"),t||(t=z[0].installWidget.attr("data-drama-classno")||"addToDesk_btn--progress"),u||(u=z[0].installWidget.attr("data-drama-classyes")||"addToDesk_btn--complete"),v||(v=z[0].doms.attr("data-desktop-from"));switch(v){case"album":v="album";break;case"searchlist":v="search";break;default:v="player"}},initStyle:function(){var a=this;z.forEach(function(b){var c=b.doms;c.css("display")=="none"&&c.css("display","block"),r||(r=b.installWidget.attr("data-drama-tvid")||y.tvId||0),A=a.getInitParam(b.installWidget);if(q){var d=A.AlbumID,e={};if(w[d]&&w[d].albumid)a.setStyleAdded(b);else{var g=f.sendInfoToDrama(A);g?(a.setStyleAdded(b),e.albumid=d,e.isadd=!0):(a.setStyleToAdd(b),e.isadd=!1)}w[d]=e}})},doDeskClickHander:function(a){var b=this;Q.event.get(a).preventDefault();var c=Q.$(a.target||a.srcElement),d={installWidget:c,installNoWidget:c.down("[data-drama-checkinstall=no]"),installYesWidget:c.down("[data-drama-checkinstall=yes]"),progressbarWidget:c.down("[data-drama-checkinstall=progressbar]"),titleWidget:c.down("[data-drama-elem=title]"),progressWidget:c.down("[data-drama-elem=progress]")},e=d.installWidget.attr("data-drama-tvid")||y.tvId||0,f=d.installWidget.attr("data-drama-albumid")||y.albumId||0,g=d.installWidget.attr("data-drama-categoryid")||y.albumType||0;if(w[f]&&w[f].albumid)return;if(w[f]&&w[f].isadd)return;if(!A||v=="search")A=b.getInitParam(d.installWidget);if(q){var h={};h.albumid=f,h.isadd=!0,w[f]=h,b.sendPingback({tvid:e,c1:g,url:A.VideoUrl,isInstall:1,from:v}),d.installNoWidget.hide(),d.progressbarWidget.show(),v=="search"?b.setStyleAddedlist(d):b.setStyleProgress(d),b.installYingyinHandle({data:A})}else b.sendPingback({tvid:e,c1:g,url:A.VideoUrl,isInstall:0,from:v}),b.sendDataToFlash({data:A}),b.unInstallYingyinHandle({file:s})},setPageCookieName:function(a){var b=this,c=a.installWidget,d=c.attr("data-drama-albumid")||y.albumId||0,e=c.attr("data-drama-tvid")||y.tvId||0;v=="album"?p+=d:p+=e},getPageCookieValue:function(){var a=this;return Q.cookie.get(p)},getInitParam:function(a){var b=a||{},c=b.attr("data-drama-categoryid")||y.albumType||0,d=b.attr("data-drama-albumid")||y.albumId||0,e=b.attr("data-drama-albumname")||y.tvName||"",f=b.attr("data-drama-albumpicurl")||y.tvPictureUrl||"",g=b.attr("data-drama-sourcename")||"",h=b.attr("data-drama-sourceid")||0,i=b.attr("data-drama-tvyear")||y.tvYear||0,j=0,k;return v=="search"?k=b.attr("data-drama-currenturl")||"":k=location.href,{ChannelID:parseInt(c,10),AlbumID:parseInt(d,10),AlbumName:e,PicUrl:f,SouceName:g,SouceCode:parseInt(h,10),VideoUrl:k,TvYear:parseInt(i,10),Type:j}},setStyleAdded:function(a){a.installNoWidget.hide(),a.progressbarWidget.hide(),a.installYesWidget.show(),a.installWidget.removeClass(t),a.installWidget.addClass(u)},setStyleAddedlist:function(a){a.progressbarWidget.hide(),a.installYesWidget.show(),a.installWidget.addClass(u)},setStyleToAdd:function(a){a.installNoWidget.show(),a.installYesWidget.hide()},setStyleProgress:function(a){var b=this,c=a.progressWidget.parent().width()-2,d=a.progressWidget.attr("data-drama-progresstime")||100,e=parseInt(d,10)/100;a.installWidget.addClass(t);var f=0,g=setInterval(function(){if(f<100){a.titleWidget.html(f+"%");var d=parseFloat(f/100*c);a.progressWidget.css("width",d+"px"),f++}else clearInterval(g),b.setStyleAdded(a)},e)},doShowPopbox:function(a){var b=this,c=a.popbox,d=a.animtime,e=a.loadtime,f=parseFloat(c.css("opacity"));Q.browser.IE?setTimeout(function(){c.show()},e):(c.show(),setTimeout(function(){j({style:"opacity",elem:c,from:f,to:1,ease:"Circ.easeIn",duration:d})},e))},doHidePopbox:function(a){var b=this,c=a.popbox,d=a.animtime,e=a.loadtime;Q.browser.IE?setTimeout(function(){c.hide()},e):setTimeout(function(){var a=parseFloat(c.css("opacity"));j({style:"opacity",elem:c,from:a,to:0,ease:"Circ.easeInOut",duration:d,done:function(){c.hide()}})},e)},sendPingback:function(a){var b=a.tvid,c=a.url,d=a.from,e=a.isInstall,f=a.c1,g,j;e?(g=31,j=b):(g=0,j="download");var k=Q.date.format(new Date,"yyyyMMddHHmmss"),l=Q.crypto.md5(k),m=Q.cookie.get("QC005"),n=Math.floor(999999999*Math.random()),o=i.getUid(),p="http://msg.iqiyi.com/b";h(function(a){var b={t:5,a:g,pf:1,p:11,p1:102,c1:f,s1:1,s2:d,s3:c,r:j,e:l,se:a,u:m,pu:o,rn:n},e=decodeURIComponent(Q.url.jsonToQuery(b)),h=new Image(1,1);h.src=p+"?"+e})},installYingyinHandle:function(a){var b=a.data;f.downDramaKing(b)?l.warn("[ "+m+" ]"+'access to "GetDeskFavorInfo" success !'):l.warn("[ "+m+" ]"+'access to "GetDeskFavorInfo" failure !')},unInstallYingyinHandle:function(a){location.href=a.file,l.warn("[ "+m+" ]"+'access to "GetDeskFavorInfo" failure !')},sendDataToFlash:function(a){var b=a.data;try{n.on("ready",function(a){a.setDeskTVInfo(JSON.stringify(b))}),l.warn("[ "+m+" ]"+'access to "setDeskTVInfo" success !')}catch(c){l.warn("[ "+m+" ]"+'access to "setDeskTVInfo" failure !')}}}),d.add(m)});
define("../../kit/responsive",[],function(a,b,c){var d=Q.$("[data-widget-responsivelayout=responsivelayout]"),e=Q.$("*[data-widget-maincontent=maincontent]"),f=Q.$(document.body),g=[],h="medium",i=function(a,b){if(g)for(var c=0;c<g.length;c++){var d=g[c];d(a,b)}},j=function(a){if(e){var b=e&&e.width()||0;b&&(b>=a?f.css("width",b+"px"):f.css("width","100%"))}};j(Q.page.getViewWidth()>Q.page.getWidth()?Q.page.getWidth():Q.page.getViewWidth());if(d){var k=d.attr("data-responsivelayout-param");k=Q.url.queryToJson(k);var l=[],m=Q.page.getViewWidth()>Q.page.getWidth()?Q.page.getWidth():Q.page.getViewWidth();for(var n in k){var o=k[n].split("_"),p={cls:n};o[0]&&o[0]!==""?p.min=parseInt(o[0],10):p.min=0,o[1]&&o[1]!==""?p.max=parseInt(o[1],10):p.max=9999,l.push(p),m>=p.min&&m<=p.max&&(h=p.cls)}var q=null}Q.$(window).on("onresize",function(){q&&clearTimeout(q),q=setTimeout(function(){var a=Q.page.getViewWidth()>Q.page.getWidth()?Q.page.getWidth():Q.page.getViewWidth(),b;if(m!==a&&d){for(var c=0;c<l.length;c++){var e=l[c];b=e.cls;var g=e.min,k=e.max;a>=g&&a<=k?(f.addClass(b),b!==h&&setTimeout(function(){i(h,a)},100),h=b):f.removeClass(b)}m=a,j(a)}},100)}),c.exports={addListener:function(a){d&&g.push(a)},getCurrentLayout:function(){return{bodyClass:h}}}});
define("../../kit/flashSnsAuth",["../kit/qiyiPlayer","../kit/snsWindowKit","./flashCall"],function(a,b,c){var d=a("../kit/qiyiPlayer"),e=d.getPlayer("video"),f=a("../kit/snsWindowKit"),g=a("./flashCall");Q.event.customEvent.on("thirdPartSnsBinded",function(a){g({flashID:"flash",callback:function(){},functionName:"noticeBindInfo",parameter:a})}),Q.event.customEvent.on("swf_flashSnsAuth",function(a){var b=a.data.type,c=a.data.url;f.open(b,c)})});
define("../../units/iframeOpenWin",["../components/units/pageJob","../kit/iframeLocation"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/iframeLocation"),f="iframeOpenWin";d.create(f,{check:function(){return!0},init:function(){if(window.top!==window.self&&e.test(document.referrer)){var a=document.createElement("base");a.target="_blank",document.getElementsByTagName("head")[0].appendChild(a)}}}),d.add(f)});
define("../../units/pcYingYinDownload",["../components/units/pageJob","../components/action/checkDoms","../kit/pcYingYinDownloadKit"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/pcYingYinDownloadKit"),g="pcYingYinDownload",h;d.create(g,{getDependentDoms:function(){return h=Q.$("*[data-widget-pcyingyingdownload]"),{pcdown:h}},check:function(a){return e(a),!0},init:function(){var a=this,b=new f({doms:h});b.init()}}),c.exports=g,d.add(g)});
define("../../kit/pcYingYinDownloadKit",["../kit/userInfo","../kit/iframeLocation"],function(a,b,c){var d=a("../kit/userInfo"),e=a("../kit/iframeLocation"),f=Q.Class("VideoDownload",{construct:function(a){this._doms=a.doms},methods:{init:function(){this.bindEvent()},bindEvent:function(){var a=this._doms,b=this;a.on("click",function(a){Q.event.get(a).preventDefault();var c=Q.$(this),d=c.attr("data-pcyingyingdownload-ptype"),f=c.attr("data-pcyingyingdownload-etype");b.sendPingback({ptype:d,etype:f}),e.href(c.attr("href"),{time:500})})},sendPingback:function(a){a=a||{},Q.log.server({type:"yingyinentrencem20130813",ppuid:d.getUid(),flshuid:Q.cookie.get("QC005"),qtcurl:e.url()||"",pagetype:a.ptype||"",enttype:a.etype||"",tn:(new Date).getTime()+Math.random()},"http://msg.video.qiyi.com/tmpstats.gif")}}});c.exports=f});
define("../../units/newPlayBase",["../units/qipaLogin","../units/topLineFloaterV2","../units/snsVisitorLoginFloater","../units/attention","../units/favourite","../units/comment","../units/qiyu","../units/wheelScroll","../units/flashExpand","../units/videoDownload","../units/mark","../units/like","../units/share","../units/moviePlayShare","../units/subscribe","../units/videoKeyPoints","../units/flashAndPageVideoListSync","../units/fixIeTitleChange","../units/expandable","../units/pcFullScreen","../units/timeSettingShow","../units/movePlace","../units/shareThirdParty","../units/ThirdPartyTrigger","../units/moviePlayTabs","../units/switchLight","../units/playCount","../units/breadCrumbs","../units/qiTanGetRecordNum","../units/playBasicInfoTabsV2","../units/autoLoadQiyiClient","../units/playerPopup","../units/videoInfo/foldExpand","../units/dimensionalCodeFloter","../units/videoInfo/moreOrLess","../units/shareToWeiXin","../units/randomWordsAd","../units/baidudown","../units/pcYingYinDownload","../units/videoInfo/videoInfoActorRoleTable","../units/videoInfo/videoInfoActorRoleTableTabTitle","../units/videoInfo/videoInfoActors","../units/videoInfo/videoInfoBreadcrumbCats","../units/videoInfo/videoInfoCategoryKeyWords","../units/videoInfo/videoInfoDirectors","../units/videoInfo/videoInfoGaoqingtishiqu","../units/videoInfo/videoInfoInnerTab","../units/videoInfo/videoInfoMActors","../units/videoInfo/videoInfoMainActors","../units/videoInfo/videoInfoMoreTags","../units/videoInfo/videoInfoPositiveAlbumUrl","../units/videoInfo/videoInfoPresentors","../units/videoInfo/videoInfoProducers","../units/videoInfo/videoInfoPubTime","../units/videoInfo/videoInfoQuqitankangengduo","../units/videoInfo/videoInfoShangying","../units/videoInfo/videoInfoSource","../units/videoInfo/videoInfoStarYingshiju","../units/videoInfo/videoInfoStarYulezixun","../units/videoInfo/videoInfoStarZongyi","../units/videoInfo/videoInfoTags","../units/videoInfo/videoInfoTvDesc","../units/videoInfo/videoInfoTvDescTabTitle","../units/videoInfo/videoInfoTvFocus","../units/videoInfo/videoInfoTvName","../units/videoInfo/videoInfoTvPh","../units/videoInfo/videoInfoTvYear","../units/videoInfo/videoInfoWriters","../units/videoInfo/videoInfoYuleTags","../units/videoInfo/videoInfoZhuanti","../units/videoInfo/yuleVideoInfoTagUI","../units/videoInfo/videoInfoYuleNewTags","../units/videoInfo/yuleVideoInfoNewTagUI","../units/videoInfo/tvVideoInfoTvJianjieTab","../units/newSignWheel","../units/newQrCode","../units/hao123PlayHistory","../units/changeHash","../units/downHotChat","../units/ipadAdResource","../units/playAutoNextArrayList","../units/playPrevNextArrayList","../units/videoAuthPlay","../units/videoLayerShow","../units/videoPlayBtn","../units/videoControlBarLocate","../units/mobileBigPlayBtn","../units/fullScreen","../units/videoExpand","../units/videoProgress","../units/pingbackVV","../units/pingbackKadunRate","../units/padPlay"],function(a,b,c){var d=[a("../units/qipaLogin"),a("../units/topLineFloaterV2"),a("../units/snsVisitorLoginFloater"),a("../units/attention"),a("../units/favourite"),a("../units/comment"),a("../units/qiyu"),a("../units/wheelScroll"),a("../units/flashExpand"),a("../units/videoDownload"),a("../units/mark"),a("../units/like"),a("../units/share"),a("../units/moviePlayShare"),a("../units/subscribe"),a("../units/videoKeyPoints"),a("../units/flashAndPageVideoListSync"),a("../units/fixIeTitleChange"),a("../units/expandable"),a("../units/pcFullScreen"),a("../units/timeSettingShow"),a("../units/movePlace"),a("../units/shareThirdParty"),a("../units/ThirdPartyTrigger"),a("../units/moviePlayTabs"),a("../units/switchLight"),a("../units/playCount"),a("../units/breadCrumbs"),a("../units/qiTanGetRecordNum"),a("../units/playBasicInfoTabsV2"),a("../units/autoLoadQiyiClient"),a("../units/playerPopup"),a("../units/videoInfo/foldExpand"),a("../units/dimensionalCodeFloter"),a("../units/videoInfo/moreOrLess"),a("../units/shareToWeiXin"),a("../units/randomWordsAd"),a("../units/baidudown"),a("../units/pcYingYinDownload"),a("../units/videoInfo/videoInfoActorRoleTable"),a("../units/videoInfo/videoInfoActorRoleTableTabTitle"),a("../units/videoInfo/videoInfoActors"),a("../units/videoInfo/videoInfoBreadcrumbCats"),a("../units/videoInfo/videoInfoCategoryKeyWords"),a("../units/videoInfo/videoInfoDirectors"),a("../units/videoInfo/videoInfoGaoqingtishiqu"),a("../units/videoInfo/videoInfoInnerTab"),a("../units/videoInfo/videoInfoMActors"),a("../units/videoInfo/videoInfoMainActors"),a("../units/videoInfo/videoInfoMoreTags"),a("../units/videoInfo/videoInfoPositiveAlbumUrl"),a("../units/videoInfo/videoInfoPresentors"),a("../units/videoInfo/videoInfoProducers"),a("../units/videoInfo/videoInfoPubTime"),a("../units/videoInfo/videoInfoQuqitankangengduo"),a("../units/videoInfo/videoInfoShangying"),a("../units/videoInfo/videoInfoSource"),a("../units/videoInfo/videoInfoStarYingshiju"),a("../units/videoInfo/videoInfoStarYulezixun"),a("../units/videoInfo/videoInfoStarZongyi"),a("../units/videoInfo/videoInfoTags"),a("../units/videoInfo/videoInfoTvDesc"),a("../units/videoInfo/videoInfoTvDescTabTitle"),a("../units/videoInfo/videoInfoTvFocus"),a("../units/videoInfo/videoInfoTvName"),a("../units/videoInfo/videoInfoTvPh"),a("../units/videoInfo/videoInfoTvYear"),a("../units/videoInfo/videoInfoWriters"),a("../units/videoInfo/videoInfoYuleTags"),a("../units/videoInfo/videoInfoZhuanti"),a("../units/videoInfo/yuleVideoInfoTagUI"),a("../units/videoInfo/videoInfoYuleNewTags"),a("../units/videoInfo/yuleVideoInfoNewTagUI"),a("../units/videoInfo/tvVideoInfoTvJianjieTab"),a("../units/newSignWheel"),a("../units/newQrCode"),a("../units/hao123PlayHistory"),a("../units/changeHash"),a("../units/downHotChat")];if(Q.browser.iPad||Q.browser.iPhone||Q.browser.android)d.push(a("../units/ipadAdResource")),d.push(a("../units/playAutoNextArrayList")),d.push(a("../units/playPrevNextArrayList")),d.push(a("../units/videoAuthPlay")),d.push(a("../units/videoLayerShow")),d.push(a("../units/videoPlayBtn")),d.push(a("../units/videoControlBarLocate")),d.push(a("../units/mobileBigPlayBtn")),d.push(a("../units/fullScreen")),d.push(a("../units/videoExpand")),d.push(a("../units/videoProgress")),d.push(a("../units/pingbackVV")),d.push(a("../units/pingbackKadunRate")),d.push(a("../units/padPlay"));c.exports=d});
define("../../units/qipaLogin",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../action/qipaLogin"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/userInfo"),g="qipaLogin",h=a("../action/qipaLogin"),i=Q.event.customEvent,j=encodeURIComponent("http://t.qiyi.com/opening/start.php?returnUrl="+encodeURIComponent(document.location.href));d.create(g,{getDependentDoms:function(){return{}},check:function(){return e(this.getDependentDoms()),!0},init:function(){var a=this;i.on("login",function(b){a._loginSuccess(b)}),i.on("loginIframeClosed",function(){h.closeLoginWindow(),h.clearTempCallback()})},exec:function(){var a=this;Q.$(document).delegate("login",a._dlgLogin.bind(a)),Q.$(document).delegate("logout",a._dlgLogout.bind(a))},_dlgLogin:function(a){var b=this,c=Q.event.get(a.event);c.preventDefault(),f.isLogin()||h.openLoginWindow({regUrl:j,btnId:Q.$(c.target).attr("id")||""})},_dlgLogout:function(a){},_loginSuccess:function(a){h.closeLoginWindow(),h.runTempCallback()}}),c.exports=g});
define("../../units/snsVisitorLoginFloater",["../components/units/pageJob","../kit/userInfo","../kit/getWebEventID","../kit/thirdPartLogin","../config/siteDomain"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/userInfo"),f=a("../kit/getWebEventID"),g=a("../kit/thirdPartLogin"),h=a("../config/siteDomain"),i="snsVisitorLoginFloater";d.create(i,{check:function(){return!0},init:function(){},exec:function(){var a=document.referrer,b=Q.url.getQueryValue(location.href,"source");if(!a&&!b)return;a=Q.url.parse(a);var c;b?c=b.split(".").slice(-2,-1):c=a.host.split(".").slice(-2,-1);var d={qq:{title1:"QQ",title2:"QQ",type:4,classname:"guest_qq",url:"http://passport."+h.SITE_DOMAIN+"/oauth/login.php?isiframe=1&type=4"},weibo:{title1:"新浪微博",title2:"微博",type:2,classname:"guest_weibo",url:"http://passport."+h.SITE_DOMAIN+"/oauth/login.php?isiframe=1&type=2"},renren:{title1:"人人网",title2:"人人网",type:3,classname:"guest_ren",url:"http://passport."+h.SITE_DOMAIN+"/oauth/login.php?isiframe=1&type=3"}},i=d[c];if(!i)return;var j={type:"snsusrlog20121112",ppuid:e.getUid()||"",flshuid:Q.cookie.get("QC005"),jsuid:Q.cookie.get("QC006"),sns:c},k=document.createElement("div");k.className="new_add1107",k.style.display=e.isLogin()?"none":"",k.style.position="relative",k.style.zIndex="90",k.innerHTML=['<div class="guest_remind">','<div class="guest_wrap">','<a href="#" class="guest_close"></a>',"<h1>","<span>使用您的"+i.title1+"帐号登录爱奇艺，即刻尊享"+i.title2+"用户专属服务。</span>",'<a href="'+i.url+'" class="guest_login '+i.classname+'"></a>',"</h1>","</div>","</div>"].join(""),Q.$(k).down("a.guest_close").on("click",function(a){Q.event.preventDefault(a),k.style.display="none",f(function(a){Q.log.server(Q.object.extend({act:"clkclose",weid:a},j),"http://msg.video.qiyi.com/tmpstats.gif")})}),Q.$(k).down(".guest_login").on("click",function(a){Q.event.stop(a),f(function(a){Q.log.server(Q.object.extend({act:"clklogin",weid:a},j),"http://msg.video.qiyi.com/tmpstats.gif")}),g.show(i.type,i.url,{a:2})}),setTimeout(function(){f(function(a){Q.log.server(Q.object.extend({act:"showdiv",weid:a},j),"http://msg.video.qiyi.com/tmpstats.gif")})},2e3),document.body.insertBefore(k,document.body.childNodes[0]),Q.event.customEvent.on("login",function(){k.style.display="none"})}}),c.exports=i});
define("../../units/attention",["../components/units/pageJob","../components/action/checkDoms"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f="attention",g;d.create(f,{getDependentDoms:function(){var a=Q.$("*[data-widget-attention]");return a&&(g={content:a.down("*[data-attention-elem=content]"),list:a.down("*[data-attention-elem=list]"),iconBtn:a.down("*[data-attention-elem=iconbtn]")}),g},check:function(){return e(g),!0},init:function(){this.iframeIsload=0,this.start=0,this.end=200,this.speed=150,this.contentAnim=Q.anim(g.list),g.content.on("mouseenter",this.mouseenter.bind(this)),g.content.on("mouseleave",this.mouseleave.bind(this)),this.expand=0;var a=this,b=Q.browser.iPad;b&&g.content.on("click",function(){a.expand==1?a.mouseleave():a.expand===0&&a.mouseenter()})},mouseenter:function(){var a=this;a.iframeIsload||(a.lazyLoadIframe(),a.iframeIsload=1),g.content.addClass("fsBg"),g.list.css("overflow","visible"),this.contentAnim.stop(),this.contentAnim.duration(this.speed).ease("Linear").from("height",this.start).to("height",this.end).go().onDone(function(){g.iconBtn.removeClass("icon_down"),g.iconBtn.addClass("icon_up"),a.expand=1})},mouseleave:function(){g.list.css("overflow","hidden"),this.contentAnim.stop();var a=this;this.contentAnim.duration(this.speed).ease("Linear").from("height",this.end).to("height",this.start).go().onDone(function(){g.content.removeClass("fsBg"),g.iconBtn.removeClass("icon_up"),g.iconBtn.addClass("icon_down"),a.expand=0})},lazyLoadIframe:function(){var a=g.content.down("iframe");a&&a.forEach(function(a){a=Q.$(a);var b=a.attr("attention-src"),c=a.attr("src");!c&&b&&a.attr("src",b)})}}),c.exports=f});
define("../../units/favourite",["../components/units/pageJob","../kit/isStoreBrowser"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/isStoreBrowser"),f,g="favourite";d.create(g,{check:function(){var a=!0;return f=Q.$("*[data-widget-favorite]"),f||(a=!1),a},init:function(){var a=window.external,b=window.sidebar;e?f.on("click",function(){var c=location.href,d=document.title;if(b){b.addPanel(d,c,"");return}if(a){if("addFavorite"in a){a.addFavorite(c,d);return}"AddFavorite"in a&&a.AddFavorite(c,d)}}):f.addClass("collect_no")}}),c.exports=g});
define("../../kit/isStoreBrowser",[],function(a,b,c){var d=window.external,e=window.sidebar,f=d||e,g=/se \d\.x/.test(navigator.userAgent.toLowerCase()),h=Q.browser.Maxthon||!Q.browser.CHROME&&!Q.browser.IE7,i=g||h&&f;c.exports=i});
define("../../units/comment",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../kit/qitanPingback","../action/qipaLogin"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/qiyiPlayer"),g="qitanComment",h=new Q.ic.InfoCenter({moduleName:"qitanComment"}),i=a("../kit/qitanPingback"),j=a("../action/qipaLogin"),k,l=+(new Date),m=encodeURIComponent("http://t.qiyi.com/opening/start.php?returnUrl="+encodeURIComponent(document.location.href)),n,o=6e4,p;d.create(g,{getDependentDoms:function(){return n={comment:Q.$("#qitancommonarea")},n},check:function(a){return e(a),!0},exec:function(){var a=this,b=n.comment;if(!b)return;o=b.attr("data-qitancomment-timeout")||o;var c="http://static.qiyi.com/js/qitanv6/qitan_video_page.js",d="http://static.iqiyi.com/js/qitan/jobs/qitan/qitan_comment.js",e=b.attr("data-qitancomment-type"),f=b.attr("id"),g,h=lib.__callbacks__.logBox_close;lib.__callbacks__.logBox_close.isMainsite||(lib.__callbacks__.logBox_close=function(a){h(a),Q.event.customEvent.fire({type:"loginIframeClosed"}),Q.event.customEvent.fire({type:"msgboxclose"})});var i=function(){clearTimeout(p);if(g)a.doLoadQitan({url:d,data:g});else{var c=b.attr("data-qitancomment-tvid"),h=b.attr("data-qitancomment-qitanid"),i=b.attr("data-qitancomment-categoryid"),k=b.attr("data-qitancomment-title"),l=b.attr("data-qitancomment-tvyear"),m=b.attr("data-qitancomment-playorder");g={cmdId:f,tvId:c||"0",qitanId:h||"0",categoryId:i||"0",qitan_comment_type:e||"0",title:k||"",playurl:location.href||"",tv_year:l||"0",play_order:m||"0"},a.doLoadQitan({url:d,data:g})}Q.$(window).un("scroll",j)},j=function(){b.isInScreen()&&i()};Q.$(window).on("scroll",j),j(),p=setTimeout(function(){i()},o),Q.kit.QiyiPlayer.getPlayer("video").on("videoChanged",function(a){a=a||{},a.data=a.data||{},g={},g.cmdId=f,g.qitan_comment_type=e,g.tvId=a.data.tvid||"0",g.qitanId=a.data.qtId||"0",g.categoryId=a.data.c||"",g.playurl=a.data.vu||"",g.title=a.data.vn||"",g.tv_year=a.data.ty||"0",g.play_order=a.data.pd||"0",k&&k.reload(g)}),Q.event.customEvent.on("login",function(){k&&k.userStatusChange(1)}),Q.event.customEvent.on("logout",function(){k&&k.userStatusChange(0)})},doLoadQitan:function(a){var b=n.comment,c=a.url,d=a.data,e=+(new Date);i({ri:"req",qitanId:d.qitanId,customParams:{td:e-l}}),seajs.use(c,function(a){k=new a({middleware:{login:{show:function(){j.openLoginWindow({regUrl:m})},hide:function(){j.closeLoginWindow(),j.clearTempCallback()},on:function(a,b){Q.event.customEvent.on(a,b)}}},parm:d}),k.init();var c=+(new Date)-e,f={ri:"suc",qitanId:d.qitanId,customParams:{td:c}};i(f);var g=function(){setTimeout(function(){h.log("loadQitanComment"),b.children()?(setTimeout(function(){Q.event.customEvent.fire({type:"hasScrollToQitan"})},300),setTimeout(function(){Q.event.customEvent.fire({type:"hasScrollToQitan"})},600),h.log("finishLoadQitanComment")):g()},500)};g()})}}),c.exports=g});
define("../../kit/qitanPingback",["./getWebEventID","./userInfo","./basicstat/index","./basicstat/steps/bindParams","./basicstat/steps/createParamPool","./basicstat/steps/getType","./basicstat/steps/getPlatform","./basicstat/steps/getSource","./basicstat/steps/getSubSource","./basicstat/steps/getUid","./basicstat/steps/getPuid","./basicstat/steps/getRandom","./basicstat/steps/getCustomParam","./basicstat/steps/send"],function(a,b,c){var d=a("./getWebEventID"),e=a("./userInfo"),f=a("./basicstat/index");c.exports=function(b){var c={type:"9",s2:location.href};Q.object.extend(c,b);var e=new f(c);e.implement("绑定传入参数",a("./basicstat/steps/bindParams")),e.implement("创建参数池",a("./basicstat/steps/createParamPool")),e.implement("获取日志类型",a("./basicstat/steps/getType")),e.implement("获取平台产品",a("./basicstat/steps/getPlatform")),e.implement("获取资源类型",{methods:{_process:function(a,b){a.params.rt="qitancmt",b(null,a)}}}),e.implement("获取资源接口",{methods:{_process:function(a,c){a.params.ri=b.ri||"suc",c(null,a)}}}),e.implement("获取一级来源",a("./basicstat/steps/getSource")),e.implement("获取二级来源",a("./basicstat/steps/getSubSource")),e.implement("获取用户ID",a("./basicstat/steps/getUid")),e.implement("获取登录用户ID",a("./basicstat/steps/getPuid")),e.implement("获取资源ID",{methods:{_process:function(a,c){a.params.r=b.qitanId,c(null,a)}}}),e.implement("获取事件ID",{methods:{_process:function(a,b){d(function(c){a.params.ce=c,b(null,a)})}}}),e.implement("获取随机数",a("./basicstat/steps/getRandom")),e.implement("获取自定义参数",a("./basicstat/steps/getCustomParam")),e.implement("发送",a("./basicstat/steps/send")),e.init()}});
define("../../kit/basicstat/index",["./stepdef/bindParams","./stepdef/createParamPool","./stepdef/getType","./stepdef/getPlatform","./stepdef/getChannel","./stepdef/getSubChannel","./stepdef/getSource","./stepdef/getSubSource","./stepdef/getResType","./stepdef/getResInterface","./stepdef/getEid","./stepdef/getSeid","./stepdef/getRid","./stepdef/getUid","./stepdef/getPuid","./stepdef/getInterval","./stepdef/getRandom","./stepdef/getDefination","./stepdef/getUserAct","./stepdef/getPlayerAct","./stepdef/isNewUser","./stepdef/getCustomParam","./stepdef/send"],function(a,b,c){var d=Flowjs.Class({extend:Flowjs.Flow,construct:function(b){this.callsuper(b),this._addStep("绑定传入参数",a("./stepdef/bindParams")),this._addStep("创建参数池",a("./stepdef/createParamPool")),this._addStep("获取日志类型",a("./stepdef/getType")),this._addStep("获取平台产品",a("./stepdef/getPlatform")),this._addStep("获取一级频道",a("./stepdef/getChannel")),this._addStep("获取二级频道",a("./stepdef/getSubChannel")),this._addStep("获取一级来源",a("./stepdef/getSource")),this._addStep("获取二级来源",a("./stepdef/getSubSource")),this._addStep("获取资源类型",a("./stepdef/getResType")),this._addStep("获取资源接口",a("./stepdef/getResInterface")),this._addStep("获取事件ID",a("./stepdef/getEid")),this._addStep("获取来源事件ID",a("./stepdef/getSeid")),this._addStep("获取资源ID",a("./stepdef/getRid")),this._addStep("获取用户ID",a("./stepdef/getUid")),this._addStep("获取登录用户ID",a("./stepdef/getPuid")),this._addStep("获取时间长度",a("./stepdef/getInterval")),this._addStep("获取随机数",a("./stepdef/getRandom")),this._addStep("获取码流",a("./stepdef/getDefination")),this._addStep("获取用户行为",a("./stepdef/getUserAct")),this._addStep("获取播放器行为",a("./stepdef/getPlayerAct")),this._addStep("判断是否新用户",a("./stepdef/isNewUser")),this._addStep("获取自定义参数",a("./stepdef/getCustomParam")),this._addStep("发送",a("./stepdef/send")),this._options=b},methods:{init:function(){var a=this;a._go("绑定传入参数",{options:this._options}),a._go("创建参数池"),a._go("获取日志类型"),a._go("获取平台产品"),a._go("获取一级频道"),a._go("获取二级频道"),a._go("获取一级来源"),a._go("获取二级来源"),a._go("获取资源类型"),a._go("获取资源接口"),a._go("获取事件ID"),a._go("获取来源事件ID"),a._go("获取资源ID"),a._go("获取用户ID"),a._go("获取登录用户ID"),a._go("获取时间长度"),a._go("获取随机数"),a._go("获取码流"),a._go("获取用户行为"),a._go("获取播放器行为"),a._go("判断是否新用户"),a._go("获取自定义参数",{options:this._options}),a._go("发送")}}});c.exports=d});
define("../../kit/basicstat/stepdef/bindParams",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{options:{type:"object",empty:!0}},output:{options:{type:"object",empty:!0}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/createParamPool",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{},output:{params:{type:"object",struct:{hello:{type:"string",empty:!0}}}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getType",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getPlatform",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getChannel",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getSubChannel",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getSource",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getSubSource",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getResType",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getResInterface",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getEid",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getSeid",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getRid",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getUid",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getPuid",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getInterval",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getRandom",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getDefination",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object",empty:!0}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getUserAct",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getPlayerAct",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/isNewUser",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/getCustomParam",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object",empty:!0}},output:{params:{type:"object"}}}}}});c.exports=e});
define("../../kit/basicstat/stepdef/send",[],function(a,b,c){var d=Flowjs.Class,e=d({extend:Flowjs.Step,construct:function(a){this.callsuper(a)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{}}}}});c.exports=e});
define("../../kit/basicstat/steps/bindParams",[],function(a,b,c){c.exports={methods:{_process:function(a,b){b(null,a)}}}});
define("../../kit/basicstat/steps/createParamPool",[],function(a,b,c){c.exports={methods:{_process:function(a,b){b(null,{params:{}})}}}});
define("../../kit/basicstat/steps/getType",[],function(a,b,c){c.exports={methods:{_process:function(a,b){a.params.t=a.options.type,b(null,a)}}}});
define("../../kit/basicstat/steps/getPlatform",["../../statPlatform"],function(a,b,c){var d=a("../../statPlatform");c.exports={methods:{_process:function(a,b){var c=d.get();a.params.pf=c.platform,a.params.p=c.subpf,a.params.p1=c.product,a.params.p2=c.subpd,b(null,a)}}}});
define("../../kit/statPlatform",[],function(a,b,c){c.exports={get:function(a){var b="1",c="10",d="101",e="1011";return Q.browser.iPad?(b="2",c="20",d="202",a=="live"&&(e="2016")):Q.browser.WP||Q.browser.android||Q.browser.iPhone?(b="2",c="20",d="201",a=="live"&&(e="2016")):a=="live"&&(e="1012"),{platform:b,subpf:c,product:d,subpd:e}}}});
define("../../kit/basicstat/steps/getSource",[],function(a,b,c){c.exports={methods:{_process:function(a,b){a.params.s1="1",b(null,a)}}}});
define("../../kit/basicstat/steps/getSubSource",[],function(a,b,c){c.exports={methods:{_process:function(a,b){a.params.s2=location.href,b(null,a)}}}});
define("../../kit/basicstat/steps/getUid",["../../jsuid"],function(a,b,c){var d=a("../../jsuid");c.exports={methods:{_process:function(a,b){d.get(function(c){a.params.u=c,b(null,a)})}}}});
define("../../kit/jsuid",["./uuid"],function(a,b,c){var d=a("./uuid");c.exports={get:function(a){var b={},c=this,e=Q.cookie.get("QC006");if(e){a(e);return}var f=function(a){Q.cookie.set("QC006",a,{duration:31536e6,path:"/",domain:"iqiyi.com"})};d.get(function(b){f(b),a(b)})}}});
define("../../kit/uuid",["../interfaces/uidInterface"],function(a,b,c){var d=a("../interfaces/uidInterface");c.exports={get:function(a){var b=new d;b.request(function(b){var c=b.uid;c||(c=Q.crypto.md5((new Date).getTime()+window.navigator.userAgent+document.cookie)),a(c)})}}});
define("../../kit/basicstat/steps/getPuid",["../../userInfo"],function(a,b,c){var d=a("../../userInfo");c.exports={methods:{_process:function(a,b){a.params.pu=d.getUid(),b(null,a)}}}});
define("../../kit/basicstat/steps/getRandom",[],function(a,b,c){c.exports={methods:{_process:function(a,b){a.params.rn=(new Date).getTime(),b(null,a)}}}});
define("../../kit/basicstat/steps/getCustomParam",[],function(a,b,c){c.exports={methods:{_process:function(a,b){var c=a.params,d=a.options;if(d&&d.customParams){var e=d.customParams;for(var f in e)if(e.hasOwnProperty(f)){if(c.hasOwnProperty(f))throw new Error("自定义参数名称："+f+" 非法！");c[f]=e[f]||""}}b(null,a)}}}});
define("../../kit/basicstat/steps/send",[],function(a,b,c){c.exports={methods:{_process:function(a,b){Q.log.server(a.params,"http://msg.iqiyi.com/b"),b()}}}});
define("../../units/qiyu",["../components/units/pageJob","../components/action/checkDoms","../action/qiyuRecommend","../model/qiyuRecommendModel","../view/qiyuVideoView","../kit/userInfo"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../action/qiyuRecommend"),g=a("../model/qiyuRecommendModel"),h=a("../view/qiyuVideoView"),i=a("../kit/userInfo"),j="qiyu",k;d.create(j,{getDependentDoms:function(){return k=Q.$("*[data-widget-qiyu]"),{widget:k}},check:function(a){return e(a),!0},init:function(){k.forEach(function(a,b){var c=Q.$(a);if(!c)return;var d={ul:c.down("[data-qiyu-elem=list]"),tplNode:c.down("[data-qiyu-tpl=list]"),loading:c.down("[data-qiyu-loading]"),player:Q.$("[data-widget-player=flash]")},e=c.attr("data-qiyu-albumid"),j=c.attr("data-qiyu-requeststatus"),k=c.attr("data-qiyu-categoryid"),l=c.attr("data-qiyu-rltnum")||12,m=c.attr("data-qiyu-area"),n=d.tplNode.value(),o=c.down("[data-qiyu-failelem]"),p=c.attr("data-qiyu-domain"),q=c.attr("data-qiyu-lessrltnum"),r="";d.player&&(r=d.player.attr("data-player-expandstate"));var s=i.getUid(),t=c.attr("data-qiyu-numofcutname"),u=c.attr("data-qiyu-hookup"),v=c.attr("data-qiyu-playcount"),w=c.attr("data-qiyu-fc"),x=c.attr("data-qiyu-ls")||"",y=c.attr("data-qiyu-ischangewithplayerexpand")||"",z=Q.browser.iPad?21:Q.browser.android||Q.browser.iPhone?31:11;z!==11&&(m="h_"+m);var A=z==11?Q.cookie.get("QC005"):z==21||z==31?Q.cookie.get("QC006"):null,B=k==-4?1:0,C=new g,D=new h({doms:{recommend:d.ul,fail:o,widget:c,loading:d.loading},tpl:n,numOfCutName:t,albumId:e,categoryId:k,pb_platform:z,ppuid:s,viptype:B,uid:A,rltnum:l,area:m,domain:p,requeststatus:j,hookup:u,isPlayCount:v,fc:w,ls:x,which:r==="false"?"black":"white",lessrltnum:q,isChangeWithPlayerExpand:y}),E=new f({model:C,view:D});E.init({platform:1,uid:A,ppuid:s,viptype:B,area:m,domain:p,albumId:e,cb:"cb_"+parseInt(Math.random()*1e10,10).toString(36),aid:e,categoryId:k,rltnum:l,ls:x}),u&&E.on("qiyu-data-ready",function(a){Q.event.customEvent.fire({type:"qiyu-data-ready",data:a.data})})})}}),c.exports=j});
define("../../action/qiyuRecommend",["../action/templateRenderer","../model/qiyuRecommendModel","../view/qiyuRecommendView","../kit/eventPlugin","../kit/qiyuPingbackPlugin"],function(a,b,c){var d=a("../action/templateRenderer"),e=a("../model/qiyuRecommendModel"),f=a("../view/qiyuRecommendView"),g=a("../kit/eventPlugin"),h=a("../kit/qiyuPingbackPlugin");c.exports=Q.Class("QiyuRecommend",{extend:d,plugins:[new g],construct:function(a){a=a||{},a.model=a.model||new e,a.view=a.view||new f(a),this._init=!1,this._plugins={qiyupingback:h},this.callsuper(a)},methods:{init:function(a){a=a||{},this._renderAction(a)},_renderAction:function(a){var b=this;b.fire({type:"qiyu-send-act",data:{}}),b._model.makeupData(a,function(a){b._init=!0,b._view.toRender(a),b.fire({type:"qiyu-data-ready",data:a})})},plugin:function(a){"qiyupingback"in this._plugins&&h.qiyu(a)},_destroy:function(){this._view._destroy()}}})});
define("../../model/qiyuRecommendModel",["../model/templateModel","../interfaces/qiyuRecommendInterface","../components/model/recommendModelUtil","../interfaces/playCountsInterface"],function(a,b,c){var d=a("../model/templateModel"),e=a("../interfaces/qiyuRecommendInterface"),f=a("../components/model/recommendModelUtil"),g=Q.date.formatSeconds,h=a("../interfaces/playCountsInterface");c.exports=Q.Class("QiyuRecommendModel",{extend:d,construct:function(a){a=a||{},this.callsuper(a),this.rmu=new f},methods:{makeupData:function(a,b){var c=this;a=this._bulidParams(a);var d=new e(a);d.request(a,function(a){a=a||{},a.code==="A00000"?(a=c._bulidData(a),b&&b(a)):b(!1)})},_bulidParams:function(a){a=a||{};var b={};return b.albumId=a.albumId||"",b.area=a.area||"",b.uid=a.uid||"",b.ppuid=a.ppuid||"",b.domain=a.domain||"www",b.cb=a.cb||"album_recommend",b.aid=b.albumId,b.cid=a.categoryId||"",b.rltnum=a.rltnum||"",b.s_num=a.s_num||"0",b.ls=a.ls||"",b.platform=a.platform||"",b.viptype=a.viptype||"",b},__parseData:function(a){var b=this,c=a.album_channel,d=a.album_name,e={};e.albumId=a.id,e.categoryId=c,e.albumPlayUrl=a.album_play_url,e.firstTvid=a.album_tvid,e.firstVid=a.album_vid,e.focus=a.album_focus.substring(0,10),e.name=d,a.album_play_count&&(e.playcount=b.rmu.formatPlayCount(a.album_play_count));var f=a.album_pic_url;f=f.replace(".jpg","_110_70.jpg");var h=a.album_main_actor||"";e.actors=h,e.apic=f,e.initIssueTime=a.initIssueTime,e.pubtime=a.album_date,e.tags=a.album_tag,e.season=a.album_season||"",e.period=a.album_phase||"",e.isSeries=a.album_sets_flag,e.codeId=a.album_source_id==-1?0:a.album_source_id;var i=a.album_update_flag,j=a.album_prospect_sets_num,k=a.album_sets_num;return j===0&&i===1?e.follow=a.album_sets_num:i===0?e.follow=a.album_sets_num:e.sets=a.album_prospect_sets_num,a.album_time_length&&(e.playTime=g(a.album_time_length)),e.purchaseType=parseInt(a.purchaseType,10),e.source=a.album_source,e.tag=a.tag,e["3d"]=parseInt(a.album_3d,10),e.hc=parseInt(a.album_hc,10),e},_bulidData:function(a){a=a.data;var b=a.attributes,c=a.self,d=this,e=[],f=a.albums||[],g=[];return f.forEach(function(a){var b=d.__parseData(a);e.push(b)}),c&&(c=d.__parseData(c)),{data:e,self:c,attributes:b}}}})});
define("../../interfaces/qiyuRecommendInterface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("QiyuRecommendInterface",{construct:function(a){a=a||{};var b;a.platform=="1"?b="http://rec.inter.qiyi.com/resys"+(a.viptype?"/yml":""):b="http://qiyu.m.iqiyi.com/resys";var c={albumRecommend:{url:b,struct:{code:{type:"string",empty:"false"},data:{type:"object",empty:"false",struct:{albums:{type:"array",empty:"false",item:{type:"object",empty:"false",struct:{}}},attributes:{type:"object",empty:"false",struct:{event_id:{type:"string",empty:"false"},bkt:{type:"string",empty:"false"},area:{type:"string",empty:"false"}}}}}}}};this._remoteInterface=new d(c)},methods:{request:function(a,b){a=a||{};var c=a.timeout;delete a.timeout,this._remoteInterface.send({ifname:"albumRecommend",param:a,cors:!0,timeout:c||5e3},function(a){b&&b(a)})}}})});
define("../../components/model/recommendModelUtil",["./model","../../model/channelModel"],function(a,b,c){var d=a("./model"),e=a("../../model/channelModel");c.exports=Q.Class("RecommendModelUtil",{ns:"Q.model",extend:d,construct:function(a){a=a||{},this.channelModel=new e,this.callsuper()},methods:{getData4PTmpl:function(a){var b=this;return returns=a||[],a.forEach(function(a){var c=b.channelModel.getCategoryById(a.album_channel);a.category=c;var d={};d[album_channel]=b._bindData(a),data.push(d)}),data},getCategoryById:function(a){var b=this.channelModel.getCategoryById(a);return b.htid},_bindData:function(a){return a},_formatPlayCount:function(a){if(a.length<3)return a;var b=[];while(a.length>3){var c=a.substring(a.length-3,a.length);a=a.substr(0,a.length-3),b.push(c)}return b.push(a),b.reverse(),b.join(",")},formatPlayCount:function(a){return this._formatPlayCount(a.toString())},parseTag:function(a){if(a){var b=a.split(","),c={};return b.forEach(function(a){var b=a.split(":");c[b[1]]||(c[b[1]]=[]),c[b[1]].push(b[0])}),c}return{}}}})});
define("../../interfaces/playCountsInterface",["../kit/remoteInterface","../config/mobileConfig"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/mobileConfig");c.exports=Q.Class("PlayCountsInterface",{construct:function(a){a=a||{};var b=a.albumId||"",c=a.type?e.interfaces.p+""+b+"/":e.interfaces.pc+""+b+"/";this._remoteInterface=new d({playCounts:{url:c,struct:{type:"array",empty:!1,item:{type:"object",empty:!1}}}})},methods:{request:function(a,b){a=a||"",this._remoteInterface.send({ifname:"playCounts",cors:!0,param:a},function(a){b&&b(a)})}}})});
define("../../view/qiyuRecommendView",["../view/templateView","../kit/lazyload","../components/model/recommendModelUtil","../kit/qiyiPlayer"],function(a,b,c){var d=a("../view/templateView"),e=a("../kit/lazyload"),f=a("../components/model/recommendModelUtil"),g=Q.event.customEvent,h=a("../kit/qiyiPlayer");c.exports=Q.Class("QiyuRecommendView",{extend:d,construct:function(a){a=a||{},this._doms=a.doms||"",this._ppuid=a.ppuid||"",this._categoryId=a.categoryId,this._aid=a.albumid,this._uid=a.uid,this._area=a.area,a.tplUrl=a.tplUrl||"",this.rmu=new f,this.callsuper(a)},methods:{init:function(a){this._ctrl=a,this._initEvent()},toRender:function(a){var b=this;b.load(function(){b.render(a,function(c){a!==!1&&b._renderUHtml(c),b._ctrl.fire({type:"qiyu-recommend-done",data:a}),g.fire({type:"qiyu-recommend-done",data:a}),e.check()})})},_getData:function(a){var b=this;this._area=a.attributes.area,this._bkt=a.attributes.bkt,this._event_id=a.attributes.event_id;var c=a.data||[];if(c.length===0)return{data:null,norecommend:"没有相关推荐"};var d=[];return c.forEach(function(a){var c={},e=a.categoryId;a.sname=a.name.length>20?a.name.substring(0,20):"",e=="14"?(a.channel="shishang",a.cat="shishanga"):(a.channel=b.rmu.getCategoryById(e),a.cat=a.channel+"a");if(e==22||e==20)a.pubtime=a.initIssueTime?a.initIssueTime.substring(0,10):"";(e==21||e==17)&&a["album_date"]=="NULL"&&(a.pubtime=a.initIssueTime?a.initIssueTime.substring(0,10):"");var f=b.rmu.parseTag(a.tags),g=f["地区"]||[],h=f["类型"]||[],i=f["片种"]||[],j=f["一级分类"]||[],k=f["二级分类"]||[],l=f["三级分类"]||[],m=f["语种"]||[];e==1||e==2||e==4?(g.length?f=g.join("/")+"/"+h.splice(0,2).join("/"):f=h.splice(0,2).join("/"),f=(a.pubtime.slice(0,4)+"/").concat(f)):e==16?f=i.concat(h).join("/"):e==12?f=j.concat(k).concat(l).join("/"):e==5?g.length&&(f=g.join("/")+"/"+m.join("/")+"/"+h.splice(0,2).join("/")):g.length?f=g.join("/")+"/"+h.splice(0,4).join("/"):f=h.splice(0,4).join("/"),a.tags=f.replace(/\/$/,""),a.actors&&(a.emcee=a.actors.split(",","3").join(",")),c[e]=a,d.push(c)}),{data:d}},_renderUHtml:function(a){this._doms.recommend&&this._doms.recommend.html(a)},_initEvent:function(){var a=this,b=h.getPlayer("video");this.qiyu_recommend_done_handler=function(c){var d=a._doms.recommend;if(!d||!d.down("li"))return;var e=d.down("li").length;if(!e||!c.data)return;d.down("li").forEach(function(a,b){Q.$(a).attr("data-qiyu-idx",b+1)}),d.down("a").on("click",function(c){if(b._player)b.getVideoInfo(function(b){var d=Q.$(c.currentTarget),e=d.parent("li"),f=e.attr("data-qiyu-idx"),g={};g.href=d.attr("href"),g.idx=f,g.cid=b.c||e.attr("data-qiyu-cid"),g.aid=b.aid||e.attr("data-qiyu-aid"),g.uid=a._uid,g.bkt=a._bkt,g.platform=31,g.area=a._area,g.ppuid=a._ppuid,g.event_id=a._event_id,g.taid=e.attr("data-qiyu-aid"),g.tcid=e.attr("data-qiyu-cid"),a._ctrl.plugin(g)});else{var d=Q.$(c.currentTarget),e=d.parent("li"),f=e.attr("data-qiyu-idx"),g={};g.href=d.attr("href"),g.idx=f,g.cid=a._categoryId||e.attr("data-channelid"),g.aid=a._aid||e.attr("data-albumid"),g.uid=a._uid,g.bkt=a._bkt,g.platform=31,g.area=a._area,g.ppuid=a._ppuid,g.event_id=a._event_id,g.taid=e.attr("data-albumid"),g.tcid=e.attr("data-channelid"),a._ctrl.plugin(g)}})},g.on("qiyu-recommend-done",this.qiyu_recommend_done_handler)},_destroy:function(){g.un("qiyu-recommend-done",this.qiyu_recommend_done_handler)}}})});
define("../../kit/lazyload",[],function(a,b,c){var d,e,f="data-lazy",g=function(){},h=function(){e&&clearTimeout(e),e=setTimeout(function(){d=null},100),i()},i=function(){j(),d&&d.length>0&&d.forEach(function(a,b){a=Q.$(a);var c=a.attr(f);c&&a.isInScreen()&&(a.attr("src",c),a.removeAttr(f),g(a))})},j=function(){d||(d=Q.$("img["+f+"]"))};c.exports={init:function(a){a=a||{},f=a.flag||f,g=a.ready||g,Q.$(window).on("scroll",h),Q.$(window).on("resize",h),i()},check:function(){d=null,i()},destroy:function(){Q.$(window).un("scroll",h),Q.$(window).un("resize",h),d=null}}});
define("../../kit/qiyuPingbackPlugin",["../kit/getWebEventID"],function(a,b,c){var d=a("../kit/getWebEventID"),e={qiyu:function(a){d(function(b){var c={type:"recctplay20121226",usract:"userclick",ppuid:a.ppuid,uid:a.uid,aid:a.aid,event_id:a.event_id,cid:a.cid,bkt:a.bkt,area:a.area,rank:a.idx,url:"",tag:"field",platform:a.platform};a.taid&&(c.taid=a.taid),a.tcid&&(c.tcid=a.tcid),Q.log.server(c,"http://msg.video.qiyi.com/tmpstats.gif")})}};c.exports=e});
define("../../view/qiyuVideoView",["../view/qiyuRecommendView","../kit/getWebEventID","../kit/userInfo","../kit/iframeLocation"],function(a,b,c){var d=a("../view/qiyuRecommendView"),e=a("../kit/getWebEventID"),f=a("../kit/userInfo"),g=a("../kit/iframeLocation"),h=new Q.ic.InfoCenter({moduleName:"QiyuVideoView"}),i=Q.Class("QiyuVideoView",{extend:d,construct:function(a){this.callsuper(a),this.config({plugins:{storage:null}}),this._tpl=a.tpl,this._doms=a.doms||"",this.requeststatus=a.requeststatus||"0",this.albumid=a.albumId,this.categoryId=a.categoryId,this.rltnum=a.rltnum||4,this.area=a.area,this.pb_platform=a.pb_platform,this.ppuid=a.ppuid,this.uid=a.uid,this.domain=a.domain,this.numOfCutName=a.numOfCutName||20,this.viptype=a.viptype,this.hookup=a.hookup||0,this.isPlayCount=a.isPlayCount||0,this.searchPrefix=a.searchPrefix||"http://so.iqiyi.com/so/q_",this.fc=a.fc||"",this.ls=a.ls||"",this.which=a.which||"white",this.isChangeWithPlayerExpand=a.isChangeWithPlayerExpand?!0:!1,this.lessrltnum=a.lessrltnum,this._count=0},statics:{count:0},methods:{init:function(a){this._ctrl=a,this.initEvent(),this.platform="1",this.clickHander=null,this._doms.loading||(this._doms.loading=this._doms.recommend.down(".loading"))},dynamicPlayCount:function(){this.isPlayCount==1&&Q.event.customEvent.fire({type:"dynamicPlayCount",data:{container:this._doms.recommend}})},fingerEvent:function(){var a=0,b=0,c=0,d=0;return{start:function(c){a=c.targetTouches[0].pageX,b=c.targetTouches[0].pageY},end:function(e,f){c=e.changedTouches[0].pageX,d=e.changedTouches[0].pageY;var g=Math.abs(d-b)<5&&Math.abs(c-a)<5;g&&(h.log("~~~~~~~~~~~~~~~~~~~~~~~~@isClick"),this.clickEvent(e,f))}}},initEvent:function(){this._doms.fail&&this._doms.fail.on("click",this._reloadQiyu.bind(this));var a=this;a._ctrl.on("qiyu-recommend-done",function(b){function r(){a._doms.recommend.isInScreen()&&(a._sendPingBack(o),Q.$(window).un("scroll",r))}var c=a._doms.recommend.down("li"),d=c&&c.length;if(!d||!b.data)return;Q.event.customEvent.fire({type:"qidan_add_renderDone",data:{wrapper:a._doms.recommend}});var e=0;a._doms.recommend.down("li").forEach(function(a,b){Q.$(a).attr("data-videolist-this")||Q.$(a).attr("data-qiyu-idx",e++)}),a.dynamicPlayCount();var f=a.fingerEvent(),g=f.start.bind(a),i=f.end.bind(a);a.clickHandler=function(b){a.clickEvent(b,this)};var j=a._doms.recommend,k=j.down("a"),l=j.down("li"),m=Q.browser.iPad||Q.browser.iPhone;if(m){h.debug("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~isSupportIOS");var n=function(a){i(a,this)};a.which==="black"?(l.on("touchstart",g),l.on("touchend",n)):(k.on("touchstart",g),k.on("touchend",n))}else a.which=="black"?l.on("click",a.clickHandler):k.on("click",a.clickHandler);var o={};o.idx="",o.usract="show",o.platform=a.pb_platform;var p=b.data.data,q=[];p.forEach(function(a){q.push(a.albumId)}),o.albumlist=q.join(","),a._doms.recommend.isInScreen()&&(a._sendPingBack(o),a._count++),a._count<1&&Q.$(window).on("scroll",r);var s=Q.kit.QiyiPlayer.getPlayer("video");s.on("expand",function(b){if(!j||!a.isChangeWithPlayerExpand)return;a._count<1&&(a._sendPingBack(o),a._count++,Q.$(window).un("scroll",r)),b.data.value&&(m&&k?(l.un("touchstart",g),l.un("touchend",n),k.un("touchstart",g),k.un("touchend",n)):(l.un("click",a.clickHandler),k.un("click",a.clickHandler)),b.data.value=="true"?(k=j.down("a"),a.which="white"):b.data.value=="false"&&(k=j.down("li"),a.which="black"),m?(a.which="white",k=j.down("a"),k.on("touchstart",g),k.on("touchend",n)):k&&k.on("click",a.clickHandler))}),a.hookup==1&&s.on("videoChanged",function(b){s.getSwitchVideoType(function(c){if(c=="0"||c=="1"||c=="2"){var d=b.data,e=Q.$("[data-videolist-tvid="+d.tvid+"]"),f=e.attr("data-qiyu-idx"),g={};g.idx=f,g.href=e.attr("data-videolist-href"),g.cid=e.attr("data-videolist-cid"),g.aid=e.attr("data-videolist-aid"),g.usract=c=="0"?"ctplay":"userclick",g.platform=a.pb_platform,e.attr("data-videolist-this")||a._sendPingBack(g)}})})})},clickEvent:function(a,b){try{h.log("clickEvent ================================="),Q.event.get(a).preventDefault();var c={},d=Q.$(b),e=null,f=null;h.log("this.whichthis.whichthis.whichthis.which      "+this.which),this.which=="black"?(e=Q.$(d.down("[data-qiyu-hrefelem]")[0]),f=d):this.which=="white"&&(e=d,f=d.parent("li")),h.log("clickEvent second ================================="),c.href=e&&e.attr("href"),c.idx=f.attr("data-qiyu-idx"),c.cid=f.attr("data-videolist-cid"),c.aid=f.attr("data-videolist-aid"),c.platform=this.pb_platform,h.log("发送pingback before second"),f.attr("data-videolist-this")||(h.log("发送pingback third"),this._sendPingBack(c)),this.hookup!=1&&g.href(c.href,{time:500})}catch(i){h.warn(i.message),h.warn(JSON.stringify(i))}},_sendPingBack:function(a){var b=this;h.log("_sendPingBack  "+JSON.stringify(a)),Q.log.server({type:"recctplay20121226",usract:a.usract||"userclick",ppuid:f.getUid(),uid:b.uid,aid:b.albumid||"",event_id:b.event_id,cid:b.categoryId,bkt:b.bkt,area:b.area,rank:a.idx,url:a.href||"",tag:"field",tn:(new Date).getTime()+Math.random(),platform:a.platform,tcid:a.cid||"",taid:a.aid||"",ls:a.ls||"",pay_type:a.pay_type||"",s_num:a.s_num||0,albumlist:a.albumlist||""},a.serverurl||"http://msg.video.qiyi.com/tmpstats.gif")},_reloadQiyu:function(a){Q.event.get(a).stop(a),this._doms.fail&&this._doms.fail.hide(),this._doms.loading.show(),this._ctrl.init({platform:1,ppuid:this.ppuid,uid:this.uid,area:this.area,viptype:this.viptype,domain:this.domain,albumId:this.albumid,cb:"cb_"+(new Date).getTime(),aid:this.albumid,categoryId:this.categoryId,rltnum:this.rltnum,ls:this.ls})},_praseTag:function(a){var b=0,c=[],d=[],e=[],f=[],g,h={};return a.forEach(function(a,h){var i=a.split(":");i[1]=="地区"&&i[0]!="其它"&&i[0]!="其他"&&d.push(i[0]);if(i[1]=="类型"&&b<2){var j=i[0];j!="其它"&&j!="其他"&&c.push(j),b++}i[1]=="片种"&&(g=i[0]),i[1]=="内容分类"&&e.push(i[0]),i[1]=="一级分类"&&f.push(i[0]),i[1]=="二级分类"&&f.push(i[0])}),h.area=d,h.type=c,h.contentCategory=e,h.pianZhong=g,h.twoCategory=f,h},_parseRecommendReason:function(a){if(a&&~a.indexOf(":")){var b=a.split(":"),c={},d=b[1].split(",");return{reasonLink:!0,linkTitle:b[0]+":",tag:d.slice(0,2)}}return{reasonLink:!1,tag:a}},_parseDate:function(a){if(!a)return"";var b=a.split(" "),c=b[0].split("-").concat(b[1].split(":"));return c},_detectSameDay:function(a){var b=new Date;return a.getFullYear()==b.getFullYear()&&a.getMonth()==b.getMonth()?a.getDate()==b.getDate()?1:a.getDate()==b.getDate()-1?2:a.getDate()==b.getDate()-2?3:0:0},_parseReleaseDate:function(a){if(!a)return"";var b,c="发布于 ";h.log(a);var d;d=this._parseDate(a);var e=new Date(d[0],d[1]-1,d[2],d[3]||0,d[4]||0,d[5]||0);h.log("gmtdate "+e);var f=new Date-e,g=new Date,i=g.getMinutes(),j=e.getMinutes(),k=g.getHours(),l=e.getHours(),m=g.getDate(),n=e.getDate(),o;switch(this._detectSameDay(e)){case 1:f-36e5<0?(k>l?o=i+(60-j):o=i-j,b=o+"分钟前",e.getMinutes()===0&&e.getSeconds()===0&&(b="今天")):e.getMinutes()===0&&e.getSeconds()===0?b="今天":b="今天"+a.slice(11,16);break;case 2:b="昨天";break;case 3:b="前天";break;default:b=a.slice(0,10)}return h.log(b),c+b},_getData:function(a){this._doms.loading.hide();var b=[];if(a.self&&this.hookup=="1"){var c=a.self;c.selectstatus="selected",b.push(c)}b=b.concat(a.data);if(!a||a&&a.data.length===0||this.lessrltnum==="true"&&parseInt(this.rltnum,10)>a.data.length)return this.requeststatus=="0"?this._doms.widget&&this._doms.widget.hide():this.requeststatus=="1"&&this._doms.fail&&this._doms.fail.show(),!1;this._doms.fail&&this._doms.fail.hide(),this.area=a.attributes.area,this.bkt=a.attributes.bkt,this.event_id=a.attributes.event_id;for(var d=0,e=b.length;d<e;d++){var f=b[d];if(b[d].tags){var g=b[d].tags.split(","),i=this._praseTag(g),j=b[d]["pubtime"]!="NULL"?b[d].pubtime:"";b[d].pubtime=j,b[d].area=i.area.join(" "),b[d].area2=i.area.slice(0,2).join(" "),b[d].type=i.type.join(" "),b[d].type1=i.type.slice(0,1).join(" "),b[d].type2=i.type.slice(0,3).join(" "),b[d].tags=i.area+" "+i.type.join(" ")+" "+j,b[d].contentCategory=i.contentCategory,b[d].contentCategory1=b[d].contentCategory[0]||"",b[d].twoCategory=i.twoCategory.join(" "),i.pianZhong&&(b[d].wType=(i.pianZhong||"")+" ")}(b[d]["purchaseType"]==1||b[d]["purchaseType"]==2)&&this.fc&&(b[d].albumPlayUrl=b[d].albumPlayUrl+"?fc="+this.fc,b[d].isvip="1");var k=b[d].name;b[d].actors&&(b[d].actors=Q.string.truncate(b[d].actors,16)),b[d].shortname=Q.string.truncate(k,this.numOfCutName),b[d].tags=b[d].tags?b[d].tags:"",b[d].searchUrl=this.searchPrefix,b[d].tvid=b[d].firstTvid;var l=b[d].categoryId;(l==2||l==3||l==4)&&b[d].albumId&&(b[d].episode=1),b[d].recReason=this._parseRecommendReason(f.tag);if(f["categoryId"]=="1"||f["categoryId"]=="2")f.isZhengPian=!0,f.shortname=Q.string.truncate(k,"16");f.releaseDate=this._parseReleaseDate(f.initIssueTime),f.identity=d+1}var m=this._splitData(b,5);return h.log("qiyu data "+JSON.stringify(b)),{data:b,splitData:m}},_splitData:function(a,b){var c=a.length,d=Math.ceil(c/b),e={};for(var f=0,g=0;f<=a.length;f+=b,g++)e["d"+g]=a.slice(f,f+b);return e},_loadTmpl:function(a){a(this._tpl)}}});c.exports=i});
define("../../units/wheelScroll",["../components/units/pageJob","../components/action/checkDoms","../kit/wheelScroll","../kit/qiyiPlayer","../action/tab"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/wheelScroll"),g=a("../kit/qiyiPlayer"),h=a("../action/tab"),i="wheelScroll";d.create(i,{getDependentDoms:function(){var a=Q.$("*[data-widget-videoscroll=scroll]");return{scrollWidget:a,btnGroup:a.down("*[data-videoscroll-btngroup=scroll]"),container:a.down("*[data-videoscroll-elem=list]")}},check:function(a){return e(a),!0},init:function(a){var b=this,c=this.getDependentDoms(),d=Q.$('[data-widget-player="flash"]'),e=d.attr("data-player-expandstate");this.enable=e=="true"?!1:!0,Q.event.customEvent.on("qiyu-recommend-done",function(){var a=Q.$('[data-widget-qiyu="qiyu"]').attr("data-qiyu-wheelnum");b.playlistDone(a,"qiyu-recommend-done")}),Q.event.customEvent.on("custom-list-done",function(){var a=Q.$('[data-widget-customlist="list"]').attr("data-wheel-num");b.playlistDone(a,"custom-list-done")}),Q.event.customEvent.on("qidan-list-done",function(){var a=Q.$('[data-widget-qidanlist="qidan"]').attr("data-wheel-num");b.playlistDone(a,"qidan-list-done","qidanScroll")}),Q.event.customEvent.on("promotion-ad-done",function(){var a=Q.$('[data-widget-qiyu="qiyu"]').attr("data-qiyu-wheelnum");b.playlistDone(a,"promotion-ad-done")});var f=b.touchmove.bind(b),i=Q.kit.QiyiPlayer.getPlayer("video");c.container.on("touchmove",f),i.on("expand",function(a){var d=h.getTab("list");d&&d.select(2);var e=Q.$('[data-widget-qiyu="qiyu"]').attr("data-qiyu-wheelnum");a.data.value=="true"&&(c.container.un("touchmove",f),b.enable=!1),a.data.value=="false"&&(b.enable=!0,c.container.on("touchmove",f),setTimeout(function(){b.scroll&&b.scroll.initProperty({displayNum:e})},0))}),g.getPlayer("video").on("setLight",function(a){var c=a||{};c.data||setTimeout(function(){b.scroll&&b.scroll.initProperty()},0)}),Q.event.customEvent.on("js_switchLight",function(a){var c=a||{};setTimeout(function(){b.scroll&&b.scroll.initProperty()},0)}),Q.event.customEvent.on("jsOpenLight",function(){setTimeout(function(){b.scroll&&b.scroll.initProperty()},0)}),Q.event.customEvent.on("tabFocusChanged",function(a){setTimeout(function(){b.scroll&&b.scroll.initProperty()},0)})},playlistDone:function(a,b,c){var d=this,e=this.getDependentDoms(),g=e.container.children()&&e.container.children().length;if(!g)return;e.btnGroup.addClass("lrButtonShow"),d.scroll=new f({widget:e.scrollWidget,container:e.container,displayNum:a||5,isScroll:!0,scrollName:c||"qiyuScroll"}),b==="promotion-ad-done"?d.scroll.init({displayNum:a||5}):d.scroll.init(),b!=="promotion-ad-done"&&d.initEvent()},initEvent:function(){this.initButton(),this.initWheel(),this.initFinger(),this.initListHover(),this.initListenButton()},initListenButton:function(){var a=this;Q.event.customEvent.on("qiyu-reset-button",function(){a.resetBtnStatus()}),Q.event.customEvent.on("customlist-reset-button",function(){a.resetBtnStatus()})},initButton:function(){var a=this.getDependentDoms();this.upBtn=a.scrollWidget.down("[data-videoscroll-btn=up]"),this.downBtn=a.scrollWidget.down("[data-videoscroll-btn=down]"),this.upBtn.on("click",this.upClick.bind(this)),this.downBtn.on("click",this.downClick.bind(this)),this.resetBtnStatus()},initWheel:function(){var a=this.getDependentDoms();a.container.on("DOMMouseScroll",this.wheel.bind(this)),a.container.on("mousewheel",this.wheel.bind(this)),a.container.on("selectstart",function(a){Q.event.get(a).stop()})},initFinger:function(){var a=this.getDependentDoms();a.container.on("fingerslide",this.fingerslide.bind(this))},touchmove:function(a){this.enable&&Q.event.get(a).preventDefault(a)},fingerslide:function(a){if(!this.isEnable())return;var b=a.data.y,c=150;b>0?Math.abs(b)>c?this.scroll.pageUp():this.scroll.moveUp():b<0&&(Math.abs(b)>c?this.scroll.pageDown():this.scroll.moveDown()),this.resetBtnStatus()},initListHover:function(){var a=this.getDependentDoms(),b="",c=this;a.container.down("li").forEach(function(a,d){a=Q.$(a),a.on("mouseenter",function(){if(!c.isEnable()||a.hasClass("selected"))return;b&&b.removeClass("hover"),a.addClass("hover"),b=a}),a.on("mouseleave",function(){if(!c.isEnable()||a.hasClass("selected"))return;b&&b.removeClass("hover"),b=a})})},wheel:function(a){if(!this.isEnable())return;var b=a||window.event,c=b.wheelDelta?b.wheelDelta/120:0-b.detail/3;return c==1||c>0?this.scroll.moveUp():(c==-1||c<0)&&this.scroll.moveDown(),this.resetBtnStatus(),Q.event.get(b).preventDefault(),!1},upClick:function(a){Q.event.stop(a);if(!this.isEnable())return;this.scroll.pageUp(),this.resetBtnStatus()},downClick:function(a){Q.event.stop(a);if(!this.isEnable())return;this.scroll.pageDown(),this.resetBtnStatus()},resetBtnStatus:function(){var a=this.getDependentDoms(),b=parseInt(a.container.attr("data-videoscroll-now"),10);b=b?b:0,this.upBtn.removeClass("lt_no"),this.downBtn.removeClass("rt_no"),b===0&&this.upBtn.addClass("lt_no"),(b==this.scroll.getMaxPageHeight()||this.scroll.getMaxPageHeight()>=0)&&this.downBtn.addClass("rt_no")},isEnable:function(){return this.enable}}),c.exports=i});
define("../../kit/wheelScroll",["./../components/view/view"],function(a,b,c){var d=a("./../components/view/view"),e=new Q.ic.InfoCenter({moduleName:"Sscroll"}),f=Q.Class("Sscroll",{ns:"Q.view",extend:d,properties:{config:{scrollTime:150}},construct:function(a){this.container=a.container,this.widget=a.widget,this.scrollName=a.scrollName,this.displayNum=a.displayNum,this.isScroll=a.isScroll,this.childLen=a.childLen,this.currentNum=1,this.top=0,this.method=a.method||"top"},methods:{init:function(a){a=a||{},this.initProperty(a)},initProperty:function(a){a=a||{},this.displayNum=a.displayNum||5,this.perHeight=a.height||89,e.log("initPropertyinitPropertyinitPropertyinitPropertyinitProperty "+this.scrollName),this.playing=!1,this.totalNum=this.childLen||this.container.children().length,this.pageMaxHeight=(this.totalNum-this.displayNum)*this.perHeight,this.containerAnim=Q.anim(this.container)},getMaxPageHeight:function(){return-this.pageMaxHeight},getCurrentNum:function(){return this.currentNum},moves:function(a,b){var c=a=="up"?-this.pageMaxHeight:a=="down"?0:0;this.lastCurrentNum=this.currentNum;var d=this.calAfterTop(a,b);e.log("afterTop"+d);if(this.isSlide(c,d)){this.page(d);var f=parseInt(this.container.css(this.method),10)||this.top;e.log("beforeTop"+f),e.log("ABS afterTop - beforeTop"+Math.abs(d-f));var g=parseInt(Math.abs(d-f)/this.perHeight,10);a=="up"?this.currentNum+=g:a=="down"&&(this.currentNum-=g)}},pageUp:function(){var a=this.displayNum-1;this.moves("down",a)},pageDown:function(){var a=this.displayNum-1;this.moves("up",a)},moveDown:function(){this.moves("up",1)},moveUp:function(){this.moves("down",1)},isSlide:function(a,b){var c=parseInt(this.container.css(this.method),10)||this.top,d=c==a,e=b>=-this.pageMaxHeight&&b<=0,f=e&&!this.playing&&!d;return f},calAfterTop:function(a,b){var c=parseInt(this.container.css(this.method),10)||this.top,d="";return a=="up"?(d=c-b*this.perHeight,d=d>=-this.pageMaxHeight?d:-this.pageMaxHeight):a=="down"&&(d=c+b*this.perHeight,d=d<=0?d:0),d},page:function(a){var b=this,c=parseInt(this.container.css(this.method),10)||this.top;this.playing=!0,this.container.attr("data-videoscroll-now",a),this.containerAnim.duration(this.config.scrollTime).ease("Linear").from(this.method,c).to(this.method,a).go().onDone(function(){b.playing=!1,b.top=a,Q.event.customEvent.fire({type:"qiyu-reset-button",data:{}}),Q.event.customEvent.fire({type:"customlist-reset-button",data:{}}),Q.event.customEvent.fire({type:"focuslist-reset-button",data:{}})})},moveTo:function(a){this.container.css(this.method,"0px"),a>this.totalNum-this.displayNum?a=this.totalNum-this.displayNum:a--;var b=this.calAfterTop("up",a);this.container.attr("data-videoscroll-now",b),this.container.css(this.method,b+"px")}}}),g=[];c.exports=function(a){return a=a||{},a.scrollName&&!g[a.scrollName]?(g[a.scrollName]=new f(a),g[a.scrollName]):(a.displayNum&&g[a.scrollName].initProperty(a),g[a.scrollName])}});
define("../../action/tab",["../components/action/widget","../model/tabModel","../view/tabView","../kit/eventPlugin"],function(a,b,c){var d=a("../components/action/widget"),e=a("../model/tabModel"),f=a("../view/tabView"),g=a("../kit/eventPlugin"),h={};c.exports=Q.Class("Tab",{extend:d,plugins:[new g],statics:{init:function(){h={}},getTab:function(a){return h[a]}},construct:function(a){a=a||{},a.model=a.model||new e(a),a.view=a.view||new f(a),this.callsuper(a);var b=a.doms.widget.attr("data-tabname");b&&(h[b]=this)},properties:{events:{titleclick:function(a){var b=a.data.title,c=parseInt(b.attr("data-seq"),10);a.data.source=this,this.select(c,a),this.fire({type:"itemclick",data:a.data})}}},methods:{select:function(a,b){var c=this._model.get();c.focus!=a?(this._model.setFocus(a),this.redraw(),this.fire({type:"focuschange",data:{title:this._view.getTitleItem(a),body:this._view.getBodyItem(a)}})):this.fire({type:"itemclick_nochange",data:b.data})},doneAnim:function(){this._view.doneAnim()},getCurrentTab:function(){var a=this._model._data.focus;return{title:this._view.getTitleItem(a),body:this._view.getBodyItem(a)}}}})});
define("../../model/tabModel",["../components/model/model"],function(a,b,c){var d=a("../components/model/model");c.exports=Q.Class("TabModel",{extend:d,construct:function(){this.callsuper(),this._data={focus:0}},methods:{setFocus:function(a){var b=this._data;b.focus=a}}})});
define("../../view/tabView",["../components/view/widgetView","../kit/plugins/anim/animPlugin","../kit/plugins/anim/sohAnimPlugin"],function(a,b,c){var d=a("../components/view/widgetView"),e=a("../kit/plugins/anim/animPlugin"),f=a("../kit/plugins/anim/sohAnimPlugin");c.exports=Q.Class("TabView",{extend:d,construct:function(a){this.callsuper(a)},methods:{init:function(a){this.enbleHover=this._doms.widget.attr("data-widget-hover"),this.callsuper("init",a),this._initSeq(),this._bindEvent(),this._anim=new f},update:function(a){var b=this._doms,c=b.titles,d=b.bodies;c.removeClass("selected");var e=a.focus-1;Q.$(c[e]).addClass("selected"),this._anim.play({elem:b.slide,s:Q.$(d[e]),h:d})},getTitleItem:function(a){var b=this._doms;return Q.$(b.titles[a-1])},getBodyItem:function(a){var b=this._doms;return Q.$(b.bodies[a-1])},config:function(a){this._configAnim(a)},doneAnim:function(){this._anim.done()},_configAnim:function(a){if(a.plugins.anim){if(!(a.plugins.anim instanceof e))throw new Error("Not instanceof AnimPlugin.");this._anim=a.plugins.anim}},_initSeq:function(){var a=this._doms,b=a.titles,c=a.bodies;b.forEach(function(a,b){Q.$(a).attr("data-seq",b+1)}),c.forEach(function(a,b){Q.$(a).attr("data-seq",b+1)})},_changeTab:function(a){var b=this._doms,c=b.titles,d=b.bodies;while(a){var e=a.attr("data-seq");if(e&&a.equal(c[e-1]))break;a=a.parent()}if(a){var f=parseInt(a.attr("data-seq"),10)-1;this._ctrl.notice({type:"titleclick",data:{title:a,body:Q.$(d[f])}})}},_bindClickEvent:function(){var a=this._doms,b=a.titles,c=this;b.on("click",function(a){a=Q.event.get(a),a.stop();var b=Q.$(a.target),d=b;c._changeTab(d)})},_bindHoverEvent:function(){var a=this._doms,b=a.titles,c=this;b.on("mouseover",function(a){a=Q.event.get(a),a.stop();var b=Q.$(a.target),d=b;c._changeTab(d)})},_bindEvent:function(){this.enbleHover?this._bindHoverEvent():this._bindClickEvent()}}})});
define("../../kit/plugins/anim/sohAnimPlugin",["./animPlugin"],function(a,b,c){var d=a("./animPlugin");c.exports=Q.Class("SoHAnimPlugin",{extend:d,construct:function(){},methods:{_createAnim:Q.fn.emptyMethod,_playAnim:function(a,b){a.h&&a.h.hide(),a.s&&a.s.show(),b()}}})});
define("../../units/flashExpand",["../components/units/pageJob","../components/action/checkDoms","../kit/anim","../kit/qiyiPlayer","../action/flashExpand"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/anim"),g,h=a("../kit/qiyiPlayer").getPlayer("video"),i="data-widget-playerexpand",j=a("../action/flashExpand"),k={},l={};d.create("flashExpand",{getDependentDoms:function(){return g||(g=Q.$("["+i+"]")),{expandFlashs:g}},check:function(){return e(this.getDependentDoms()),!0},init:function(){var a=this;this.bindEvent(),this.expandActions={},this.expandActionsInfo={}},exec:function(){var a=this;a.getDependentDoms().expandFlashs.forEach(function(b){var c=Q.$(b),d=c.attr(i),e=Q.$("[data-playerexpand-"+d+"-group]");if(e){var f=[];e.forEach(function(a){a=Q.$(a);var b={element:a,expandClass:a.attr("data-playerexpand-"+d+"-expandclasss")||"",shrinkClass:a.attr("data-playerexpand-"+d+"-shrinkClass")||"",isTryWatchClass:a.attr("data-playerexpand-"+d+"-istrywatchclass")||""};f.push(b)});var g=new j({modelData:{expand:!1,expandWidth:c.attr("data-playerexpand-expandwidth"),oriWidth:c.attr("data-playerexpand-oriwidth"),elements:f},doms:{flashArea:c,flash:c.down("[data-player-playerbody]"),noSwitchLight:Q.$("[data-playerexpand-"+d+"-expandnoswitchlight]")}});a.expandActions[123]=g;var k=c.attr("data-playerexpand-padExpandState");Q.browser.iPad&&(k=="expand"?(g.doExpand(!0),h.expand("true")):k=="shrink"&&(g.doExpand(!1),h.expand("false"))),a.expandActionsInfo[123]={firstTimeToShowPayArea:!0}}}),lib.swf.notice.list&&lib.swf.notice.list.swf_authenticationResult&&Q.event.customEvent.fire(lib.swf.notice.list.swf_authenticationResult[0])},bindEvent:function(){var a=this;Q.event.customEvent.on("login",function(){a.expandActionsInfo[123].firstTimeToShowPayArea=!0}),Q.event.customEvent.on("logout",function(){a.expandActionsInfo[123].firstTimeToShowPayArea=!0}),h.on("expand",function(b){b=b||{};var c=a.expandActions[123];c.doExpand(b.data.value=="true")}),h.on("authenticationResult",function(b){a.authResult(b)})},authResult:function(a){var b=this,c=a.data,d=b.expandActions[123],e=b.expandActionsInfo[123];e.firstTimeToShowPayArea&&(d.showPayArea(c),Q.browser.iPad||(c?h.expand("false"):h.expand("true")),e.firstTimeToShowPayArea=!1)}}),c.exports="flashExpand"});
define("../../action/flashExpand",["../components/action/widget","../view/flashExpandView","../model/flashExpandModel"],function(a,b,c){var d=a("../components/action/widget"),e=a("../view/flashExpandView"),f=a("../model/flashExpandModel");c.exports=Q.Class("FlashExpand",{extend:d,construct:function(a){a=a||{},a.model=a.model||new f,a.view=a.view||new e(a),a.modelData=a.modelData||{},a.model.set(a.modelData),this.callsuper(a)},methods:{init:function(){this.bindEvent(),this.callsuper("init")},bindEvent:function(){var a=this},doExpand:function(a){this.syncSet({expand:a,isTryWatch:"not"}),Q.event.customEvent.fire({type:"videoExpand",data:{expand:a}})},showPayArea:function(a){this.syncSet({expand:!a,isTryWatch:a}),Q.event.customEvent.fire({type:"videoExpand",data:{expand:!a}})}}})});
define("../../view/flashExpandView",["../components/view/widgetView","../action/switchLight"],function(a,b,c){var d=a("../components/view/widgetView"),e=a("../action/switchLight");c.exports=Q.Class("flashExpandView",{extend:d,construct:function(a){this.callsuper(a)},methods:{switchPlace:function(a,b,c){if(a){var d=Q.$("#"+a);if(d){d.append(c),(d.attr("data-switchlight-elem")!="mustbedark"||!!e.isLight)&&d.show();var f=Q.$("#"+b);f&&f.hide()}}},update:function(a){var b=this,c=b._doms.flashArea,d=b._doms.flash,e=b._doms.noSwitchLight,f,g,h,i;a.expand?f=a.expandWidth:f=a.oriWidth,a.elements.forEach(function(c){var d=c.element.attr("data-playerexpand-flash-expandmovetoplace"),e=c.element.attr("data-playerexpand-flash-shrinkmovetoplace"),f=c.element.attr("data-playerexpand-flash-traywatchshrinkmovetoplace");a.isTryWatch=="not"?(a.expand?(h=c.expandClass,i=c.shrinkClass,b.switchPlace(d,e,c.element)):(h=c.shrinkClass,i=c.expandClass,b.switchPlace(e,d,c.element)),c.element.removeClass(c.isTryWatchClass).removeClass(i).addClass(h)):a.isTryWatch?(c.element.removeClass(c.expandClass).removeClass(c.shrinkClass).addClass(c.isTryWatchClass),b.switchPlace(f,null,c.element)):(c.element.removeClass(c.isTryWatchClass).removeClass(c.shrinkClass).addClass(c.expandClass),b.switchPlace(d,e,c.element))}),c.css("width",f+"px");if(Q.browser.IE8){var j=Q.page.getScrollTop();global.scrollTo(0,j+1),global.scrollTo(0,j)}}}})});
define("../../action/switchLight",["../kit/anim","../kit/qiyiPlayer"],function(a,b,c){var d=a("../kit/anim"),e=5450,f=a("../kit/qiyiPlayer").getPlayer("video"),g,h=Q.Class("SwitchLight",{construct:function(){this.isLight=!0,this.darkArea=Q.element.Element.create({tagName:"div"}),this.darkArea.addClass("newDot").attr("id","j-widget-switchLightWrap").attr("data-widget-switchlight","darkArea").css("zIndex","5400"),this.btn=Q.element.Element.create({tagName:"a"}),this.btn.addClass("newDotLink").css("zIndex",e).hide()},methods:{init:function(){Q.$("body").append(this.darkArea.append(this.btn)),this.bindEvent()},setBoxSize:function(){var a=this;a.darkArea.css("display")!="none"&&a.darkArea.css("width",Q.page.getWidth()+"px").css("height",Q.page.getHeight()+"px")},bindEvent:function(){var a=this;a.btn.on("click",a.openBtnClick.bind(a)),a.darkArea.on("mousemove",a._mouseMove.bind(a)),a.btn.on("mousemove",a._btnMousemove.bind(a)),Q.event.on(window,"resize",a.setBoxSize.bind(a)),Q.event.on(window,"load",a.setBoxSize.bind(a)),Q.event.customEvent.on("videoExpand",a.setBoxSize.bind(a))},openBtnClick:function(){var a=this;a.doSwitch(!1),a.btn.hide(),a.btnShown=!1,f.setLight("true"),Q.event.customEvent.fire({type:"jsOpenLight"})},jsSwitch:function(a){a?(self.doSwitch(!0),f.setLight("false")):this.openBtnClick()},_mouseMove:function(){var a=this;a.btnShown?clearTimeout(g):(a.btnShown=!0,a.btn.show()),g=setTimeout(function(){a.btnShown=!1,a.btn.hide()},3e3)},_btnMousemove:function(a){clearTimeout(g),Q.event.get(a).stop()},doSwitch:function(a){var b=this,c={lightAreas:Q.$("[data-widget-switchlight='light']"),player:Q.$("#flashArea")},f,h,i;if(a==b.isLight){if(a){f=e,h=0,i=1,b.isLight=!1,b.darkArea.css("width",Q.page.getWidth()+"px").css("height",Q.page.getHeight()+"px").show(),c.lightAreas.css("zIndex",f),clearTimeout(g),b.btnShown=!1,b.btn.hide();var j=Q.$("[data-switchlight-elem='mustbedark']");j&&j.hide()}else{f="",h=1,i=0,b.isLight=!0;var k=Q.$("[data-switchlight-elem='mustbedark']");k&&k.show()}d({elem:b.darkArea,from:h,to:i,style:"opacity",done:function(){a||(b.darkArea.hide(),c.lightAreas.css("zIndex",f))}})}},setLightArea:function(a){a.attr("data-widget-switchlight","light"),this.isLight||a.css("zIndex",e)},removeLightArea:function(a,b){a.attr("data-widget-switchlight",""),this.isLight||a.css("zIndex","")}}});c.exports=new h});
define("../../model/flashExpandModel",["../components/model/model"],function(a,b,c){var d=a("../components/model/model");c.exports=Q.Class("flashExpandModel",{extend:d,construct:function(){this.callsuper()},methods:{}})});
define("../../units/videoDownload",["../components/units/pageJob","../components/action/checkDoms","../action/videoDownload"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f="videoDownload",g=a("../action/videoDownload");d.create(f,{getDependentDoms:function(){return{downLoadBtn:Q.$("*[data-widget-videodownload]")}},check:function(){return e(this.getDependentDoms()),!0},init:function(){var a=this},exec:function(){var a=this,b=new g;b.init()}}),c.exports=f});
define("../../action/videoDownload",["../kit/yingyinPluginV2","../components/action/floater","../kit/iframeLocation","../components/view/floaterView","../kit/qiyiPlayer","../kit/userInfo","../kit/videoInfo"],function(a,b,c){var d="videodownload",e=a("../kit/yingyinPluginV2"),f=a("../components/action/floater"),g=a("../kit/iframeLocation"),h=a("../components/view/floaterView"),i=null,j=a("../kit/qiyiPlayer").getPlayer("video"),k=a("../kit/userInfo"),l=a("../kit/videoInfo"),m=Q.Class("VideoDownload",{construct:function(){this.downloadBtn=Q.$("[data-widget-"+d+"]"),this.canDown=this.downloadBtn.attr("data-"+d+"-canDownload")},methods:{init:function(){this.bindEvent(),this.updateDownloadInfo()},bindEvent:function(){var a=this;this.downloadBtn.on("click",function(b){var c=Q.event.get(b);c.preventDefault();var d=Q.$(this);if(a.canDown=="true"){var f=Q.$(c.target),g=e.check();g?a.doDownload():(a.sendPingback({ptype:d.attr("data-videodownload-ptype")||"endpage",etype:d.attr("data-videodownload-etype")||"offlineview"}),a.showYingyinDownload())}}),j.on("downloadVideo",function(b){a.doDownload(b)}),j.on("videoChanged",function(b){a.setCanDown(b)})},setCanDown:function(a){var b=a.data.idl==1;this.canDown=b.toString(),this.downloadBtn.attr("data-"+d+"-candownload",b.toString()),this.downloadBtn.attr("data-videodownload-albumid",a.data.aid),this.downloadBtn.attr("data-videodownload-tvname",a.data.an),this.downloadBtn.attr("data-videodownload-tvid",a.data.tvid),this.updateDownloadInfo()},updateDownloadInfo:function(){var a=this.downloadBtn.attr("data-videodownload-candownloadclass"),b=this.downloadBtn.attr("data-videodownload-cantdownloadclass"),c=this.downloadBtn.attr("data-videodownload-candownloadtitle"),d=this.downloadBtn.attr("data-videodownload-cantdownloadtitle");this.canDown=="true"?(this.downloadBtn.removeClass(b).addClass(a),this.downloadBtn.attr("title",c)):(this.downloadBtn.removeClass(a).addClass(b),this.downloadBtn.attr("title",d))},doDownload:function(a){var b=a||{},c=this;if(Q.$("#flash"))j.getVideoInfo(function(a){a=a||{},b.albumId=a.aid,b.tvName=a.vn,b.tvId=a.tvid,b.isCharge="false",b.offline="true",j.getPlayInfo(function(a){b.definite=a.currentDefination,b.albumId&&e.down(b)})});else{var d=c.downloadBtn.attr("data-videodownload-albumid"),f=c.downloadBtn.attr("data-videodownload-tvname"),g=c.downloadBtn.attr("data-videodownload-tvid"),h=!0;e.down({albumId:d,tvName:f,isCharge:h,tvId:g,offline:"true",startTime:"",definite:"2"})}},showYingyinDownload:function(){var a=this;if(!i){var b=new h({isResize:!0});i=new f({view:b});var c=['<div class="yingyin_popup0904"><p><a href="javascript:void(0)" id="j-yingyinCloseBut" title="关闭" class="clobtn"></a></p><div class="yytxt"><p class="p1">安装爱奇艺视频桌面版，只需10秒</p><p class="p2">马上开始下载本片</p></div><div class="download"><a id="j-yingyinDownLoadBut" href="http://dispatcher.video.qiyi.com/dispn/QIYImedia.exe" class="downloadBtn" title="下载">确定</a></div></div>'];i.show({html:c.join("")});var d=function(){e.un("click"),k.un("click"),i.destroy(),i=null},e=Q.$("#j-yingyinCloseBut");e.on("click",function(){d()});var k=Q.$("#j-yingyinDownLoadBut");k.on("click",function(b){Q.event.get(b).preventDefault(),j.forceToSaveCurVideoInfo(),d();var c=Q.$(this),e={ptype:c.attr("data-videodownload-ptype")||"endpage",etype:c.attr("data-videodownload-etype")||"popup"};a.sendPingback(e),g.href(c.attr("href"),{time:100})})}},sendPingback:function(a){a=a||{},Q.log.server({type:"yingyinentrencem20130813",ppuid:k.getUid(),flshuid:Q.cookie.get("QC005"),qtcurl:g.url()||"",pagetype:a.ptype||"",enttype:a.etype||"",tn:(new Date).getTime()+Math.random()},"http://msg.video.qiyi.com/tmpstats.gif")}}});c.exports=m});
define("../../units/mark",["../components/units/pageJob","../components/action/checkDoms","../action/mark"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../action/mark"),g="mark",h;d.create(g,{getDependentDoms:function(){return{}},check:function(){return e(this.getDependentDoms()),!0},init:function(){var a=this,b=Q.$("[data-widget-videomark]"),c=b.attr("data-videomark-albumid");h=new f({albumId:c}),h.init(),Q.event.customEvent.on("mark-hide",function(a){b.hide()})},exec:function(){var a=this}}),c.exports=g});
define("../../action/mark",["../components/action/baseAdapter","../view/markView","../model/markModel","../kit/qiyiPlayer"],function(a,b,c){var d=a("../components/action/baseAdapter"),e=a("../view/markView"),f=a("../model/markModel"),g=a("../kit/qiyiPlayer"),h=Q.Class("MarkAction",{extend:d,construct:function(a){a.view=a.view||new e,a.model=a.model||new f,a.albumId&&a.model.set({localData:{albumId:a.albumId}}),this.callsuper(a)},methods:{init:function(){this.getMark(),this.bindEvent()},getMark:function(){this.asyncGet()},setMark:function(a){},bindEvent:function(){var a=this;g.getPlayer("video").on("videoChanged",function(b){var c=b.data.aid;a._model._data.localData.albumId=c,a.getMark()})}}});c.exports=h});
define("../../components/action/baseAdapter",["../model/baseModel","../view/view"],function(a,b,c){var d=a("../model/baseModel"),e=a("../view/view");c.exports=Q.Class("BaseAdapter",{construct:function(a){a=a||{};var b=a.model,c=a.view;b instanceof d&&(this._model=b,this._model.init(this)),c instanceof e&&(this._view=c,this._view.init(this))},methods:{notice:function(a){if(!a.hasOwnProperty("type"))throw'The ctrlClass method "notice" argument is not Meet the standard!';this._fire(a)},_fire:function(a){this.events&&this.events.hasOwnProperty(a.type)&&this.events[a.type].call(this,a)},syncGet:function(a){if(this._model)var b=this._model.get(a);this._view&&this._view.update(b)},asyncGet:function(a){if(!this._model)return!1;var b=this;this._model.asyncGet(a,function(a){b._view&&b._view.update(a)})},syncSet:function(a){if(this._model)var b=this._model.set(a);this._view&&this._view.update(b)},asyncSet:function(a){if(!this._model)return!1;var b=this;this._model.asyncSet(a,function(a){b._view&&b._view.update(a)})}}})});
define("../../components/model/baseModel",[],function(a,b,c){function d(){return{}}c.exports=Q.Class("BaseModel",{ns:"Q.model",construct:function(a){this._data={remoteData:{},localData:{}},this._remoteInterface=a.ri||null,this._remoteGetParam=a.remoteGetParam||d,this._remoteSetParam=a.remoteSetParam||d,this._remoteMethods=a.remoteMethods||{}},methods:{init:Q.fn.emptyMethod,get:function(){return this._data},asyncGet:function(a,b){var c=this;a=a||{},a=Q.object.extend(this._remoteGetParam(),a);var d=new this._remoteInterface;this._remoteMethods.get&&d[this._remoteMethods.get](a,function(a){Q.object.extend(c._data.remoteData,a),b&&b(c.get())})},set:function(a){return Q.object.extend(this._data.localData,a.localData||a),this.get()},asyncSet:function(a,b){var c=this;Q.object.extend(this._data.localData,a.localData||a);var d=Q.object.extend(this._remoteSetParam(),a),e=new this._remoteInterface;this._remoteMethods.set&&e[this._remoteMethods.set](d,function(a){Q.object.extend(c._data.remoteData,a),b&&b(c.get())})},getRemoteData:function(a,b,c){var d=this;a=a||{};var e=new this._remoteInterface;d._remoteMethods[b]&&e[d._remoteMethods[b]](a,function(a){Q.object.extend(d._data.remoteData,a),c&&c(d._data)})}}})});
define("../../view/markView",["../components/view/view"],function(a,b,c){var d=a("../components/view/view"),e=Q.Class("MarkView",{extend:d,methods:{init:function(a){this._ctrl=a,this._doms={intMarks:Q.$("[data-videomark-elem='intmark']"),floatMarks:Q.$("[data-videomark-elem='floatmark']")}},update:function(a){this._doms.intMarks.html(a.localData.intMark),this._doms.floatMarks.html(a.localData.floatMark)}}});c.exports=e});
define("../../model/markModel",["../components/model/baseModel","../interfaces/mark"],function(a,b,c){var d=a("../components/model/baseModel"),e=a("../interfaces/mark");c.exports=Q.Class("MarkModel",{extend:d,construct:function(a){a=Q.object.extend({ri:e,remoteMethods:{get:"getMark",set:"setMark"},remoteGetParam:function(){return{albumId:this._data.localData.albumId}},remoteSetParam:function(){return{albumId:this._data.localData.albumId,tvId:this._data.localData.tvId}}},a),this.callsuper(a)},methods:{asyncGet:function(a,b){var c=this;c.callsuper("asyncGet",a,function(a){var d=c._parseMark(a.remoteData.score).split(".");c._data.localData.intMark=d[0],c._data.localData.floatMark=d[1]||"0",b&&b(c.get())})},_parseMark:function(a){if(isNaN(a)||!isFinite(a))return"";(a+"").indexOf(".")!=-1?a+="000000000000":a+="";var b=new RegExp("\\d+(\\.\\d{1})?"),c=a.match(b);return c[0]}}})});
define("../../interfaces/mark",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("RIMark",{construct:function(){this._remoteInterface=new d({get:{baseUrl:"http://score.video."+e.SITE_DOMAIN+"/ud/",struct:{code:{type:"string"},data:{type:"object"}}},set:{baseUrl:"http://score.video."+e.SITE_DOMAIN+"/upud/",struct:{code:{type:"string"},data:{type:"object"}}},setQitanUpUrl:{url:"http://api.t."+e.SITE_DOMAIN+"/api/like/addVideoLike.php",struct:{code:{type:"string"},data:{type:"object"}}},setQitanDownUrl:{url:"http://api.t."+e.SITE_DOMAIN+"/api/like/addVideoStep.php",struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{setMark:function(a,b){var c=this._remoteInterface._remoteInterfaces;c.set.url=c.set.baseUrl+a.tvId+"/"+a.albumId+"/"+a.updown+"/",this._remoteInterface.send({param:{},ifname:"set",jsonp:{varname:"ud"}},function(a){a.code=="A00000"&&b&&b(a.data)})},getMark:function(a,b){a=a||{},a.albumId=a.albumId||"0";var c=this._remoteInterface._remoteInterfaces;c.get.url=c.get.baseUrl+a.albumId+"/",delete a.albumId,this._remoteInterface.send({param:a,ifname:"get",jsonp:{varname:"ud"}},function(a){a.code=="A00000"&&b&&b(a.data)})},setQitanUp:function(a,b){},setQitanDown:function(a,b){}}})});
define("../../units/like",["../components/units/pageJob","../components/action/checkDoms","../action/like"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f="like",g=a("../action/like");d.create(f,{getDependentDoms:function(){return{}},check:function(){return e(this.getDependentDoms()),!0},init:function(){var a=this,b=Q.$("[data-widget-like]"),c=b.attr("data-like-albumid"),d=b.attr("data-like-tvid"),e=new g({albumId:c,tvId:d});e.init()},exec:function(){var a=this}}),c.exports=f});
define("../../action/like",["../components/action/baseAdapter","../view/likeView","../model/markModel","../kit/qiyiPlayer"],function(a,b,c){var d=a("../components/action/baseAdapter"),e=a("../view/likeView"),f=a("../model/markModel"),g=a("../kit/qiyiPlayer").getPlayer("video"),h=Q.Class("LikeAction",{extend:d,construct:function(a){a.view=a.view||new e,a.model=a.model||new f,a.model.set({localData:{albumId:a.albumId,tvId:a.tvId}}),this.callsuper(a)},methods:{init:function(){this.getLike(),this.bindEvent()},getLike:function(){this.asyncGet()},setMark:function(a){},bindEvent:function(){var a=this._view._doms,b=this,c,d=function(a){c&&window.clearTimeout(c),a&&(c=window.setTimeout(function(){c=null,b._view.close(!0)},3e4))};Q.event.customEvent.on("login",function(){b._view.showLoginResult(!0)}),Q.event.customEvent.on("logout",function(){b._view.showLoginResult(!1)}),a.likeBtn&&a.likeBtn.on("click",function(a){Q.event.get(a).preventDefault();if(b.checkState(!0))b.asyncSet({updown:1});else{var c=b._model.get();c.localData.updown=1e3,b._view.update(c)}d(!0)}),a.unLikeBtn&&a.unLikeBtn.on("click",function(a){Q.event.get(a).preventDefault();if(b.checkState(!0))b.asyncSet({updown:-1});else{var c=b._model.get();c.localData.updown=1e3,b._view.update(c)}d(!0)}),a.closeBtns&&a.closeBtns.on("click",function(a){Q.event.get(a).preventDefault(),b._view.close(!0),d(!1)}),g.on("DataReady",function(){var a=b._model._data,c=a.localData.tvId;g.getVideoInfo(function(d){d.tvid!=c&&(a.localData.tvId=d.tvid,a.localData.albumId=d.aid,b.getLike())})}),g.on("videoChanged",function(){b._view.close(!0)})},checkState:function(a){var b,c=Q.cookie.get("QC103")||"",d=this._model.get().localData.albumId;if(c.indexOf(d)<0){b=!0;if(a){c=d+"|"+c;var e=c.split("|");e.length>9&&(e.length=9,c=e.join("|")),Q.cookie.set("QC103",c,{expires:6e6,path:"/"})}}else b=!1;return b}}});c.exports=h});
define("../../view/likeView",["../components/view/view","../kit/anim","../kit/userInfo"],function(a,b,c){var d=a("../components/view/view"),e=a("../kit/anim"),f=a("../kit/userInfo"),g=Q.Class("LikeView",{extend:d,construct:function(){this._doms={likePeople:Q.$("[data-like-elem='likePeople']"),unLikePeople:Q.$("[data-like-elem='unLikePeople']"),likeRate:Q.$("[data-like-elem='likeRate']"),unLikeRate:Q.$("[data-like-elem='unLikeRate']"),likeBtn:Q.$("[data-like-elem='likeBtn']"),unLikeBtn:Q.$("[data-like-elem='unLikeBtn']"),likeResult:Q.$("[data-like-elem='likeResult']"),resultMsg:Q.$('[data-like-elem="resultMsg"]'),actionTips:Q.$("[data-like-actiontip]"),closeBtns:Q.$('[data-like-elem="closeBtn"]'),needLogin_tip:Q.$('[data-like-actiontip="needLogin"]'),hasShared_tip:Q.$('[data-like-actiontip="hasShared"]'),notShared_tip:Q.$('[data-like-actiontip="notShared"]'),justClose_tip:Q.$('[data-like-actiontip="justClose"]')},this.showHeight=185,this._doms.likeResult&&(this.showHeight=parseInt(this._doms.likeResult.attr("data-like-resultheight"),10))},methods:{init:function(a){this._ctrl=a,this.bindEvent()},update:function(a){var b=this._doms;b.likePeople.html(Q.string.divideNumber(a.remoteData.up)+"人"),b.unLikePeople.html(Q.string.divideNumber(a.remoteData.down)+"人");var c=0,d=0;a.remoteData.voters!==0&&(c=a.remoteData.up/a.remoteData.voters*100,d=a.remoteData.down/a.remoteData.voters*100),b.likeRate.css("width",c+"%"),b.unLikeRate.css("width",d+"%");if(a.localData.updown){var e=f.isLogin();a.localData.updown==1?(this.setRestltMsg("您给了好评，看来您挺喜欢这个视频啊！"),e?this.setLikeTip(this._doms.notShared_tip):this.setLikeTip(this._doms.needLogin_tip)):a.localData.updown==-1?(this.setRestltMsg("您给了差评，看来这个不合您的口味哦！"),e?this.setLikeTip(this._doms.notShared_tip):this.setLikeTip(this._doms.needLogin_tip)):a.localData.updown==1e3&&(this.setRestltMsg("您已评价过这个视频，不用再点一次的。"),e?this.setLikeTip(this._doms.justClose_tip):this.setLikeTip(this._doms.needLogin_tip)),a.localData.updown=null,this.close(!1)}},showLoginResult:function(a){a?this.setLikeTip(this._doms.notShared_tip):this.setLikeTip(this._doms.needLogin_tip)},bindEvent:function(){},setRestltMsg:function(a){this._doms.resultMsg&&this._doms.resultMsg.html(a)},setLikeTip:function(a){this._doms.actionTips.hide(),a&&a.show()},close:function(a){var b=this,c=b._doms,d=c.likeResult,f,g="height";f=a?0:this.showHeight;var h=a?this.showHeight:0;a||d.show(),e({from:h,to:f,style:g,elem:d,done:function(){a&&d.hide()}})}}});c.exports=g});
define("../../units/share",["../components/units/pageJob","../action/share","../kit/shareTrigger","../kit/qiyiPlayer","../components/action/checkDoms"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../action/share"),f=a("../kit/shareTrigger"),g=a("../kit/qiyiPlayer"),h=a("../components/action/checkDoms"),i=function(a){var b=Q.$(this),c=new f({wrap:b});c.initPlay(b)},j="share",k;d.create(j,{getDependentDoms:function(){var a={shares:Q.$("*[data-widget-share]")};return a},check:function(a){return!0},init:function(){var a=this;Q.event.customEvent.on("shareRenderDone",function(b){var c=b.data.wrap.down("*[data-widget-share]");a.initShare(c)});var b=this.getDependentDoms();h(b);var c=b.shares;this.initShare(c)},initShare:function(a){a.forEach(function(a){a=Q.$(a);var b=a.attr("data-share-sits");if(!isNaN(parseInt(b,10)))return;var c=new e({doms:{wrap:a},sits:b});c.init();var d=new f({wrap:a});d.init(a),a.attr("data-share-type")=="play"&&(k=i.bind(a),a.shareTrigger=k,this._player=Q.kit.QiyiPlayer.getPlayer("video"),this._player.on("dataready",k))})},destroy:function(){var a=this.getDependentDoms(),b=a.shares;b.forEach(function(a){a=Q.$(a),a.attr("data-share-type")=="play"&&Q.event.customEvent.un("loadComplete",a.shareTrigger)})}}),c.exports=j});
define("../../action/share",["../components/action/widget","../model/shareModel","../view/shareView"],function(a,b,c){var d=a("../components/action/widget"),e=a("../model/shareModel"),f=a("../view/shareView"),g=new Q.ic.InfoCenter({moduleName:"Share"});c.exports=Q.Class("Share",{extend:d,construct:function(a){a=a||{},a.model=a.model||new e(a),a.view=a.view||new f(a),this.callsuper(a)},methods:{init:function(){this.redraw()}}})});
define("../../model/shareModel",["../components/model/model","../kit/videoInfo"],function(a,b,c){var d=a("../components/model/model"),e=a("../kit/videoInfo");c.exports=Q.Class("ShareModel",{extend:d,construct:function(a){a=a||{},this.callsuper(),this.showSits=a.sits||"all",this.lineNum=a.lineNum||4},methods:{init:function(){var a=this;if(this.showSits=="all"){var b=a._getSits();a.set({sits:b})}else{var c=this.showSits.split(","),d=[];c.forEach(function(b){a._getSits().forEach(function(a){b==a.name&&d.push(a)})}),a.set({sits:d})}},_check:function(){},_getSits:function(){return this.sits?this.sits:(this.sits=[{name:"qitan",title:"奇谈",className:"ico_qitan",url:"http://t.qiyi.com/share/share.php"},{name:"qqshare",title:"qq",className:"ico_qq2013",url:""},{name:"sina",title:"新浪微博",className:"ico_sina",url:"http://v.t.sina.com.cn/share/share.php"},{name:"weixin",title:"到微信分享",className:"ico_weixin",url:"http://weixin.qq.com"},{name:"qqweibo",title:"腾讯微博",className:"ico_qqweibo",url:"http://v.t.qq.com/share/share.php"},{name:"sohu",title:"搜狐",className:"ico_sohu",url:"http://t.sohu.com/third/post.jsp"},{name:"wangyi",title:"网易微博",className:"ico_wangyi",url:"http://t.163.com/article/user/checkLogin.do"},{name:"qq",title:"QQ空间",className:"ico_qq",url:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey"},{name:"renren",title:"人人网",className:"ico_renren",url:"http://share.renren.com/share/buttonshare"},{name:"kaixin",title:"开心网",className:"ico_kaixin",url:"http://www.kaixin001.com/repaste/bshare.php"},{name:"baiduspace",title:"百度空间",className:"ico_baiduspace",url:"http://apps.hi.baidu.com/share"},{name:"baidu",title:"百度贴吧",className:"ico_baidu",url:"http://tieba.baidu.com/f/commit/share/openShareApi"},{name:"douban",title:"豆瓣",className:"ico_douban",url:"http://www.douban.com/recommend"},{name:"feixin",title:"飞信",className:"ico_feixin",url:"http://space.feixin.10086.cn/api/share"},{name:"msn",title:"MSN",className:"ico_msn",url:"http://profile.live.com/badge/"},{name:"tianya",title:"天涯社区",className:"ico_tianya",url:"http://open.tianya.cn/widget/send_for.php"},{name:"u115",title:"115网盘",className:"ico_u115",url:"http://sc.115.com/add"},{name:"s51",title:"51.com",className:"ico_s51",url:"http://share.51.com/share/out_share_video.php"}],this.sits)},reSet:function(a){}}})});
define("../../view/shareView",["../components/view/widgetView"],function(a,b,c){var d=a("../components/view/widgetView");c.exports=Q.Class("ShareView",{extend:d,construct:function(a){this.callsuper(a)},properties:{_tpl:["{{#sits}}",'<a href="{{url}}" j-delegate="thirdpartyitem"class="j-share-trigger servIco {{className}}" data-share-trigger="{{name}}"target="_blank" title="{{title}}"></a>',"{{/sits}}"].join("")},methods:{init:function(a){this.callsuper("init",a)},update:function(a){if(a.sits){var b=Q.plugins.Mustache.render(this._tpl,a),c=this._doms.wrap.attr("data-share-pos");c?this._doms.wrap.html(c,b):this._doms.wrap.html(b)}}}})});
define("../../kit/shareTrigger",["../config/siteDomain","../kit/qiyiPlayer","../kit/qiyiPlayer"],function(a,b,c){var d=a("../config/siteDomain"),e=a("../kit/qiyiPlayer"),f=new Q.ic.InfoCenter({moduleName:"ShareTrigger"}),g=a("../kit/qiyiPlayer").getPlayer("video"),h={};h.SITE_DOMAIN="www.iqiyi.com";var i=Q.Class("ShareTrigger",{construct:function(a){this.wrap=a.wrap},methods:{init:function(){var a=this,b=a.getInfo();if(Q.browser.iPad||b.type=="url"){var c=a.getVideoInfo(b);a.wrap.down("a[data-share-trigger]").forEach(function(d){d=Q.$(d),d&&a.resetUrl(d,b,c)})}else b.type=="customlist"?Q.event.customEvent.on("custom-list-share",function(){a.share()}):b.type=="qidanlist"?Q.event.customEvent.on("qidan-list-share",function(){a.share()}):a.share()},share:function(){var a=this,b=a.getInfo(),c=a.getVideoInfo(b);a.wrap.down("a[data-share-trigger]").forEach(function(d){a.resetUrl(d,b,c)}),a.wrap.down("a[data-share-trigger]").forEach(function(a){var b=Q.$(a);b.on("click",function(a){var b=a.target||a.srcElement,c=b.host,d="http://msg.video.qiyi.com/tmpstats.gif",e=location.href,f=Q.cookie.get("QC005"),g=Q.cookie.get("P00003"),h={type:"sharemodclk20130220",flshuid:f,ppuid:g||"",qtcurl:e,target:c,tn:Math.random()};Q.log.server(h,d)})})},initPlay:function(){var a=this,b=a.getInfo();b.type=="play"&&a.getPlayerVideoInfo(b,function(c){a.wrap.videoInfo=c,a.wrap.down("a[data-share-trigger]").forEach(function(d){d=Q.$(d),a.resetUrl(d,b,c)})})},getInfo:function(a){var b=this,c={};return b.wrap&&(c.weiboName=b.wrap.attr("data-share-weiboName")||"",c.qqWeiBoName=b.wrap.attr("data-share-qqWeiBoName")||"",c.titleL=b.wrap.attr("data-share-infoTitleL")||"",c.titleR=b.wrap.attr("data-share-infoTitleR")||"",c.title=b.wrap.attr("data-share-title")||"",c.subTitle=b.wrap.attr("data-share-subTitle")||"",c.duration=b.wrap.attr("data-share-duration")||"",c.type=b.wrap.attr("data-share-type")||"",c.playUrl=b.wrap.attr("data-share-playUrl")||"",c.img=b.wrap.attr("data-share-img")||"",c.plnamebefore=b.wrap.attr("data-share-plnameb")||"",c.plnameafter=b.wrap.attr("data-share-plnamea")||""),c},getShareQQ:function(a){var b=[];a=a||{},g.getVideoInfo(function(b){a.url=b.vu,a.site="来自爱奇艺",a.desc="我在爱奇艺看了“"+b.vn+"”实在是很不错，强烈推荐给你看！",a.pics=b.apic});var c={url:a.url||location.href,desc:a.desc||"我在爱奇艺看了“"+(a.title||document.title)+"”实在是很不错，强烈推荐给你看！",title:a.title||"来自爱奇艺",summary:a.summary||"",pics:a.pics||"",flash:a.flash||"",site:a.site||"",style:a.style||"201",width:a.width||32,height:a.height||32};for(var d in c)b.push(d+"="+encodeURIComponent(c[d]||""));var e="http://connect.qq.com/widget/shareqq/index.html?";return e+=b.join("&"),e},resetUrl:function(a,b,c){a=Q.$(a);if(!a.attr("data-share-trigger"))return;if(!c)return;var e=this;b.plname=e.wrap.attr("data-share-plname")||"";var f=b.titleL||"",g=b.titleR||"",h,i,j=encodeURIComponent(function(){var a;typeof c.url=="function"?a=c.url():a=c.url;var b;a.indexOf("&")>-1||a.indexOf("?")>-1?b="&":b="?";var d;return c.duration?d=b+"share_sTime=0-share_eTime="+c.duration:d="",a+d}()),k,l;typeof c.title=="function"?l=c.title():l=c.title,b.type==="customlist"?k=f+b.plname+b.plnamebefore+b.plnameafter+l+g:k=f+l+g;var m=window.flashUrl||"",n=encodeURIComponent("http://"+d.SITE_DOMAIN),o=window.info&&b.data&&b.data.videoDesc||"",p=encodeURIComponent(k);h=a.attr("data-share-trigger"),i=a.attr("href"),i.indexOf("?")>-1&&(i=i.substring(0,i.indexOf("?"))),c.subTitle&&(k+="，"+c.subTitle),k=encodeURIComponent(k);switch(h){case"sina":i+="?appkey=48878973&url=",i+=j,i+="&title="+k,i+="&content=utf-8&ralateUid=1731986465";break;case"baidu":i+="?title="+k+"&url=",i+=j;break;case"kaixin":i=i+"?rurl="+j+"&rtitle="+k+"&rcontent=",i+=encodeURIComponent(o);break;case"renren":i+="?link="+j+"&title="+k;break;case"qqshare":i=this.getShareQQ(c),a.attr("title","分享给好友");break;case"qq":i+="?desc="+k+j+"&url="+j.split("=").join("%3D");break;case"baiduspace":i+="?url="+j+"&title="+k+"&content="+m;break;case"douban":i+="?url="+j+"&title="+k;break;case"wangyi":i=i+"?link=http://"+d.SITE_DOMAIN+"&source="+encodeURIComponent("爱奇艺")+"&info="+k+" "+j+"&time="+(new Date).getTime();break;case"feixin":i=i+"?source=sharelink&title="+k+"&url="+j;break;case"qitan":i=i+"?url="+j+"&albumId="+b.albumId+"&title="+k+"&appid=11";break;case"msn":i=i+"?url="+j+"&title="+k+"&screenshot="+encodeURIComponent(c.pic)+"&swfurl="+m;break;case"qqweibo":var q="，（@爱奇艺 ";b.qqWeiBoName&&(q+="@"+b.qqWeiBoName+" "),q+="）",i=i+"?url="+j+"&appkey=7e286cd449a84362adc6f010f63efdd7&site="+n+"&title="+k+encodeURIComponent(q);break;case"sohu":i=i+"?url="+j+"&content=utf-8&title="+k+"&pic="+encodeURIComponent(c.pic);break;case"tianya":i=i+"?action=send-html&shareTo=1&appKey=&title="+k+"&url="+j+"&flashVideoUrl="+m+"&tagName="+p+"&relateTYUserName=";break;case"u115":i=i+"?from=webpopup&title="+k+"&url="+j+"&desc="+encodeURIComponent(o);break;case"s51":i=i+"?vaddr="+j+"&title="+k+"&from=qiyi&charset=utf-8"}a.attr("href",i)},getVideoInfo:function(a){return h.ipad?{url:a.url||location.href.split(".html")[0]+".html",duration:this.getVideoDuration(),title:a.title||document.title,subTitle:a.subTitle||""}:a.type=="share"?{url:a.playUrl,duration:"",title:a.title||document.title,img:a.img||"",subTitle:a.subTitle||""}:a.type?{url:location.toString(),duration:"",title:a.title||document.title,subTitle:a.subTitle||""}:{url:location.href.split(".html")[0]+".html",duration:"",title:a.title||document.title}},getPlayerVideoInfo:function(a,b){if(!b)return;var c=e.getPlayer("video");c?c.getVideoInfo(function(c){c.vu?b({url:c.vu,duration:"",title:c.vn}):b({url:location.href.split(".html")[0]+".html",duration:"",title:a.title||document.title})}):b({url:location.href.split(".html")[0]+".html",duration:"",title:a.title||document.title})},getVideoDuration:function(a){return a&&a.duration?"":""}}});c.exports=i});
define("../../units/moviePlayShare",["../components/units/pageJob","../action/share","../components/action/checkDoms","../kit/anim"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../action/share"),f=a("../components/action/checkDoms"),g=a("../kit/anim"),h=new Q.ic.InfoCenter({moduleName:"moviePlayShare"}),i=function(){var a=this.getDependentDoms();a.pShare.addClass("fsBg"),a.icon.removeClass("icon_down"),a.icon.addClass("icon_up");var b=a.wrap.height();g({style:"height",elem:a.anim,to:b,ease:"linear",duration:15})},j=function(){var a=this.getDependentDoms();g({style:"height",elem:a.anim,to:30,ease:"linear",duration:150,done:function(){a.pShare.removeClass("fsBg"),a.icon.removeClass("icon_up"),a.icon.addClass("icon_down")}})},k,l,m="moviePlayShare";d.create(m,{getDependentDoms:function(){var a=Q.$("[data-widget-shareanim=pshare]"),b={pShare:a,wrap:a.down("[data-widget=psharewrap]"),anim:a.down("[data-widget=pshareanim]"),icon:a.down("[data-widget=pshareicon]")};return b},check:function(a){return f(a),!0},init:function(){var a=this.getDependentDoms();if(Q.browser.iPad)return;a.icon.show(),k=i.bind(this),l=j.bind(this),a.wrap.on("mouseover",k),a.wrap.on("mouseout",l)},destroy:function(){if(Q.browser.iPad)return;var a=this.getDependentDoms();a.wrap.un("mouseover",k),a.wrap.un("mouseout",l)}}),c.exports=m});
define("../../units/subscribe",["../components/units/pageJob","../components/action/checkDoms","../action/subscribe","../kit/qiyiPlayer"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../action/subscribe"),g="subscribe",h="data-widget-subscribe",i=a("../kit/qiyiPlayer").getPlayer("video"),j={};d.create(g,{check:function(){return!0},init:function(){this.bindEvent()},exec:function(){var a=this,b=Q.$("["+h+"]"+"[data-subscribe-subkey]");b?b.forEach(function(b){a.newSubscribeMVC(b)}):i.setSubscribe({canSubscribe:!1,tvName:""})},bindEvent:function(){var a=this;Q.event.customEvent.on("videoListSubscribeDone",function(b){a.newSubscribeMVC(b.data.widget)})},newSubscribeMVC:function(a){var b=Q.$(a),c=b.attr(h),d=j[c],e;if(!d){var g=b.attr("data-subscribe-canSubscribe"),i=b.attr("data-subscribe-tvname");if(g=="true"){var k=b.attr("data-subscribe-albumid"),l=b.attr("data-subscribe-subtype"),m=b.attr("data-subscribe-subkey"),n=b.attr("data-subscribe-subentry");e=Q.$("[data-subscribe-group='"+c+"']");var o=b.down("[data-subscribe-tpl='success']"),p,q;o||(o=Q.$("[data-widget-subscribetpl=success]")),o&&(p=o.value());var r=b.down("[data-subscribe-tpl='confirm']");r||(r=Q.$("[data-widget-subscribetpl=confirm]")),r&&(q=r.value());var s=new f({albumId:k,subType:l,subKey:m,subEntry:n,doms:{subscribeBtn:e.down("[data-subscribe-elem='subscribe']"),hasSubscribedBtn:e.down("[data-subscribe-elem='hasSubscribed']"),elem:b},successTpl:p,confirmTpl:q});s.init(),s.check(),j[c]=s}}else e=Q.$("[data-subscribe-group='"+c+"']"),d.addDom({subscribeBtn:e.down("[data-subscribe-elem='subscribe']"),hasSubscribedBtn:e.down("[data-subscribe-elem='hasSubscribed']")}),d.check()}}),c.exports=g});
define("../../action/subscribe",["../components/action/baseAdapter","../view/subscribeView","../model/subscribeModel","../kit/userInfo","../action/qipaLogin","../components/action/floater","../kit/qiyiPlayer"],function(a,b,c){var d=a("../components/action/baseAdapter"),e=a("../view/subscribeView"),f=a("../model/subscribeModel"),g=a("../kit/userInfo"),h=a("../action/qipaLogin"),i=Q.event.customEvent,j=a("../components/action/floater"),k=a("../kit/qiyiPlayer").getPlayer("video"),l=Q.Class("SubscribeAction",{extend:d,construct:function(a){a.view=a.view||new e(a),a.model=a.model||new f,this.confirmFloater=null,a.albumId&&a.model.set({localData:{albumId:a.albumId,subType:a.subType,subKey:a.subKey,subEntry:a.subEntry,isSubscribed:!1}}),this.callsuper(a)},methods:{init:function(){this.sbcb=this.subscribeBtnClick.bind(this),this.usbcb=this.hasSubscribedBtnClick.bind(this),this.bindEvent()},noticeSwf:function(){var a=this,b=(a._model._data.localData.isSubscribed===!1).toString();k.setSubscribe({canSubscribe:b,tvName:a._model._data.localData.subKey})},check:function(){var a=this;g.isLogin()?a._model.check({},function(b){a._view.update(b),a.noticeSwf()}):(a._view.update({localData:{isSubscribed:!1}}),a.noticeSwf())},subscribe:function(){var a=this;a._model.subscribe({},function(b){a._view.update(b)})},unsubscribe:function(){var a=this;a._model.unsubscribe({},function(b){a._view.update(b)})},bindEvent:function(){var a=this;i.on("login",function(){a.subscribeClicked||a.check()}),i.on("logout",function(){a._model._data.localData.isSubscribed=!1,a.subscribeClicked=null,a._view.update(a._model._data)}),Q.$(document).delegate("closeFloaterBtn",function(b){var c=Q.event.get(b.event);c.preventDefault(),a.confirmFloater&&(a.confirmFloater.destroy(),a.confirmFloater=null)}),Q.$(document).delegate("unsubscribeComfirmBtn",function(b){var c=Q.event.get(b.event);c.preventDefault(),a.confirmFloater&&(a.confirmFloater.destroy(),a.confirmFloater=null,a.unsubscribe())}),a.reBindSubscribe(),k.on("subscribe",function(){a.subscribeBtnClick()});if(Q.$("*[data-widget-qiyu='qiyu']")){var b=Q.$("*[data-widget-qiyu='qiyu']").attr("data-qiyu-categoryid");b&&b=="10"&&k.on("videoChanged",function(b){b.data.keyword&&(a._model._data.localData.albumId=b.data.aid,a._model._data.localData.subKey=b.data.keyword,a.check())})}},addDom:function(a){this._view._doms.subscribeBtn=a.subscribeBtn,this._view._doms.hasSubscribedBtn=a.hasSubscribedBtn,this.reBindSubscribe()},reBindSubscribe:function(){var a=this._view._doms;a.subscribeBtn.un("click",this.sbcb),a.subscribeBtn.on("click",this.sbcb),a.hasSubscribedBtn.un("click",this.usbcb),a.hasSubscribedBtn.on("click",this.usbcb)},subscribeBtnClick:function(a){var b=this;a&&Q.event.get(a).preventDefault(),h.openLoginWindow({},function(){b.subscribe(),b.subscribeClicked=!0})},hasSubscribedBtnClick:function(a){var b=this;Q.event.get(a).preventDefault();var c;isNaN(b._model._data.localData.subKey)?c=b._model._data.localData.subKey:c=b._view._doms.elem.attr("data-subscribe-tvname"),b.confirmFloater=new j;var d=Q.plugins.Mustache.render(b._view.confirmTpl,{tvName:c});b.confirmFloater.show({html:d})}}});c.exports=l});
define("../../view/subscribeView",["../components/view/view","../components/action/floater"],function(a,b,c){var d=a("../components/view/view"),e=a("../components/action/floater"),f,g=Q.Class("SubscribeView",{extend:d,construct:function(a){this._doms=a.doms||{},this.successTpl=a.successTpl||"",this.confirmTpl=a.confirmTpl||""},methods:{init:function(a){this._ctrl=a,this.bindEvent()},update:function(a){a.localData.isSubscribed?(this._doms.subscribeBtn.hide(),this._doms.hasSubscribedBtn.show(),a.localData.newSubscribe&&this.showSuccess()):(this._doms.subscribeBtn.forEach(function(a){var b=Q.$(a).attr("data-subscribe-showstyle")||"inline";Q.$(a).css("display",b)}),this._doms.hasSubscribedBtn.hide())},bindEvent:function(){Q.$(document).delegate("closeFloaterBtn",function(a){var b=Q.event.get(a.event);b.preventDefault(),f&&(f.destroy(),f=null)})},showSuccess:function(){var a=this,b;isNaN(a._ctrl._model._data.localData.subKey)?b=a._ctrl._model._data.localData.subKey:b=a._doms.elem.attr("data-subscribe-tvname");var c=this._doms.elem.attr("data-subscribe-categoryname");if(this.successTpl){var d=Q.plugins.Mustache.render(this.successTpl,{data:{categoryName:c,tvName:b}});f=new e,f.show({html:d})}}}});c.exports=g});
define("../../model/subscribeModel",["../components/model/baseModel","../interfaces/subscribe","../config/siteDomain"],function(a,b,c){var d=a("../components/model/baseModel"),e=a("../interfaces/subscribe"),f=a("../config/siteDomain");c.exports=Q.Class("SubscribeModel",{extend:d,construct:function(a){a=Q.object.extend({ri:e,remoteMethods:{check:"check",subscribe:"subscribe",unsubscribe:"unsubscribe",getSubscribe:"getSubscribe"}},a),this.callsuper(a),this._remoteCheckParam=function(){return{subType:this._data.localData.subType,subKey:this._data.localData.subKey}}},methods:{check:function(a,b){var c=this;a=a||{},a=Q.object.extend(this._remoteCheckParam(),a),this.callsuper("getRemoteData",a,"check",function(a){var d=a.remoteData.code;c._data.localData.isSubscribed=d=="A00000",c._data.localData.newSubscribe=!1,b&&b(c._data)})},subscribe:function(a,b){var c=this;a=a||{},a=Q.object.extend(this._remoteCheckParam(),a),this.callsuper("getRemoteData",a,"subscribe",function(a){var d=a.remoteData.code;d=="A00000"||d=="A00001"?(c._data.localData.isSubscribed=!0,c._data.localData.newSubscribe=!0):(c._data.localData.isSubscribed=!1,c._data.localData.newSubscribe=!1),b&&b(c._data)})},unsubscribe:function(a,b){var c=this;a=a||{},a=Q.object.extend(this._remoteCheckParam(),a),this.callsuper("getRemoteData",a,"unsubscribe",function(a){var d=a.remoteData.code;d=="A00000"&&(c._data.localData.isSubscribed=!1,b&&b(c._data))})},getSubscribe:function(a,b){var c=this;this.callsuper("getRemoteData",a,"getSubscribe",function(a){var d=a.remoteData.code;d=="A00000"?(c._data.hasNew=!0,b&&b(c._data)):Q.cookie.set("deleCloseSubscribe","none",{path:"/",expires:24,domain:f.SITE_DOMAIN})})}}})});
define("../../interfaces/subscribe",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain"),f="http://i."+e.SITE_DOMAIN+"/dingyue/api/",g="http://i."+e.SITE_DOMAIN+"/dingyue/data/new/";c.exports=Q.Class("RIMark",{construct:function(){this._remoteInterface=new d({check:{url:f+"isSubscribedFromJs.action",struct:{code:{type:"string"},data:{type:"object"}}},set:{url:f+"subscribeFromJs.action",struct:{code:{type:"string"},data:{type:"object"}}},del:{url:f+"unsubscribeFromJs.action",struct:{code:{type:"string"},data:{type:"object"}}},getNew:{baseUrl:g,struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{check:function(a,b){a.cb=a.cb||"__isSubscribe__cb__"+Math.ceil(Math.random()*1e5),a.timestamp=(new Date).getTime(),this._remoteInterface.send({param:a,ifname:"check",encodeFn:function(a){return encodeURIComponent(a)}},function(a){b&&b(a)})},subscribe:function(a,b){a.cb=a.cb||"__subscribe__cb__",a.timestamp=(new Date).getTime(),this._remoteInterface.send({param:a,ifname:"set",encodeFn:function(a){return encodeURIComponent(a)}},function(a){b&&b(a)})},unsubscribe:function(a,b){a.cb=a.cb||"__unsubscribe__cb__",a.timestamp=(new Date).getTime(),this._remoteInterface.send({param:a,ifname:"del",encodeFn:function(a){return encodeURIComponent(a)}},function(a){b&&b(a)})},getSubscribe:function(a,b){var c=encodeURIComponent(a.userInfo);a.userInfo=c;var d=this._remoteInterface._remoteInterfaces.getNew.baseUrl;this._remoteInterface._remoteInterfaces.getNew.url=d+c+"/",window.lib=window.lib||{},a={varname:"lib._newSubscribe"},this._remoteInterface.send({param:a,ifname:"getNew"},function(a){b&&b(a)})}}})});
define("../../units/videoKeyPoints",["../components/units/pageJob","../components/action/checkDoms","../kit/videoInfo"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/videoInfo"),g=new Q.ic.InfoCenter({moduleName:"VideoKeyPoints"}),h="videoKeyPoints";d.create(h,{check:function(){return!0},init:function(){this.load(),this.bindEvent()},bindEvent:function(){var a=this;Q.$(document).delegate("j-videoKeyPoints",function(a){var b=Q.event.get(a.event);b.preventDefault();var c=Q.$(a.target),d=c.attr("data-videoKeyPoints-timestamp");d?Q.kit.QiyiPlayer.getPlayer("video").seek(d):g.warn("this videoKeyPoint don't has an timestamp")}),Q.kit.QiyiPlayer.getPlayer("video").on("videoChanged",function(){a.load()})},load:function(){var a=this,b=Q.$("*[data-widget-videokeypoints='anything']"),c=Q.$("*[data-videokeypoints-elem='wrap']"),d=Q.$("*[data-videokeypointsitem-tpl='list']").value();Q.kit.QiyiPlayer.getPlayer("video").getVideoInfo(function(a){var b=1;if(a&&a.fl&&a.fl.length&&a.fl[0].img){var e={points:a.fl,time:function(){var a=this.t,b=Math.floor(a/60)+"分";b.length<2&&(b="0"+b);var c=a%60+"秒处";return b+c},index:function(){return b++ +""},des:function(){var a=this.c;return Q.string.truncate(a,33,"..")}};c.html(Q.plugins.Mustache.render(d,e))}else c.html("");Q.event.customEvent.fire({type:"videoKeyPointsRenderDone",data:{source:"keypoints"}})})}}),c.exports=h});
define("../../units/flashAndPageVideoListSync",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../kit/iframeLocation","../view/shortPromotionAdView","../action/shortPromotionAd"],function(a,b,c){function o(a){Q.browser.iPad?p(a):Q.player.loadSuccess?p(a):(g.log("wating for flash load success"),Q.event.customEvent.on("flashplayer_playerLoadSuccess",function(){p(a)}))}function p(a){var b=[],c=a.list||a.data.data||a.data.realList;for(var d=0;d<c.length;d++){var e=c[d],h={tvid:e.tvId||e.id||e.firstTvid||e.tvid,tvId:e.tvId||e.id||e.firstTvid||e.tvid,vid:e.vid||e.firstVid||e.videoId,albumId:e.aId||e.albumId||e.aid||j.attr("data-player-albumid"),imageURL:e.tvPicUrl||e.vpic||e.apic||e.imageURL||e.picUrl,title:e.tvSbtitle||e.vn||e.name||e.aName||e.title||e.contentName||e.albumName,describe:e.aDesc||e.vt||e.shortname||e.info||e.vn||e.tvFocus||e.describe||e.tvDesc||e.albumName,cid:e.cid||e.channelId||"",publishTime:e.initIssueTime,channelId:e.channelId||e.categoryId||""};e.pd&&(h.set=e.pd),!e.purType||e.purType==="0"?h.isMemberVideo="false":h.isMemberVideo="true",a.categoryId&&!h.channelId&&(h.channelId=a.categoryId),b.push(h)}var k=a.data,l,n;k&&k.aid&&k.cid&&(n=k.aid+"",l=k.cid+"");var o=a.sign,p=0,q="add video list to flash ,list count is "+b.length+" . ";o&&o=="next"?(p=-1,q+="insert after"):q+="insert before",a.from=="ad"&&(b[0].isAd="true",m=b);var r=f.getPlayer("video"),s={list:b,before:a.before||!1,after:a.after||!1,index:p,source:a.source};n&&l&&Q.object.extend(s,{taid:n,tcid:l}),r.addVideoList&&r.addVideoList(s),g.log(q),g.log(JSON.stringify(s)),i.fire({type:"playArrayListData",data:{index:p,list:b,attributes:a.data&&a.data.attributes}})}var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/qiyiPlayer"),g=new Q.ic.InfoCenter({moduleName:"flashAndPageVideoListSync"}),h=a("../kit/iframeLocation"),i=Q.event.customEvent,j,k=1,l=a("../view/shortPromotionAdView"),m=[],n=a("../action/shortPromotionAd"),q,r,s="flashAndPageVideoListSync";d.create(s,{check:function(){return j=Q.$("[data-widget-player='flash']"),!!j},init:function(){this.bindEvent()},exec:function(){var a=this;Q.external=Q.external||{},Q.external.adAttachVideoList=function(b){if(q&&q.getCurrentPlayType()=="ad")return g.log("推广广告调用JS接口添加广告，不处理"),!1;g.log("推广广告调用JS接口添加广告");var c=Q.$('*[data-widget-qiyu="qiyu"]'),d=Q.$('*[data-promotionad-elem="qiyuwheel"]'),e=Q.$('*[data-qiyu-elem="promotionad"]');if(!e)return!1;e.show(),c&&c.attr("data-qiyu-wheelnum","4");if(d&&e){var f=e.attr("data-promotionad-qiyuaddclass");f&&d.addClass(f)}var h={list:[b.data]},i=e.attr("data-promotion-haslist");i!="false"&&(g.log("ad do not add to the videoList"),k==1?(a.addAdtoFlashVideoList(h),k++):(a.removeAdFromFlashVideoList(b),a.addAdtoFlashVideoList(h)));if(!r){var j={tplNode:e.down("[data-promotionad-elem=template]")},m=j.tplNode.value();r=new l({doms:e.down("[data-promotionad-elem='content']"),tpl:m}),r.update(b.data),q=new n,q.init({flashid:b.playerId,view:r,hasVideoList:i!=="false"})}else r.update(b.data);Q.event.customEvent.fire({type:"promotion-ad-done"})}},bindEvent:function(){f.getPlayer("video").on("flashRequireList",function(a){i.fire({type:"getVrsVideoData",data:{sign:a.data.data.around=="1"?"next":"prev"}})}),i.on("getVrsVideoDataBack",function(a){a.data&&(a.data.source="3",o(a.data))}),i.on("qiyu-data-ready",function(a){var b=a.list||a.data.data;a.sign="next",a.source="2",a.data.self?(b.unshift(a.data.self),o(a)):f.getPlayer("video").getVideoInfo(function(c){b.unshift(c),o(a)})}),i.on("custom-list-ready",function(a){var b=a.data||{};b.realList=[],a.source="2",b.currList.forEach(function(a,c){a.cpStatus||b.realList.push(a)}),a.sign="next",o(a)}),i.on("qidan-list-ready",function(a){var b=a.data||{};a.sign="next",a.source="2",o(a)}),i.on("common-list-ready",function(a){var b=a.data||{};o(b)}),Q.$(document).delegate("videoPlayList",function(a){var b=Q.$(a.target);if(h.check())return;var c=Q.event.get(a.event);c.preventDefault();var d=b.attr("data-videolist-tvid")||b.attr("data-tvid"),e=b.attr("data-videolist-vid")||b.attr("data-vid");f.getPlayer("video").switchVideo&&f.getPlayer("video").switchVideo({tvid:d,vid:e,tvId:d})})},addAdtoFlashVideoList:function(a){a.from="ad",a.source="1",o(a),g.warn("["+s+"]"+"推广广告添加成功！")},removeAdFromFlashVideoList:function(a){var b=this,c=f.getPlayer("video");g.log("remove from flash video list"+JSON.stringify(m)),c.removeFromList&&c.removeFromList({list:m})}}),c.exports=s});
define("../../view/shortPromotionAdView",["../components/view/widgetView"],function(a,b,c){var d=a("../components/view/widgetView");c.exports=Q.Class("shortPromotionAdView",{extend:d,construct:function(a){a=a||{},this.doms=a.doms,this._tpl=a.tpl},methods:{init:function(){},update:function(a){this._renderDataToHtml(a)},_renderDataToHtml:function(a){var b=Q.plugins.Mustache.render(this._tpl,a);this.doms.html(b)}}})});
define("../../action/shortPromotionAd",["../components/action/widget","../kit/qiyiPlayer","../kit/iframeLocation"],function(a,b,c){var d=a("../components/action/widget"),e=new Q.ic.InfoCenter({moduleName:"ShortPromotionAd"}),f=a("../kit/qiyiPlayer"),g=a("../kit/iframeLocation");c.exports=Q.Class("ShortPromotionAd",{construct:function(){},methods:{init:function(a){var b=this;this._view=a.view,this.flashid=a.flashid,this.hasVideoList=a.hasVideoList,this.currentPlayType="video",b.bindEvent(),e.log("shortPromotionAd action inited . flash is "+a.flashid+"; and hasVideoList is "+this.hasVideoList)},getCurrentPlayType:function(){return this.currentPlayType},unselectedList:function(a){var b=a.classname,c=Q.$('[j-delegate="videoPlayList"]');c&&c.removeClass(b)},bindEvent:function(){var a=this,b=Q.$("*[data-promotionad-elem='content']");b&&b.on("click",function(b){Q.event.get(b).preventDefault(),a.adClickHandler(this)});var c=Q.$("*[data-widget-videoslidead=ad]");c&&c.on("click",function(b){Q.event.get(b).preventDefault(),a.adClickHandler(this)}),f.getPlayer("video").on("videochanged",function(b){var c=Q.$("*[data-promotionad-link='promotionAdLink']");if(c&&c.length>0){var d,e;c.forEach(function(a){var c=Q.$(a);e=c.attr("data-promotionad-selectedclass"),e&&b.data.tvid+""==c.attr("data-promotionad-tvid")?(d=1,c.addClass(e)):(d=0,c.hasClass(e)&&c.removeClass(e))}),d?a.unselectedList({classname:e}):a.currentPlayType="video"}})},adClickHandler:function(a){var b=this,c="";Q.$(a).down("[data-promotionad-href]")&&(c=Q.$(a).down("[data-promotionad-href]").attr("data-promotionad-href"));try{document.getElementById(b.flashid).notifyAdClick(),!b.hasVideoList&&c&&(e.log("success 1500MS后 跳转"),g.href(c,{time:1e3}))}catch(d){!b.hasVideoList&&c&&(e.log("failed 1500MS后 跳转"),g.href(c,{time:1e3}))}if(b.hasVideoList){b.currentPlayType="ad";var h=Q.$(a).down("[data-promotionad-link='promotionAdLink']"),i=h.attr("data-promotionad-tvid"),j=h.attr("data-promotionad-vid"),k={tvid:i,vid:j,tvId:i};f.getPlayer("video").switchVideo(k),Q.event.customEvent.fire({type:"promotionAd_is_playing"})}e.warn("[ ShortPromotionAd ] 推广广告被点击！ ")}}})});
define("../../units/fixIeTitleChange",["../components/units/pageJob","../action/fixIeTitleChange"],function(a,b,c){var d=a("../components/units/pageJob"),e="fixIeTitleChange",f=a("../action/fixIeTitleChange");d.create(e,{check:function(){return!0},init:function(){},exec:function(){}}),c.exports=e});
define("../../action/fixIeTitleChange",["../kit/qiyiPlayer"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"fixIeTitleChange"}),e=a("../kit/qiyiPlayer"),f={originalTitle:document.title,changeTitle:function(a){if(!a)return!1;this.originalTitle=a}},g=function(a){a=a||window.event,d.log("runTime is  ================"+i++),a.propertyName==="title"&&f.originalTitle&&document.title!=f.originalTitle&&(h&&clearTimeout(h),document.detachEvent("onpropertychange",g),h=setTimeout(function(){d.log("aaaarunTime is  ===="+j+"=====title is :"+document.title+"==oriTitle is :"+f.originalTitle),document.title=f.originalTitle,document.attachEvent("onpropertychange",g)},10))},h=null,i=0,j=0;document.attachEvent&&document.attachEvent("onpropertychange",g);var k=Q.$("[data-crumbbar-widget=crumb]"),l=e.getPlayer("flash");l.on("videoChanged",function(a){var b=a.data.vn;k&&k.attr("data-title-plname")&&(b=a.data.vn+"-"+k.attr("data-title-plname")+"-"+"高清影视剧、网络视频在线看"),f.changeTitle(b),document.title=b}),c.exports=f});
define("../../units/expandable",["../components/units/pageJob","../kit/anim"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/anim"),f,g="expandable";d.create(g,{check:function(){return f=Q.$("*[data-widget-expandable]"),f&&f.length>0?!0:!1},init:function(){var a,b,c;f.forEach(function(d){a=Q.$(d).down("[data-expandable-elem=switchhandle]"),b=Q.$(d).down("[data-expandable-elem=foldhandle]"),c=Q.$(d).down("[data-expandable-elem=target]")||Q.$(d);var f=c.attr("data-expandable-initialHeight");f&&c.css("height",f);var g=function(a,b,c){return function(d){Q.event.get(d).preventDefault();var f=c.attr("data-expandable-foldwidth"),g=c.attr("data-expandable-foldheight"),h=c.attr("data-expandable-expandwidth"),i=c.attr("data-expandable-expandheight"),j=b.attr("data-expandable-handlestate"),k=b.attr("data-expandable-expandclass"),l=b.attr("data-expandable-foldclass");j==="expand"?(b.attr("data-expandable-handlestate","fold"),b.html("查看更多"),b.removeClass(k),b.addClass(l),g&&e({to:parseInt(g,10),style:"height",elem:c}),f&&e({to:parseInt(f,10),style:"width",elem:c})):(b.attr("data-expandable-handlestate","expand"),b.html("收起"),b.removeClass(l),b.addClass(k),i&&e({to:parseInt(i,10),style:"height",elem:c}),h&&e({to:parseInt(h,10),style:"width",elem:c})),a.show()}}(b,a,c);b&&b.on("click",function(a,b,c){return function(a){Q.event.get(a).preventDefault(),b&&g({target:b[0]})}}(b,a,c)),a&&c&&a.on("click",g)})},exec:function(){}}),d.add(g),c.exports=g});
define("../../units/pcFullScreen",["../components/units/pageJob","../kit/qiyiPlayer","../components/action/checkDoms"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/qiyiPlayer"),f=a("../components/action/checkDoms"),g="pcFullScreen";d.create(g,{check:function(a){return!0},init:function(){var a=e.getPlayer("video");a.on("switchFullScreen",function(b){b.data=="false"&&window.scrollTo(0,Q.$(a._player).getPosition().top)})}}),c.exports=g});
define("../../units/timeSettingShow",["../components/units/pageJob","../components/action/checkDoms"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=new Q.ic.InfoCenter({moduleName:"timeSettingShow"}),g="timeSettingShow",h;d.create(g,{getDependentDoms:function(){return h=Q.$('*[data-widget-timing="setting"]'),h},check:function(a){return e(a),!0},init:function(){var a=this;h.forEach(function(b){var c=Q.$(b).attr("data-widget-timing-set"),d=Q.$(b).attr("data-widget-timing-from"),e=Q.$(b).attr("data-widget-timing-to"),f=Q.$(b).attr("data-widget-timing-week"),g;if(!d&&!e)return;g={item:b,week:f||"all",timeFrom:d,timeTo:e,timeFormat:""},c=="date"&&(g.timeFormat="MMddHHmm",a.doChangeSetting(g)),c=="time"&&(g.timeFrom=g.timeFrom.substr(4,4),g.timeTo=g.timeTo.substr(4,4),g.timeFormat="HHmm",a.doChangeSetting(g))})},doChangeSetting:function(a){var b=a.item,c=a.timeFrom,d=a.timeTo,e=a.week,h=new Date,i;if(e=="all")i=!0;else{var j=h.getDay()+"",k=e.split(",");for(var l=0;l<k.length;l++){if(j==k[l]){i=!0;break}l==k.length-1&&(i=!1)}}var m=a.timeFormat,n=Q.date.format(h,m);n>c&&n<d&&i?Q.$(b).css("display",""):Q.$(b).hide(),f.warn("["+g+"] timing setting success !")}}),d.add(g),c.exports=g});
define("../../units/movePlace",["../components/units/pageJob","../components/action/checkDoms"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=new Q.ic.InfoCenter({moduleName:"movePlace"}),g="movePlace";d.create(g,{check:function(){return!0},init:function(){var a=this,b=Q.$("*[data-widget-moveplace]");if(!b)return!1;b.forEach(function(a){var b=Q.$(a),c=b.attr("data-widget-moveplace");if(!c)return;var d=Q.$("[data-moveplace-location='"+c+"']");if(!d)return;b.append(d)})}}),d.add(g),c.exports=g});
define("../../units/shareThirdParty",["../components/units/pageJob","../components/action/checkDoms","../action/shareThirdParty","../model/shareThirdPartyModel","../view/shareThirdPartyView"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f="sharethirdparty",g=a("../action/shareThirdParty"),h=a("../model/shareThirdPartyModel"),i=a("../view/shareThirdPartyView"),j={};d.create(f,{getDependentDoms:function(){return j={widget:Q.$("*[data-widget-sharethirdparty=share]")},j},check:function(a){return e(a),!0},init:function(){var a=j.widget,b={},c=a.attr("data-sharethirdparty-type"),d=a.attr("data-sharethirdparty-source");b.param={},b.param.param={},b.param.type=c,b.source=d,c==1?(b.param.param.tvid=a.attr("data-sharethirdparty-tvid"),b.param.param.vid=a.attr("data-sharethirdparty-videoid")):c==2&&(b.param.param.aid=a.attr("data-sharethirdparty-albumid")),b.doms=j;var e=new i(b),f=new h,k=new g({model:f,view:e});k.init(b.param)}}),c.exports=f});
define("../../action/shareThirdParty",["../components/action/widget","../model/shareThirdPartyModel","../view/shareThirdPartyView"],function(a,b,c){var d=a("../components/action/widget"),e=a("../model/shareThirdPartyModel"),f=a("../view/shareThirdPartyView"),g=new Q.ic.InfoCenter({moduleName:"Share"});c.exports=Q.Class("Share",{extend:d,construct:function(a){a=a||{},a.model=a.model||new e(a),a.view=a.view||new f(a),this.callsuper(a)},methods:{init:function(a){this.redraw(),this.param=a},getVideoInfo:function(a){var b=this,c=function(a){b._view.saveVideoInfo(a)};this._model.getVideoInfo(a,c)},share:function(a){this._model.share(a)},snsBind:function(a){this._model.snsBind(a)},whichFriendShare:function(a){this._model.whichFriendShare(a)},friendShare:function(a){this._model.friendShare(a)},allShare:function(a){this._model.allShare(a)},getBindedThirdParty:function(a){this._model.getBindedThirdParty(a)}}})});
define("../../model/shareThirdPartyModel",["../components/model/model","../kit/videoInfo","../interfaces/snsShareInterface","../interfaces/friendShareListInterface","../interfaces/snsAccounts"],function(a,b,c){var d=a("../components/model/model"),e=a("../kit/videoInfo"),f=a("../interfaces/snsShareInterface"),g=a("../interfaces/friendShareListInterface"),h=a("../interfaces/snsAccounts");c.exports=Q.Class("ShareThirdPartyModel",{extend:d,construct:function(a){a=a||{},this.opt=a},methods:{init:function(){this.thirdPartyPlat={weibo:1,qzone:2,qweibo:3,renren:4,kaixin:5},this.bindThirdParty={}},getBindedThirdParty:function(a){var b=new h,c=this,d=a.param.uids;b.getBinded(a.param,function(b){this.bindThirdParty={};if(b.code=="A00000"){c.bindThirdParty[d]={};for(var e in b.data[d]){var f=c.thirdPartyPlat[e];c.bindThirdParty[d][f]=e}a.onsuccess&&a.onsuccess(b)}})},friendShare:function(a){var b=new g,c=a.onsuccess||function(){},d=a.onfailure||function(){};b.request(a.param,function(a){a.code=="A00000"?c&&c(a):d&&d(a)})},share:function(a){var b=new f,c=a.onsuccess,d=a.onfailure;b.request(a.param,function(a){a.code=="A00000"?c&&c(a):d&&d(a)})},snsBind:function(a){var b=new h,c=a.onsuccess,d=a.onfailure;b.request({},function(a){a.code="A00000",a.code=="A00000"&&(c?c(a.data):d&&d(a))})},getVideoInfo:function(a,b){var c=a.param;c.usage="pc";var d=a.type;d==1?e.get({tvid:c.tvid,vid:c.vid,usage:"pc"},function(a){b(a)}):d!=2}}})});
define("../../interfaces/snsShareInterface",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("SnsBindInterFace",{construct:function(){this._remoteInterface=new d({share:{url:"http://passport.iqiyi.com/apis/share/share.action",struct:{code:{type:"string",empty:!1},data:{}}}})},methods:{request:function(a,b){a=a||{},a.t=(new Date).getTime(),a.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36),this._remoteInterface.send({ifname:"share",param:a},function(c){b&&b(c,a)})}}})});
define("../../interfaces/friendShareListInterface",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("SnsBindInterFace",{construct:function(){this._remoteInterface=new d({friendShare:{url:"http://passport.iqiyi.com/apis/share/friend_share_list.action",struct:{code:{type:"string",empty:!1},data:{}}}})},methods:{request:function(a,b){a=a||{},a.t=(new Date).getTime(),a.cb="cb_"+Math.floor(Math.random()*2147483648).toString(36),this._remoteInterface.send({ifname:"friendShare",param:a},function(c){b&&b(c,a)})}}})});
define("../../view/shareThirdPartyView",["../components/view/widgetView","../components/action/floater","../action/qipaLogin","../kit/userInfo","../kit/qiyiPlayer","../kit/snsWindowKit","../kit/thirdPartLogin"],function(a,b,c){var d=a("../components/view/widgetView"),e=a("../components/action/floater"),f=a("../action/qipaLogin"),g=a("../kit/userInfo"),h=a("../kit/qiyiPlayer").getPlayer("video"),i=a("../kit/snsWindowKit"),j=a("../kit/thirdPartLogin");c.exports=Q.Class("ShareView",{extend:d,construct:function(a){this.callsuper(a),this.param=a.param,this.doms=a.doms,this.source=a.source},properties:{logined:!1,sharing:!1,defaultAvatar:"http://a.tbcdn.cn/app/sns/img/default/avatar-40.png"},methods:{initDom:function(a){var b={widget:a,login:a.down("*[data-sharethirdparty-elem=login]"),avatar:a.down("*[data-sharethirdparty-elem=avatar]"),usernick:a.down("*[data-sharethirdparty-elem=usernick]"),close:a.down("*[data-sharethirdparty-elem=close]"),mustSelect:a.down("*[data-sharethirdparty-elem=mustselect]"),sharepic:a.down("*[data-sharethirdparty-elem=sharepic]"),sharepicClose:a.down("*[ data-sharethirdparty-elem=sharepicclose]"),sharethirdparty:a.down("*[data-sharethirdparty-elem=sharethirdparty]"),sharebtn:a.down("*[data-sharethirdparty-elem=sharebtn]"),input:a.down("*[data-sharethirdparty-elem=input]"),tipNormal:a.down("*[data-sharethirdparty-tipelem=normal]"),tipNoempty:a.down("*[data-sharethirdparty-tipelem=noempty]"),successPanel:a.down("*[data-sharethirdparty-panelelem=success]"),normalPanel:a.down("*[data-sharethirdparty-panelelem=normal]"),failPanel:a.down("*[data-sharethirdparty-panelelem=fail]"),retry:a.down("*[data-sharethirdparty-elem=retry]"),successPlat:a.down("*[data-sharethirdparty-successplat=success]"),failPlat:a.down("*[data-sharethirdparty-failplat]"),retryBtn:a.down("*[data-sharethirdparty-retryBtn]"),failRetryEle:a.down("*[data-sharethirdparty-failretry]"),failLoadingEle:a.down("*[data-sharethirdparty-failloading]"),shareAllTxt:a.down("*[data-sharethirdparty-sharetxt=all]"),shareAlsoTxt:a.down("*[data-sharethirdparty-sharetxt=also]"),shareList:a.down("*[data-sharethirdparty-sharelist=list]"),friend:a.down("*[data-sharethirdparty-shareele=friend]"),friendWho:a.down("*[data-sharethirdparty-friend=share]"),tipInput:{tipInputHow:a.down("*[data-sharethirdparty-tipinputelem=how]"),tipInputExceed:a.down("*[data-sharethirdparty-tipinputelem=exceed]"),tipRest:a.down("*[data-sharethirdparty-tipelem=rest]"),tipPass:a.down("*[data-sharethirdparty-tipelem=pass]")},tpl:{shareAll:a.down("*[data-sharethirdparty-tpl=shareall]"),shareAlso:a.down("*[data-sharethirdparty-tpl=sharealso]"),friend:a.down("*[data-sharethirdparty-tpl=friend]")}};this.doms=b,this.bindEvent()},init:function(a){this.ctrl=a;var b=this,c=Q.$("#thirdPartyConfig");this.configTpl=c&&c.attr("tpl"),this.getVideoInfo(this.param),this.tempVideoInfo={name:"",pic:"",tvid:"",video:""},this.bindToShare={0:0,1:2,4:3,2:4,3:5,5:6},this.shareToBind={};for(var d in this.bindToShare)this.shareToBind[this.bindToShare[d]]=d;this.shareVideoInfo={};var e=!0;Q.event.customEvent.on("share_trigger",function(a){e&&(b.initDom(b.doms.widget),e=!1);if(a.data.type!=1)return!1;if(a.data.source!=1&&a.data.source==2){var c=a.data.vu,d=a.data.tvid,f=a.data.vpic,g=a.data.href,h=a.data.add,i=a.data.custom;b.saveVideoInfo({add:h,custom:i,vn:g,tvName:c,vpic:f,vu:c,tvid:d})}b.initFloat()})},reset:function(){var a=this.doms;a.mustSelect.hide(),a.normalPanel.show(),a.failPanel.hide(),a.successPanel.hide(),a.friend.hide(),a.shareAllTxt.hide(),a.shareList.hide(),this.selectIcon={},this.selectFailIcon={},this.selectSuccessIcon={};var b=Q.$("*[data-sharethirdparty-elem=sharethirdpartyele]");b.attr("title","授权后，下次可以直接分享");var c=Q.$("*[data-sharethirdparty-elem=sharestatus]");c.removeClass("in").addClass("out"),this.doms.successPlat.down("[data-sharethirdparty-plattype]").css("display","none"),this.doms.sharepic.show()},initFloat:function(){this.floatShare=new e({overflow:"visible"}),this.floatShare.show({elem:this.doms.widget});var a=this.floatShare.getFloater();a.css("overflow","visible"),this.reset();var b=this;g.isLogin()&&(b.logined=!0,g.getIsLoginInfo(function(a){b.updateUserInfo(a)}),this.getBindedThirdParty()),this.updateShareVideoInfo(),this.checkEnterText()},getBindedThirdParty:function(a){var b=this;a=a||{},g.getIsLoginInfo(function(c){var d=c.uid,e={param:{uids:d}},f=function(a){for(var c in a.data[d])b.updateSnsInfo({data:c})};e.onsuccess=a.success||f,b.ctrl.getBindedThirdParty(e)})},getVideoInfo:function(a){this.ctrl.getVideoInfo(a)},saveVideoInfo:function(a){var b=a.tvPictureUrl||a.vpic;this.tempVideoInfo.pic=b||"",this.tempVideoInfo.video=a.vu||location.href,this.tempVideoInfo.tvid=a.tvid||a.tvId,this.tempVideoInfo.name=a.tvName||a.vn||a.an||"",this.tempVideoInfo.custom=a.custom,a.add&&(this.tempVideoInfo.add=a.add),this.configTpl&&(this.configTitle=Q.plugins.Mustache.render(this.configTpl,{series:a.s,videoName:this.tempVideoInfo.name}))},bindEvent:function(){var a=this,b=this.doms,c="*[data-sharethirdparty-elem=sharethirdpartyele]",d=b.sharethirdparty.down(c);d.on("click",function(b){a.clickShareItem(b,this)}),b.sharepicClose.on("click",function(a){Q.event.get(a).preventDefault(),b.sharepic.hide()}),b.sharepicClose.on("mouseover",function(a){var b=Q.$(this);b.hasClass("close_on")||b.addClass("close_on")}),b.sharepicClose.on("mouseout",function(a){Q.$(this).removeClass("close_on")}),b.input.on("keyup",function(b){a.checkEnterText(b)}),b.input.on("focus",function(b){a.checkEnterText(b)}),b.input.on("blur",function(b){a.doms.input.value().trim().length===0&&a.tipWord().empty()}),b.close.on("click",this.floaterHide.bind(this)),b.sharebtn.on("click",this.share.bind(this)),b.login.on("click",this.login.bind(this)),b.retryBtn.on("click",function(b){Q.event.get(b).preventDefault(),a.retry()}),Q.event.customEvent.on("login",function(b){a.logined=!0,a.floatShare&&(a.floatShare.show(),a.floatShare.getFloater().show()),a.refreshUserInfo()}),Q.event.customEvent.on("logout",function(b){a.logined=!1,a.logout()}),h.on("videoChanged",function(b){a.saveVideoInfo(b.data)}),Q.event.customEvent.on("thirdPartSnsBinded",function(b){a.getBindedThirdParty({success:function(){}}),a.updateSnsInfo(b)})},updateSnsInfo:function(a){var b={sina:"wbVeri",weibo:"wbVeri",renren:"rrVeri",kaixin:"kxVeri",qq:"qqVeri",qzone:"qqVeri",qweibo:"qweibo",qitan:"qitan"};this.doms.mustSelect.hide();var c=a.data,d=b[c],e=this.doms.sharethirdparty.down("[data-sharethirdparty-pt="+d+"]");e&&(e.attr("title",""),this.selectBinded(e))},selectBinded:function(a){a.down("[data-sharethirdparty-elem]").removeClass("out").addClass("in");var b=a.attr("data-sharethirdparty-plattype");this.selectIcon[b]=1},isSelect:function(){for(var a in this.selectIcon)if(this.selectIcon[a]==1)return!0;return!1},checkEnterText:function(){var a=this.doms,b=110,c=!0;a.tipNoempty.hide(),a.tipNormal.css("display","");var d=a.input.value(),e=b-d.length;if(e>=0)this.tipWord().rest(e);else{if(d.trim().length!==0)return this.tipWord().over(d.length-b),!1;this.tipWord().empty(),c=!1}return c},tipWord:function(){var a=this.doms;return{over:function(b){a.tipInput.tipRest.hide(),a.tipInput.tipPass.show(),a.tipInput.tipInputExceed.html(b)},empty:function(){a.tipInput.tipRest.hide(),a.tipInput.tipPass.hide(),a.tipNoempty.show()},rest:function(b){a.tipInput.tipRest.show(),a.tipInput.tipPass.hide(),a.tipInput.tipInputHow.html(b)}}},updateUserInfo:function(a){if(a.isThirdparty=="1"){var b={};for(var c in a.openids){b.data=c;break}this.updateSnsInfo(b)}var d=this.doms;a.icon?d.avatar.attr("src",a.icon):d.avatar.attr("src",this.defaultAvatar),d.usernick.show(),a.nickname?d.usernick.html(a.nickname):d.usernick.html("爱奇艺用户"),d.login.hide()},refreshUserInfo:function(){var a=this;g.getIsLoginInfo(function(b){a.updateUserInfo(b)}),a.getBindedThirdParty()},refreshLogin:function(){return!this.logined&&g.isLogin()?(this.logined=!0,this.refreshUserInfo(),!0):!1},updateShareVideoInfo:function(){for(var a in this.tempVideoInfo)this.shareVideoInfo[a]=this.tempVideoInfo[a];var b=this.shareVideoInfo.pic;b&&this.doms.sharepic.down("img").attr("src",b);if(this.configTitle){this.doms.input.value(this.configTitle);return}if(this.shareVideoInfo.custom&&this.shareVideoInfo.custom.title){this.doms.input.value(this.shareVideoInfo.custom.title);return}if(this.shareVideoInfo.name){var c="我在爱奇艺看了《"+this.shareVideoInfo.name+"》，非常精彩，分享给大家！！#最高清1080p， 只在爱奇艺#";this.doms.input.value(c)}},logout:function(){var a=this.doms;a.usernick.hide(),a.login.show(),a.avatar.attr("src",this.defaultAvatar)},login:function(a){Q.event.get(a).preventDefault(),this.refreshLogin();if(g.isLogin())return!0;var b=encodeURIComponent(document.location.href),c="http://t.qiyi.com/opening/start.php?returnUrl=",d=encodeURIComponent(c+b);f.openLoginWindow({regUrl:d},function(){});var e=this.floatShare.getFloater();e.hide();var h=this;Q.event.customEvent.on("loginIframeClosed",function(a){h.floatShare.show(),e.show()})},retry:function(){this.doms.failRetryEle.hide(),this.doms.failLoadingEle.show(),this.shareContent()},checkShare:function(){var a=this.doms,b=!0;return this.checkEnterText()||(b=!1),this.doms.input.value().trim().length===0&&(this.tipWord().empty(),b=!1),this.isSelect()||(a.mustSelect.show(),b=!1),b},share:function(a){Q.event.get(a).preventDefault(),this.refreshLogin(),this.shareVideoInfo.custom&&this.shareVideoInfo.custom.beforeClick&&this.shareVideoInfo.custom.beforeClick();if(!this.checkShare())return!1;this.shareContent()},shareContent:function(){if(!g.isLogin()||this.sharing)return;var a=this,b=this.doms.input.value(),c=[];for(var d in this.selectIcon)if(this.selectIcon[d]==1){var e=this.bindToShare[d];c.push(e)}c=c.join(","),b=encodeURIComponent(b),this.tempVideoInfo.add&&(b+=" "+encodeURIComponent(this.tempVideoInfo.add));var f={};f.param={image:this.shareVideoInfo.pic,authcookie:Q.cookie.get("P00001"),tvid:this.shareVideoInfo.tvid,sources:c,content:b},f.onsuccess=function(b){a.sharing=!1,a.doms.failLoadingEle.hide();if(a.shareVideoInfo.custom&&a.shareVideoInfo.custom.success){a.shareVideoInfo.custom.success(a);return}a.shareDone(b)},f.onfailure=function(b){a.sharing=!1,a.doms.failLoadingEle.hide(),a.shareDone(b)},this.sharing=!0,this.doms.failLoadingEle.show(),this.ctrl.share(f)},showFail:function(a){var b=this.doms;b.normalPanel.hide(),b.failPanel.show(),this.selectIcon={};for(var c in this.selectFailIcon){var d=this.shareToBind[c];this.selectIcon[d]=1;var e="[data-sharethirdparty-plattype="+d+"]";b.failPlat.down(e).css("display","")}},showSuccess:function(a){var b=this.doms;b.normalPanel.hide(),b.failPanel.hide(),b.successPanel.show();var c=this.selectSuccessIcon;for(var d in c)if(c[d].status==1){var e=this.shareToBind[d],f="[data-sharethirdparty-plattype="+e+"]",g=b.successPlat.down(f);g&&(g.css("display",""),g.attr("href",c[d].profile),g.attr("target","_blank"))}this.shareAfter().showList(a)},shareDone:function(a){var b=!1;this.selectFailIcon={};var c="";if(!a.data){var d={};for(c in this.selectIcon)this.selectIcon[c]==1&&(d[this.bindToShare[c]]=1);a.data=d}for(c in a.data)a.data[c].status==1?(this.selectSuccessIcon[c]=this.selectSuccessIcon[c]||{},this.selectSuccessIcon[c].status=1,this.selectSuccessIcon[c].profile=a.data[c].profile):(this.selectFailIcon[c]=1,b=!0);if(b){var e=this.doms.failPlat.down("[data-sharethirdparty-plattype]");e&&e.hide(),this.doms.failRetryEle.show(),this.showFail(a)}else this.showSuccess(a)},clickShareItem:function(a,b){Q.event.get(a).stop(),this.refreshLogin();if(!g.isLogin()){var c=Q.$(b).attr("data-sharethirdparty-sourceid");if(c){var d=Q.$(b).attr("data-sharethirdparty-href");j.show(c,d)}return}var e=this,f=Q.$(b),h=f.attr("data-sharethirdparty-plattype"),k=f.down("*[data-sharethirdparty-elem=sharestatus]"),l={};l.onsuccess=function(){e.selectIcon[h]=1,e.doms.mustSelect.hide()},l.onfailure=function(){};var m=this.selectIcon[h]==1?!0:!1;if(!m){var n=f.attr("href"),o=f.attr("data-sharethirdparty-pt"),p=this.ctrl._model.bindThirdParty;if(o=="qitan")return;g.getIsLoginInfo(function(a){var b=a.uid;p[b]&&p[b][h]?e.updateSnsInfo({data:p[b][h]}):i.open(o,n)})}else m&&(this.selectIcon[h]=0,f.attr("title",""),k.removeClass("in").addClass("out"))},floaterHide:function(a){Q.event.get(a).preventDefault(),this.floatShare.destroy(),this.floatShare=null},shareAfter:function(){var a=this;return{showList:function(b){var c=a.doms,d="",e={param:{}};e.onsuccess=function(b){b=b.data,d=c.tpl.shareAll.value();var e=b.who_size>0,f=b.other_size>2,g="";e&&(f?(d=c.tpl.shareAlso.value(),a.doms.shareAllTxt.hide(),a.doms.shareAlsoTxt.css("display","")):a.doms.shareAlsoTxt.hide(),g="other",a.shareAfter().renderFriend(b)),!f&&b.hot_size>0&&(c.shareAllTxt.css("display",""),d=c.tpl.shareAll.value(),g="hot"),a.shareAfter().renderShare(d,b,g)},e.onfailure=function(){},e.param.authcookie=Q.cookie.get("P00001"),e.param.tvid=a.shareVideoInfo.tvid,a.ctrl.friendShare(e)},renderFriend:function(b){var c=a.doms,d=[];b=b||{};var e=b.who_size;if(e<=0)return!1;e=e>2?2:e,c.friend.show();var f=c.tpl.friend.value();for(var g=0;g<e;g++){var h=b.who[g].nickname&&Q.string.truncate(b.who[g].nickname,20);b.name=b.who[g].nickname,b.short_name=h||"",b.url="javascript:void(0);";var i=Q.plugins.Mustache.render(f,b);d.push(i)}var j=d.join("、");c.friend.show(),c.friendWho.html(j)},renderShare:function(b,c,d){var e=a.doms,f={},g=[],h="",i="",j="",k="",l=d=="hot",m=l?c.hot_size:c.other_size,n=l?c.hot:c.other;if(m!=3)return!1;e.shareList.show();for(var o=0;o<m;o++)f.qi=Q.string.truncate(n[o].videoName,24),f.nickname=n[o].nickname,f.short_name=Q.string.truncate(n[o].nickname,9),f.date=Q.date.format(new Date(n[o].create_time),"M月d日"),f.name=n[o].videoName,f.url=n[o].videoUrl,n[o].image_url&&(j=n[o].image_url.indexOf(".jpg"),i=n[o].image_url.substring(0,j)+"_160_90.jpg",f.image_pic=i||n[o].image_url),h=Q.plugins.Mustache.render(b,f),g.push(h);e.shareList.html(g.join(""))}}}}})});
define("../../units/ThirdPartyTrigger",["../components/units/pageJob","../kit/userInfo"],function(a,b,c){var d=a("../components/units/pageJob"),e="shareThirdPartyTrigger",f=a("../kit/userInfo");d.create(e,{check:function(){return!0},init:function(){var a=this;Q.event.customEvent.on("shareRenderDone",function(b){var c=b.data.wrap.down("[data-widget-shareplattrigger]");a.initWidget(c)});var b=Q.$("[data-widget-shareplattrigger]");if(!b)return!1;this.initWidget(b)},initWidget:function(a){a.forEach(function(a,b){var c=Q.$(a),d=c.attr("data-shareplattrigger-tvid"),e=c.attr("data-shareplattrigger-pic"),f=c.attr("data-shareplattrigger-videoname"),g=c.attr("data-shareplattrigger-href"),h=c.attr("data-shareplattrigger-source"),i=c.attr("data-shareplattrigger-add"),j={sina:1,qq:4,qqweibo:2,renren:3,kaixin:5,weixin:6};c.delegate("thirdpartyitem",function(a){var b=Q.$(a.target),c=b.attr("data-share-trigger");if(c in j){var k=c=="weixin"?2:1;Q.event.get(a.event).preventDefault(),Q.event.customEvent.fire({type:"share_trigger",data:{href:g,type:k,source:h,add:i,name:c,tvid:d,vu:f,vpic:e}})}})})}}),c.exports=e});
define("../../units/moviePlayTabs",["../components/units/pageJob","../components/action/checkDoms","../action/tab"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../action/tab"),g,h="moviePlayTabs";d.create(h,{check:function(){return g=Q.$("[data-widget-tabtags]"),!!g},init:function(){g.forEach(function(a){var b,c=Q.$(a).attr("data-widget-tabtags");Q.$(a).attr("data-widget")?b=Q.$(a):b=Q.$(a).down("[data-widget=tab]");var d=new f({doms:{widget:b,titles:b.down("[data-elem=tabtitle]"),bodies:b.down("[data-elem=tabbody]")}}),e=b.down("[data-elem=tabtitle]");e.forEach(function(a){var b=Q.$(a);b.on("click",function(a){var d=b.attr("data-seq");Q.event.customEvent.fire({type:"tabFocusChanged",data:{tab:c,num:d}})})})})}}),c.exports=h});
define("../../units/switchLight",["../components/units/pageJob","../components/action/checkDoms","../action/switchLight"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../action/switchLight"),g;d.create("switchLight",{getDependentDoms:function(){return{lightAreas:Q.$("[data-widget-switchlight='light']"),player:Q.$("#flashArea")}},check:function(){return e(this.getDependentDoms()),!0},init:function(){var a=this;f.init(),Q.kit.QiyiPlayer.getPlayer("video").on("setLight",function(a){var a=a||{};f.doSwitch(a.data)}),Q.event.customEvent.on("js_switchLight",function(a){f.jsSwitch(!a.data)}),Q.event.customEvent.on("hasScrollToQitan",function(){f.setBoxSize()})},exec:function(){},bindEvent:function(){}}),c.exports="switchLight"});
define("../../units/playCount",["../components/units/pageJob","../kit/qiyiPlayer","../view/playCountView","../model/playCountModel","../interfaces/playCountInterface"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/qiyiPlayer"),f=a("../view/playCountView"),g=a("../model/playCountModel"),h=a("../interfaces/playCountInterface"),i="playCount",j=null,k=[];d.create(i,{getDependentDoms:function(){j=Q.$("*[data-widget-playcount]")||Q.$("[data-widget-playcount=filminfo]")||Q.$("[data-widget=playcounts]")},check:function(){var a=!0;return j.length||(a=!1),a},_renderAll:function(a){var b,c=0,d;k.length=0,a&&a.forEach(function(a,b){a=Q.$(a),k.push(a.attr("data-dynamic-albumid")||a.attr("data-playcount-albumid")||a.attr("data-albumid"))});if(k.length)for(var e=0;e<k.length;e++)k[e]||(k.splice(e,1),e--);if(k.length===0)return;(new h({path:k.join(",")+"/playcnt"})).send({param:{cb:"playcnt"},spliter:"0",timeout:5e3},function(d){d.code=="A00000"&&a&&a.forEach(function(a,e){a=Q.$(a),b=a.attr("data-dynamic-albumid")||a.attr("data-playcount-albumid")||a.attr("data-albumid"),c=d.data[e][b]+"",c=Q.string.divideNumber(c);var f=Q.$("[data-widget-playcount=filminfo]");f&&f.length>0?c&&a.html("播放："+c+"次"):c&&a.html(c)})})},init:function(){var a=this;Q.event.customEvent.on("dynamicPlayCount",function(b){var c=b.data.container.down("[data-widget-dynamic]");a._renderAll(c)}),this._renderAll(j);var b;b=e.getPlayer("video"),b.on("videoChanged",function(b){var c=b.data.aid;c&&a.renderAll(c)})},renderAll:function(a){var b;j&&j.forEach(function(b,c){var d=Q.$(b);d.attr("data-playcount-albumid",a)}),this._renderAll(j)}}),c.exports=i});
define("../../view/playCountView",["../components/view/view"],function(a,b,c){var d=a("../components/view/view");c.exports=Q.Class("PlayCountView",{extend:d,construct:function(a){this.callsuper(a),this.label=a.doms.label},methods:{init:function(){},update:function(a){if(this.label){var b=a+"";b=Q.string.divideNumber(b),this.label.html(b)}}}})});
define("../../model/playCountModel",["../components/model/model","../interfaces/playcount"],function(a,b,c){var d=a("../components/model/model"),e=a("../interfaces/playcount");c.exports=Q.Class("PlayCountModel",{extend:d,construct:function(a){this.callsuper(),a&&a.playcountCache&&(this.playcountCache=a.playcountCache)},methods:{init:function(){},get:function(a,b){a=a||{};var c=this;Q.object.extend(a,{varname:"playCount_"+a.aid});var d=new e;d.request(a,function(d){c.playcountCache&&!c.playcountCache[a.aid]&&(c.playcountCache[a.aid]=d.data),b(d.data)})}}})});
define("../../interfaces/playcount",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("PlayCountInterFace",{construct:function(a){this._remoteInterface=new d({get:{url:"http://cache.video.qiyi.com/p/",struct:{code:{type:"string"},data:{}}}})},methods:{request:function(a,b){a=a||{},this._remoteInterface.send({ifname:"get",param:a,memory:!0},function(c){b&&b(c,a)})}}})});
define("../../interfaces/playCountInterface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("RIPlayCount",{construct:function(a){this._remoteInterface=new d({url:"http://cache.video.qiyi.com/pc/"+a.path,struct:{code:{type:"string"},data:{type:"array"}}})},methods:{send:function(a,b){a.param=a.param||{},a.method="POST",a.memory=!0,this._remoteInterface.send(a,function(a){b&&b(a)})}}})});
define("../../units/breadCrumbs",["../components/units/pageJob","../components/action/checkDoms","../interfaces/crumbsVideoInfoInterface","../interfaces/crumbsCatalogInterface"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../interfaces/crumbsVideoInfoInterface"),g=a("../interfaces/crumbsCatalogInterface"),h=Q.kit.QiyiPlayer.getPlayer("video"),i,j,k,l="breadCrumbs",m;d.create(l,{getDependentDoms:function(){return{widget:m}},check:function(a){return!0},init:function(){var a=this;i=j=!1,k=function(b){i?j&&a.doVideoChange(b):a.lazyCheck()?a.lazyInit(b):h.un("videoChanged",k)}},exec:function(){h.on("videoChanged",k)},lazyCheck:function(){return i?j:(i=j=!0,m=Q.$("*[data-widget-crumbs=switch]"),m||(j=!1),j)},lazyInit:function(a){i&&j&&this.doVideoChange(a)},doVideoChange:function(a){var b=a.data.aid,c=a.data.tvid;this.getDataFromPlayer(a);var d=new f;d.request({tvId:c},this.doChangeCatalog.bind(this)),b&&this.doChangeTags(a)},getDataFromPlayer:function(a){var b=a.data,c=this,d=m.attr("data-widget-crumbs-name"),e=m.down("*[data-widget-crumbs-elem=name]"),f="";if(parseInt(d,10)&&e){var g=e.attr("data-widget-crumbs-name-max"),h=b.vn;parseInt(g,10)?f=h.length>g?Q.string.truncate(h,g,".."):h:f=h,document.title=h,e.html(f)}else c.doHideElement(e);var i=m.attr("data-widget-crumbs-time"),j=m.down("*[data-widget-crumbs-elem=time]");if(j&&i){var k="";switch(i){case"num":parseInt(b.pd,10)&&(k="["+b.pd+"]"),j.html(k);break;case"lecture":parseInt(b.pd,10)&&(k="第"+b.pd+"讲"),j.html(k)}}},doChangeCatalog:function(a){var b=this,c=m.down('*[data-widget-crumbs-elem="2"]');if(a.code=="A00000"&&c){var d=a.data.pid,e=a.data.crumbList,f="";if(e&&e.length)for(var h=1;h<=e.length;h++)f+='<em>&gt;</em><a href="'+e[h-1].url+'">'+e[h-1].title+"</a>";(new g).request({pid:d},function(a){if(a.code=="A00000"){var b=a.data,d="";for(var e=1;e<=b.length;e++)d+='<em>&gt;</em><a href="'+b[e-1].url+'">'+b[e-1].title+"</a>";c.html(f+d)}else c.html("")})}else c&&c.html("")},doChangeTags:function(a){var b=this,c=a.data,d=m.attr("data-widget-crumbs-en"),e=m.down("*[data-widget-crumbs-elem=en]");if(parseInt(d,10)&&e&&c.tvEname){var f=c.tvEname;e.html(f)}else b.doHideElement(e);var g=m.attr("data-widget-crumbs-time"),h=m.down("*[data-widget-crumbs-elem=time]"),i=c.ty,j=c.tvSeason,k=c.tvPhase,l=c.issueTime;if(g=="0"&&h)h.html("");else if(isNaN(parseInt(g,10))&&h){var n="";switch(g){case"phase":parseInt(k,10)?(parseInt(j,10)&&(n+="第"+j+"季"),n+="第"+k+"期"):parseInt(i,10)&&(n="第"+i.toString().substr(0,4)+"年"+i.toString().substr(4,2)+"月"+i.toString().substr(6,2)+"期"),h.html(n);break;case"time":parseInt(i,10)?n="第"+i.toString().substr(0,4)+"年"+i.toString().substr(4,2)+"月"+i.toString().substr(6,2)+"期":parseInt(l,10)&&(n="第"+l.toString().substr(0,4)+"年"+l.toString().substr(4,2)+"月"+l.toString().substr(6,2)+"期"),h.html(n);break;case"line":parseInt(i,10)&&(n="第"+i.toString().substr(0,4)+"-"+i.toString().substr(4,2)+"-"+i.toString().substr(6,2)+"期"),h.html(n);break;case"date":if(parseInt(i,10)){var o=i.toString().substr(4,2),p=i.toString().substr(6,2);o&&p&&(n=o+"月"+p+"日")}h.html(n)}}},doHideElement:function(a){a&&a.hide()}}),c.exports=l});
define("../../interfaces/crumbsVideoInfoInterface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("crumbsVideoInfoInterFace",{construct:function(){var a="http://cache.video.qiyi.com/cmf/";this._remoteInterface=new d({crumbsVideoInfo:{url:a,struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{}}}}})},methods:{request:function(a,b){a=a||{},a.varname="cmf",this._remoteInterface.send({ifname:"crumbsVideoInfo",param:a,memory:!0},function(c){b&&b(c,a)})}}})});
define("../../interfaces/crumbsCatalogInterface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("crumbsCatalogInterface",{construct:function(){var a="http://cache.video.qiyi.com/cml/";this._remoteInterface=new d({crumbsCatalog:{url:a,struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{}}}}})},methods:{request:function(a,b){a=a||{},a.varname="cml",this._remoteInterface.send({ifname:"crumbsCatalog",param:a,memory:!0},function(c){b&&b(c,a)})}}})});
define("../../units/qiTanGetRecordNum",["../components/units/pageJob","../interfaces/t_getResourceViewRecordNum"],function(a,b,c){var d=a("../components/units/pageJob"),e=new Q.ic.InfoCenter({moduleName:"units/qiTanGetRecordNum"}),f=a("../interfaces/t_getResourceViewRecordNum"),g="qiTanGetRecordNum",h;d.create(g,{check:function(){var a=Q.$("*[data-widget-qitanrecordnum]");return a?(h=a.attr("data-qitanrecordnum-albumid"),h?!0:(e.warn("data-qitanrecordnum-albumid为空！"),!1)):!1},init:function(){var a=Q.$("*[data-widget-qitanrecordnum=wish]"),b=Q.$("*[data-widget-qitanrecordnum=collect]"),c=Q.$("*[data-widget-qitanrecordnum=score]");(new f).request({albumId:h},function(d){if(d.code=="A00000"){var e=d.data;a&&a.html(Q.string.divideNumber(e.wish)),b&&b.html(Q.string.divideNumber(e.collect)),c&&c.html(e.score)}else a&&a.html("0"),b&&b.html("0"),c&&c.html("0")})}}),c.exports=g});
define("../../interfaces/t_getResourceViewRecordNum",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("TGetRNumInterFace",{construct:function(a){this._remoteInterface=new d({tGetRNumInterFaceData:{url:"http://api.t."+e.SITE_DOMAIN+"/api/viewrecord/getResourceViewRecordNum.php",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{albumId:{type:"number",empty:!1}}}}}})},methods:{request:function(a,b){a=a||{},a.cb="varName_tGetRNumInterFace",a.t=(new Date).getTime(),this._remoteInterface.send({ifname:"tGetRNumInterFaceData",param:a},function(c){b&&b(c,a)})}}})});
define("../../units/playBasicInfoTabsV2",["../components/units/pageJob","../action/tab"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../action/tab"),f="playBasicInfoTabs",g=!0,h=!0;d.create(f,{check:function(a){return Q.$('*[data-widget-pbasicinfo="info"]')?!0:!1},init:function(){var a=this,b=Q.$('*[data-widget-pbasicinfo="info"]'),c=b.down("[data-elem=tabtitle]"),d=b.down("[data-elem=tabbody]"),f=new e({doms:{widget:b,titles:c,bodies:d}}),i=b.down('*[data-shortcutlist-elem="showHideBtnContainer"]');f.on("focuschange",function(a){parseInt(a.data.title.attr("data-seq"),10)==1&&i?i.show():i&&i.hide()}),Q.event.customEvent.on("videoKeyPointsRenderDone",function(a){var b=Q.$("*[data-videokeypoints-elem=wrap]").html().trim();b?Q.$(c[2]).show():(h=!1,g?f.select(1):f.select(2),Q.$(c[2]).hide())}),Q.event.customEvent.on("videoListRenderDone",function(a){var b=Q.$('*[data-widget-videoslide="videolist"]'),d=b.down('*[data-videoslide-elem="item"]');if(!d||d.length<2)g=!1,f.select(2),Q.$(c[0]).hide()})}}),c.exports=f});
define("../../units/autoLoadQiyiClient",["../components/units/pageJob","../components/action/checkDoms","../interfaces/locationInterface"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../interfaces/locationInterface"),g="autoLoadQiyiClient";d.create(g,{check:function(){return!0},init:function(){setTimeout(function(){var a=Q.$("#widget-loadclient"),b;a&&(b=new f,b.request(function(a){var b=a.province,c=a.city;b!="北京"&&b!="上海"&&c!="广州"&&c!="深圳"&&Q.plugins.clearSwf.on("ready",function(){var a=Q.plugins.clearSwf.get();a&&a.loadQiyiClient&&a.loadQiyiClient()})}))},6e4)}}),c.exports=g});
define("../../interfaces/locationInterface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("UIDInterface",{construct:function(a){var b=String(Math.floor(999999999*Math.random()))+""+(new Date).getTime(),c="http://iplocation.geo.qiyi.com/cityjson?tn="+b;this._remoteInterface=new d({LOC:{url:c,struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{ip:{type:"string"},isp:{type:"string"},country:{type:"string"},province:{type:"string"},city:{type:"string"},isp_id:{type:"number"},country_id:{type:"number"},province_id:{type:"number"},city_id:{type:"number"},location_id:{type:"number"}}}}}})},methods:{request:function(a){this._remoteInterface.send({ifname:"LOC",param:{},jsonp:{varname:"returnIpCity"}},function(b){b.code=="A00000"?a&&a(b.data):a({})})}}})});
define("../../units/playerPopup",["../components/units/pageJob","../components/action/checkDoms","../action/playerPopup","../kit/qiyiPlayer"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f="playerPopup",g=a("../action/playerPopup"),h=a("../kit/qiyiPlayer").getPlayer("video"),i,j;d.create(f,{getDependentDoms:function(){return{buyBtn:Q.$("*[data-widget-moviepaybtn]")}},check:function(a){e(a);try{i=Q.pageInfo.playPageInfo.albumId}catch(b){i=Q.$("*[data-widget-player]").attr("data-player-albumid")}if(i)return!0},init:function(){var a=this;j=new g({albumId:i}),h.on("recharge",function(b){a.popupCharge(b.data)}),h.on("videoChanged",function(){j&&j.destroy()}),lib.swf.notice.list&&lib.swf.notice.list.swf_recharge&&Q.event.customEvent.fire(lib.swf.notice.list.swf_recharge[0]),Q.event.customEvent.on("login",function(){j&&(j.destroy(),j.renderPayBtn())}),Q.event.customEvent.on("logout",function(){j&&(j.destroy(),j.renderPayBtn())})},exec:function(){var a=this;j&&j.renderPayBtn()},popupCharge:function(a){var b="";switch(a){case"Q00310":case"Q00302":case"Q00304":j.showCharge();break;case"A00011":case"A00012":case"A00013":b='<div class="qiyuePopup" style="width:515px;height:287px;background:url(http://www.qiyipic.com/common/fix/qiyue_images/popupBg1.png)"><p style="margin:60px 0 10px 45px; font-size:14px;">网络连接错误，请稍候再试。</p><p style="padding:15px 20px 10px;text-align:right;line-height:30px;"><a href="http://vip.'+lib.SITE_DOMAIN+'">返回会员专区首页</a></p>'+"</div>",j.showError(b);break;case"Q00305":b='<div class="qiyuePopup" style="width:515px;height:287px;background:url(http://www.qiyipic.com/common/fix/qiyue_images/popupBg1.png)"><p style="margin:60px 0 10px 45px; font-size:14px;">用户不存在，请<a href="http://passport.'+lib.SITE_DOMAIN+'/register/reg.php">注册</a>后重试。</p>'+'<p style="padding:15px 20px 10px;text-align:right;line-height:30px;">'+'<a href="http://vip.'+lib.SITE_DOMAIN+'">返回会员专区首页</a></p>'+"</div>",j.showError(b);break;default:b='<div class="qiyuePopup" style="width:515px;height:287px;overflow:hidden;background:url(http://www.qiyipic.com/common/fix/qiyue_images/popupBg1.png)"><p style="margin:60px 0 10px 45px; font-size:14px;">参数错误，请重试。</p><p style="padding:15px 20px 10px;text-align:right;line-height:30px;"><a href="http://vip.'+lib.SITE_DOMAIN+'">返回会员专区首页</a></p>'+"</div>",j.showError(b)}}}),c.exports=f});
define("../../action/playerPopup",["../components/action/baseAdapter","../view/playerPopupView","../model/playerPopupModel"],function(a,b,c){var d=a("../components/action/baseAdapter"),e=a("../view/playerPopupView"),f=a("../model/playerPopupModel"),g=Q.event.customEvent,h=Q.Class("PlayerPopup",{extend:d,construct:function(a){a.view=a.view||new e,a.model=a.model||new f,a.model.set({localData:{albumId:a.albumId}}),this.callsuper(a)},methods:{init:function(){},showCharge:function(){g.fire({type:"js_switchLight",data:!0}),this.asyncGet()},showError:function(a){g.fire({type:"js_switchLight",data:!0}),this.syncSet({html:a})},renderPayBtn:function(){var a=this;this._model.getMovieBuyBtn({},function(b){a._view.renderPayBtn(b.html||"")})},destroy:function(){this._view.destroy()}}});c.exports=h});
define("../../view/playerPopupView",["../components/view/view","../components/action/floater","../components/view/floaterCustomView","../kit/iframeLocation","../kit/userInfo"],function(a,b,c){var d=a("../components/view/view"),e=null,f=a("../components/action/floater"),g=a("../components/view/floaterCustomView"),h=new Q.ic.InfoCenter({moduleName:"PlayerPopupView"}),i=a("../kit/iframeLocation"),j=a("../kit/userInfo"),k=Q.Class("PlayerPopupView",{extend:d,methods:{init:function(a){this._ctrl=a,this._doms={player:Q.$("[data-widget-player=flash]")}},update:function(a){var b=this,c=a.localData.html;c='<div id="j-playerPopup" class="new_playerDdialog" >'+c+"</div>",e||(e=new f({view:new g({zIndex:"0",isResize:!0,pos:function(){return{left:b._doms.player.getPosition().left,top:b._doms.player.getPosition().top}},boxSize:function(){return{width:b._doms.player.width(),height:b._doms.player.height()}}})})),e.show({html:c}),this.sendPingBack();var d=Q.$("div.zhengtibaowei");d&&d.down("a.kaitong_vipm")&&d.down("a.kaitong_vipm").on("click",this.evadelogin)},renderPayBtn:function(a){h.log("html: "+a);var b=Q.$("[data-widget-moviepaybtn]");b&&(b.html(a),Q.$(".btn_orange_m")&&Q.$(".btn_orange_m").on("click",this.evadelogin))},destroy:function(){if(e)e.destroy(),e=null;else{var a=lib.component.login=lib.component.login||{};try{a.dialog.close()}catch(b){}}},sendPingBack:function(){Q.log.server({type:"membernotifydiv2013031",jsuid:Q.cookie.get("QC006"),flashuid:Q.cookie.get("QC005"),ppuid:Q.cookie.get("P00003")},"http://msg.video.qiyi.com/tmpstats.gif")},evadelogin:function(a){var b=Q.cookie.get("HZ00011");if(b&&b=="11"&&!j.isLogin()){a=Q.event.get(a),a.stop();var c=Q.url.parse(window.location.href),d=c.protocol+"://"+c.host+c.path;i.href("http://v.139site.com/pretrade.do?spid=13&preurl="+d+"&ucode=HZ00011&keystr=bf49359a5e0ef6eb0d75b0906c3c4f36")}}}});c.exports=k});
define("../../model/playerPopupModel",["../components/model/baseModel","../interfaces/movieLayer"],function(a,b,c){var d=a("../components/model/baseModel"),e=a("../interfaces/movieLayer");c.exports=Q.Class("PlayerPopupModel",{extend:d,construct:function(a){a=Q.object.extend({ri:e,remoteMethods:{get:"getChargeHtml",getMovieBuyBtn:"getMovieBuyBtn"},remoteGetParam:function(){return{aid:this._data.localData.albumId}}},a),this._remoteGetMovieBuyParam=function(){return{aid:this._data.localData.albumId}},this.callsuper(a)},methods:{asyncGet:function(a,b){var c=this;a=a||{},a.cb=a.cb||"__getPopupChargeWin__cb_",c.callsuper("asyncGet",a,function(a){c.set({html:a.remoteData.html}),b&&b(c.get())})},getMovieBuyBtn:function(a,b){var c=this;a=a||{},a.cb=a.cb||"__getPayBtn__cb_",a.tt=(new Date).getTime(),a=Q.object.extend(this._remoteGetMovieBuyParam(),a);var d=new this._remoteInterface;this._remoteMethods.getMovieBuyBtn&&d[this._remoteMethods.getMovieBuyBtn](a,function(a){b&&b(a)})}}})});
define("../../interfaces/movieLayer",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("RIMark",{construct:function(){this._remoteInterface=new d({get:{url:"http://serv.vip."+e.SITE_DOMAIN+"/pay/movieLayer.action",struct:{code:{type:"string"},msg:{type:"string"},data:{type:"object",struct:{html:{type:"string"}}}}},getBuyBtn:{url:"http://serv.vip."+e.SITE_DOMAIN+"/pay/movieBuy.action",struct:{code:{type:"string"},msg:{type:"string"},data:{type:"object",struct:{html:{type:"string"}}}}}})},methods:{getChargeHtml:function(a,b){this._remoteInterface.send({param:a,ifname:"get"},function(a){a.code=="A00000"&&b&&b(a.data)})},getMovieBuyBtn:function(a,b){this._remoteInterface.send({ifname:"getBuyBtn",param:a},function(a){a.code=="A00000"&&b&&b(a.data)})}}})});
define("../../units/videoInfo/foldExpand",["../../components/units/pageJob"],function(a,b,c){var d=a("../../components/units/pageJob"),e=null,f="foldExpand";d.create(f,{getDependentDoms:function(){return e=Q.$("*[data-widget-foldexpand]"),e},check:function(a){return a&&a.length>0?!0:!1},init:function(){},exec:function(){e.forEach(function(a){a=Q.$(a);var b=a.down("[data-foldexpand-elem=target]"),c=a.down("[data-foldexpand-elem=fold]"),d=a.down("[data-foldexpand-elem=expand]");if(!(b&&c&&d))return;c.on("click",function(a){b.hide(),c.hide(),d.show()}),d.on("click",function(a){b.show(),c.show(),d.hide()})})}}),c.exports=f});
define("../../units/dimensionalCodeFloter",["../components/units/pageJob","../components/action/checkDoms","../kit/anim","../kit/qrCoder","../kit/qiyiPlayer","../kit/eventPlugin","../kit/getWebEventID"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/anim"),g=a("../kit/qrCoder"),h=a("../kit/qiyiPlayer"),i=a("../kit/eventPlugin"),j=a("../kit/getWebEventID"),k=new i,l=0,m,n,o,p,q,r,s,t,u=0,v=1,w=1,x=Q.$("*[data-widget-dimensionalcode=floating]"),y=Q.$("*[data-widget-dimensionalcode=position]"),z="dimensionalCodeFloter";d.create(z,{check:function(a){return e(a),!0},init:function(){var a=this;if(Q.browser.iPad)return!1;if(!y&&!x)return!1;var b=x.down("*[data-dimensionalcode-elem=cover]");b&&(b.hide(),Q.browser.Maxthon&&Q.browser.WEBKIT&&(u=1)),n=x.attr("data-dimensionalcode-hoverclass")||"selected",o=x.attr("data-dimensionalcode-undownclass")||"unEffective",p=parseInt(x.attr("data-dimensionalcode-bottom"),10),q=parseInt(x.attr("data-dimensionalcode-left"),10),a.resetPositon(),m=x.down('*[data-dimensionalcode-elem="totop"]');if(m){var c=parseInt(m.attr("data-dimensionalcode-totop-time"),10)||100;a.doMoveToTop(),r=function(a){w&&m.addClass(n)},s=function(a){w&&m.removeClass(n)},t=function(a){Q.event.get(a).preventDefault();if(w){var b=Q.page.getScrollTop();if(Q.browser.IE)window.scrollTo(0,0);else{var d=Q.anim.create(Q.$(document.body));d.onCompute=function(){window.scrollTo(0,this.info.scrollTo.animArray[this.counter]),this.counter++,this.counter==this.interval&&window.scrollTo(0,this.info.scrollTo.to)},d.duration(c).from("scrollTo",b).to("scrollTo",0).go()}m.hasClass(n)&&m.removeClass(n),k.fire({type:"clickother",data:a});var e=Q.$(a.target||a.srcElement)}},m.on("click",t),m.on("mouseenter",r),m.on("mouseleave",s)}var d="";d=location.protocol+"//"+location.hostname+location.pathname;var e=h.getPlayer("flash");e.on("videoChanged",function(b){d=b.data.vu,v=1,l&&a.doCodeImg({doms:z,url:d})});var f=x.down('*[data-dimensionalcode-elem="code"]'),g=x.down('*[data-dimensionalcode-code="showout"]'),i=x.down('*[data-dimensionalcode-code="showin"]'),z=Q.$("*[data-dimensionalcode-code=img]");if(f&&g&&i&&z){var A=parseInt(i.attr("data-dimensionalcode-uptime"),10)||2e3,B=parseInt(i.attr("data-dimensionalcode-downtime"),10)||1500,C=i.attr("data-dimensionalcode-addclass"),D,E="http://msg.iqiyi.com/b?t=5&a=pagehotchatshow&pf=1&p=10&p1=101&c1=",F;e.getVideoInfo(function(a){D=a.c,j(function(a){var b=Q.cookie.get("P00003");F={t:5,a:"pagehotchatshow",pf:1,p:10,p1:101,c1:D,s1:1,s2:1,s3:window.location.href,e:Q.crypto.md5((+(new Date)).toString()),se:a,u:Q.cookie.get("QC005"),rn:+(new Date)},b&&(F.pu=b)})}),f.on("click",function(c){Q.event.get(c).preventDefault(),l?a.codeContentHide({inDom:i,outDom:g,classDom:f,frameDom:b,time:B,imgAnimClass:C}):(Q.log.server(F,"http://msg.iqiyi.com/b"),a.codeContentShow({inDom:i,outDom:g,classDom:f,frameDom:b,time:A,imgDom:z,url:d,imgAnimClass:C}))}),f.on("mouseenter",function(a){l||f.addClass(n)}),f.on("mouseleave",function(a){l||f.removeClass(n)});var G=x.down("*[data-dimensionalcode-elem=close]");G.on("click",function(c){Q.event.get(c).preventDefault(),a.codeContentHide({inDom:i,outDom:g,classDom:f,frameDom:b,time:B,imgAnimClass:C})}),Q.$(document.body).on("click",function(a){var b=(a.target||a.srcElement).parentElement;b!=f[0]&&b!=i[0]&&k.fire({type:"clickother",data:a})}),k.on("clickother",function(c){l&&a.codeContentHide({inDom:i,outDom:g,classDom:f,frameDom:b,time:B})})}var H=x.down('*[data-dimensionalcode-elem="qt"]');if(H){var I=H.down("*[data-dimensionalcode-qt=show]");I.on("click",a.doMoveToQitan.bind(this)),H.on("mouseenter",function(a){H.addClass(n)}),H.on("mouseleave",function(a){H.removeClass(n)})}Q.$(window).on("resize",function(b){setTimeout(function(){a.resetPositon()},200)}),Q.$(window).on("scroll",function(b){setTimeout(function(){a.resetPositon()},200)}),Q.$(window).on("scroll",function(b){setTimeout(function(){a.doMoveToTop()},200)})},doMoveToTop:function(a){var b=this;a=a||{};var c=Q.$("#flashbox")||Q.$("#flashArea"),d=c.top()+50,e=Q.page.getScrollTop();d<e?(m.removeClass(o),w=1):(m.addClass(o),w=0)},doMoveToQitan:function(a){Q.event.get(a).preventDefault();var b=Q.$("#qitancommonarea"),c=b.top(),d=Q.page.getScrollTop();if(Q.browser.IE)window.scrollTo(0,c);else{var e=Q.anim.create(Q.$(document.body));e.onCompute=function(){window.scrollTo(0,this.info.scrollTo.animArray[this.counter]),this.counter++,this.counter==this.interval&&window.scrollTo(0,this.info.scrollTo.to)},e.duration(150).from("scrollTo",d).to("scrollTo",c).go()}k.fire({type:"clickother",data:a})},resetPositon:function(){y.show();var a=y.width(),b=y.left(),c=b+a+q,d=Q.page.getViewWidth(),e=Q.page.getViewHeight(),f=Q.page.getScrollTop(),g=x.height(),h=x.width(),i,j=1;if(Q.$("#flashbox")||Q.$("#flashArea")){var k=Q.$("#flashbox").top(),l=Q.$("#flashbox").height();d<a+h*2&&(j=0),e<l+k-f+g+p&&(j=0)}j?(i=e+f-g-p,Q.browser.IE?(x.css("position","absolute"),x.css("left",c+"px").css("top",i+"px")):(x.css("position","fixed"),x.css("left",c+"px").css("bottom",p+"px"))):y.hide()},doCodeImg:function(a){var b=a.doms,c=a.url,d=c+"?qr=page",e=g.getQrCoder({data:d});b.attr("src",e),v=0},codeContentShow:function(a){var b=this,c=a.inDom,d=a.outDom,e=a.classDom,g=a.frameDom,h=a.imgDom,i=a.url,j=a.time,k=a.imgAnimClass,m=Q.$("*[data-dimensionalcode-elem="+k+"]");if(Q.browser.IE&&m){var o=m.parent();if(o){var p=o.css("display");o.hide(),o.css("display",p),c.css("left",0)}}d.show(),v&&b.doCodeImg({doms:h,url:i});var q=parseInt(c.css("left"),10);Q.browser.IE||f({style:"left",elem:c,from:q,to:0,duration:j,done:function(){k&&m&&m.addClass(k)}}),e.addClass(n),l=1,u&&g.show()},codeContentHide:function(a){var b=a.inDom,c=a.outDom,d=a.classDom,e=a.frameDom,g=a.time,h=a.imgAnimClass,i=parseInt(b.css("left"),10);Q.browser.IE?b.css("left","279px"):f({style:"left",elem:b,from:i,to:"279",duration:g,done:function(){c.hide(),u&&e.hide();if(h){var a=b.down("*[data-dimensionalcode-elem="+h+"]");a&&a.hasClass(h)&&a.removeClass(h)}}}),d.removeClass(n),l=0}}),c.exports=z});
define("../../kit/qrCoder",[],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"kit/qrCoder"}),e="http://qrcode.qiyipic.com/qrcoder/?";c.exports={getQrCoder:function(a){var b=a.data,c=encodeURIComponent(b),d=a.md5||"35f4223bb8f6c8638dc91d94e9b16f5";a.property=a.property||0;var f=[{key:"!",value:"%21"}];for(var g=0,h=f.length;g<h;g++){var i=new RegExp(f[g].key,"g");c=c.replace(i,f[g].value)}var j=d+c,k=Q.crypto.md5(j),l=[];l.push("data="+c),l.push("&salt="+k);for(var m in a)m!="data"&&l.push(m+"="+a[m]);var n=e+l.join("&");return n}}});
define("../../units/videoInfo/moreOrLess",["../../components/action/checkDoms","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/checkDoms"),e=a("../../components/units/pageJob"),f;e.create("moreOrLess",{getDependentDoms:function(){return f={lessInfo:Q.$('[data-moreorless="lessinfo"]'),moreInfo:Q.$('[data-moreorless="moreinfo"]'),lessBtn:Q.$('[data-moreorless="lessbtn"]'),moreBtn:Q.$('[data-moreorless="morebtn"]')},f},check:function(a){return d(a),!0},init:function(){f.moreBtn.on("click",function(a){Q.event.stop(a),f.lessInfo.hide(),f.moreInfo.show()}),f.lessBtn.on("click",function(a){Q.event.stop(a),f.lessInfo.show(),f.moreInfo.hide()})}}),c.exports="moreOrLess"});
define("../../units/shareToWeiXin",["../components/units/pageJob","../components/action/floater","../components/action/checkDoms","../kit/qiyiPlayer","../kit/qrCoder"],function(a,b,c){var d=a("../components/units/pageJob"),e="shareToWeixin",f=a("../components/action/floater"),g=a("../components/action/checkDoms"),h=a("../kit/qiyiPlayer").getPlayer("video"),i=a("../kit/qrCoder");d.create(e,{getDependentDoms:function(){var a=Q.$("[data-widget-sharethirdparty=weixin]"),b="";return a&&a.length>0&&(b={widget:a,fly:a.down('[data-sharethirdparty-ele="fly"]'),anim:a.down('[data-sharethirdparty-ele="anim"]'),ie6TipPhone:a.down('[data-sharethirdparty-ele="ie6tipphone"]'),close:a.down('[data-sharethirdparty-ele="close"]'),qrImg:a.down('[data-sharethirdparty-ele="qrimage"]'),videoName:a.down('[data-sharethirdparty-ele="videoname"]')}),b},check:function(a){var b=!0;return g(a),b},init:function(){var a=this.getDependentDoms();this.doms=a,this.flyAnim=Q.anim(a.fly),this.tempVideoInfo={};var b=a.widget.attr("data-sharethirdparty-videoname"),c=a.widget.attr("data-sharethirdparty-url");this.saveVideoInfo({data:{tvName:b,vu:c||location.href}});var d=this;d.initEvent(a),Q.event.customEvent.on("share_trigger",function(a){if(a.data.type!=2)return!0;d.initFloat()})},initEvent:function(){var a=this,b=this.doms,c=b.anim,d=b.close;b.widget.down("a").on("click",function(a){Q.event.get(a).preventDefault()}),d.on("click",this.hideFloater.bind(this)),Q.browser.IE6?b.ie6TipPhone.show():(c.on("mouseenter",this.tipAnim.bind(this)),c.on("mouseleave",function(){a.flyAnim.stop(),a.doms.fly.hide()})),h.on("videoChanged",function(b){a.saveVideoInfo(b)})},saveVideoInfo:function(a){this.tempVideoInfo.video=a.data.vu||location.href,this.tempVideoInfo.name=a.data.tvName||document.title},initFloat:function(){this.floatShare=new f({overflow:"visible"}),this.floatShare.show({elem:this.doms.widget});var a=this.floatShare.getFloater();this.doms.videoName.html("《"+this.tempVideoInfo.name+"》"),a.css("overflow","visible"),this.reset(),this.loadQrCode()},reset:function(){this.doms.qrImg.attr("src","")},loadQrCode:function(){var a={data:this.tempVideoInfo.video,width:162},b=i.getQrCoder(a),c=this.doms.qrImg;c.attr("src",b)},tipAnim:function(){this.doms.fly.show(),this.flyAnim.stop(),this.flyAnim.duration(700).ease("Linear").from("bottom",70).from("left",200).to("left",0).to("bottom",0).onDone(function(){}).go()},hideFloater:function(){this.floatShare&&(this.floatShare.destroy(),this.floatShare=null)}}),c.exports=e});
define("../../units/randomWordsAd",["../components/units/pageJob","../components/action/checkDoms"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f="randomWordsAd";d.create(f,{getDependentDoms:function(){var a=Q.$("[data-widget-randomad]"),b=[];return a&&a.length>0&&a.forEach(function(a){b.push(a)}),b},check:function(){return e(this.getDependentDoms()),!0},init:function(){var a=this.getDependentDoms();a.forEach(function(a){var b=Q.$(a),c=b.attr("data-widget-randomad"),d=Q.$("*[data-randomad-"+c+"=from]");if(d){var e=d.attr("data-randomWordsAd-num"),f=parseInt(Math.random()*e,10),g=d.down("a");b.html(""),b.append(g[f])}})}}),c.exports=f});
define("../../units/baidudown",["../components/units/pageJob","../components/action/checkDoms","../kit/yingyinPluginV2","../components/action/floater","../components/view/floaterView","../action/tab","../interfaces/cache_avlistInterface","../kit/qiyiPlayer"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/yingyinPluginV2"),g=a("../components/action/floater"),h=a("../components/view/floaterView"),i=a("../action/tab"),j=a("../interfaces/cache_avlistInterface"),k=new j,l=a("../kit/qiyiPlayer"),m,n="baidudown";d.create(n,{getDependentDoms:function(){return m=Q.$("#widget-baidudown"),m},check:function(a){return e(a),!0},init:function(){},exec:function(){var a=Q.url.getQueryValue(location.href,"src"),b=0;if(a=="bdaldfrdwnld1"||a=="bdaldfrdwnld2")b=1;if(m&&b){var c={},d=0,e=0,j=f.check(),n=j?1:2,o="http://msg.video.qiyi.com/qisu_cli.gif",p=Q.cookie.get("QC005")||"",q=function(){var a=parseInt(new Date*1/1e3,10);return a},r,s={categoryid:m.attr("data-widget-baidudown-categoryid"),title:m.attr("data-widget-baidudown-title"),albumid:m.attr("data-widget-baidudown-albumid"),tvid:m.attr("data-widget-baidudown-tvid"),videoid:m.attr("data-widget-baidudown-videoid")},t="",u="",v="",w=Q.$("#flashbox");if(s.categoryid&&s.title){if(s.categoryid==1&&a=="bdaldfrdwnld1"){var x="";j?x=['<div id="baidudownBox" class="popNetdown popNetdownV2"><div class="netdownHd"><a href="" onfocus="this.blur();" class="x" data-floaterbtn="close"></a><div class="downingTabs"><p>即将启动爱奇艺视频</p><p>为您下载《<span class="popDisktxtC" id="textnum1">'+s.title+"</span>》</p>"+"</div>"+"</div>"+'<div class="downOk">'+'<a class="todown" href="" onfocus="this.blur();" '+'data-btn="y-enter-btn">确定</a>'+"</div>"+"</div>"].join(""):x=['<div id="baidudownBox" class="popDisk popDiskV2"><div class="diskHd diskHdV2"><a href="" onfocus="this.blur();" class="x" data-floaterbtn="close"></a></div><div class="diskBd diskBdV2"><h3 class="downDesc">快速安装爱奇艺视频，立即下载《<span class="popDisktxtC" id="textnum">'+s.title+""+"</span>》</h3>"+'<div class="downOk">'+'<a class="todown" href="http://static.qiyi.com/ext/common'+'/QIYImedia_baidu.exe" onfocus="this.blur();" '+'data-btn="y-enter-btn">确定</a>'+"</div>"+'<div class="add0220">点击确定下载爱奇艺视频，安装后将自动开始下载视频</div>'+"</div>"+"</div>"].join(""),t=x,c={method:"function",type:"baidualdshowdwdiv",extend1:1,extend2:2,extend3:n,macid:p,time:q()},Q.log.server(c,o),r=new g({view:new h({isResize:!0})}),r.show({html:t}),w.css("visibility","hidden")}var y;if(s.categoryid==2&&a=="bdaldfrdwnld2"){d=Q.$("#j-curr").value(),e=Q.$("#j-total").value();var z=parseInt(e/75,10);y=parseInt(d/75,10)+1;for(var A=0;A<z+1;A++){var B="";d>A*75&&d<(A+1)*75?B=' class="selected" ':B=" ";var C="_tabpage="+(A+1),D=A*75+1,E=A==z?e:(A+1)*75;u=u+'<span data-elem="tabtitle" '+B+C+">"+D+"-"+E+"</span>",A!=z&&(u+='<span class="sline">|</span>')}for(var F=0;F<z+1;F++){var G="";G='<div class="itemPagecont" data-elem="tabbody" style="display: none;"></div>',v+=G}var H="";j?H=['<div class="popDisk popDiskdsj popDiskdsj2"><div class="diskHd diskHd2"><a href="" onfocus="this.blur();" class="x" data-floaterbtn="close"></a><div class="hdTxt"><p class="p1">选择您要下载的《<span class="popDisktxtC">'+s.title+"</span>》剧集：</p>"+"</div>"+"</div>"+'<div class="diskAll">'+'<div class="diskquanji" id="data-baidudown-juji" '+'data-widget="tab">'+'<div id="j-pages" class="pageTagHd" style="display: none;">'+u+"</div>"+'<div id="j-pagesBody" class="pageTagBd">'+v+"</div>"+"</div>"+'<div class="diskquanjiBtn"><a href="javascript:void(0);" '+'class="qxBtn" data-sel="selectAll">全选</a><a '+'href="javascript:void(0);" data-sel="selectRev" '+'class="qxBtn">反选</a></div>'+"</div>"+'<div class="diskBd">'+'<div class="downOk">'+'<a class="todown" href="javascript:void(0);" '+'data-btn="y-enter-btn" onfocus="this.blur();">确定</a>'+"</div>"+"</div>"+"</div>"].join(""):H=['<div id="baidudownBox" class="popDisk popDiskdsj"><div class="diskHd"><a href="" onfocus="this.blur();" class="x" data-floaterbtn="close"></a><div class="hdTxt"><p class="p1">选择您要下载的《<span class="popDisktxtC">'+s.title+"</span>》剧集：</p>"+'<p class="p2">（需先安装爱奇艺视频）</p>'+"</div>"+"</div>"+'<div class="diskAll">'+'<div class="diskquanji" id="data-baidudown-juji" '+'data-widget="tab">'+'<div class="pageTagHd" style="display: none;">'+u+"</div>"+'<div class="pageTagBd">'+v+"</div>"+"</div>"+'<div class="diskquanjiBtn"><a href="javascript:void(0);" '+'class="qxBtn" data-sel="selectAll">全选</a><a '+'href="javascript:void(0);" data-sel="selectRev" '+'class="qxBtn">反选</a></div>'+"</div>"+'<div class="diskBd">'+'<div class="downOk">'+'<a class="todown" href="http://static.qiyi.com/ext/common/'+'QIYImedia_baidu.exe" data-btn="y-enter-btn" '+'onfocus="this.blur();">确定</a>'+"</div>"+'<div class="txtTip">点击确定将下载爱奇艺视频，安装后自动开'+"始下载视频</div>"+"</div>"+"</div>"].join(""),t=H,c={method:"function",type:"baidualdshowdwdiv",extend1:2,extend2:2,extend3:n,macid:p,time:q()},Q.log.server(c,o),r=new g({view:new h({isResize:!0})}),r.show({html:t}),w.css("visibility","hidden")}var I=Q.$("*[data-floaterbtn=close]");I.on("click",function(a){a=Q.event.get(a),a.stop(),r.hide(),w.css("visibility","visible")});var J=Q.$("#data-baidudown-juji"),K=Q.$("*[data-btn=y-enter-btn]");if(J){var L=Q.$("a[data-sel=selectAll]"),M=Q.$("a[data-sel=selectRev]"),N="selected",O=[];this.albumListLinkClickHandler=function(a){Q.event.get(a.event).preventDefault();var b=a.target;b.className==N?(b.className="",b.attributes["data-baidudown-sel"].value="0"):(b.className=N,b.attributes["data-baidudown-sel"].value="1")},J.delegate("album-list-link-click",this.albumListLinkClickHandler),L&&L.on("click",function(a){var b=Q.$("a[data-baidudown-sel=0]");b.forEach(function(a){a.className=N,a.attributes["data-baidudown-sel"].value="1"})}),M&&M.on("click",function(a){var b=Q.$("#data-baidudown-juji").down("a");b.forEach(function(a){var b=a.attributes["data-baidudown-sel"].value;b=="1"?(a.className="",a.attributes["data-baidudown-sel"].value="0"):(a.className=N,a.attributes["data-baidudown-sel"].value="1")})});var P=Q.$("[data-widget=tab]"),R=new i({doms:{widget:P,titles:P.down("[data-elem=tabtitle]"),bodies:P.down("[data-elem=tabbody]")}}),S=function(a){var b=a.data.title.attr("_tabpage"),c=a.data.body,e="";c.html()||k.getDataInfo({albumId:s.albumid,pageNo:b},function(a){if(a.code!=="A00000")return;var b=a.data,f=b.vlist.length,g=1,h="";while(g<=f){var i=b.vlist[g-1].vt,j=b.vlist[g-1].pd,k="第"+j+"集",l=b.vlist[g-1].id,m=b.vlist[g-1].vid,n="0",o="";j==d&&(n="1",o=N,k+="(正在播放)"),h=h+'<li><a class="'+o+'" data-baidudown-sel="'+n+'" data-baidudown-vid="'+m+'" data-baidudown-tvid="'+l+'" title="'+i+'" '+'data-delegate="album-list-link-click" href="#">'+k+"</a></li>";var p=g%4;p||(e=e+"<ul>"+h+"</ul>",h=""),g++}e=e+'<ul class="last">'+h+"</ul>",c.html(e)})};R.on("focuschange",S),R.select(y)}s.categoryid==1&&K.on("click",function(a){j?(c={method:"function",type:"baidualddowndwdiv",extend1:1,extend2:2,extend3:1,macid:p,time:q()},Q.event.get(a).preventDefault(),f.down({albumId:s.albumid,tvName:s.title,isCharge:"false",tvId:s.tvid,offline:"true",startTime:"",definite:"2"})):(c={method:"function",type:"baidualdclkdwdiv",extend1:1,extend2:2,macid:p,time:q()},T()),Q.log.server(c,o),r.hide(),w.css("visibility","visible")}),s.categoryid==2&&K.on("click",function(a){var b=Q.$("a[data-baidudown-sel=1]");if(j)c={method:"function",type:"baidualddowndwdiv",extend1:2,extend2:2,extend3:1,macid:p,time:q()},Q.event.get(a).preventDefault(),b.forEach(function(a){var b=Q.$(a).attr("data-baidudown-tvid");O.push(b)}),f.down({albumId:s.albumid,tvName:s.title,isCharge:"false",tvId:O.join(","),offline:"true",startTime:"",definite:"2"});else{c={method:"function",type:"baidualdclkdwdiv",extend1:2,extend2:2,macid:p,time:q()};var d=b.map(function(a){return a=Q.$(a),{tvid:a.attr("data-baidudown-tvid"),vid:a.attr("data-baidudown-vid"),albumid:s.albumid,member:"false"}});T(d)}Q.log.server(c,o),r.hide(),w.css("visibility","visible")});var T=function(a){var b=l.getPlayer("video");a?b.forceToSaveCurVideoInfo(a):b.forceToSaveCurVideoInfo()}}}}}),c.exports=n});
define("../../interfaces/cache_avlistInterface",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("CacheAvListInterFace",{construct:function(){this._remoteInterface=new d({cacheAvListData:{url:"http://cache.video.qiyi.com/avlist/",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{}}}}})},methods:{request:function(a,b){a=a||{},a.pageNo=a.pageNo||1,a.varname="videoListC",this._remoteInterface.send({ifname:"cacheAvListData",param:a,spliter:"1",memory:!0},function(c){b&&b(c,a)})}}})});
define("../../units/videoInfo/videoInfoActorRoleTable",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/view/videoInfoV2/videoInfoActorRoleTableView","../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoActorRoleTableView"),f=a("../../components/units/pageJob"),g=a("../../kit/qiyiPlayer"),h="videoInfoActorRoleTable",i,j,k,l=[],m;f.create(h,{check:function(){return j=!1,k=!1,!0},init:function(){var a=this;return m=function(b){a.lazyCheck()&&a.lazyInit(b),g.getPlayer("video").un("videoChanged",m)},!0},lazyCheck:function(){return k?j:(k=!0,j=!0,i=Q.$("#widget-videoactorroletable"),i?(i.forEach(function(a){a=Q.$(a),a&&l.push({widget:a,tmplNode:a.down("[data-videoactorroletable-elem='template']"),itemContainer:a.down("[data-videoactorroletable-elem='container']"),itemNumLimit:parseInt(a.attr("data-videoactorroletable-numlimit"),10)||8})}),l.length===0?j=!1:l.forEach(function(a){if(j&&!a.tmplNode)return j=!1,!1})):j=!1,j)},lazyInit:function(a){k&&j&&l.forEach(function(b){var c={wrapper:b.widget,tmpl:b.tmplNode[0].innerHTML,itemContainer:b.itemContainer||b.wrapper,itemNumLimit:b.itemNumLimit,actorsFieldName:"ma",rolesFieldName:"mainActorRoles",maxActorCharLen:8,maxRoleCharLen:8};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})},exec:function(){g.getPlayer("video").on("videoChanged",m)}}),c.exports=h});
define("../../components/action/videoInfoV2/videoInfoMultiItemAdapter",["./videoInfoSingleItemAdapter","../../view/videoInfoV2/videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoSingleItemAdapter"),e=a("../../view/videoInfoV2/videoInfoMultiItemView");c.exports=Q.Class("VideoInfoMultiItemAdapter",{extend:d,construct:function(a){a=a||{},a.view=a.view||new e(a),this.callsuper(a)}})});
define("../../components/action/videoInfoV2/videoInfoSingleItemAdapter",["../baseAdapter","../../../kit/qiyiPlayer","../../view/videoInfoV2/videoInfoSingleItemView","../../model/videoInfoTabModelV2"],function(a,b,c){var d=a("../baseAdapter"),e=a("../../../kit/qiyiPlayer"),f=a("../../view/videoInfoV2/videoInfoSingleItemView"),g=a("../../model/videoInfoTabModelV2"),h=new Q.ic.InfoCenter({moduleName:"VideoInfoSingleItemAdapter"});c.exports=Q.Class("VideoInfoSingleItemAdapter",{extend:d,construct:function(a){a=a||{},a.model=a.model||new g,a.view=a.view||new f(a),this.callsuper(a);var b=this;Q.event.customEvent.on("sourcelengthexceed",b.triggerTvPhHiddenEvent);try{e.getPlayer("video").on("videoChanged",function(a){b.videoChangeListener(a)}),Q.event.customEvent.on("testVideoChange",function(a){b.videoChangeListener(a)})}catch(c){Q.event.customEvent.on("videoChanged",function(a){b.videoChangeListener(a)})}},methods:{videoChangeListener:function(a){var b=a&&a.data.aid;if(b){var c={};c.albumid=b,h.log("video info"+JSON.stringify(a.data)),this._view.update(a.data)}},triggerTvPhHiddenEvent:function(a){Q.event.customEvent.fire({type:"hidetvph",data:a.data})}}})});
define("../../components/view/videoInfoV2/videoInfoSingleItemView",["./../view"],function(a,b,c){var d=a("./../view");c.exports=Q.Class("VideoInfoSingleItemView",{extend:d,construct:function(a){a=a||{},this.callsuper(a),this.wrapper=a.wrapper,this.label=a.label||this.wrapper,this.fieldName=a.fieldName},methods:{init:function(){},update:function(a){this.showShowOrNot(a)?(this.updateLabel(a),this.showWrapper()):(this.updateLabel({}),this.hideWrapper())},shouldShowOrNot:Q.fn.abstractMethod,updateLabel:Q.fn.abstractMethod,hideWrapper:function(){this.wrapper.css("display","none")},showWrapper:function(){this.wrapper.css("display","")}}})});
define("../../components/model/videoInfoTabModelV2",["./baseModel","../../interfaces/cacheVideo_aInterface"],function(a,b,c){var d=a("./baseModel"),e=a("../../interfaces/cacheVideo_aInterface"),f=new e,g={},h={};c.exports=Q.Class("VideoInfoTabModel",{extend:d,construct:function(a){a=a||{},this.callsuper(a)},methods:{init:function(){},get:function(a,b){a=a||{};var c=a.albumid;c&&g[c]?b(g[c]):h[c]?h[c].push(b):(h[c]=[b],f.request(a,function(a){if(c&&a){g[c]=a.data;var b=h[c];while(b&&b.length>0)try{b.shift()(a.data)}catch(d){console.log(d)}h[c]=null}}))}}})});
define("../../interfaces/cacheVideo_aInterface",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("CacheVideoAInterFace",{construct:function(){this._remoteInterface=new d({cacheVideoAData:{url:"http://cache.video.qiyi.com/a/",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{}}}}})},methods:{request:function(a,b){a=a||{},a.varname="AlbumInfo",this._remoteInterface.send({ifname:"cacheVideoAData",param:a,spliter:"0",memory:!0},function(c){b&&b(c,a)})}}})});
define("../../components/view/videoInfoV2/videoInfoMultiItemView",["./../view"],function(a,b,c){var d=a("./../view"),e=function(a){return(""+a).replace(/&(lt|gt);/g,function(a,b){switch(b){case"lt":return"<";case"gt":return">"}})};c.exports=Q.Class("VideoInfoMultiItemView",{extend:d,construct:function(a){a=a||{},this.callsuper(a),this.wrapper=a.wrapper,this.tmpl=e(a.tmpl),this.itemContainer=a.itemContainer||this.wrapper,this.itemNumLimit=a.itemNumLimit,this.loading=a.loading,this.tipsBox=a.tipsBox,this.fieldName=a.fieldName},methods:{init:function(){},beforeLoad:function(){this.tipsBox&&this.tipsBox.hide(),this.loading&&this.loading.show()},update:function(a){if(this.shouldShowOrNot(a)){var b=a._viewData=this.extractViewData(a),c=this.renderTemplate(this.tmpl,b);this.resetItemContainer(c),this.showWrapper();var d=this.itemContainer.css("data-private-display");d&&this.itemContainer.css("display",d),this.loading&&this.loading.hide(),this.tipsBox&&(b.data.length===0?this.tipsBox.show():this.tipsBox.hide())}else this.resetItemContainer(),this.loading&&this.loading.hide(),this.tipsBox&&this.tipsBox.show(),this.hideWrapper();this.updateFinish(a)},shouldShowOrNot:function(a){return this.fieldName?a&&a[this.fieldName]&&a[this.fieldName].length>0:!!a},extractViewData:function(a){var b={};b.data=[],b["if(index!==0)"]=function(){return this.index!==0&&this.index!=="0"},b["if(!data)"]=function(){return!this.data||this.data.length===0},b["if(data)"]=function(){return this.data&&this.data.length>0};for(var c=0,d=a[this.fieldName].length;c<d&&c<this.itemNumLimit;c++)b.data.push({index:c,item:this._processItemData(a[this.fieldName][c])});return b=this._furtherProcessViewData(b,a),b},_processItemData:function(a){return a},_furtherProcessViewData:function(a,b){return a},renderTemplate:function(a,b){return Q.plugins.Mustache.render(a,b)},resetItemContainer:function(a){this.itemContainer[0].innerHTML=a||""},hideWrapper:function(){this.wrapper.css("display","none")},showWrapper:function(){this.wrapper.css("display","")},updateFinish:function(){},decodeHTML:e}})});
define("../../components/view/videoInfoV2/videoInfoActorRoleTableView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView"),e="a",f="actorRoles";c.exports=Q.Class("VideoInfoActorRoleTableView",{extend:d,construct:function(a){a=a||{},a.itemNumLimit=a.itemNumLimit||8,this.callsuper(a),e=a.actorsFieldName,f=a.rolesFieldName,this.maxActorCharLen=a.maxActorCharLen||8,this.maxRoleCharLen=a.maxRoleCharLen||8},methods:{shouldShowOrNot:function(a){return a&&a[e]&&a[f]&&a[e].length>0&&a[f].length>0},extractViewData:function(a){var b={};b.data=[],b["if(index!==0)"]=function(){return this.index!==0&&this.index!=="0"};var c=a[e].split("|"),d=Math.min(c.length,a[f].length,this.itemNumLimit);for(var g=0;g<d;g++)b.data.push({index:g,actor:Q.string.truncate(c[g],this.maxActorCharLen),role:Q.string.truncate(a[f][g],this.maxRoleCharLen)});return b},hideWrapper:function(){},showWrapper:function(){}}})});
define("../../units/videoInfo/videoInfoActorRoleTableTabTitle",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoActorRoleTableTabTitleView","../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoActorRoleTableTabTitleView"),f=a("../../components/units/pageJob"),g=a("../../kit/qiyiPlayer"),h="videoInfoActorRoleTableTabTitle",i=!1,j=!1,k,l,m=[];f.create(h,{check:function(){return!0},init:function(){var a=this;k=function(b){j||a.lazyCheck()&&a.lazyInit(b),g.getPlayer("video").un("videoChanged",k)}},lazyCheck:function(){return j?i:(j=!0,l=Q.$("#widget-videoactorroletabletabtitle"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videoactorroletabletabtitle-elem='label']")})}),m.length===0?i=!1:i=!0,i)},lazyInit:function(a){j&&i&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.wrapper,fieldName:"positiveAlbumUrl",actorsFieldName:"a",rolesFieldName:"actorRoles"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})},exec:function(){g.getPlayer("video").on("videoChanged",k)}}),c.exports=h});
define("../../components/view/videoInfoV2/videoInfoActorRoleTableTabTitleView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoActorRoleTableTabTitleView",{extend:d,construct:function(a){this.callsuper(a),this.actorsFieldName=a.actorsFieldName||"a",this.rolesFieldName=a.rolesFieldName||"actorRoles"},methods:{showShowOrNot:function(a){return a&&a[this.actorsFieldName]&&a[this.actorsFieldName].length>0&&a[this.rolesFieldName]&&a[this.rolesFieldName].length>0},updateLabel:function(a){},hideWrapper:function(){var a=this.wrapper.parent("div").down(".c99");a&&a.css("display","none"),this.wrapper.css("display","none")},showWrapper:function(){var a=this.wrapper.parent("div").down(".c99");a&&a.css("display",""),this.wrapper.css("display","")}}})});
define("../../units/videoInfo/videoInfoActors",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/view/videoInfoV2/videoInfoActorView","../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoActorView"),f=a("../../components/units/pageJob"),g=a("../../kit/qiyiPlayer"),h="videoInfoActors",i,j,k,l;j=k=!1;var m=[];f.create(h,{check:function(){return!0},init:function(){var a=this;l=function(b){j||a.lazyCheck()&&a.lazyInit(b),g.getPlayer("video").un("videoChanged",l)}},lazyCheck:function(){return j?k:(j=k=!0,i=Q.$("#widget-videoactor"),i?(i.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,tmplNode:a.down("[data-videoactor-elem='template']"),itemContainer:a.down("[data-videoactor-elem='container']"),itemNumLimit:parseInt(a.attr("data-videoactor-numlimit"),10)||8})}),m.length===0?k=!1:m.forEach(function(a){if(!a.tmplNode)return k=!1,!1})):k=!1,k)},lazyInit:function(a){j&&k&&m.forEach(function(b){var c={wrapper:b.widget,tmpl:b.tmplNode[0].innerHTML,itemContainer:b.itemContainer||b.wrapper,itemNumLimit:b.itemNumLimit,fieldName:"a"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})},exec:function(){g.getPlayer("video").on("videoChanged",l)}}),c.exports=h});
define("../../components/view/videoInfoV2/videoInfoActorView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView");c.exports=Q.Class("VideoInfoActorView",{extend:d,construct:function(a){a=a||{},a.itemNumLimit=a.itemNumLimit||12,a.fieldName=a.fieldName||"a",this.callsuper(a)},methods:{extractViewData:function(a){var b={};b.data=[],b["if(index!==0)"]=function(){return this.index!==0&&this.index!=="0"},b["if(!data)"]=function(){return!this.data||this.data.length===0},b["if(data)"]=function(){return this.data&&this.data.length>0};var c=a[this.fieldName].split("|");for(var d=0,e=c.length;d<e&&d<this.itemNumLimit;d++)b.data.push({index:d,item:this._processItemData(c[d])});return b=this._furtherProcessViewData(b,a),b}}})});
define("../../units/videoInfo/videoInfoBreadcrumbCats",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/view/videoInfoV2/videoInfoCategoryKeyWordView","../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoCategoryKeyWordView"),f=a("../../components/units/pageJob"),g=a("../../kit/qiyiPlayer"),h="videoInfoBreadcrumbCats",i,j,k,l;j=k=!1;var m=[];f.create(h,{check:function(){return!0},init:function(){var a=this;l=function(b){j||a.lazyCheck()&&a.lazyInit(b),g.getPlayer("video").un("videoChanged",l)}},lazyCheck:function(){return j?k:(j=k=!0,i=Q.$("#widget-videocat"),i?(i.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,tmplNode:a.down("[data-videocat-elem='template']"),itemContainer:a.down("[data-videocat-elem='container']"),itemNumLimit:parseInt(a.attr("data-videocat-numlimit"),10)||3})}),m.length===0?k=!1:m.forEach(function(a){if(!a.tmplNode)return k=!1,!1})):k=!1,k)},lazyInit:function(a){j&&k&&m.forEach(function(b){var c={wrapper:b.widget,tmpl:b.tmplNode[0].innerHTML,itemContainer:b.itemContainer||b.wrapper,itemNumLimit:b.itemNumLimit,fieldName:"categoryKeywords",regionRE:/(港台|内地|韩国|欧美|日韩|华语|国内|美国|欧洲|日本|国外)/};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})},exec:function(){g.getPlayer("video").on("videoChanged",l)}}),c.exports=h});
define("../../components/view/videoInfoV2/videoInfoCategoryKeyWordView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView");c.exports=Q.Class("VideoInfoCategoryKeyWordView",{extend:d,construct:function(a){a=a||{},this.callsuper(a),this.regionRE=a.regionRE||/(港台|内地|韩国|欧美|日韩|华语|国内|美国|欧洲|日本|国外)/},methods:{shouldShowOrNot:function(a){return a&&a[this.fieldName]&&a[this.fieldName].indexOf(" ")!=-1},extractViewData:function(a){var b={},c=[],d=[];b.data=[],b["if(index!==0)"]=function(){return this.index!==0&&this.index!=="0"},c=a[this.fieldName].split(" ");var e,f,g=c.length;for(e=1;e<g;e++)f=c[e].split(","),f[0]!="其他"&&(this.regionRE.test(f[0])?d.unshift({text:f[0],link:f[f.length-1]}):d.push({text:f[0],link:f[f.length-1]}));for(e=0,g=Math.min(d.length,this.itemNumLimit);e<g;e++)b.data.push({index:e,text:d[e].text,link:d[e].link});return b},hideWrapper:function(){this.wrapper.css("display","none")},showWrapper:function(){this.wrapper.css("display","")}}})});
define("../../units/videoInfo/videoInfoCategoryKeyWords",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/view/videoInfoV2/videoInfoCategoryKeyWordView","../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoCategoryKeyWordView"),f=a("../../components/units/pageJob"),g=a("../../kit/qiyiPlayer"),h="videoInfoCategoryKeyWords",i,j,k,l;j=k=!1;var m=[];f.create(h,{check:function(){return!0},init:function(){var a=this;l=function(b){j||a.lazyCheck()&&a.lazyInit(b),g.getPlayer("video").un("videoChanged",l)}},exec:function(){g.getPlayer("video").on("videoChanged",l)},lazyCheck:function(){return j?k:(j=k=!0,i=Q.$("#widget-videocategorykeyword"),i&&i.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,tmplNode:a.down("[data-videocategorykeyword-elem='template']"),itemContainer:a.down("[data-videocategorykeyword-elem='container']"),itemNumLimit:parseInt(a.attr("data-videocategorykeyword-numlimit"),10)||6})}),m.length===0?k=!1:m.forEach(function(a){if(!a.tmplNode)return k=!1,!1}),k)},lazyInit:function(a){j&&k&&m.forEach(function(b){var c={wrapper:b.widget,tmpl:b.tmplNode[0].innerHTML,itemContainer:b.itemContainer||b.wrapper,itemNumLimit:b.itemNumLimit,fieldName:"categoryKeywords",regionRE:/(港台|内地|韩国|欧美|日韩|华语|国内|美国|欧洲|日本|国外)/};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=h});
define("../../units/videoInfo/videoInfoDirectors",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/view/videoInfoV2/videoInfoDirectorView","../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoDirectorView"),f=a("../../components/units/pageJob"),g=a("../../kit/qiyiPlayer"),h,i,j;h=i=!1;var k="videoInfoDirectors",l,m=[];f.create(k,{check:function(){return!0},init:function(){var a=this;j=function(b){h||a.lazyCheck()&&a.lazyInit(b),g.getPlayer("video").un("videoChanged",j)}},exec:function(){g.getPlayer("video").on("videoChanged",j)},lazyCheck:function(){return h?i:(h=i=!0,l=Q.$("#widget-videodirector"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,tmplNode:a.down("[data-videodirector-elem='template']"),itemContainer:a.down("[data-videodirector-elem='container']"),itemNumLimit:parseInt(a.attr("data-videodirector-numlimit"),10)||8})}),m.length===0?i=!1:m.forEach(function(a){if(!a.tmplNode)return i=!1,!1}),i)},lazyInit:function(a){h&&i&&m.forEach(function(b){var c={wrapper:b.widget,tmpl:b.tmplNode[0].innerHTML,itemContainer:b.itemContainer||b.wrapper,itemNumLimit:b.itemNumLimit,fieldName:"d"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoDirectorView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView");c.exports=Q.Class("VideoInfoDirectorView",{extend:d,construct:function(a){a=a||{},a.itemNumLimit=a.itemNumLimit||8,a.fieldName=a.fieldName||"d",this.callsuper(a)},methods:{extractViewData:function(a){var b={};b.data=[],b["if(index!==0)"]=function(){return this.index!==0&&this.index!=="0"},b["if(!data)"]=function(){return!this.data||this.data.length===0},b["if(data)"]=function(){return this.data&&this.data.length>0};var c=a[this.fieldName].split("|");for(var d=0,e=c.length;d<e&&d<this.itemNumLimit;d++)b.data.push({index:d,item:this._processItemData(c[d])});return b=this._furtherProcessViewData(b,a),b}}})});
define("../../units/videoInfo/videoInfoGaoqingtishiqu",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoGaoqingtishiquView","../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoGaoqingtishiquView"),f=a("../../components/units/pageJob"),g=a("../../kit/qiyiPlayer"),h,i,j;h=i=!1;var k="videoInfoGaoqingtishiqu",l,m=[];f.create(k,{check:function(){return!0},init:function(){var a=this;j=function(b){h||a.lazyCheck()&&a.lazyInit(b),g.getPlayer("video").un("videoChanged",j)}},exec:function(){g.getPlayer("video").on("videoChanged",j)},lazyCheck:function(){return h?i:(h=i=!0,l=Q.$("#widget-videogaoqingtishiqu"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videogaoqingtishiqu-elem='label']")})}),m.length===0&&(i=!1),i)},lazyInit:function(a){h&&i&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.wrapper,fieldName:"realAlbumUrl"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoGaoqingtishiquView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoGaoqingtishiquView",{extend:d,construct:function(a){a=a||{},this.callsuper(a)},methods:{showShowOrNot:function(a){return a&&a[this.fieldName]},updateLabel:function(a){a=a||"";var b=a[this.fieldName]||a;Object.prototype.toString.call(b)==="[object Object]"&&(b="javascript:void(0)"),this.label.attr("href",b)}}})});
define("../../units/videoInfo/videoInfoInnerTab",["../../components/units/pageJob","../../components/action/checkDoms"],function(a,b,c){var d=a("../../components/units/pageJob"),e=a("../../components/action/checkDoms"),f,g="videoInfoInnerTab";d.create(g,{getDependentDoms:function(){return f=Q.$("#widget-videoinfoinnertab")||Q.$("#widget-videoyuleinfo"),f},check:function(a){try{return e(a),!0}catch(b){return!1}},init:function(){f.attr("data-widget-videoinfoinnertab")&&f.down("[data-videoinfoinnertab-elem=tabtitle]").forEach(function(a){Q.$(a).on("click",function(b){var c=Q.$(a).attr("data-videoinfoinnertab-seq");f.down("[data-videoinfoinnertab-elem=tabtitle]").forEach(function(a){Q.$(a).attr("data-videoinfoinnertab-seq")===c?Q.$(a).addClass("selected"):Q.$(a).removeClass("selected")}),f.down("[data-videoinfoinnertab-elem=tabbody]").forEach(function(a){Q.$(a).attr("data-videoinfoinnertab-seq")===c?Q.$(a).css("display","block"):Q.$(a).css("display","none")})})})}}),c.exports=g});
define("../../units/videoInfo/videoInfoMActors",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/view/videoInfoV2/videoInfoMActorView","../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoMActorView"),f=a("../../components/units/pageJob"),g=a("../../kit/qiyiPlayer"),h="videoInfoMActors",i,j,k;i=j=!1;var l,m=[];f.create(h,{check:function(){return!0},init:function(){var a=this;k=function(b){i||a.lazyCheck()&&a.lazyInit(b),g.getPlayer("video").un("videoChanged",k)}},exec:function(){g.getPlayer("video").on("videoChanged",k)},lazyCheck:function(){return i?j:(i=j=!0,l=Q.$("#widget-videomactor"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,tmplNode:a.down("[data-videomactor-elem='template']"),itemContainer:a.down("[data-videomactor-elem='container']"),itemNumLimit:parseInt(a.attr("data-videomactor-numlimit"),10)||3})}),m.length===0?j=!1:m.forEach(function(a){if(!a.tmplNode)return j=!1,!1}),j)},lazyInit:function(a){i&&j&&m.forEach(function(b){var c={wrapper:b.widget,tmpl:b.tmplNode[0].innerHTML,itemContainer:b.itemContainer||b.widget,itemNumLimit:b.itemNumLimit,fieldName:"mactors"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=h});
define("../../components/view/videoInfoV2/videoInfoMActorView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView");c.exports=Q.Class("VideoInfoMActorView",{extend:d,construct:function(a){this.callsuper(a)},methods:{_processItemData:function(a){return a&&a.name}}})});
define("../../units/videoInfo/videoInfoMainActors",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/view/videoInfoV2/videoInfoMainActorView","../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoMainActorView"),f=a("../../components/units/pageJob"),g=a("../../kit/qiyiPlayer"),h,i,j;h=i=!1;var k="videoInfoMainActors",l,m=[];f.create(k,{check:function(){return!0},init:function(){var a=this;j=function(b){h||a.lazyCheck()&&a.lazyInit(b),g.getPlayer("video").un("videoChanged",j)}},exec:function(){g.getPlayer("video").on("videoChanged",j)},lazyCheck:function(){return h?i:(h=i=!0,l=Q.$("#widget-videomainactor"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,tmplNode:a.down("[data-videomainactor-elem='template']"),itemContainer:a.down("[data-videomainactor-elem='container']"),itemNumLimit:parseInt(a.attr("data-videomainactor-numlimit"),10)||8})}),m.length===0?i=!1:m.forEach(function(a){if(!a.tmplNode)return i=!1,!1}),i)},lazyInit:function(a){h&&i&&m.forEach(function(b){var c={wrapper:b.widget,tmpl:b.tmplNode[0].innerHTML,itemContainer:b.itemContainer||b.widget,itemNumLimit:b.itemNumLimit,fieldName:"ma"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoMainActorView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView");c.exports=Q.Class("VideoInfoMainActorView",{extend:d,construct:function(a){a=a||{},a.itemNumLimit=a.itemNumLimit||8,a.fieldName=a.fieldName||"ma",this.callsuper(a)},methods:{extractViewData:function(a){var b={};b.data=[],b["if(index!==0)"]=function(){return this.index!==0&&this.index!=="0"},b["if(!data)"]=function(){return!this.data||this.data.length===0},b["if(data)"]=function(){return this.data&&this.data.length>0};var c=a[this.fieldName].split("|");for(var d=0,e=c.length;d<e&&d<this.itemNumLimit;d++)b.data.push({index:d,item:this._processItemData(c[d])});return b=this._furtherProcessViewData(b,a),b}}})});
define("../../units/videoInfo/videoInfoMoreTags",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/view/videoInfoV2/videoInfoMoreTagView","../../components/units/pageJob"],function(a,b,c){function j(a,b,c,d){a.on("click",function(){c.css("display",""),d.hide(),Q.event.customEvent.fire({type:"moreTagClicked"})}),b.on("click",function(){c.hide(),d.css("display","")}),Q.event.customEvent.on("starTagClicked",function(){c.hide(),d.css("display","")}),Q.event.customEvent.on("expandMoreTag",function(){c.css("display",""),d.hide()})}var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoMoreTagView"),f=a("../../components/units/pageJob"),g="videoInfoMoreTags",h,i=[];f.create(g,{getDependentDoms:function(){return h=Q.$("#widget-videomoretag"),h&&h.forEach(function(a){a=Q.$(a),a&&i.push({widget:a,tmplNode:a.down("[data-videomoretag-elem='template']"),itemContainer:a.down("[data-videomoretag-elem='container']"),itemNumLimit:parseInt(a.attr("data-videomoretag-numlimit"),10)||8,moreTagLink:a.down("[data-videomoretag-elem='moretaglink']"),lessTagLink:a.down("[data-videomoretag-elem='lesstaglink']"),moreTagWrapper:a.down("[data-videomoretag-elem='moretagwrapper']"),lessTagWrapper:a.down("[data-videomoretag-elem='lesstagwrapper']")})}),i},check:function(a){var b=!0;return a.length===0?!1:(a.forEach(function(a){if(!a.tmplNode)return b=!1,!1}),b)},init:function(){this.check(i)&&i.forEach(function(a){var b=a.moreTagLink,c=a.lessTagLink,f=a.moreTagWrapper,g=a.lessTagWrapper;j(b,c,f,g);var h={wrapper:a.widget,tmpl:a.tmplNode[0].innerHTML,itemContainer:a.itemContainer||a.widget,itemNumLimit:a.itemNumLimit,moreTagLink:b,lessTagLink:c,moreTagWrapper:f,lessTagWrapper:g,fieldName:"tags"};h.view=new e(h),new d(h)})},exec:function(){}}),c.exports=g});
define("../../components/view/videoInfoV2/videoInfoMoreTagView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView");c.exports=Q.Class("VideoInfoMoreTagView",{extend:d,construct:function(a){a=a||{},a.wrapper=a.wrapper||"[data-widget-videomoretag]",a.tmplNode=a.tmplNode||"[data-videomoretag-elem='template']",a.itemContainer=a.itemContainer||"[data-videomoretag-elem='container']",a.itemNumLimit=a.itemNumLimit||8,a.fieldName=a.fieldName||"tags",this.callsuper(a),a.moreTagLink=a.moreTagLink||"[data-videomoretag-elem='moretaglink']",a.lessTagLink=a.lessTagLink||"[data-videomoretag-elem='lesstaglink']",a.moreTagWrapper=a.moreTagWrapper||"[data-videomoretag-elem='moretagwrapper']",a.lessTagWrapper=a.lessTagWrapper||"[data-videomoretag-elem='lesstagwrapper']";var b=Q.$(a.moreTagLink),c=Q.$(a.lessTagLink),d=Q.$(a.moreTagWrapper),e=Q.$(a.lessTagWrapper);b.on("click",function(){d.css("display",""),e.hide()}),c.on("click",function(){d.hide(),e.css("display","")}),Q.event.customEvent.on("starTagClicked",function(){d.hide(),e.css("display","")})},methods:{extractViewData:function(a){var b={};b.data=[],b["if(index!==0)"]=function(){return this.index!==0&&this.index!=="0"},b["if(!data)"]=function(){return!this.data||this.data.length===0},b["if(data)"]=function(){return this.data&&this.data.length>0};var c=a[this.fieldName];for(var d=0,e=c.length;d<e&&d<this.itemNumLimit;d++)b.data.push({index:d,item:this._processItemData(c[d])});return b=this._furtherProcessViewData(b,a),b},hideWrapper:function(){this.wrapper.css("display","none")},showWrapper:function(){this.wrapper.css("display","")}}})});
define("../../units/videoInfo/videoInfoPositiveAlbumUrl",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoPositiveAlbumUrlView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoPositiveAlbumUrlView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoPositiveAlbumUrl",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videopositivealbumurl"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videopositivealbumurl-elem='label']")})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,fieldName:"positiveAlbumUrl"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoPositiveAlbumUrlView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoPositiveAlbumUrlView",{extend:d,construct:function(a){this.callsuper(a)},methods:{showShowOrNot:function(a){return a&&(a[this.fieldName]||Object.prototype.toString.call(a)=="[object String]")},updateLabel:function(a){var b="";a&&a[this.fieldName]&&a[this.fieldName]!="0"&&(b=a[this.fieldName]),this.label.attr("href",b)}}})});
define("../../units/videoInfo/videoInfoPresentors",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/units/pageJob"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j="videoInfoPresentors",k,l=[];e.create(j,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,k=Q.$("#widget-videopresentor"),k&&k.forEach(function(a){a=Q.$(a),a&&l.push({widget:a,tmplNode:a.down("[data-videopresentor-elem='template']"),itemContainer:a.down("[data-videopresentor-elem='container']"),itemNumLimit:parseInt(a.attr("data-videopresentor-numlimit"),10)||8})}),l.length===0?h=!1:l.forEach(function(a){if(!a.tmplNode)return h=!1,!1}),h)},lazyInit:function(a){g&&h&&l.forEach(function(b){var c=new d({wrapper:b.widget,tmpl:b.tmplNode[0].innerHTML,itemContainer:b.itemContainer||b.widget,itemNumLimit:b.itemNumLimit,fieldName:"presentor"});c.videoChangeListener(a)})}}),c.exports=j});
define("../../units/videoInfo/videoInfoProducers",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/units/pageJob"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j="videoInfoProducers",k,l=[];e.create(j,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,k=Q.$("#widget-videoproducer"),k&&k.forEach(function(a){a=Q.$(a),a&&l.push({widget:a,tmplNode:a.down("[data-videoproducer-elem='template']"),itemContainer:a.down("[data-videoproducer-elem='container']"),fieldName:a.attr("data-videoproducer-fieldname"),itemNumLimit:parseInt(a.attr("data-videoproducer-numlimit"),10)||8})}),l.length===0?h=!1:l.forEach(function(a){if(!a.tmplNode)return h=!1,!1}),h)},lazyInit:function(a){g&&h&&l.forEach(function(b){var c=new d({wrapper:b.widget,tmpl:b.tmplNode[0].innerHTML,itemContainer:b.itemContainer||b.widget,itemNumLimit:b.itemNumLimit,fieldName:b.fieldName||"producer"});c.videoChangeListener(a)})}}),c.exports=j});
define("../../units/videoInfo/videoInfoPubTime",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoPubTimeView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoPubTimeView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoPubTime",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videopubtime"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videopubtime-elem='label']"),dateJingdu:a.attr("data-videopubtime-jindu")||""})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,dateJingdu:b.dateJingdu,fieldName:"pubTime"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoPubTimeView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoPubTimeView",{extend:d,construct:function(a){this.callsuper(a)},methods:{showShowOrNot:function(a){return a&&(a[this.fieldName]||Object.prototype.toString.call(a)=="[object Number]"||Object.prototype.toString.call(a)=="[object String]")},updateLabel:function(a){var b=a&&(a[this.fieldName]||a);Object.prototype.toString.call(b)=="[object String]"&&(b=parseInt(b,10)),b=new Date(b);var c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=c+"."+(d<10?"0":"")+d;this.dateJingdu!="month"&&(i=i+"."+(e<10?"0":"")+e+" "+(f<10?"0":"")+f+":"+(g<10?"0":"")+g+":"+(h<10?"0":"")+h),this.label.html(i)}}})});
define("../../units/videoInfo/videoInfoQuqitankangengduo",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoQuqitankangengduoView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoQuqitankangengduoView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoQuqitankangengduo",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videoquqitankangengduo"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videoquqitankangengduo-elem='label']")})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,fieldName:"qtId"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoQuqitankangengduoView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoQuqitankangengduoView",{extend:d,construct:function(a){this.callsuper(a)},methods:{showShowOrNot:function(a){return a&&(a[this.fieldName]||Object.prototype.toString.call(a)=="[object Number]")},updateLabel:function(a){a=a||0;var b=a[this.fieldName]||a;b&&Object.prototype.toString.call(b)=="[object Number]"?this.label.attr("href","http://t.iqiyi.com/m/"+b):this.label.attr("href","javascript:void(0);")}}})});
define("../../units/videoInfo/videoInfoShangying",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoShangyingView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoShangyingView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoShangying",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videoshangying"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videoshangying-elem='label']"),yearLevel:parseInt(a.attr("data-videoshangying-yearlevel"),10)||1})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,yearLevel:b.yearLevel,fieldName:"cnPremTime"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoShangyingView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoShangyingView",{extend:d,construct:function(a){this.callsuper(a),this.yearLevel=a.yearLevel},methods:{showShowOrNot:function(a){return a&&a[this.fieldName]&&a[this.fieldName]!="0"},updateLabel:function(a){a=a||0;var b=a[this.fieldName]||a;if(Object.prototype.toString.call(b)==="[object Object]")b=0,this.label.html(b+"年");else if(this.yearLevel==1)b=(""+b).slice(0,4),this.label.html(b+"年");else if(this.yearLevel==3){b+="";var c=b.slice(0,4),d=b.slice(4,6),e=b.slice(6);b=c+"年"+d+"月"+e+"日",this.label.html(b)}}}})});
define("../../units/videoInfo/videoInfoSource",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoSourceView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoSourceView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoSource",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videosource"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videosource-elem='label']"),lengthLimit:parseInt(a.attr("data-videosource-lengthlimit"),10)||12})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,lengthLimit:b.lengthLimit,fieldName:"s"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoSourceView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoSourceView",{extend:d,construct:function(a){this.callsuper(a),this.lengthLimit=a.lengthLimit||12},methods:{showShowOrNot:function(a){return a&&(a[this.fieldName]||Object.prototype.toString.call(a)==="[object String]")},updateLabel:function(a){a=a||"";var b=a[this.fieldName]||a;Object.prototype.toString.call(b)==="[object Object]"&&(b=""),this.label.html(b),b.length>this.lengthLimit&&Q.event.customEvent.fire({type:"sourcelengthexceed",data:{source:b}})}}})});
define("../../units/videoInfo/videoInfoStarYingshiju",["../../components/action/videoInfoV2/videoInfoStarYingshijuAdapter","../../components/view/videoInfoV2/videoInfoYingshijuView","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoStarYingshijuAdapter"),e=a("../../components/view/videoInfoV2/videoInfoYingshijuView"),f=a("../../components/units/pageJob"),g="videoInfoStarYingshiju",h,i=[];f.create(g,{getDependentDoms:function(){return h=Q.$("#widget-videoyingshiju"),h&&h.forEach(function(a){a=Q.$(a),a&&i.push({widget:a,tmplNode:a.down("[data-videoyingshiju-elem='template']"),itemContainer:a.down("[data-videoyingshiju-elem='container']"),itemNumLimit:parseInt(a.attr("data-videoyingshiju-numlimit"),10)||8})}),i},check:function(a){var b=!0;return a.length===0?!1:(a.forEach(function(a){if(!a.tmplNode)return b=!1,!1}),b)},init:function(){this.check(i)&&i.forEach(function(a){var b={wrapper:a.widget,tmpl:a.tmplNode[0].innerHTML,itemContainer:a.itemContainer||a.widget,itemNumLimit:a.itemNumLimit,fieldName:"list"};b.view=new e(b),new d(b)})},exec:function(){}}),c.exports=g});
define("../../components/action/videoInfoV2/videoInfoStarYingshijuAdapter",["./../adapter","../../../interfaces/commonSearchURLUtil","../../view/videoInfoV2/videoInfoYingshijuView"],function(a,b,c){var d=a("./../adapter"),e=a("../../../interfaces/commonSearchURLUtil"),f=a("../../view/videoInfoV2/videoInfoYingshijuView");c.exports=Q.Class("VideoInfoStarYingshijuAdapter",{extend:d,construct:function(a){a=a||{},a.view=a.view||new f(a),this.callsuper(a)},methods:{update:function(a,b){a=a||{},b=b||function(){},a.category=a.category||"电影,电视剧";var c=this;e.sendRequest(a,function(a,d){c._view.update(d),b()})}}})});
define("../../interfaces/commonSearchURLUtil",[],function(a,b,c){var d={options:{url:"http://search.video.qiyi.com/commonSearch/",paramKeys:"keyWord cur sortKey category threeCategory copyright limit domain from isPurchase cb".split(" "),defaultParams:{keyWord:"",cur:1,sortKey:"2",limit:6,domain:"www",from:"sales"}},config:function(a){Q.object.extend(this.options,a||{})},comboRequestURL:function(a){var b=this.comboParam(a);return this.options.url+b},comboParam:function(a){a=a||{};var b=[],c,d;for(var e=0,f=this.options.paramKeys.length;e<f;e++)c=this.options.paramKeys[e],d=a[c]||this.options.defaultParams[c]||"",b.push(this.encodeParamValue(d));return b.join("/").concat("/")},encodeParamValue:function(a){return encodeURIComponent(a||"").replace(/%/g,"_")},sendRequest:function(a,b){var c=this.comboRequestURL(a);Q.http.json(c,{data:{cb:a.cb||"cb"},onsuccess:b})}};c.exports=d});
define("../../components/view/videoInfoV2/videoInfoYingshijuView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView");c.exports=Q.Class("VideoInfoYingshijuView",{extend:d,construct:function(a){a=a||{},this.callsuper(a),this.mainActorSeparator=a.mainActorSeparator||";",this.mainActorNumLimit=a.mainActorNumLimit||2,this.more=a.more,this.moreDianyingTmpl=this.more&&this.more.attr("data-videoyingshiju-moredianyingtmpl"),this.moreDianshijuTmpl=this.more&&this.more.attr("data-videoyingshiju-moredianshijutmpl")},methods:{shouldShowOrNot:function(a){return!0},_furtherProcessViewData:function(a,b){var c=b&&b.analyzed;return c=c&&c.slice(1,-1),a.star=c,a},_processItemData:function(a){var b=a["version_id"]=="1";return{isSD:b?[b]:b,title:a["VrsVideoTv.tvName"],text:Q.string.truncate(a["VrsVideoTv.tvName"],b?38:40),link:a["TvApplication.purl"],mainActor:a["VrsCredits.CreditsName"].split(this.mainActorSeparator).slice(0,this.mainActorNumLimit)}},hideWrapper:function(){},showWrapper:function(){},updateFinish:function(a){if(a&&a._viewData&&a._viewData.data&&a._viewData.data.length>0){if(this.more){this.more.show();var b=this.moreDianyingTmpl.replace("{{star}}",a._viewData.star),c=this.moreDianshijuTmpl.replace("{{star}}",a._viewData.star);this.more.down("[data-videoyingshiju-elem=moredianying]").attr("href",b),this.more.down("[data-videoyingshiju-elem=moredianshiju]").attr("href",c)}}else this.more&&this.more.hide()}}})});
define("../../units/videoInfo/videoInfoStarYulezixun",["../../components/action/videoInfoV2/videoInfoStarYulezixunAdapter","../../components/view/videoInfoV2/videoInfoYulezixunView","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoStarYulezixunAdapter"),e=a("../../components/view/videoInfoV2/videoInfoYulezixunView"),f=a("../../components/units/pageJob"),g="videoInfoYulezixun",h,i=[];f.create(g,{getDependentDoms:function(){return h=Q.$("#widget-videoyulezixun"),h&&h.forEach(function(a){a=Q.$(a),a&&i.push({widget:a,tmplNode:a.down("[data-videoyulezixun-elem='template']"),itemContainer:a.down("[data-videoyulezixun-elem='container']"),itemNumLimit:parseInt(a.attr("data-videoyulezixun-numlimit"),10)||6})}),i},check:function(a){var b=!0;return a.length===0?!1:(a.forEach(function(a){if(!a.tmplNode)return b=!1,!1}),b)},init:function(){this.check(i)&&i.forEach(function(a){var b={wrapper:a.widget,tmpl:a.tmplNode[0].innerHTML,itemContainer:a.itemContainer||a.widget,itemNumLimit:a.itemNumLimit,fieldName:"list"};b.view=new e(b),new d(b)})},exec:function(){}}),c.exports=g});
define("../../components/action/videoInfoV2/videoInfoStarYulezixunAdapter",["./../adapter","../../../interfaces/commonSearchURLUtil","../../view/videoInfoV2/videoInfoYulezixunView"],function(a,b,c){var d=a("./../adapter"),e=a("../../../interfaces/commonSearchURLUtil"),f=a("../../view/videoInfoV2/videoInfoYulezixunView");c.exports=Q.Class("VideoInfoStarYulezixunAdapter",{extend:d,construct:function(a){a=a||{},a.view=a.view||new f(a),this.callsuper(a)},methods:{update:function(a,b){a=a||{},b=b||function(){},a.category=a.category||"娱乐";var c=this;e.sendRequest(a,function(a,d){c._view.update(d),b()})}}})});
define("../../components/view/videoInfoV2/videoInfoYulezixunView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView");c.exports=Q.Class("VideoInfoYulezixunView",{extend:d,construct:function(a){this.callsuper(a),this.more=a.more,this.moreTmpl=this.more&&this.more.attr("data-videoyulezixun-moretmpl")},methods:{shouldShowOrNot:function(a){return!0},_furtherProcessViewData:function(a,b){var c=b&&b.analyzed;return c=c&&c.slice(1,-1),a.star=c,a},_processItemData:function(a){a=a||{};var b=a["version_id"]=="1";return{isSD:b?[b]:b,title:a["VrsVideoTv.tvName"],text:Q.string.truncate(a["VrsVideoTv.tvName"],b?38:40),link:a["TvApplication.purl"]}},hideWrapper:function(){},showWrapper:function(){},updateFinish:function(a){if(a&&a._viewData&&a._viewData.data&&a._viewData.data.length>0){if(this.more){this.more.show();var b=this.moreTmpl.replace("{{star}}",a._viewData.star);this.more.down("a").attr("href",b)}}else this.more&&this.more.hide()}}})});
define("../../units/videoInfo/videoInfoStarZongyi",["../../components/action/videoInfoV2/videoInfoStarZongyiAdapter","../../components/view/videoInfoV2/videoInfoZongyineirongView","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoStarZongyiAdapter"),e=a("../../components/view/videoInfoV2/videoInfoZongyineirongView"),f=a("../../components/units/pageJob"),g="videoInfoStarZongyi",h,i=[];f.create(g,{getDependentDoms:function(){return h=Q.$("#widget-videozongyineirong"),h&&h.forEach(function(a){a=Q.$(a),a&&i.push({widget:a,tmplNode:a.down("[data-videozongyineirong-elem='template']"),itemContainer:a.down("[data-videozongyineirong-elem='container']"),itemNumLimit:parseInt(a.attr("data-videozongyineirong-numlimit"),10)||6})}),i},check:function(a){var b=!0;return a.length===0?!1:(a.forEach(function(a){if(!a.tmplNode)return b=!1,!1}),b)},init:function(){this.check(i)&&i.forEach(function(a){var b={wrapper:a.widget,tmpl:a.tmplNode[0].innerHTML,itemContainer:a.itemContainer||a.widget,itemNumLimit:a.itemNumLimit,fieldName:"list"};b.view=new e(b),new d(b)})},exec:function(){}}),c.exports=g});
define("../../components/action/videoInfoV2/videoInfoStarZongyiAdapter",["./../adapter","../../../interfaces/commonSearchURLUtil","../../view/videoInfoV2/videoInfoZongyineirongView"],function(a,b,c){var d=a("./../adapter"),e=a("../../../interfaces/commonSearchURLUtil"),f=a("../../view/videoInfoV2/videoInfoZongyineirongView");c.exports=Q.Class("VideoInfoStarZongyiAdapter",{extend:d,construct:function(a){a=a||{},a.view=a.view||new f(a),this.callsuper(a)},methods:{update:function(a,b){a=a||{},b=b||function(){},a.category=a.category||"综艺";var c=this;e.sendRequest(a,function(a,d){c._view.update(d),b()})}}})});
define("../../components/view/videoInfoV2/videoInfoZongyineirongView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView");c.exports=Q.Class("VideoInfoZongyineirongView",{extend:d,construct:function(a){a=a||{},this.callsuper(a),this.tvYearField=a.tvYearField||"VrsVideotv.tvYear",this.issueTimeField=a.issueTimeField||"cnPremTime",this.more=a.more,this.moreTmpl=this.more&&this.more.attr("data-videozongyineirong-moretmpl")},methods:{shouldShowOrNot:function(a){return!0},_furtherProcessViewData:function(a,b){var c=b&&b.analyzed;return c=c&&c.slice(1,-1),a.star=c,a},_processItemData:function(a){var b=a["version_id"]=="1";return{title:a["VrsFieldValue.fieldValue"],text:Q.string.truncate(a["VrsFieldValue.fieldValue"],b?38:40),link:a["TvApplication.purl"],tvPh:this.formatTvPh(a[this.tvYearField]||a[this.issueTimeField]),isSD:b?[b]:b}},hideWrapper:function(){},showWrapper:function(){},formatTvPh:function(a){if(a&&/^[0-9]{6}$/.test(a)){var b=a.slice(0,4),c=a.slice(4,2),d=a.slice(6);return"第"+b+"-"+c+"-"+d+"期"}if(a)return"第"+a+"期"},updateFinish:function(a){if(a&&a._viewData&&a._viewData.data&&a._viewData.data.length>0){if(this.more){this.more.show();var b=this.moreTmpl.replace("{{star}}",a._viewData.star);this.more.down("a").attr("href",b)}}else this.more&&this.more.hide()}}})});
define("../../units/videoInfo/videoInfoTags",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/view/videoInfoV2/videoInfoTagView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoTagView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoTags",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videotag"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,tmplNode:a.down("[data-videotag-elem='template']"),itemContainer:a.down("[data-videotag-elem='container']"),itemNumLimit:parseInt(a.attr("data-videotag-numlimit"),10)||8})}),m.length===0&&(h=!1),m.forEach(function(a){if(!a.tmplNode)return h=!1,!1}),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,tmpl:b.tmplNode[0].innerHTML,itemContainer:b.itemContainer||b.widget,itemNumLimit:b.itemNumLimit,fieldName:"tg"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoTagView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView");c.exports=Q.Class("VideoInfoTagView",{extend:d,construct:function(a){a=a||{},a.itemNumLimit=a.itemNumLimit||8,a.fieldName=a.fieldName||"tg",this.callsuper(a)},methods:{extractViewData:function(a){var b={};b.data=[],b["if(index!==0)"]=function(){return this.index!==0&&this.index!=="0"},b["if(!data)"]=function(){return!this.data||this.data.length===0},b["if(data)"]=function(){return this.data&&this.data.length>0};var c=a[this.fieldName].split(" ");for(var d=0,e=c.length;d<e&&d<this.itemNumLimit;d++)b.data.push({index:d,item:this._processItemData(c[d])});return b=this._furtherProcessViewData(b,a),b}}})});
define("../../units/videoInfo/videoInfoTvDesc",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoTvDescView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoTvDescView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoTvDesc",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videotvdesc"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videotvdesc-elem='label']"),noSelfControl:a.attr("data-videotvdesc-noselfcontrol")||!1})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,noSelfControl:b.noSelfControl,fieldName:"info"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoTvDescView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoTvDescView",{extend:d,construct:function(a){this.callsuper(a),this.noSelfControl=a.noSelfControl||!1},methods:{showShowOrNot:function(a){return a&&(a[this.fieldName]||Object.prototype.toString.call(a)==="[object String]")},updateLabel:function(a){a=a||"";var b=a[this.fieldName]||a;Object.prototype.toString.call(b)==="[object Object]"&&(b=""),this.label.html(b)},hideWrapper:function(){this.noSelfControl||this.wrapper.css("display","none")},showWrapper:function(){this.noSelfControl||this.wrapper.css("display","")}}})});
define("../../units/videoInfo/videoInfoTvDescTabTitle",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoTvDescTabTitleView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoTvDescTabTitleView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoTvDescTabTitle",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videotvdesctabtitle"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videotvdesctabtitle-elem='label']")})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,fieldName:"vn"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoTvDescTabTitleView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoTvDescTabTitleView",{extend:d,construct:function(a){a=a||{},this.callsuper(a)},methods:{showShowOrNot:function(a){return a&&(a[this.fieldName]||Object.prototype.toString.call(a)==="[object String]")},updateLabel:function(a){a=a||"";var b=a[this.fieldName]||a;Object.prototype.toString.call(b)==="[object Object]"&&(b=""),this.label.html(b+"简介")}}})});
define("../../units/videoInfo/videoInfoTvFocus",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoTvFocusView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoTvFocusView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoTvFocus",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videotvfocus"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videotvfocus-elem='label']")})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,fieldName:"tvFocuse"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoTvFocusView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView"),e="tvFocuse";c.exports=Q.Class("VideoInfoTvFocusView",{extend:d,construct:function(a){this.callsuper(a),e=a.fieldName},methods:{showShowOrNot:function(a){return a&&a[e]&&a[e].length>0},updateLabel:function(a){a=a||"";var b=a[e]||"",c=a.qitanId?"http://t.iqiyi.com/m/"+a.qitanId:"javascript:void(0)",d=b.text||b,f=b.title||d;this.label.attr("href",c).attr("title",f).html(d)}}})});
define("../../units/videoInfo/videoInfoTvName",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoTvNameView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoTvNameView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoTvName",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videotvname"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videotvname-elem='label']")})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,fieldName:"vn"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoTvNameView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoTvNameView",{extend:d,construct:function(a){this.callsuper(a)},methods:{showShowOrNot:function(a){return a&&(a[this.fieldName]||Object.prototype.toString.call(a)==="[object String]")},updateLabel:function(a){a=a||"";var b=a[this.fieldName]||a;Object.prototype.toString.call(b)==="[object Object]"&&(b=""),this.label.html(b),b&&Q.event.customEvent.fire({type:"albumnamechange",data:{albumName:b}})}}})});
define("../../units/videoInfo/videoInfoTvPh",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoTvPhView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoTvPhView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoTvPh",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videotvph"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videotvph-elem='label']"),fieldName:a.attr("data-videotvph-fieldName"),secondFieldName:a.attr("data-videotvph-secondfieldname"),thirdFieldName:a.attr("data-videotvph-thirdfieldname")})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,fieldName:b.fieldName||"tvPhase",secondFieldName:b.secondFieldName||"ty",thirdFieldName:b.thirdFieldName||"issueTime"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoTvPhView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView"),e,f,g;c.exports=Q.Class("VideoInfoTvPhView",{extend:d,construct:function(a){a=a||{},this.callsuper(a),e=this.fieldName=a.fieldName||"tvPhase",f=this.secondFieldName=a.secondFieldName||"ty",g=this.thirdFieldName=a.thirdFieldName||"issueTime";var b=this;Q.event.customEvent.on("hidetvph",function(a){b.hideWrapper()})},methods:{showShowOrNot:function(a){return a&&(a[e]||a[f]||a[g]||Object.prototype.toString.call(a)=="[object Number]"||Object.prototype.toString.call(a)=="[object String]")},updateLabel:function(a){var b="";if(a)if(a[e]&&a[e]!="0")a[f]&&a[f]!="0"?b="第"+a[e]+"季第"+a[f]+"期":b=a[e];else if(a[f]&&a[f]!="0")b="第"+a[f]+"期";else if(a[g]&&a[g]!="0"){b=a[g]+"";if(b){var c=b.slice(0,4),d=b.slice(4,6),h=b.slice(6);b="第"+c+"-"+d+"-"+h+"期"}}this.label.html(b)}}})});
define("../../units/videoInfo/videoInfoTvYear",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoTvYearView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoTvYearView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoTvYear",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videotvyear"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videotvyear-elem='label']")})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,fieldName:"ty"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoTvYearView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoTvYearView",{extend:d,construct:function(a){this.callsuper(a)},methods:{showShowOrNot:function(a){return a&&(a[this.fieldName]&&a[this.fieldName]!="0"||Object.prototype.toString.call(a)==="[object String]")},updateLabel:function(a){a=a||"";var b=a[this.fieldName]||a;Object.prototype.toString.call(b)==="[object Object]"&&(b="");if(b){var c=this.label.attr("href");c&&(c=c.replace(/-[0-9]{4}-/,"-"+b+"-"),this.label.attr("href",c))}this.label.html(b+"年")}}})});
define("../../units/videoInfo/videoInfoWriters",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../kit/qiyiPlayer"),f,g,h;f=g=!1;var i=a("../../components/units/pageJob"),j="videoInfoWriters",k,l=[];i.create(j,{check:function(){return!0},init:function(){var a=this;h=function(b){f||a.lazyCheck()&&a.lazyInit(b),e.getPlayer("video").un("videoChanged",h)}},exec:function(){e.getPlayer("video").on("videoChanged",h)},lazyCheck:function(){return f?g:(f=g=!0,k=Q.$("#widget-videowriter"),k&&k.forEach(function(a){a=Q.$(a),a&&l.push({widget:a,tmplNode:a.down("[data-videowriter-elem='template']"),itemContainer:a.down("[data-videowriter-elem='container']"),itemNumLimit:parseInt(a.attr("data-videowriter-numlimit"),10)||8})}),l.length===0?g=!1:l.forEach(function(a){if(!a.tmplNode)return g=!1,!1}),g)},lazyInit:function(a){f&&g&&l.forEach(function(b){var c=new d({wrapper:b.widget,tmpl:b.tmplNode[0].innerHTML,itemContainer:b.itemContainer||b.widget,itemNumLimit:b.itemNumLimit,fieldName:"writer"});c.videoChangeListener(a)})}}),c.exports=j});
define("../../units/videoInfo/videoInfoYuleTags",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/view/videoInfoV2/videoInfoYuleTagView","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoYuleTagView"),f=a("../../components/units/pageJob"),g="videoInfoYuleTags",h,i=[];f.create(g,{getDependentDoms:function(){return h=Q.$("#widget-videoyuletag"),h&&h.forEach(function(a){a=Q.$(a),a&&i.push({widget:a,tmplNode:a.down("[data-videoyuletag-elem='template']"),itemContainer:a.down("[data-videoyuletag-elem='container']"),itemNumLimit:parseInt(a.attr("data-videoyuletag-numlimit"),10)||8,starTagNumLimit:parseInt(a.attr("data-videoyuletag-startagnumlimit"),10)||3,eventTagNumLimit:parseInt(a.attr("data-videoyuletag-eventtagnumlimit"),10)||3,listTagNumLimit:parseInt(a.attr("data-videoyuletag-listtagnumlimit"),10)||3})}),i},check:function(a){var b=!0;return a.length===0?!1:(a.forEach(function(a){if(!a.tmplNode)return b=!1,!1}),b)},init:function(){this.check(i)&&(i.forEach(function(a){var b={wrapper:a.widget,tmpl:a.tmplNode[0].innerHTML,itemContainer:a.itemContainer||a.widget,itemNumLimit:a.itemNumLimit,starTagNumLimit:a.starTagNumLimit,eventTagNumLimit:a.eventTagNumLimit,listTagNumLimit:a.listTagNumLimit,fieldName:"tg",starFieldName:"ma",eventFieldName:"e",listFieldName:"categoryKeywords"};b.view=new e(b),new d(b)}),Q.event.customEvent.on("noVideoInfoTag",function(){Q.event.customEvent.fire({type:"expandMoreTag"})}))},exec:function(){}}),c.exports=g});
define("../../components/view/videoInfoV2/videoInfoYuleTagView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView");c.exports=Q.Class("VideoInfoYuleTagView",{extend:d,construct:function(a){a=a||{},this.callsuper(a),this.starFieldName=a.starFieldName||"ma",this.starTagNumLimit=typeof a.starTagNumLimit=="undefined"?3:+a.starTagNumLimit,this.eventFieldName=a.eventFieldName||"e",this.eventTagNumLimit=typeof a.eventTagNumLimit=="undefined"?3:+a.eventTagNumLimit,this.listFieldName=a.listFieldName||"categoryKeywords",this.listTagNumLimit=typeof a.listTagNumLimit=="undefined"?3:+a.listTagNumLimit},methods:{update:function(a){if(this.shouldShowOrNot(a)){var b=this.extractViewData(a),c=this.renderTemplate(this.tmpl,b);this.resetItemContainer(c),this.showWrapper()}else Q.event.customEvent.fire({type:"noVideoInfoTag"}),this.hideWrapper();Q.event.customEvent.fire({type:"videoinfotagupated"})},shouldShowOrNot:function(a){var b=a&&a[this.starFieldName]&&a[this.starFieldName].length>0,c=a&&a[this.eventFieldName]&&a[this.eventFieldName].length>0,d=a&&a[this.listFieldName]&&a[this.listFieldName].indexOf(" ")!=-1,e=d&&a[this.listFieldName].split(" ");for(var f=1,g=e.length;f<g;f++){if(e[f].split(",")[0]!=="其它"){d=!0;break}d=!1}return this.itemNumLimit>0&&(b&&this.starTagNumLimit>0||c&&this.eventTagNumLimit>0||d&&this.listTagNumLimit>0)},extractViewData:function(a){var b={},c=[],d=[],e=[];if(this.starTagNumLimit>0&&a&&a[this.starFieldName]&&a[this.starFieldName].length>0){var f=a[this.starFieldName].split("|");c=f.slice(0,Math.min(this.starTagNumLimit,this.itemNumLimit))}this.eventTagNumLimit>0&&a&&a[this.eventFieldName]&&a[this.eventFieldName].length>0&&(d=a[this.eventFieldName].split(" ").slice(0,Math.min(this.eventTagNumLimit,this.itemNumLimit)));if(this.listTagNumLimit>0&&a&&a[this.listFieldName]&&a[this.listFieldName].indexOf(" ")!=-1){var g=a[this.listFieldName].split(" "),h;for(var i=1,j=g.length;i<j;i++)h=g[i].split(","),h&&h.length==4&&h[0]!=="其它"&&e.push({text:h[0],link:h[3]});e=e.slice(0,Math.min(this.listTagNumLimit,this.itemNumLimit)),e.length>1&&(e[e.length-1].last=!0)}b.data=[],b["if(index!==0)"]=function(){return this.index!==0&&this.index!=="0"},b["if(type===star)"]=function(){return this.type==="star"},b["if(type===event)"]=function(){return this.type==="event"},b["if(type===list)"]=function(){return this.type==="list"};var k,l,m;for(k=0,l=0,m=c.length;k<m&&l<this.itemNumLimit;k++,l++)b.data.push({index:l,item:typeof c[k]=="string"?c[k]:c[k].name,type:"star"});for(k=0,m=d.length;k<m&&l<this.itemNumLimit;k++,l++)b.data.push({index:l,item:d[k],type:"event"});for(k=0,m=e.length;k<m&&l<this.itemNumLimit;k++,l++){var n={index:l,item:e[k],type:"list"};n.item.last=k===m-1||l===this.itemNumLimit-1,b.data.push(n)}return b},hideWrapper:function(){this.wrapper.css("display","none")},showWrapper:function(){this.wrapper.css("display","")}}})});
define("../../units/videoInfo/videoInfoZhuanti",["../../components/action/videoInfoV2/videoInfoSingleItemAdapter","../../components/view/videoInfoV2/videoInfoZhuantiView","../../kit/qiyiPlayer","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoSingleItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoZhuantiView"),f=a("../../kit/qiyiPlayer"),g,h,i;g=h=!1;var j=a("../../components/units/pageJob"),k="videoInfoZhuanti",l,m=[];j.create(k,{check:function(){return!0},init:function(){var a=this;i=function(b){g||a.lazyCheck()&&a.lazyInit(b),f.getPlayer("video").un("videoChanged",i)}},exec:function(){f.getPlayer("video").on("videoChanged",i)},lazyCheck:function(){return g?h:(g=h=!0,l=Q.$("#widget-videozhuanti"),l&&l.forEach(function(a){a=Q.$(a),a&&m.push({widget:a,label:a.down("[data-videozhuanti-elem='label']")})}),m.length===0&&(h=!1),h)},lazyInit:function(a){g&&h&&m.forEach(function(b){var c={wrapper:b.widget,label:b.label||b.widget,fieldName:"au"};c.view=new e(c);var f=new d(c);f.videoChangeListener(a)})}}),c.exports=k});
define("../../components/view/videoInfoV2/videoInfoZhuantiView",["./videoInfoSingleItemView"],function(a,b,c){var d=a("./videoInfoSingleItemView");c.exports=Q.Class("VideoInfoZhuantiView",{extend:d,construct:function(a){this.callsuper(a)},methods:{showShowOrNot:function(a){return a&&(a[this.fieldName]||Object.prototype.toString.call(a)==="[object String]")},updateLabel:function(a){a=a||"";var b=a[this.fieldName]||a;Object.prototype.toString.call(b)==="[object Object]"&&(b="");var c=b||"javascript:void(0)";this.label.attr("href",c)}}})});
define("../../units/videoInfo/yuleVideoInfoTagUI",["../../components/action/videoInfoV2/videoInfoStarYulezixunAdapter","../../components/action/videoInfoV2/videoInfoStarYingshijuAdapter","../../components/action/videoInfoV2/videoInfoStarZongyiAdapter","../../components/units/pageJob"],function(a,b,c){function r(a){a.parent("li").addClass("selected"),a.removeClass("arrow_down2").addClass("arrow_up2").addClass("selected")}function s(a){a.parent("li").removeClass("selected"),a.removeClass("arrow_up2").removeClass("selected").addClass("arrow_down2")}function t(a){var b=Q.event.get(a),c=b.target;if(k&&k[0]==c)l.css("display")==="none"?(l.show(),r(k)):(l.hide(),s(k));else{k&&(s(k),l&&l.hide()),k=Q.$(c),r(k);var d=k.html();if(l){var e=l.attr("data-videoyuleinfo-star");l.attr("data-videoyuleinfo-star",d),l.show();if(e!==d){var f="[data-videoinfoinnertab-elem='tabtitle'][data-videoinfoinnertab-seq='1']",g=l.down(f);try{g[0].click()}catch(h){var i=g[0],j=document.createEvent("MouseEvents");j.initMouseEvent("click",!0,!0,window),i.dispatchEvent(j)}}}}Q.event.customEvent.fire({type:"starTagClicked"})}function u(a){var b=Q.event.get(a),c=b.target,d=Q.$(c).attr("data-videoyuleinfo-star"),e=l.attr("data-videoyuleinfo-star"),f=Q.$(c).attr("data-videoinfoinnertab-seq"),g="[data-videoinfoinnertab-elem='tabbody'][data-videoinfoinnertab-seq='"+f+"']",h=l.down(g);if(d!==e){Q.$(c).attr("data-videoyuleinfo-star",e),n=f,h.down(".tipsBox")&&h.down(".tipsBox").hide(),h.down(".text_list")&&h.down(".text_list").hide(),h.down(".lineTab_content_more")&&h.down(".lineTab_content_more").hide(),h.down(".loading")&&h.down(".loading").show();var i={keyWord:e};f=="1"?o.update(i):f=="2"?p.update(i):q.update(i)}}function v(a,b){a&&a.forEach(function(a){Q.$(a).un("click",b)})}function w(a,b){a&&a.forEach(function(a){Q.$(a).on("click",b)})}function x(){v(h,t),v(j,u),n=0,k=null,h=g&&g.down("*[data-videoyuletag-tagtype='star']"),i=g&&g.down("*[data-videoyuletag-tagtype='event']"),j||(j=m&&m.down("*[data-videoinfoinnertab-elem='tabtitle']")),l&&l.hide(),w(h,t),w(j,u)}var d=a("../../components/action/videoInfoV2/videoInfoStarYulezixunAdapter"),e=a("../../components/action/videoInfoV2/videoInfoStarYingshijuAdapter"),f=a("../../components/action/videoInfoV2/videoInfoStarZongyiAdapter"),g,h,i,j,k,l,m,n,o,p,q,y=a("../../components/units/pageJob"),z="yuleVideoInfoTagUI",A=!1;y.create(z,{check:function(){var a=!1;g=Q.$("#widget-videoyuletag"),m=Q.$("#widget-videoinfoinnertab"),l=Q.$("#widget-videoyuleinfo");try{var b=Q.$("#widget-videoyulezixun"),c=b&&b.attr("data-widget-videoyulezixun")==="newtag",h=b&&b.down("[data-videoyulezixun-elem='template']");return b&&h&&!c&&(a=!0,o=new d({wrapper:b,tmpl:h&&h[0]&&h[0].innerHTML,itemContainer:b&&b.down("[data-videoyulezixun-elem='container']"),itemNumLimit:6,fieldName:"list"})),b=Q.$("#widget-videoyingshiju"),c=b&&b.attr("data-widget-videoyingshiju")==="newtag",h=b&&b.down("[data-videoyingshiju-elem='template']"),b&&h&&!c&&(a=!0,p=new e({wrapper:b,tmpl:h&&h[0]&&h[0].innerHTML,itemContainer:b&&b.down("[data-videoyingshiju-elem='container']"),itemNumLimit:6,fieldName:"list"})),b=Q.$("#widget-videozongyineirong"),c=b&&b.attr("data-widget-videozongyineirong")==="newtag",h=b&&b.down("[data-videozongyineirong-elem='template']"),b&&h&&!c&&(a=!0,q=new f({wrapper:b,tmpl:h&&h[0]&&h[0].innerHTML,itemContainer:b&&b.down("[data-videozongyineirong-elem='container']"),itemNumLimit:6,fieldName:"list"})),A=a,a}catch(i){return!1}},init:function(){},exec:function(){A&&(x(),Q.event.customEvent.on("videoinfotagupated",function(a){x()}),Q.event.customEvent.on("moreTagClicked",function(){l&&l.hide(),k&&s(k)}))}}),c.exports=z});
define("../../units/videoInfo/videoInfoYuleNewTags",["../../components/action/videoInfoV2/videoInfoMultiItemAdapter","../../components/view/videoInfoV2/videoInfoYuleNewTagView","../../components/units/pageJob"],function(a,b,c){var d=a("../../components/action/videoInfoV2/videoInfoMultiItemAdapter"),e=a("../../components/view/videoInfoV2/videoInfoYuleNewTagView"),f=a("../../components/units/pageJob"),g="videoInfoYuleNewTags",h,i=[];f.create(g,{getDependentDoms:function(){return h=Q.$("#widget-videoyulenewtag"),h&&h.forEach(function(a){a=Q.$(a),a&&i.push({widget:a,yuleTagTmplNode:a.down("[data-videoyulenewtag-elem='yulenewtagtmpl']"),moreTagTmplNode:a.down("[data-videoyulenewtag-elem='morenewtagtmpl']"),itemContainer:a.down("[data-videoyulenewtag-elem='container']"),moreTagHandle:a.down("[data-videoyulenewtag-elem=moretag]"),lessTagHandle:a.down("[data-videoyulenewtag-elem=lesstag]"),itemNumLimit:parseInt(a.attr("data-videoyulenewtag-numlimit"),10)||99,starTagNumLimit:parseInt(a.attr("data-videoyulenewtag-startagnumlimit"),10)||3,eventTagNumLimit:parseInt(a.attr("data-videoyulenewtag-eventtagnumlimit"),10)||3,listTagNumLimit:parseInt(a.attr("data-videoyulenewtag-listtagnumlimit"),10)||3})}),i},check:function(a){var b=!0;return a.length===0?!1:(a.forEach(function(a){if(!a.yuleTagTmplNode||!a.moreTagTmplNode)return b=!1,!1}),b)},init:function(){this.check(i)&&(i.forEach(function(a){var b={wrapper:a.widget,yuleTagTmpl:a.yuleTagTmplNode[0].innerHTML,moreTagTmpl:a.moreTagTmplNode[0].innerHTML,itemContainer:a.itemContainer||a.widget,moreTagHandle:a.moreTagHandle,lessTagHandle:a.lessTagHandle,itemNumLimit:a.itemNumLimit,starTagNumLimit:a.starTagNumLimit,eventTagNumLimit:a.eventTagNumLimit,listTagNumLimit:a.listTagNumLimit,fieldName:"tg",starFieldName:"ma",eventFieldName:"e",listFieldName:"categoryKeywords"};b.view=new e(b),new d(b)}),Q.event.customEvent.on("noVideoInfoTag",function(){Q.event.customEvent.fire({type:"expandMoreTag"})}))},exec:function(){}}),c.exports=g});
define("../../components/view/videoInfoV2/videoInfoYuleNewTagView",["./videoInfoMultiItemView"],function(a,b,c){var d=a("./videoInfoMultiItemView"),e,f;c.exports=Q.Class("VideoInfoYuleNewTagView",{extend:d,construct:function(a){a=a||{},this.callsuper(a),this.yuleTagTmpl=this.decodeHTML(a.yuleTagTmpl),this.moreTagTmpl=this.decodeHTML(a.moreTagTmpl),this.moreTagHandle=a.moreTagHandle,this.lessTagHandle=a.lessTagHandle,this.starFieldName=a.starFieldName||"ma",this.starTagNumLimit=typeof a.starTagNumLimit=="undefined"?3:+a.starTagNumLimit,this.eventFieldName=a.eventFieldName||"e",this.eventTagNumLimit=typeof a.eventTagNumLimit=="undefined"?3:+a.eventTagNumLimit,this.listFieldName=a.listFieldName||"categoryKeywords",this.listTagNumLimit=typeof a.listTagNumLimit=="undefined"?3:+a.listTagNumLimit,this.moreTagFieldName=this.fieldName,this.moreTagNumLimit=this.moreTagNumLimit||8,this.initTagArr(),this.bindEvent()},methods:{update:function(a){if(this.shouldShowOrNot(a)){var b=this.extractViewData(a),c=this.renderTemplate(this.yuleTagTmpl,b),d=this.renderTemplate(this.moreTagTmpl,b);this.resetItemContainer({yuleTagHtml:c,moreTagHtml:d}),b.data.length===0&&Q.event.customEvent.fire({type:"noVideoInfoYuleTag"}),b.moreTagData.length===0?(this.moreTagHandle.hide(),this.lessTagHandle.hide()):Q.$(f[0]).css("display")!=="none"?(this.lessTagHandle.show(),this.moreTagHandle.hide()):(this.moreTagHandle.show(),this.lessTagHandle.hide()),b.data&&b.data.length!==0&&Q.event.customEvent.fire({type:"hideMoreTag"}),this.showWrapper()}else this.hideWrapper();Q.event.customEvent.fire({type:"videoinfotagupated"})},shouldShowOrNot:function(a){var b=a&&a[this.starFieldName]&&a[this.starFieldName].length>0,c=a&&a[this.eventFieldName]&&a[this.eventFieldName].length>0,d=a&&a[this.listFieldName]&&a[this.listFieldName].indexOf(" ")!=-1,e=a&&a[this.fieldName]&&a[this.fieldName].length>0,f=d&&a[this.listFieldName].split(" ");if(f)for(var g=1,h=f.length;g<h;g++){if(f[g].split(",")[0]!=="其它"){d=!0;break}d=!1}return this.itemNumLimit>0&&(b&&this.starTagNumLimit>0||c&&this.eventTagNumLimit>0||d&&this.listTagNumLimit>0||e&&this.moreTagNumLimit>0)},extractViewData:function(a){var b={},c=[],d=[],e=[],f=[];if(this.starTagNumLimit>0&&a&&a[this.starFieldName]&&a[this.starFieldName].length>0){var g=a[this.starFieldName].split("|");c=g.slice(0,Math.min(this.starTagNumLimit,this.itemNumLimit))}this.eventTagNumLimit>0&&a&&a[this.eventFieldName]&&a[this.eventFieldName].length>0&&(d=a[this.eventFieldName].split(" ").slice(0,Math.min(this.eventTagNumLimit,this.itemNumLimit)));if(this.listTagNumLimit>0&&a&&a[this.listFieldName]&&a[this.listFieldName].indexOf(" ")!=-1){var h=a[this.listFieldName].split(" "),i;for(var j=1,k=h.length;j<k;j++)i=h[j].split(","),i&&i.length==4&&i[0]!=="其它"&&e.push({text:i[0],link:i[3]});e=e.slice(0,Math.min(this.listTagNumLimit,this.itemNumLimit)),e.length>1&&(e[e.length-1].last=!0)}this.moreTagNumLimit>0&&a&&a[this.moreTagFieldName]&&a[this.moreTagFieldName].length>0&&(f=a[this.moreTagFieldName].split(" ").slice(0,Math.min(this.moreTagNumLimit,this.itemNumLimit))),b.data=[],b.moreTagData=[],b["if(index!==0)"]=function(){return this.index!==0&&this.index!=="0"},b["if(type===star)"]=function(){return this.type==="star"},b["if(type===event)"]=function(){return this.type==="event"},b["if(type===list)"]=function(){return this.type==="list"};var l,m,n,o;for(l=0,m=0,o=c.length;l<o&&m<this.itemNumLimit;l++,m++)b.data.push({index:m,item:typeof c[l]=="string"?c[l]:c[l].name,type:"star"});for(l=0,o=d.length;l<o&&m<this.itemNumLimit;l++,m++)b.data.push({index:m,item:d[l],type:"event"});for(l=0,o=e.length;l<o&&m<this.itemNumLimit;l++,m++){var p={index:m,item:e[l],type:"list"};p.item.last=l===o-1||m===this.itemNumLimit-1,b.data.push(p)}for(n=0,o=f.length;n<o&&m<this.itemNumLimit;n++,m++)b.moreTagData.push({index:n,item:f[n],type:"more"});return b},resetItemContainer:function(a){e.forEach(function(a){a.parentElement.removeChild(a)}),f.forEach(function(a){a.parentElement.removeChild(a)}),this.moreTagHandle.html("BEFOREBEGIN",a.yuleTagHtml||""),this.lessTagHandle.html("BEFOREBEGIN",a.moreTagHtml||""),this.initTagArr()},hideWrapper:function(){this.wrapper.css("display","none")},showWrapper:function(){this.wrapper.css("display","")},initTagArr:function(){var a=this.itemContainer.down("[data-videoyulenewtag-tagtype='star']")||[],b=this.itemContainer.down("[data-videoyulenewtag-tagtype='event']")||[],c=this.itemContainer.down("[data-videoyulenewtag-tagtype='list']")||[];e=[];var d=function(a){e.push(a)};a.forEach(d),b.forEach(d),c.forEach(d),f=this.itemContainer.down("[data-videoyulenewtag-tagtype='more']")||[]},bindEvent:function(){function b(){f.forEach(function(a){Q.$(a).show()}),a.moreTagHandle.hide(),a.lessTagHandle.show()}function c(){f.forEach(function(a){Q.$(a).hide()}),a.moreTagHandle.show(),a.lessTagHandle.hide()}var a=this;this.moreTagHandle.on("click",b),this.lessTagHandle.on("click",c),Q.event.customEvent.on("noVideoInfoYuleTag",b),Q.event.customEvent.on("showMoreTag",b),Q.event.customEvent.on("hideMoreTag",c)}}})});
define("../../units/videoInfo/yuleVideoInfoNewTagUI",["../../components/action/videoInfoV2/videoInfoStarYulezixunAdapter","../../components/action/videoInfoV2/videoInfoStarYingshijuAdapter","../../components/action/videoInfoV2/videoInfoStarZongyiAdapter","../../components/units/pageJob"],function(a,b,c){function v(a){a.addClass("selected"),a.down("a").removeClass("arrow_down2").addClass("arrow_up2")}function w(a){a.removeClass("selected"),a.down("a").removeClass("arrow_up2").addClass("arrow_down2")}function x(){if(!m)return!1;m.show(),l&&v(l),q=m.down("[data-videoyuleinfo-elem='icon_selected']");if(q&&l){q.show();var a=l.getPosition(),b=m.getPosition(),c=Q.$(q[0].offsetParent).getPosition(),d=parseInt(q.css("width"),10)||0,e=l.down("a"),f=e.width()-(parseInt(e.css("paddingRight"),10)||0),g=l.height();n!==0&&!n&&(n=parseInt(m.css("top"),10)||0),o!==0&&!o&&(o=parseInt(m.css("marginBottom"),10)||0),p!==0&&!p&&(p=parseInt(q.css("left"),10)||0);var h=-1*(b.top-a.top-g)+"px",i=a.left+f/2-c.left-d/2+"px";m.css("top",h).css("marginBottom",h),q.css("left",i)}return!0}function y(){return m?((n||n===0)&&m.css("top",n+"px"),(o||o===0)&&m.css("marginBottom",o+"px"),(p||p===0)&&q.css("left",p+"px"),l&&w(l),m.hide(),!0):!1}function z(a){var b=Q.event.get(a),c=Q.$(b.target);while(!c.attr("data-videoyulenewtag-tagtype"))c=c.parent();if(!c.attr("data-videoyulenewtag-tagtype"))return!1;if(l&&l[0]==c[0])m.css("display")==="none"?x():y();else{y(),l=Q.$(c);var d=l.down("a").html();if(m){var e=m.attr("data-videoyuleinfo-star");m.attr("data-videoyuleinfo-star",d),x();if(e!==d){var f="[data-videoinfoinnertab-elem='tabtitle'][data-videoinfoinnertab-seq='1']",g=m.down(f);try{g[0].click()}catch(h){var i=g[0],j=document.createEvent("MouseEvents");j.initMouseEvent("click",!0,!0,window),i.dispatchEvent(j)}}}}Q.event.customEvent.fire({type:"starTagClicked"})}function A(a){var b=Q.event.get(a),c=b.target,d=Q.$(c).attr("data-videoyuleinfo-star"),e=m.attr("data-videoyuleinfo-star"),f=Q.$(c).attr("data-videoinfoinnertab-seq"),g="[data-videoinfoinnertab-elem='tabbody'][data-videoinfoinnertab-seq='"+f+"']",h=m.down(g);if(d!==e){Q.$(c).attr("data-videoyuleinfo-star",e),r=f;var i={keyWord:e};f=="1"?s.update(i):f=="2"?t.update(i):u.update(i)}}function B(a,b){a&&a.forEach(function(a){Q.$(a).un("click",b)})}function C(a,b){a&&a.forEach(function(a){Q.$(a).on("click",b)})}function D(){B(i,z),B(k,A),r=0,i=g&&g.down("*[data-videoyulenewtag-tagtype='star']"),j=g&&g.down("*[data-videoyulenewtag-tagtype='event']"),k||(k=h&&h.down("*[data-videoinfoinnertab-elem='tabtitle']")),l=null,m&&m.hide(),C(i,z),C(k,A)}var d=a("../../components/action/videoInfoV2/videoInfoStarYulezixunAdapter"),e=a("../../components/action/videoInfoV2/videoInfoStarYingshijuAdapter"),f=a("../../components/action/videoInfoV2/videoInfoStarZongyiAdapter"),g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,E=a("../../components/units/pageJob"),F="yuleVideoInfoNewTagUI",G=!1;E.create(F,{check:function(){var a=!1;g=Q.$("#widget-videoyulenewtag"),m=Q.$("#widget-videoyuleinfo"),h=Q.$("#widget-videoinfoinnertab")||Q.$("#widget-videoyuleinfo");try{var b=Q.$("#widget-videoyulezixun"),c=b&&b.down("[data-videoyulezixun-elem='template']");return b&&c&&(a=!0,s=new d({wrapper:b,tmpl:c&&c[0]&&c[0].innerHTML,itemContainer:b&&b.down("[data-videoyulezixun-elem='container']"),itemNumLimit:6,tipsBox:b.down(".tipsBox"),loading:b.down(".loading"),more:b.down("[data-videoyulezixun-elem='more']"),fieldName:"list"})),b=Q.$("#widget-videoyingshiju"),c=b&&b.down("[data-videoyingshiju-elem='template']"),b&&c&&(a=!0,t=new e({wrapper:b,tmpl:c&&c[0]&&c[0].innerHTML,itemContainer:b&&b.down("[data-videoyingshiju-elem='container']"),itemNumLimit:6,tipsBox:b.down(".tipsBox"),loading:b.down(".loading"),more:b.down("[data-videoyingshiju-elem='more']"),fieldName:"list"})),b=Q.$("#widget-videozongyineirong"),c=b&&b.down("[data-videozongyineirong-elem='template']"),b&&c&&(a=!0,u=new f({wrapper:b,tmpl:c&&c[0]&&c[0].innerHTML,itemContainer:b&&b.down("[data-videozongyineirong-elem='container']"),itemNumLimit:6,tipsBox:b.down(".tipsBox"),loading:b.down(".loading"),more:b.down("[data-videozongyineirong-elem='more']"),fieldName:"list"})),G=a,a}catch(i){return!1}},init:function(){},exec:function(){G&&(D(),Q.event.customEvent.on("videoinfotagupated",function(a){D()}),Q.event.customEvent.on("moreTagClicked",function(){y()}))}}),c.exports=F});
define("../../units/videoInfo/tvVideoInfoTvJianjieTab",["../../components/units/pageJob","../../kit/qiyiPlayer"],function(a,b,c){var d=a("../../components/units/pageJob"),e=a("../../kit/qiyiPlayer"),f,g,h=!1,i=!1,j="tvVideoInfoTvJianjieTab",k;d.create(j,{check:function(a){return!0},init:function(){var a=this;k=function(b){a.lazyCheck()?a.tvChangeListener(b):e.getPlayer("video").un("videoChanged",k)}},lazyCheck:function(){return i?h:(f=Q.$("[data-widget-videoinfotvjianjietab]"),f&&(g={widget:f,jianjieTitle:f.down("[data-videoinfotvjianjietab-elem='jianjietitle']"),jianjieSeparator:f.down("[data-videoinfotvjianjietab-elem='jianjieseparator']"),jianjieContent:f.down("[data-videoinfotvjianjietab-elem='jianjiecontent']")},g.jianjieTitle&&g.jianjieContent&&(h=!0)),i=!0,h)},exec:function(){e.getPlayer("video").on("videoChanged",k)},tvChangeListener:function(a){var b=a.data.vn||"",c=a.data.info||"暂无";g.jianjieTitle[0].innerHTML=b+"简介",g.jianjieContent[0].innerHTML=c;var d=g.jianjieSeparator;c?(g.jianjieTitle.css("display",""),d&&d.css("display","")):(g.jianjieTitle.hide(),d&&d.hide())}}),c.exports=j});
define("../../units/newSignWheel",["../components/units/pageJob","../action/newSignWheel","../components/action/checkDoms"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../action/newSignWheel"),f=a("../components/action/checkDoms"),g="newSignWheel",h={};d.create(g,{getDependentDoms:function(){var a=Q.$("*[data-widget-signWheel=wrap]");h={widget:a,signBtn:Q.$("*[data-widget-signbtn=btn]"),wheelContainer:a.down("*[data-signWheel-wheelWrapelem=wrap]"),wheelWrap:a.down("*[data-signWheel-flashWrapelem=outterWrap]"),wheelInnerWrap:a.down("*[data-signWheel-flashWrapelem=innerWrap]"),pointTipWrap:a.down("*[data-signWheel-tipWrapelem=wrap]"),slideWrap:a.down("*[data-signWheel-elem=slideWrap]"),tips:a.down("*[data-signWheel-tipelem]"),unsignTip:a.down("*[data-signWheel-tipelem=unsign]"),signTip:a.down("*[data-signWheel-tipelem=sign]"),tipPoint:a.down("*[data-signWheel-tipPointsWayelem=tip]"),pointElem:a.down("*[data-signWheel-pointelem=point]"),remind:a.down("*[data-signWheel-remindSignByQQelem=remind]"),pullBtn:a.down("*[data-signWheel-pullBtnelem=btn]"),returnWheel:a.down("*[data-signWheel-returnWheelelem=elem]")}},check:function(){return f(h),!0},init:function(){this.mySignIn=new e({doms:h}),this.mySignIn.getSignInStatus({type:"click"})}}),c.exports=g});
define("../../action/newSignWheel",["../interfaces/userEventInterface","../interfaces/apiCredit_userSignStatusInterface","../action/queryData","../kit/eventPlugin","../view/newSignWheelPadView","../view/newSignWheelView"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"action/mySignInWheel"}),e=a("../interfaces/userEventInterface"),f=a("../interfaces/apiCredit_userSignStatusInterface"),g=a("../action/queryData"),h=a("../kit/eventPlugin"),i=null;Q.browser.iPad?i=a("../view/newSignWheelPadView"):i=a("../view/newSignWheelView"),c.exports=Q.Class("MySignInWheel",{plugins:[new h],construct:function(a){a=a||{},a.doms&&(this.view=new i({doms:a.doms,ctrl:this})),this.init()},properties:{signInStatus:null,signIn:null},methods:{init:function(){this.signInStatus=new g({"interface":new f}),this.signInStatus.on("queryData",this._getStatusCallBack.bind(this)),this.signIn=new g({"interface":new e}),this.signIn.on("queryData",this._signInCallBack.bind(this))},getSignInStatus:function(a){this.signInStatus.type=a.type,this.signInStatus.query()},_getStatusCallBack:function(a){a.data.code=="A00000"?a.data.data?this.fire({type:"getStatusEnd",data:{type:this.signInStatus.type,info:a.data.data}}):d.warn("user/signstatus接口返回数据为null！"):(d.debug("user/signstatus,未登录情况下请求！"),a.data.code=="A00001"&&this.fire({type:"getStatusEnd",data:{type:this.signInStatus.type,info:""}}))},doSignIn:function(a){this.signIn.type=a.type,this.signIn.query(a)},changeCredits:function(a){a&&a.type!=="random"&&(Q.event.customEvent.fire({type:"qianDaoEnd",data:{d:{data:a}}}),Q.event.customEvent.fire({type:"creditNumChanged",data:{}}))},_signInCallBack:function(a){a.data.code=="A00000"?a.data.data?this.fire({type:"signInEnd",data:{type:this.signIn.type,info:a.data.data}}):d.warn("user/event接口返回数据为null！"):a.data.code=="A00001"&&(d.debug("user/event,未登录情况下请求！"),this.fire({type:"signInEnd",data:{type:this.signIn.type,info:""}}))}}})});
define("../../interfaces/apiCredit_userSignStatusInterface",["../kit/remoteInterface","../config/siteDomain"],function(a,b,c){var d=a("../kit/remoteInterface"),e=a("../config/siteDomain");c.exports=Q.Class("UserEventInterFace",{construct:function(a){this._remoteInterface=new d({userSignStatusData:{url:"http://api.credit."+e.SITE_DOMAIN+"/services/user/signstatus",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1}}}})},methods:{request:function(a,b){a=a||{},a.cb="varName_userSignStatusData",a.t=(new Date).getTime(),this._remoteInterface.send({ifname:"userSignStatusData",param:a},function(a){b&&b(a)})}}})});
define("../../action/queryData",["../components/action/nonMVCWidget","../model/queryDataModel","../kit/eventPlugin"],function(a,b,c){var d=a("../components/action/nonMVCWidget"),e=a("../model/queryDataModel"),f=a("../kit/eventPlugin");c.exports=Q.Class("QueryData",{extend:d,plugins:[new f],construct:function(a){a=a||{};var b=a.model||new e({"interface":a.interface});this.callsuper({model:b,view:null})},methods:{query:function(a){this._model.query(a,this.queryCallBack.bind(this))},queryCallBack:function(a){this.fire({type:"queryData",data:a})}}})});
define("../../model/queryDataModel",["../components/model/model"],function(a,b,c){var d=a("../components/model/model");c.exports=Q.Class("CreditHistoryGetterModel",{extend:d,construct:function(a){this.callsuper(),a=a||{},this.chFace=a.interface},methods:{query:function(a,b){a=a||{},this.set(a),this.chFace.request(this.get(),b)}}})});
define("../../view/newSignWheelPadView",["../components/action/floater","../components/view/floaterCustomAnimView","../kit/flashCall","../kit/qiyiPlayer","../kit/anim","../action/tip","../action/floaterListener","../kit/userInfo"],function(a,b,c){var d=a("../components/action/floater"),e=a("../components/view/floaterCustomAnimView"),f=a("../kit/flashCall"),g=a("../kit/qiyiPlayer"),h=a("../kit/anim"),i=new Q.ic.InfoCenter({moduleName:"view/newSignWheel"}),j=a("../action/tip"),k=a("../action/floaterListener"),l=a("../kit/userInfo"),m=Q.plugins.clearSwf;c.exports=Q.Class("newSignWheelView",{construct:function(a){a=a||{},this._ctrl=a.ctrl,this.init(a)},properties:{doms:null,isSignIn:!1,allowClick:!0,isWheelShow:!0,isPanelShow:!1,wheelHeight:0,jumpToTip:null},methods:{init:function(a){this.doms=a.doms,a.doms.tipCloseBtn=a.doms.tips.down("*[data-signWheel-tipCloseelem]"),this.doms.loginBtn=Q.$("*[data-signWheel-loginelem=login]"),this.wheelHeight=this.doms.wheelWrap[0].style.height;var b=this;this.doms.tipPoint.on("click",function(){b._showTips()}),Q.browser.iPad&&(this.doms.returnWheel.hide(),this._hideForPad());if(this.doms.remind){var c="http://qzs.qq.com/snsapp/app/bee/widget/open.htm#content=";c+=encodeURIComponent(this.doms.remind.attr("data-content")),c+="&advance="+encodeURIComponent(this.doms.remind.attr("data-advance")),c+="&time="+encodeURIComponent(this.doms.remind.attr("data-time")),c+="&url="+encodeURIComponent("http://i.iqiyi.com/jifen?lefttitlesign=credit"),this.doms.remind.attr("href",c)}Q.event.customEvent.on("logout",function(){b._ctrl.getSignInStatus({type:"click"}),b._restoreBtn(),b.doms.signTip.hide()}),Q.event.customEvent.on("login",function(){b.doms.unsignTip&&b.doms.unsignTip.hide(),b.doms.signTip.hide(),b.doms.signBtn.un("click");var a=parseInt(Q.cookie.get("QC108"),10);a?(b.data={credits:a},b._ctrl.getSignInStatus({type:"merge"})):b._ctrl.getSignInStatus({type:"click"})}),this._bindEvent(a)},_showWheel:function(){if(this.isWheelShow)return;h({elem:this.doms.slideWrap,style:"marginLeft",from:-278,to:0,duration:800}),this.isWheelShow=!0},_showTips:function(){if(!this.isWheelShow)return;h({elem:this.doms.slideWrap,style:"marginLeft",from:0,to:-278,duration:800}),this.isWheelShow=!1},_hideForPad:function(){this.doms.slideWrap.hide(),this.doms.pullBtn.hide()},_togglePanel:function(a){this.isPanelShow?h({elem:this.doms.wheelContainer,style:"height",from:314,to:0,duration:300}):(h({elem:this.doms.wheelContainer,style:"height",from:0,to:314,duration:300}),!this.isWheelShow&&a&&this._showWheel()),this.isPanelShow?(this.isPanelShow=!1,this.doms.pullBtn.removeClass("hide_arrow").addClass("show_arrow")):(this.isPanelShow=!0,this.doms.pullBtn.removeClass("show_arrow").addClass("hide_arrow"))},_showLoginBtn:function(a){a?this.doms.loginBtn[0].style.display="inline":this.doms.loginBtn[0].style.display="none"},_showPoint:function(a){this.doms.unsignTip&&this.doms.unsignTip.hide(),this.doms.signTip.show(),this.doms.pointElem.html(a),l.isLogin()?this._showLoginBtn(!1):this._showLoginBtn(!0)},_clickSignIn:function(a){Q.event.get(a).preventDefault();if(!this.allowClick)return;this.doms.unsignTip&&this.doms.unsignTip.hide(),this.doms.signTip.hide(),this.doms.signBtn.html("签到中"),this.jumpToTip&&clearTimeout(this.jumpToTip),l.isLogin()&&this.doms.signBtn.un("click"),this._ctrl.doSignIn({type:"click"})},_restoreBtn:function(){this.doms.signBtn.removeClass("intet_sign_in_have").addClass("funcDown intet_sign_in"),this.doms.signBtn.html('<a href="javascript:void(0)" class="sign_in green" title="签到"><i class="int-icons int-sign-in"></i>签&nbsp;到</a>')},_setContent:function(a){this.doms.signBtn.removeClass("funcDown").removeClass("intet_sign_in").addClass("intet_sign_in_have"),a<=99?this.doms.signBtn.html("已签到"+a+"天"):this.doms.signBtn.html("已签到99+天")},_validateInfo:function(){return this.data.date.day!==(new Date).getDay()?!1:this.data.date.fullYear!==(new Date).getFullYear()?!1:this.data.date.month!==(new Date).getMonth()?!1:!0},_timeoutHidenWheel:function(a){var b=this;this.jumpToTip=setTimeout(function(){b._showTips()},a)},_bindEvent:function(a){var b=this;a.doms.tipCloseBtn&&a.doms.tipCloseBtn.on("click",function(a){a=Q.event.get(a);var b=Q.$(a.currentTarget||a.target),c=b.parentNode,d=Q.$(b).parent("div");d.hide()}),a.doms.pullBtn.on("click",function(a){b._togglePanel()}),this._ctrl.on("getStatusEnd",function(c){if(c.data.type!=="click"&&c.data.type!=="merge")return;if(c.data.info&&c.data.info.signable===1&&c.data.type==="merge"){b._ctrl.doSignIn({credit_custom:b.data.credits,type:"merge"}),Q.cookie.remove("QC108");return}!c.data.info||c.data.info.signable===1?(b.isSignIn=!1,b.doms.unsignTip&&b.doms.unsignTip.show(),a.doms.signBtn.on("click",b._clickSignIn.bind(b)),b.doms.tipPoint.show()):c.data.info.signable===0&&(b.isSignIn=!0,c.data.info.continous&&(b._setContent(c.data.info.continous),b._showTips(),b.doms.signTip.hide()))}),this._ctrl.on("signInEnd",function(a){a.data.type==="click"&&(b.allowClick=!1),a.data.type==="merge"&&b._setContent(a.data.info.continous);var c=b.doms.pointTipWrap.attr("data-signWheel-changeTimeParam");b.allowClick=!0;if(!l.isLogin()){var d=parseInt(Math.random()*4,10)+1;Q.cookie.set("QC108",d),b._showPoint(d),b._restoreBtn(),b._timeoutHidenWheel(c)}else b._setContent(a.data.info.continous),b._showPoint(a.data.info.creditAdd),b._timeoutHidenWheel(c);setTimeout(function(){a.data.type||b._ctrl.changeCredits(a.data)},600)})}}})});
define("../../components/view/floaterCustomAnimView",["./floaterNoCoverView","../../kit/anim"],function(a,b,c){var d=a("./floaterNoCoverView"),e=a("../../kit/anim");c.exports=Q.Class("FloaterCustomAnimView",{ns:Q.view,extend:d,construct:function(a){this.callsuper(a),this._opt=a||{}},methods:{adjustPosition:function(){if(this._opt.pos){var a=this._opt.pos();this._elem.css("top",a.top-this._elem.height()/2+"px"),this._elem.css("left",a.left-this._elem.width()/2+"px")}if(this._opt.boxSize){var b=this._opt.boxSize();this._elem.css("width",b.width+"px"),this._elem.css("height",b.height+"px")}if(this._opt.closeEvent){var c=this._elem.down("*["+this._opt.closeEvent.closeName+"]");c&&c.on("click",this.doCloseBtnClick.bind(this))}},playAnim:function(){if(this._opt.anim){var a=typeof this._opt.anim.animDone=="function"?this._opt.anim.animDone:function(){};this._opt.anim.style&&this._opt.anim.from!=="undefined"&&this._opt.anim.to!=="undefined"&&e({elem:this._elem,style:this._opt.anim.style,from:this._opt.anim.from,to:this._opt.anim.to,ease:this._opt.anim.ease,duration:this._opt.anim.duration,done:a.bind(this)})}},doCloseBtnClick:function(a){a=Q.event.get(a),a.stop(),this.destroy()}}})});
define("../../action/tip",["../kit/eventPlugin","../config/siteDomain","../components/action/floater","../components/view/floaterCustomView"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"action/tigerMachine"}),e=a("../kit/eventPlugin"),f=a("../config/siteDomain"),g=a("../components/action/floater"),h=a("../components/view/floaterCustomView");c.exports=Q.Class("tigerMachine",{plugins:[new e],construct:function(a){a=a||{},this.target=a.target,this.eventName=a.eventName||"click",this.html=a.html||"",this.distLeft=a.distLeft||0,this.distTop=a.distTop||0,this.handler=Q.fn.emptyMethod,this.bindEvent()},methods:{bindEvent:function(){var a=this;this.eventName=="mouseenter"?Q.browser.iPad?this.target&&this.target.forEach(function(b){var c=Q.$(b);c.on("touchstart",a.doTouchStart.bind(a))}):this.target&&this.target.forEach(function(b){var c=Q.$(b);c.on("mouseenter",a.doMouseEnter.bind(a)),c.on("mouseleave",a.doMouseLeave.bind(a)),c.on("click",function(a){Q.event.get(a).stop()})}):this.eventName!="click"&&this.target==window&&Q.event.customEvent.on(this.eventName,this.handler.bind(this))},doMouseEnter:function(a){a=Q.event.get(a),a.stop();var b=Q.$(a.currentTarget||a.target);if(!this.floater){var c=this.distTop,d=this.distLeft;this.floater=new g({view:new h({pos:function(){return{top:b.top()+c,left:b.left()+d}}})})}this.floater.show({html:this.html})},doMouseLeave:function(a){this.floater.hide()},doTouchStart:function(a){a=Q.event.get(a),a.stop();var b=Q.$(a.currentTarget||a.target);if(!this.floater){var c=this.distTop,d=this.distLeft;this.floater=new g({view:new h({pos:function(){return{top:b.top()+c,left:b.left()+d}}})})}this.floater.isOpen()?this.floater.hide():this.floater.show({html:this.html})}}})});
define("../../action/floaterListener",[],function(a,b,c){c.exports=Q.Class("FloatListener",{construct:function(a){this._target=a.target,this._eventlist=a.eventList,this._doEvent=a.doEvent},methods:{listen:function(){var a=this;a._eventlist.forEach(function(b){Q.event.customEvent.on(b,a._doEvent.bind(a._target))})}}})});
define("../../view/newSignWheelView",["../components/action/floater","../components/view/floaterCustomAnimView","../kit/flashCall","../kit/qiyiPlayer","../kit/anim","../action/tip","../action/floaterListener","../kit/userInfo"],function(a,b,c){var d=a("../components/action/floater"),e=a("../components/view/floaterCustomAnimView"),f=a("../kit/flashCall"),g=a("../kit/qiyiPlayer"),h=a("../kit/anim"),i=new Q.ic.InfoCenter({moduleName:"view/newSignWheel"}),j=a("../action/tip"),k=a("../action/floaterListener"),l=a("../kit/userInfo"),m=Q.plugins.clearSwf;c.exports=Q.Class("newSignWheelView",{construct:function(a){a=a||{},this._ctrl=a.ctrl,this.init(a)},properties:{doms:null,isSignIn:!1,allowClick:!0,isWheelShow:!0,isPanelShow:!1,wheelHeight:0,jumpToTip:null,hiddenPanelTimer:null,insertTimeout:null,insertFlashComplete:!1},methods:{insertFlash:function(a){Q.flash.insert(a,{id:"swf_wheel",container:this.doms.wheelInnerWrap,width:"280px",height:"244px",params:{bgcolor:"",wMode:"transparent"}}),this.insertFlashComplete=!0},init:function(a){this.doms=a.doms,a.doms.tips&&(a.doms.tipCloseBtn=a.doms.tips.down("*[data-signWheel-tipCloseelem]")),this.doms.loginBtn=Q.$("*[data-signWheel-loginelem=login]"),this.wheelHeight=this.doms.wheelWrap[0].style.height;var b=this;if(this.doms.wheelWrap){var c=this.doms.wheelInnerWrap.attr("data-signWheel-url");this.insertTimeout=setTimeout(function(){b.insertFlash(c)},1e4)}this.doms.tipPoint.on("click",function(a){b._showTips(),b.hiddenPanelTimer&&window.clearTimeout(b.hiddenPanelTimer)}),this.doms.returnWheel.on("click",function(a){Q.event.get(a).preventDefault(),b._showWheel()});if(this.doms.remind){var d="http://qzs.qq.com/snsapp/app/bee/widget/open.htm#content=";d+=encodeURIComponent(this.doms.remind.attr("data-content")),d+="&advance="+encodeURIComponent(this.doms.remind.attr("data-advance")),d+="&time="+encodeURIComponent(this.doms.remind.attr("data-time")),d+="&url="+encodeURIComponent("http://i.iqiyi.com/jifen?lefttitlesign=credit"),this.doms.remind.attr("href",d)}Q.event.customEvent.on("logout",function(){b._ctrl.getSignInStatus({type:"click"}),b._restoreBtn(),b.isPanelShow&&h({elem:b.doms.wheelContainer,style:"height",from:314,to:0,duration:800}),b.isWheelShow||b._showWheel(),b.isWheelShow=!0,b.isPanelShow=!1,b.doms.returnWheel.show(),b.doms.tipPoint.show(),b.doms.signTip.hide()}),Q.event.customEvent.on("login",function(){b.doms.unsignTip&&b.doms.unsignTip.hide(),b.doms.signTip.hide(),b.doms.signBtn.un("click");if(m.get().getSignInCredits){var a=parseInt(Q.cookie.get("QC108"),10);a?(b.data={credits:a},b.data.credits!==0?b._ctrl.getSignInStatus({type:"merge"}):b._ctrl.getSignInStatus({type:"click"})):b._ctrl.getSignInStatus({type:"click"})}}),this._bindEvent(a)},_showWheel:function(){if(this.isWheelShow)return;h({elem:this.doms.slideWrap,style:"marginLeft",from:-278,to:0,duration:800}),this.isWheelShow=!0},_showTips:function(){if(!this.isWheelShow)return;h({elem:this.doms.slideWrap,style:"marginLeft",from:0,to:-278,duration:800}),this.isWheelShow=!1},_togglePanel:function(a){this.isPanelShow?h({elem:this.doms.wheelContainer,style:"height",from:314,to:0,duration:300}):(h({elem:this.doms.wheelContainer,style:"height",from:0,to:314,duration:300}),!this.isWheelShow&&a&&this._showWheel()),this.isPanelShow?(this.isPanelShow=!1,this.doms.pullBtn.removeClass("hide_arrow").addClass("show_arrow")):(this.isPanelShow=!0,this.doms.pullBtn.removeClass("show_arrow").addClass("hide_arrow"))},_showLoginBtn:function(a){if(!this.doms.loginBtn)return;a?this.doms.loginBtn[0].style.display="inline":this.doms.loginBtn[0].style.display="none"},_showPoint:function(a){this.doms.unsignTip&&this.doms.unsignTip.hide(),this.doms.signTip.show(),this.doms.pointElem.html(a),l.isLogin()?this._showLoginBtn(!1):this._showLoginBtn(!0)},_clickSignIn:function(a){Q.event.get(a).preventDefault();if(!this.allowClick)return;this.insertFlashComplete||(window.clearTimeout(this.insertTimeout),this.insertFlash(this.doms.wheelInnerWrap.attr("data-signWheel-url"))),this._showWheel(),this.doms.unsignTip&&this.doms.unsignTip.hide(),this.doms.signTip.hide(),this.doms.signBtn.html("签到中"),this.jumpToTip&&clearTimeout(this.jumpToTip),this.isPanelShow||this._togglePanel(!0),l.isLogin()&&this.doms.signBtn.un("click"),this._ctrl.doSignIn({type:"click"})},_restoreBtn:function(){this.doms.signBtn.removeClass("intet_sign_in_have").addClass("funcDown intet_sign_in"),this.doms.signBtn.html('<a href="javascript:void(0)" class="sign_in green" title="签到"><i class="int-icons int-sign-in"></i>签&nbsp;到</a>')},_setContent:function(a){this.doms.signBtn.removeClass("funcDown").removeClass("intet_sign_in").addClass("intet_sign_in_have"),a<=99?this.doms.signBtn.html("已签到"+a+"天"):this.doms.signBtn.html("已签到99+天")},_validateInfo:function(){return this.data.date.day!==(new Date).getDay()?!1:this.data.date.fullYear!==(new Date).getFullYear()?!1:this.data.date.month!==(new Date).getMonth()?!1:!0},_timeoutHidenWheel:function(a){var b=this;this.jumpToTip=setTimeout(function(){b._showTips(),b.doms.pointTipWrap.show()},a)},_timeoutHidenPanel:function(){var a=this;this.hiddenPanelTimer=setTimeout(function(){if(!a.isPanelShow)return;a._togglePanel()},1e4)},_bindEvent:function(a){var b=this;a.doms.widget.on("click",function(a){var c=a.target||a.srcElement,d=c.tagName.toLowerCase();(d==="a"||d==="i")&&b.hiddenPanelTimer&&window.clearTimeout(b.hiddenPanelTimer)}),a.doms.tipCloseBtn&&a.doms.tipCloseBtn.on("click",function(a){a=Q.event.get(a),a.stop();var c=Q.$(a.currentTarget||a.target),d=c.parentNode,e=Q.$(c).parent("div");e.hide(),b.isPanelShow&&e.attr("data-signwheel-tipelem")==="sign"&&b._togglePanel()}),a.doms.pullBtn.on("click",function(a){Q.event.get(a).preventDefault(),b.insertFlashComplete||(window.clearTimeout(b.insertTimeout),b.insertFlash(b.doms.wheelInnerWrap.attr("data-signWheel-url"))),b._togglePanel()}),this._ctrl.on("getStatusEnd",function(c){if(c.data.type!=="click"&&c.data.type!=="merge")return;if(c.data.info&&c.data.info.signable===1&&c.data.type==="merge"){b._ctrl.doSignIn({credit_custom:b.data.credits,type:"merge"}),Q.cookie.remove("QC108");return}if(!c.data.info||c.data.info.signable===1){b.isSignIn=!1;if(!a.doms.wheelInnerWrap){i.warn("flash wheel not load");return}f({flashID:"swf_wheel",functionName:"initSignRotator",parameter:c.data.info}),b.doms.unsignTip&&b.doms.unsignTip.show(),a.doms.signBtn.on("click",b._clickSignIn.bind(b)),b.doms.returnWheel.show(),b.doms.tipPoint.show()}else if(c.data.info.signable===0){b.isSignIn=!0;if(!b.doms.wheelInnerWrap)return;f({flashID:"swf_wheel",functionName:"initSignRotator",parameter:c.data.info}),i.debug("js call flash__initSignRotator"),c.data.info.continous&&(b._setContent(c.data.info.continous),b._showTips(),b.doms.signTip.hide())}}),this._ctrl.on("signInEnd",function(a){if(a.data.type==="click"){f({flashID:"swf_wheel",functionName:"startSignRotator",parameter:a.data.info}),b.allowClick=!1,i.debug("js call flash__startSignRotator");return}a.data.type==="merge"&&b._setContent(a.data.info.continous)}),Q.event.customEvent.on("flashplayer_getSignCredits",function(a){i.debug("flash call js__getSignCredits");var c=b.doms.pointTipWrap.attr("data-signWheel-changeTimeParam");b.allowClick=!0,a.data&&(a.data.type==="random"?(b._showPoint(a.data.creditHit),Q.cookie.set("QC108",a.data.creditHit),b._restoreBtn(),b._timeoutHidenWheel(c),b._timeoutHidenPanel()):(b._setContent(a.data.continous),b._showPoint(a.data.creditAdd),b._timeoutHidenWheel(c),b._timeoutHidenPanel())),setTimeout(function(){a.data.type||b._ctrl.changeCredits(a.data)},600)})}}})});
define("../../units/newQrCode",["../components/units/pageJob","../components/action/checkDoms","../kit/anim"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/anim"),g="pullQrCode",h=null;d.create(g,{getDependentDoms:function(){h={widget:Q.$("#data-widget-qrcode")}},check:function(){return e(h),!0},_toggle:function(){var a=this;h.img[0].style.height==="0px"?(h.arrow.removeClass("audio-qr-arrow_down").addClass("audio-qr-arrow_up"),f({elem:h.img,style:"height",from:0,to:this.imgHeight,duration:300,done:function(){a.allowClick=!0}})):(h.arrow.removeClass("audio-qr-arrow_up").addClass("audio-qr-arrow_down"),f({elem:h.img,style:"height",from:this.imgHeight,to:0,duration:300,done:function(){a.allowClick=!0}}))},init:function(){this.allowClick=!0;var a=this,b=!0;h.widget&&(h.btn=Q.$("#data-qrcode-btn"),h.img=Q.$("#data-qrcode-img"),h.arrow=Q.$("#data-qrcode-arrow")),this.imgHeight=146,h.img[0].style.height="0px",h.btn.on("click",function(){if(!a.allowClick)return!1;a.allowClick=!1,a._toggle()})}}),c.exports=g});
define("../../units/hao123PlayHistory",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../kit/iframeRequest"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/qiyiPlayer").getPlayer("video"),g=a("../kit/iframeRequest"),h="hao123PlayHistory",i="http://www.hao123.com/api/third_playrecord",j={};d.create(h,{getDependentDoms:function(){return j={widget:Q.$("#hao123PhTrigger")},j},check:function(a){return e(a),!0},init:function(){},sendPlayHistory:function(a){var b=this.getUrl(a);this.ifr.request(i,b)},exec:function(){if(!j.widget)return;var a=this,b=document.referrer,c="hao123.com";if(b.indexOf(c)<0)return;this.ifr=new g,f.getVideoInfo(function(b){var c={data:b};a.sendPlayHistory(c)}),f.on("videoChanged",function(b){a.sendPlayHistory(b)})},getUrl:function(a){a=a.data;var b={title:"an",year:"ty",season:"season",finish:"pd"},c={};for(var d in b)c[d]=a[b[d]]||"";return c.from="iqiyi",c}}),c.exports=h});
define("../../units/changeHash",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/qiyiPlayer").getPlayer("video"),g="changeHash";d.create(g,{check:function(){return!0},init:function(){f.on("videoChanged",function(a){var b=Q.url.queryToJson(location.hash.slice(1));b.curid=a.data.tvid+"_"+a.data.vid,location.hash=Q.url.jsonToQuery(b,function(a){return a})})}}),c.exports=g});
define("../../units/downHotChat",["../components/units/pageJob","../interfaces/chatPeopleCount","../kit/qiyiPlayer","../kit/getWebEventID"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../interfaces/chatPeopleCount"),f=a("../kit/qiyiPlayer"),g=a("../kit/getWebEventID"),h="downHotChat",i=null;d.create(h,{getDependentDoms:function(){i={wrap:Q.$("#data-widget-hotChat"),desc:Q.$("#data-hotChat-desc"),dBtn:Q.$("#data-hotChat-download")}},check:function(a){for(var b in a)if(!a[b])return!1;return!0},_pingbackDownCount:function(){},init:function(){var a="http://msg.iqiyi.com/b?t=5&a=pagehotchatdwnldclk&pf=1&p=10&p1=101&c1=",b=f.getPlayer("video"),c,d,h;b.getVideoInfo(function(a){c=Q.$("*[data-widget-qitancomment]").attr("data-qitancomment-qitanid")||"0",d=a.tvid,h=a.c,(new e).request({tvid:d.toString(),aid:c.toString()},function(a){if(a.code=="A00000"){var b=parseInt(a.data,10);b>=20?i.desc[0].innerHTML="热聊扫一扫 与"+b+"人边看边聊":i.desc[0].innerHTML="热聊扫一扫 立即加入语音聊天"}else i.desc[0].innerHTML="热聊扫一扫 立即加入语音聊天"})}),g(function(a){i.dBtn.on("click",function(){var b=Q.cookie.get("P00003"),c={t:5,a:"pagehotchatdwnldclk",pf:1,p:10,p1:101,c1:h,s1:1,s2:1,s3:window.location.href,e:Q.crypto.md5((+(new Date)).toString()),se:a,u:Q.cookie.get("QC005"),rn:+(new Date)};b&&(c.pu=b),Q.log.server(c,"http://msg.iqiyi.com/b")})})}}),d.add(h)});
define("../../interfaces/chatPeopleCount",["../kit/remoteInterface"],function(a,b,c){var d=a("../kit/remoteInterface");c.exports=Q.Class("chatPeopleCount",{construct:function(a){var b="http://api.t.iqiyi.com/qx_api/chat/get_room_mem_count";this._remoteInterface=new d({chatPeopleCount:{url:b,struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{request:function(a,b){a=a||{},a.qitancallback="funsucc",a.cb="funsucc",this._remoteInterface.send({ifname:"chatPeopleCount",param:a},function(a){b&&b(a)})}}})});
define("../../units/ipadAdResource",["../components/units/pageJob","../components/action/checkDoms"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f="ipadAdResource";d.create(f,{getDependentDoms:function(){var a=Q.$('*[data-widget-ipadadresource="pad"]'),b=a.down("*[data-ipadadresource-elem=container]"),c;return Q.browser.android?c=a.down("[data-ipadadresource-tpl=android]"):Q.browser.iPad?c=a.down("[data-ipadadresource-tpl=ipad]"):Q.browser.iPhone&&(c=a.down("[data-ipadadresource-tpl=iphone]")),{resources:c,widget:a,container:b}},check:function(a){return e(a),!0},exec:function(){var a=this.getDependentDoms();if(!a.resources)return;var b=a.widget.attr("data-ipadadresource-interval")||5e3;a.container.css("display",""),a.container.html(a.resources.value());var c=a.container.down('[data-ipadadresource-elem="ad"]'),d=c.length;if(!d)return;if(d>1){var e=1;setInterval(function(){c.hide(),e%=d,Q.$(c[e]).show(),e++},b)}}}),c.exports=f});
define("../../units/playAutoNextArrayList",["../components/units/pageJob","../kit/qiyiPlayer","../action/playListArray","../kit/userInfo"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/qiyiPlayer"),f=a("../action/playListArray"),g=a("../kit/userInfo"),h=new Q.ic.InfoCenter({moduleName:"playAutoNextArrayList"}),i="playAutoNextArrayList";d.create(i,{getDependentDoms:function(){},check:function(){return!0},init:function(){this.doPlayArrayListDataHander=this.doPlayArrayListData.bind(this),Q.event.customEvent.on("playArrayListData",this.doPlayArrayListDataHander)},exec:function(){var a=e.getPlayer("video"),b=this;a.on("Stoped",function(){a.getVideoInfo(function(a){try{var c=a.c,d=a.sid;if(c==7||c==10||c==16||c==5||c==13||c==17&&!d||c==21&&!d||c==20||c==22||c==24){var e=b.qiyuData,i=f.getNextInfo()||{aid:"",cId:""};Q.log.server({type:"recctplay20121226",usract:"ctplay",ppuid:g.getUid(),uid:Q.cookie.get("QC006"),aid:a.aid,event_id:e.event_id,cid:c,bkt:e.bkt,area:e.area,rank:f.getFocus(),url:"",tag:e.tag||"",t:(new Date).getTime(),platform:"31",taid:i.aid,tcid:i.cid},"http://msg.video.qiyi.com/tmpstats.gif")}}catch(j){h.error("play next pingback error message: "+j.message)}}),f.next()})},destroy:function(){Q.event.customEvent.un("playArrayListData",this.doPlayArrayListDataHander)},doPlayArrayListData:function(a){var b=a.data.attributes;this.qiyuData=b,f.setQiyuInfo(b)}}),c.exports=i});
define("../../action/playListArray",["../kit/qiyiPlayer","../kit/page"],function(a,b,c){var d=a("../kit/qiyiPlayer"),e=a("../kit/page");c.exports=Q.Class("PlayListArray",{construct:function(){},statics:{_list:[],_focus:0,_info:{},init:function(){this._list=[],this._focus=0},setList:function(a){this._list=a},getList:function(){return this._list},setQiyuInfo:function(a){this._info=a},getQiyuInfo:function(){return this._info},addBeforeList:function(a){this._list=a.concat(this._list)},addAfterList:function(a){this._list=this._list.concat(a)},initFocus:function(){var a=this,b=d.getPlayer("video");b.getPlayInfo(function(b){b.vid&&b.tvid&&a._list.some(function(c,d){if(c.tvId==b.tvid&&c.vid==b.vid)return a._focus=d,!0})})},getFocus:function(){return this._focus},has:function(a){var b,c=this._focus;return a=="next"?b=this._list[c+1]:a=="prev"&&(b=this._list[c-1]),!!b},prev:function(){var a=this._focus,b=this._list[a-1];b&&(this._focus--,this._play(b));return},next:function(){var a=this._focus,b=this._list[a+1];b&&(this._focus++,this._play(b));return},_play:function(a){if(a&&a.tvId&&a.vid){var b=d.getPlayer("video");b.load({tvId:a.tvId,vid:a.vid});try{var c=e.getCurrent(),f=c.getUrl();f=f.replace(/tvid=\d+/i,"tvid="+a.tvId).replace(/vid=\w{32}/i,"vid="+a.vid),c.replaceUrl(f)}catch(g){}}},getNextInfo:function(){return this._list[this._focus+1]},getPrevInfo:function(){return this._list[this._focus-1]},getInfo:function(){return this._list[this._focus]}}})});
define("../../units/playPrevNextArrayList",["../components/units/pageJob","../components/action/checkDoms","../action/playListArray","../config/playnextConfig","../kit/qiyiPlayer","../kit/userInfo"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../action/playListArray"),g=a("../config/playnextConfig"),h=a("../kit/qiyiPlayer"),i=a("../kit/userInfo"),j=new Q.ic.InfoCenter({moduleName:"playPrevNextArrayList"}),k=function(){var a=this.getDependentDoms();this.player.getVideoInfo(function(b){var c=g.vrslist.concat(g.qiyu,g.all,g.special);c.forEach(function(c){if(!Q.browser.iPad&&b.c==c&&!p){var d=f.has("next");d?a.next.show():a.next.hide(),d=f.has("prev"),d?a.prev.show():a.prev.hide()}})})},l=function(a){j.log("playArrayListData  "+JSON.stringify(a)),a.data&&(f.init(),a.data.index===0?f.addBeforeList(a.data.list):a.data.index==-1&&f.addAfterList(a.data.list),f.initFocus(),n())},m="playPrevNextArrayList",n,o,p;d.create(m,{getDependentDoms:function(){return{prev:Q.$("[data-elem=pre]"),next:Q.$("[data-elem=back]")}},check:function(a){return!0},init:function(){o=l.bind(this),Q.event.customEvent.on("playArrayListData",o),this.lvyouHandler=function(){p=!0},Q.event.customEvent.on("lvyou-juji",this.lvyouHandler)},exec:function(){var a=this,b=this.getDependentDoms();this.player=h.getPlayer("video"),f.init(),b.next&&b.next.on("click",function(b){Q.event.get(b).preventDefault(),a.player.getVideoInfo(function(a){!Q.browser.iPad&&!p&&(Q.event.customEvent.fire({type:"pingbackUsrAct",data:{usract:"nxt"}}),f.next());var b=g.vrslist.concat(g.qiyu,g.all,g.special);b.forEach(function(b){if(!Q.browser.iPad&&a.c==b&&!p){if(a.c===21&&a.sid)return!1;var c=f.getNextInfo(),d=f.getQiyuInfo();Q.log.server({type:"recctplay20121226",usract:"userclick",ppuid:i.getUid(),uid:Q.cookie.get("QC006"),aid:a.aid,event_id:d.event_id,cid:a.c,bkt:d.bkt,area:d.area,rank:f.getFocus()+1,url:"",tag:d.tag||"",t:(new Date).getTime(),platform:"31",taid:c.aid,tcid:c.cid},"http://msg.video.qiyi.com/tmpstats.gif")}})})}),b.prev&&b.prev.on("click",function(b){Q.event.get(b).preventDefault(),a.player.getVideoInfo(function(a){!Q.browser.iPad&&!p&&(Q.event.customEvent.fire({type:"pingbackUsrAct",data:{usract:"lst"}}),f.prev());var b=g.vrslist.concat(g.qiyu,g.all,g.special);b.forEach(function(b){if(!Q.browser.iPad&&a.c==b&&!p){if(a.c===21&&a.sid)return!1;var c=f.getPrevInfo(),d=f.getQiyuInfo();Q.log.server({type:"recctplay20121226",usract:"userclick",ppuid:i.getUid(),uid:Q.cookie.get("QC006"),aid:a.aid,event_id:d.event_id,cid:a.c,bkt:d.bkt,area:d.area,rank:f.getFocus()-1,url:"",tag:d.tag||"",t:(new Date).getTime(),platform:"31",taid:c.aid,tcid:c.cid},"http://msg.video.qiyi.com/tmpstats.gif")}})})}),n=k.bind(this),this.player.on("dataloaded",function(){n()}),this.player.on("videoChanged",function(){f.initFocus()})},destroy:function(){Q.event.customEvent.un("playArrayListData",o),Q.event.customEvent.un("lvyou-juji",this.lvyouHandler)}}),c.exports=m});
define("../../config/playnextConfig",[],function(a,b,c){var d={albumlist:[2,4,3,12,9],qiyu:[5,7,10,13,16,20,22],vrslist:[6,14],all:[17,21],special:[9]};c.exports=d});
define("../../units/videoAuthPlay",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../config/video"],function(a,b,c){function n(){try{var a=this.getDependentDoms(),b=a.widget,c=b.attr("data-player-albumid"),d=b.attr("data-player-tvid"),e=b.attr("data-player-videoid"),g=b.attr("data-player-ismember");if(!d||!e)return;var i=f.getPlayer("video");i.load({tvId:d,vid:e,isMember:g,albumId:c,speed:1})}catch(j){h.warn(j)}}function o(){var a=f.getPlayer("video");a.recharge()}var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/qiyiPlayer"),g=a("../config/video"),h=new Q.ic.InfoCenter({moduleName:"videoAuthPlay"}),i="videoAuthPlay",j=Q.event.customEvent,k,l,m;d.create(i,{getDependentDoms:function(){var a=Q.$("[data-widget-player=flash]");return{widget:a}},check:function(a){return e(a),!0},init:function(){if(g){m=!1,l=!1,k=n.bind(this),k(),Q.event.customEvent.on("dynamic-flash-loaded",k),j.on("login",k),j.on("logout",k);var a=f.getPlayer("video");a.on("authenticationResult",function(b){var c=b.data;c?l||(a.on("stoped",o),l=!0):(a.un("stoped",o),l=!1)})}},destroy:function(){j.un("login",k),j.un("logout",k)}}),c.exports=i});
define("../../units/videoLayerShow",["../components/units/pageJob","../components/action/checkDoms","../config/video"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../config/video"),g="videoLayerShow";d.create(g,{getDependentDoms:function(){return{layer:Q.$("[data-widget-layer=layer]"),video:Q.$("[data-player-playerbody=flash]")}},check:function(a){return e(a),!0},exec:function(){if(!f)return;var a=this.getDependentDoms();a.layer.show()}}),c.exports=g});
define("../../units/videoPlayBtn",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../config/video"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/qiyiPlayer"),g=a("../config/video"),h="videoPlayBtn",i;d.create(h,{getDependentDoms:function(){var a={btn:Q.$("[data-videoctrl-elem=playOrStop]"),video:Q.$("[data-player-playerbody=flash]")};return a},check:function(a){return e(a),!0},init:function(){if(!g)return},exec:function(){if(!g)return;var a=this.getDependentDoms(),b=f.getPlayer("video");b.on("Paused",function(b){a.btn.removeClass("ctrlwait"),a.btn.removeClass("ctrlstop"),a.btn.addClass("ctrlplay")}),b.on("Ready",function(b){i=!1,a.btn.removeClass("ctrlwait"),a.btn.removeClass("ctrlplay"),a.btn.addClass("ctrlstop")}),b.on("Play",function(b){a.btn.removeClass("ctrlwait"),a.btn.removeClass("ctrlplay"),a.btn.addClass("ctrlstop")}),b.on("Stoped",function(){a.btn.removeClass("ctrlstop"),a.btn.removeClass("ctrlplay"),a.btn.addClass("ctrlwait"),i=!0}),a.btn.on("click",function(a){Q.event.get(a).preventDefault(),b.getPlayInfo(function(a){a.currentStatus=="Playing"?b.pause():i?b.replay():b.play()})}),b.getPlayInfo(function(b){b.currentStatus=="Playing"?a.btn.addClass("stop"):a.btn.removeClass("stop")})},destroy:function(){}}),c.exports=h});
define("../../units/videoControlBarLocate",["../components/units/pageJob","../components/action/checkDoms","../config/video"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../config/video"),g="videoControlBarLocate";d.create(g,{getDependentDoms:function(){return{control_bar:Q.$("[data-widget-videoctrl=videoControl]"),player_bg:Q.$("[data-widget-player=flash]"),video:Q.$("[data-player-playerbody=flash]")}},check:function(a){return e(a),!0},exec:function(){if(!f)return;var a=this.getDependentDoms(),b=a.player_bg.attr("data-player-height"),c=a.control_bar.height();a.control_bar.css("top",b-c+"px"),a.video.css("height",b-c+"px")}}),c.exports=g});
define("../../units/mobileBigPlayBtn",["../components/units/pageJob","../kit/qiyiPlayer","../components/action/checkDoms","../config/video"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/qiyiPlayer"),f=a("../components/action/checkDoms"),g=a("../config/video"),h="mobileBigPlayBtn",i=function(){var a=this.getDependentDoms(),b=e.getPlayer("video");b.getPlayInfo(function(b){b.currentStatus=="Paused"?a.btn.removeClass("stop"):a.btn.addClass("stop")})},j;d.create(h,{getDependentDoms:function(){var a=Q.$("[data-widget-videolayer=bigPlayLayer]"),b={btn:a.down("[data-videolayer-elem=bigPlayOrStop]"),video:Q.$("[data-player-playerbody=flash]"),widget:a};return b},check:function(a){return f(a),!0},init:function(){if(!g)return;j=i.bind(this),Q.event.customEvent.on("showcontrol",j)},exec:function(){if(!g)return;var a=this.getDependentDoms(),b=e.getPlayer("video");b.on("Play",function(b){a.widget.hide()}),a.btn.on("click",function(a){Q.event.get(a).preventDefault(),b.getPlayInfo(function(a){a.currentStatus=="Playing"?b.pause():b.play()})}),b.getPlayInfo(function(b){b.currentStatus=="Playing"?a.btn.addClass("stop"):a.btn.removeClass("stop")})},destroy:function(){Q.event.customEvent.un("showcontrol",j)}}),c.exports=h});
define("../../units/fullScreen",["../components/units/pageJob","../kit/qiyiPlayer","../components/action/checkDoms","../config/video"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/qiyiPlayer"),f=a("../components/action/checkDoms"),g=a("../config/video"),h="fullScreen";d.create(h,{getDependentDoms:function(){var a=Q.$("[data-widget-videoctrl=videoControl]"),b={btn:a.down("[data-videoctrl-elem=fullScreen]")};return b},check:function(a){return f(a),!0},init:function(){if(g){var a=this.getDependentDoms(),b=e.getPlayer("video");a.btn.on("click",function(a){Q.event.get(a).preventDefault(),b.switchVideoFullScreen(!0)}),a.btn.hide(),b.on("StartPlay",function(){a.btn.show()})}}}),c.exports=h});
define("../../units/videoExpand",["../components/units/pageJob","../kit/qiyiPlayer","../components/action/checkDoms","../config/video"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/qiyiPlayer"),f=a("../components/action/checkDoms"),g=a("../config/video"),h="videoExpand",i=Q.event.customEvent;d.create(h,{getDependentDoms:function(){var a=Q.$("[data-widget-videoctrl=videoControl]"),b={contr:Q.$("[data-widget-controlls=controlls]"),btn:a.down("[data-videoctrl-elem=expand]"),btnP:a.down("[data-widget-expand=expand]"),video_layer:Q.$("[data-widget-player=flash]"),video:Q.$("[data-player-playerbody=flash]")};return b},check:function(a){return!0},init:function(){if(!g)return;var a=this.getDependentDoms(),b=e.getPlayer("video"),c=this,d=a.video_layer.attr("data-player-expandstate");d=="true"?c.expand():c.shrink(),b.on("expand",function(a){a.data.value=="false"?c.shrink():c.expand()}),b.on("authenticationResult",function(d){if(d.data)a.btn.hide(),c.progressAdjust();else{var e=a.video_layer.attr("data-player-expandstate");b.fire({type:"expand",data:{value:e}}),c.expand(),a.btn.show()}}),b.on("dataloaded",function(){a.btn.show()}),a.btn.on("click",function(d){Q.event.get(d).stop();var e=a.btn.attr("data-videoctrl-expandstate");e=="true"?c.shrink():c.expand(),b.fire({type:"expand",data:{value:a.btn.attr("data-videoctrl-expandstate")}}),i.fire({type:"progress-adjust"})})},progressAdjust:function(){var a=this.getDependentDoms();a.btnP.hide(),a.contr.addClass("no_ctrlOpen")},shrink:function(){var a=this.getDependentDoms();a.btn.attr("data-videoctrl-expandstate","false"),a.btn.removeClass("ctrlClose"),a.btn.addClass("ctrlOpen")},expand:function(){var a=this.getDependentDoms();a.btn.attr("data-videoctrl-expandstate","true"),a.btn.removeClass("ctrlOpen"),a.btn.addClass("ctrlClose")}}),c.exports=h});
define("../../units/videoProgress",["../components/units/pageJob","../kit/qiyiPlayer","../components/action/checkDoms","../action/customProgress","../config/video"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../kit/qiyiPlayer"),f=a("../components/action/checkDoms"),g=a("../action/customProgress"),h=new Q.ic.InfoCenter({moduleName:"VideoProgress"}),i=a("../config/video"),j=Q.date.formatSeconds,k=Q.event.customEvent,l,m="videoProgress";d.create(m,{getDependentDoms:function(){var a=Q.$("[data-widget-videoctrl=videoControl]"),b={widget:a,duration:a.down("[data-videoctrl-elem=progressBar]"),played:a.down("[data-videoctrl-elem=progress]"),btn:a.down("[data-videoctrl-elem=progressFocus]"),current_time:a.down("[data-videoctrl-elem=currentTime]"),total_time:a.down("[data-videoctrl-elem=totalTime]"),video:Q.$("[data-player-playerbody=flash]")};return b},check:function(a){return f(a),!0},init:function(){if(!i)return;var a=this.getDependentDoms(),b=e.getPlayer("video"),c=new g({doms:a});b.on("StartPlay",function(d){c.init(),l=function(){b.getPlayInfo(function(b){(b.currentStatus=="Paused"||b.currentStatus=="Stoped")&&!dragging&&(total=parseInt(b.totalDuration),btnWidth=halfBtnWidth,durationWidth=Q.$(a.duration).width(),barWidth=durationWidth-btnWidth,unit=barWidth/total,current=parseInt(b.currentTime),a.played.css("width",parseInt(unit*current)+halfBtnWidth+"px"),a.current_time.html(j(current)))})},k.on("progress-adjust",l)})},destroy:function(){k.un("progress-adjust",l)}}),c.exports=m});
define("../../action/customProgress",["../components/action/widget","../components/model/widgetModel","../view/customProgressView","../kit/qiyiPlayer"],function(a,b,c){var d=a("../components/action/widget"),e=a("../components/model/widgetModel"),f=a("../view/customProgressView"),g=a("../kit/qiyiPlayer");c.exports=Q.Class("CustomProgress",{extend:d,construct:function(a){a=a||{},a.model=a.model||new e,a.view=a.view||new f(a),this.callsuper(a)},methods:{init:function(){this.getPlayInfo()},getPlayInfo:function(){var a=this,b=g.getPlayer("video");b.getPlayInfo(function(b){a._model.set(b),a._view.update(b)})}}})});
define("../../view/customProgressView",["../components/view/widgetView","../kit/qiyiPlayer"],function(a,b,c){var d=a("../components/view/widgetView"),e=a("../kit/qiyiPlayer"),f=Q.date.formatSeconds,g=new Q.ic.InfoCenter({moduleName:"CustomProgressView"}),h;c.exports=Q.Class("CustomProgressView",{extend:d,construct:function(a){this.callsuper(a),this.V=600,this.U=Date.now(),this._doms=a.doms,this._progress=this._doms.widget,this._seek=this._doms.duration,this._played=this._doms.played,this._seekHandle=this._doms.btn,this._current=this._doms.current_time,this._total=this._doms.total_time},methods:{update:function(a){this.c=a.currentTime,this.totalTime=a.totalDuration?a.totalDuration:0,g.log("this.c "+this.c),g.log("totalTime "+this.totalTime),this._current.html(f(parseInt(this.c))),this._total.html(this.totalTime?f(parseInt(this.totalTime)):"00:00"),this._removeEvent(),this._bindEvent()},_bindEvent:function(){h=e.getPlayer("video"),this.setProgess_binded=this.setProgress.bind(this),this.seek_binded=this.seek.bind(this),this.onTimeupdate_binded=this.onTimeupdate.bind(this),this.ontouchStart_binded=this.ontouchStart.bind(this),h.on("playing",this.onTimeupdate_binded),this._seek.on("click",this.seek_binded),this._seekHandle.on("touchstart",this.ontouchStart_binded)},_removeEvent:function(){h=e.getPlayer("video"),h.un("playing",this.onTimeupdate_binded),this._seek.un("click",this.seek_binded),this._seekHandle.un("touchstart",this.ontouchStart_binded)},onTimeupdate:function(){if(this.isTouching)return;4==h._player.readyState&&this.setProgress(h._player.currentTime)},setProgress:function(a){var b=h._player.currentTime;this.totalTime=h._player.duration,isNaN(b)&&(b=0);if(h._player.readyState==4){b=Math.min(Math.max(b,0),this.totalTime);var c=Math.min(Math.max(a,0),this.totalTime),d=c/this.totalTime,e=this._seek.width(),i=this._seekHandle.width();g.log("currentTime "+b+"-- width"+Math.min(100*(d+i/e/2),100)+"%"),this._played.css("width",parseInt(Math.min(100*(d+i/e/2),100))+"%"),this._current.html(f(parseInt(b))),this._total.html(this.totalTime?f(parseInt(this.totalTime)):"00:00")}},seek:function(a){a.preventDefault();var b=a.srcElement;this.totalTime=h._player.duration;var c=(new Date).getTime()-this.U;if(b==this._seekHandle||c<this.V)return!0;var d=a.offsetX||a.changedTouches[0].clientX-this._seek[0].clientX,e=d/this._seek[0].offsetWidth,f=e*this.totalTime;this.setProgress(Math.min(Math.max(f,0),this.totalTime)),h.seek(f)},ontouchStart:function(a){if(1!=a.targetTouches.length||this.isTouching)return!1;this.startX=a.targetTouches[0].clientX,a.preventDefault(),this.isTouching=!0,this.startTime=this._currentTime=h._player.currentTime||0,this.ontouchMove_binded=this.ontouchMove.bind(this),this.ontouchEnd_binded=this.ontouchEnd.bind(this),this._seek.on("touchmove",this.ontouchMove_binded),this._seek.on("touchend",this.ontouchEnd_binded)},ontouchMove:function(a){return 1!=a.targetTouches.length?!1:(a.preventDefault(),a.stopPropagation(),this.totalTime=h._player.duration,this._currentTime=this.startTime+(a.targetTouches[0].clientX-this.startX)/this._seek.width()*this.totalTime,g.log("ontouchMove"+this._currentTime),this.setProgress(Math.min(Math.max(this._currentTime,0),this.totalTime)),this._current.html(f(parseInt(Math.min(Math.max(this._currentTime,0),this.totalTime)))),!1)},ontouchEnd:function(a){return this.isTouching=!1,1<a.changedTouches.length?!1:(a.preventDefault(),a.stopPropagation(),this._seek.un("touchmove",this.ontouchMove_binded),this._seek.un("touchend",this.ontouchEnd_binded),h.seek(Math.min(Math.max(this._currentTime,0))),!1)}}})});
define("../../units/pingbackVV",["../components/units/pageJob","../kit/qiyiPlayer","../kit/videoEventId","../kit/weid","../kit/uid","../kit/userInfo","../kit/storage","../kit/page","../components/model/html5VVModel","../components/action/html5VV","../components/view/html5VVView","../interfaces/uidInterface","../config/video"],function(a,b,c){function s(){var a=k.getCurrent()?k.getCurrent().getUrl():location.href;return Q.url.getQueryValue(a,"cnid")==23}var d=a("../components/units/pageJob"),e=a("../kit/qiyiPlayer"),f=a("../kit/videoEventId"),g=a("../kit/weid"),h=a("../kit/uid"),i=a("../kit/userInfo"),j=a("../kit/storage"),k=a("../kit/page"),l=a("../components/model/html5VVModel"),m=a("../components/action/html5VV"),n=a("../components/view/html5VVView"),o=a("../interfaces/uidInterface"),p=new Q.ic.InfoCenter({moduleName:"pingbackVV"}),q=a("../config/video"),r,t=function(a){var b=this.getDependentDoms();g.get(function(c){r&&r.destroy(),r=new m({model:new l({aid:a.aid,vid:a.vid,tvid:a.tvid,puid:i.getUid(),veid:f.get(),weid:c,newusr:h.getnewusr()?1:0,cid:a.c,lev:j.read(s()?"QIPAQVD":"QVD")||"1",tn:Date.now()+Math.random(),msrc:Q.cookie.get("QC015")||"",pla:function(){var a="3";return Q.browser.iPad&&(a="2"),a+="1",a}()}),view:new n({doms:b})})})},u="pingbackVV",v,w;d.create(u,{getDependentDoms:function(){var a={player:Q.$("#flash")};return a},check:function(a){return!0},init:function(){if(!q)return;f.init()},exec:function(){if(!q)return;var a=this;v=e.getPlayer("video"),w=t.bind(this),v.on("StartPlay",function(){var a=new o({});a.request(function(a){f.set(a.uid),v.getVideoInfo(function(a){w(a)})})})},destroy:function(){v.destroy(),v=null,Player.destroy(),f.destroy(),r&&r.destroy()}}),c.exports=u});
define("../../kit/videoEventId",["../kit/qiyiPlayer","../interfaces/uidInterface"],function(a,b,c){var d=a("../kit/qiyiPlayer"),e=a("../interfaces/uidInterface"),f,g=new Q.ic.InfoCenter({moduleName:"videoeventId"});c.exports={_veid:"",init:function(){var a=this;f=d.getPlayer("video"),f.on("Stoped",function(){a._veid=""})},set:function(a){this._veid=a},get:function(){return this._veid},destroy:function(){veid=null,f.destroy(),f=null,Player.destroy()}}});
define("../../kit/weid",["./uuid"],function(a,b,c){var d=a("./uuid"),e;c.exports={get:function(a){if(e){a(e);return}this.gen(a)},gen:function(a){d.get(function(b){e=b,a(e)})},destroy:function(){e=null}}});
define("../../kit/uid",["../components/action/nonMVCWidget","../kit/page","../interfaces/uidInterface"],function(a,b,c){var d=a("../components/action/nonMVCWidget"),e=a("../kit/page"),f=a("../interfaces/uidInterface");c.exports={newsur:!1,get:function(a){var b=Q.cookie.get("QC006");if(b){a(b);return}this.newsur=!0;var c=new f({});c.request(function(b){Q.cookie.set("QC006",b.uid,{expires:31536e6}),a(b.uid)})},getnewusr:function(){if(this.newsur)return this.newsur;if(Q.cookie.get("QC006"))return!1;return!0;var a}}});
define("../../components/model/html5VVModel",["./model","./getUidModel","../../kit/uid"],function(a,b,c){var d=a("./model"),e=a("./getUidModel"),f=a("../../kit/uid"),g=Q.Class("Html5VVModel",{ns:"Q.model",extend:d,construct:function(a){this.callsuper(),this._data.url="http://msg.video.qiyi.com/vpb.gif",this._data.first=!0,this._data.data=Q.object.extend({flag:"plyract",plyract:"start",purl:function(a){return a.protocol+"//"+a.host+a.pathname}(window.location)},a),this.getUid=new e},properties:{},methods:{init:function(){this.reInit()},reInit:function(a){this._data.first=!0,this._data.tiktok=0,this._data.loadTimes=0,a&&Q.object.extend(this._data.data,a)},set:function(a,b){var c=this;f.get(function(d){Q.object.extend(c._data.data,a);if(c._data.first)c._data.first=!1,c._data.data.suid=d,b(c._data);else if(c._data.data.plyract=="stop")b(c._data);else{c._data.tiktok++;switch(c._data.loadTimes){case 0:c._data.tiktok==15&&(c._data.loadTimes++,b(c._data),c._data.tiktok=0);case 1:c._data.tiktok==60&&(c._data.loadTimes++,b(c._data),c._data.tiktok=0);break;case 2:c._data.tiktok==120&&(b(c._data),c._data.tiktok=0)}}})}}});c.exports=g});
define("../../components/model/getUidModel",["./asyncModel"],function(a,b,c){var d=a("./asyncModel"),e=Q.Class("GetUidModel",{ns:"Q.model",extend:d,construct:function(a){this.callsuper(),this._opt=a||{},this._url="http://data.video.qiyi.com/uid",this._param={varname:"uid"},this.cookieFlag="QC006"},methods:{get:function(a,b){var c={},d=this,e=Q.cookie.get(this.cookieFlag);if(e){b(e);return}Q.object.extend(c,this._param),Q.object.extend(c,a),this.callsuper("get",c,function(a){a?e=a.uid:e=Q.crypto.md5(+(new Date)+Math.round(Math.random()*2147483647)+""),Q.cookie.set(d.cookieFlag,e,{duration:31536e6,path:"/",domain:"iqiyi.com"}),b(e);return})}}});c.exports=e});
define("../../components/model/asyncModel",["./model"],function(a,b,c){var d=a("./model");c.exports=Q.Class("AsyncModel",{ns:"Q.model",extend:d,construct:function(a){this.callsuper(),this._url=a},methods:{get:function(a,b){var c={onsuccess:function(a,c){b(c)},onfailure:function(){b(!1)},data:a,timeout:a.timeout||3e4};Q.http.json(this._url,c)},set:function(a){}}})});
define("../../components/action/html5VV",["./widget"],function(a,b,c){var d=a("./widget"),e=Q.Class("Html5VV",{ns:"Q.action",extend:d,construct:function(a){this.callsuper(a),this.asyncSet({plyract:"start"})},properties:{timer:0},methods:{init:function(a){clearTimeout(this.timer),this._model.reInit(a)},start:function(a){var b=this,c=Q.event.get(a).target;this.timer=window.setInterval(function(){if(c.ended||c.paused){window.clearInterval(b.timer),b._view.onStartEvt();return}b.asyncSet({plyract:"timing"})},1e3),b._view.unStartEvt()},close:function(a){this.asyncSet({plyract:"stop"})},destroy:function(){this.timer&&window.clearInterval(this.timer),this._view.destroy()}}});c.exports=e});
define("../../components/view/html5VVView",["./widgetView"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"Html5VVView"}),e=a("./widgetView"),f=function(){this._ctrl.close();var a=this.player;a.un("ended",g)},g;c.exports=Q.Class("Html5VVView",{ns:"Q.view",extend:e,construct:function(a){this.callsuper(a),this.opt=a||{}},methods:{init:function(a){this.callsuper("init",a),this.player=this._doms.player,this.initEvent()},initEvent:function(){var a=this.player;this.ctrlStart=this._ctrl.start.bind(this._ctrl),g=f.bind(this),a&&a[0].play&&(this.onStartEvt(),a.on("ended",g),Q.$(window).on("beforeunload",g))},onStartEvt:function(){var a=this.player;a.on("timeupdate",this.ctrlStart)},unStartEvt:function(){var a=this.player;a.un("timeupdate",this.ctrlStart)},update:function(a){d.log("vv, update, data: "+JSON.stringify(a)),a.first&&this.sent2comScore(),this.sendPingback(a)},sent2comScore:function(){Q.log.server({c1:"1",c2:"7290408",c3:"",c4:"",c5:"",c6:""},"http://b.scorecardresearch.com/b")},sendPingback:function(a){d.log("vv, sendPingback");var b={};Q.object.extend(b,a.data),Q.object.extend(b,{prgr:parseInt(this.player[0].currentTime,10)}),(a.data.plyract==="timing"||a.data.plyract==="stop")&&Q.object.extend(b,{tl:a.tiktok}),a.data.plyract=="start"&&Q.object.extend(b,{jltl:window.__videoready-window.__start}),d.log("vv, plyract: "+a.data.plyract),Q.log.server(b,a.url)},destroy:function(){Q.$(window).un("beforeunload",g);var a=this.player;a.un("ended",g)}}})});
define("../../units/pingbackKadunRate",["../components/units/pageJob","../kit/qiyiPlayer","../kit/uid","../kit/page","../kit/getRemoteInfo","../kit/storage","../kit/userInfo","../config/video","../components/action/checkDoms"],function(a,b,c){function r(){var a=g.getCurrent()?g.getCurrent().getUrl():location.href;return Q.url.getQueryValue(a,"cnid")==23}var d=a("../components/units/pageJob"),e=a("../kit/qiyiPlayer"),f=a("../kit/uid"),g=a("../kit/page"),h=a("../kit/getRemoteInfo"),i=a("../kit/storage"),j=a("../kit/userInfo"),k=a("../config/video"),l=a("../components/action/checkDoms"),m=e.getPlayer("video"),n,o=!0,p=!0,q="pingbackKadunRate";d.create(q,{getDependentDoms:function(){var a={player:Q.$("#flash")};return a},check:function(a){return l(a),!0},init:function(){if(!k)return;var a=this.getDependentDoms(),b="http://msg.video.qiyi.com/err.gif",c=function(){var a=3;return Q.browser.iPad&&(a=2),Q.browser.iPhone&&(a=3),a+="1",a}();h(null,function(d){var e=d.z;m.getVideoInfo(function(d){var g={flag:"error",errcode:"4015",tvid:d.tvid||"",cid:d.c||"",pla:c,z:e,lev:i.read(r()?"QIPAQVD":"QVD")||"1"},h=function(a){o&&(o=!1),n=setTimeout(function b(){if(m._player.ended||m._player.paused){clearTimeout(n),m.on("playing",h);return}n=setTimeout(b,1e3)},1e3),m.un("playing",h)},k=function(c){var d=Object.extend({},g),e=j.getUid();if(o||!p)return;f.get(function(c){d.suid=c,a.player[0].webkitDisplayingFullscreen===!1&&Q.log.server(d,b)})},l=function(a){p=!1},q=function(a){p=!0},s=function(){o=!0};m.on("playing",h),m.on("waiting",k),m.on("ready",q),m.on("userSeek",l),m.on("stoped",s)})})}}),c.exports=q});
define("../../units/padPlay",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../kit/page","../model/playhistoryModel"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../components/action/checkDoms"),f=a("../kit/qiyiPlayer"),g=a("../kit/page"),h=a("../model/playhistoryModel"),i=new Q.ic.InfoCenter({moduleName:"PadPlay"}),j="padPlay",k,l=0,m=function(a){var b=a.data;l=b.ads[0].duration},n=!1,o=!1,p=function(a){l&&(a.webkitDisplayingFullscreen?(a.webkitExitFullScreen(),a.controls=!1,n=!0):n=!1)},q=function(a){var b=a._player,c=function(){var a=Q.$("[data-videoctrl-elem=playOrStop]"),b=Q.$("[data-videoctrl-elem]");b.css("visibility","hidden"),a.css("visibility","visible")},d=function(){var a=Q.$("[data-videoctrl-elem]");a.css("visibility","visible")},e=function(){p(b)},f=function(a){var e=a.target,f=e.currentTime;f>l?(n&&(b.webkitEnterFullScreen(),n=!1),d()):(c(),e.controls=!1)};if(l){var g=Q.$("[data-widget-videoctrl=videoControl]");b.removeEventListener("ended",e),b.removeEventListener("timeupdate",f),b.addEventListener("timeupdate",f)}};d.create(j,{getDependentDoms:function(){var a={video:Q.$("#flash")};return a},check:function(a){return e(a),!0},init:function(){Q.event.customEvent.on("adloaded",m),this._playVideo()},_playVideo:function(){var a=this,b=a.getDependentDoms(),c=b.video,d=null;k=f.getPlayer("video"),k.on("webkitfullscreenchange",function(){n=k._player.webkitDisplayingFullscreen}),k.on("startGetVideoSrc",function(){l=0,o=!1}),Q.event.customEvent.on("adloaded",function(){p(k._player)}),k.on("StartPlay",function(){q(k),k.getVideoInfo(function(a){i.debug("Playing video data : "+JSON.stringify(a));var b=a.tvid,c=new h;i.debug("Begin to get playhistory."),c.getByTvId({tvId:b,onsuccess:function(a){i.debug("Success getting playhistory : "+a.videoPlayTime),i.debug("Ad time : "+l),i.log("timer : "+d),d&&clearTimeout(d);var b=function(){i.debug("Waiting for ad .."),k.getPlayInfo(function(c){i.log("playInfo : "+c.currentTime);if(c.currentTime>l){var d=parseInt(a.videoPlayTime,10)+parseInt(l,10);d>0&&(i.debug("Being to seek : "+d),k.seek(d))}else setTimeout(b,500)})};d=setTimeout(function(){b()},1e3)},onfailure:function(){i.debug("No playhistory")}})})})},destroy:function(){l=0,Q.event.customEvent.un("adloaded",m),k.destroy(),k=null}}),c.exports=j});
define("../../units/videoSlide",["../components/units/pageJob","../action/videoSlide","../kit/qiyiPlayer"],function(a,b,c){var d=a("../components/units/pageJob"),e="slideList",f=a("../action/videoSlide"),g=a("../kit/qiyiPlayer").getPlayer("video"),h={},i=Q.$('*[data-widget-videoslide="qiyu"]');d.create(e,{check:function(){return!0},init:function(a){var b=this;Q.event.customEvent.on("videoListRenderDone",function(a){b.initCompoment(a)}),Q.event.customEvent.on("videoKeyPointsRenderDone",function(a){b.initCompoment(a)}),Q.event.customEvent.on("payEndListRenderDone",function(a){b.initCompoment(a)}),g.on("expand",function(a){a=a||{},Q.$('*[data-videoscroll-elem="list"]')&&Q.$('*[data-videoscroll-elem="list"]').down("li")&&Q.$('*[data-videoscroll-elem="list"]').length?(b.initCompoment({data:{source:"qiyu",expand:a.data.value}}),i&&(i.attr("data-videoslide-expand",a.data.value),i.attr("data-videoslide-qiyudatastatus","success")),Q.event.customEvent.fire({type:"qiyuShortVideoExpand",data:{source:"qiyu",expand:a.data.value}})):(i&&(i.attr("data-videoslide-expand",a.data.value),i.attr("data-videoslide-qiyudatastatus","failed")),Q.event.customEvent.fire({type:"qiyuShortVideoExpandFailed",data:{source:"qiyu",expand:a.data.value}}))}),Q.event.customEvent.on("promotion-ad-done",function(){var a=Q.$('*[data-widget-videoslide="qiyu"]'),b=Q.$('*[data-videoslide-elem="content"]'),c=Q.$('*[data-widget-videoslidead="ad"]');c.attr("data-playlist-hasad","true"),Q.$('*[data-videoscroll-elem="list"]')&&Q.$('*[data-videoscroll-elem="list"]').down("li")&&Q.$('*[data-videoscroll-elem="list"]').length&&(Q.event.customEvent.fire({type:"qiyuShortVideoExpandAdDone",data:{source:"qiyu",expand:"true"}}),a.attr("data-videoslide-disp","4"),h.qiyu&&(h.qiyu.opt.disp=4,h.qiyu.reSet({disp:4})));var d=Q.$('*[data-promotionad-elem="content"]');c.html(d.html())})},exec:function(){var a=Q.$('*[data-widget-videoslide="qiyu"]'),b=this;a&&a.attr("data-videoslide-expand")=="true"&&(Q.event.customEvent.on("qiyu-recommend-done",function(){b.initCompoment({data:{source:"qiyu",expand:"true"}})}),Q.event.customEvent.fire({type:"qiyuShortVideoExpand",data:{source:"qiyu",expand:i.attr("data-videoslide-expand")}})),Q.event.customEvent.on("qiyu-recommend-done",function(){a&&a.attr("data-videoslide-qiyudatastatus")==="failed"&&(b.initCompoment({data:{source:"qiyu",expand:i.attr("data-videoslide-expand")}}),Q.event.customEvent.fire({type:"qiyuShortVideoExpand",data:{source:"qiyu",expand:i.attr("data-videoslide-expand")}}))})},initCompoment:function(a){var b=a.data.source,c=this;h[b]?c.adjustScroll(h[b],a):this.firstInit(b,a)},firstInit:function(a,b){var c=Q.$("*[data-widget-videoslide="+a+"]");if(!c)return;if(b.data.source==="qiyu"){if(b.data.expand!=="true"){c.hide();return}c.show()}var d=c.down("*[data-videoslide-elem=content]"),e={content:d,list:d.down("*[data-videoslide-elem=list]"),pbtn:c.down("*[data-videoslide-elem=pbtn]"),nbtn:c.down("*[data-videoslide-elem=nbtn]"),item:d.down("*[data-videoslide-elem=item]"),buttonGroup:c.down("*[data-videoslide-buttongroup=group]")},g=c.attr("data-videoslide-finger")?!0:!1;e.itemcontainer=c.down('*[data-videoslide-elem="itemcontainer"]');if(!e.item){e.buttonGroup&&e.buttonGroup.hide();return}var i=c.attr("data-videoslide-itemwidth"),j=c.attr("data-videoslide-defaultoffset")==1?!0:!1;this.displayNum=c.attr("data-videoslide-disp");var k=c.css("display");c.show();var l=new f({autoPlayNext:!1,doms:e,useDefaultOffset:j,lBtnClass:c.attr("data-disablePrev-btnClas")||"page_pre_no",rBtnClass:c.attr("data-disableNext-btnClas")||"page_next_no",disp:this.displayNum,supportFinger:g,enableTouch:!1,itemWidth:i,enableScroll:!0});k=="none"&&c.css("display",k),l.init(),h[a]=l,l.resetSlideButtonStatus(b),l.initFocus(e.itemcontainer)},adjustScroll:function(a,b){var c=Q.$("*[data-widget-videoslide="+b.data.source+"]");if(b.data.source==="qiyu"){if(b.data.expand!=="true"){c.hide();return}c.show()}var d=c&&c.css("display");d=="none"&&c.show(),a.reInit(b),a.resetSlideButtonStatus(b),d=="none"&&c.css("display",d)}}),c.exports=e});
define("../../action/videoSlide",["./slide","../kit/qiyiPlayer","../kit/iframeLocation"],function(a,b,c){var d=a("./slide"),e=a("../kit/qiyiPlayer"),f=a("../kit/iframeLocation");c.exports=Q.Class("VideoSlide",{extend:d,construct:function(a){this.callsuper(a),this.opt=a,this.preLoadNum=a.preLoadNum||15},properties:{events:{next:function(){this.moveIt("next")},prev:function(){this.moveIt("prev")}}},methods:{init:function(){this._bindEvent(),this.nextData=!0,this.BeforeData=!0},moveIt:function(a){var b=this._model,c=b.get();a=="next"?(this.preloadNext(c),b._data.canMoveNext&&this.next()):a=="prev"&&(this.preloadPrev(c),b._data.canMovePrev&&this.prev())},preloadPrev:function(a){a.first<=this.preLoadNum&&this.BeforeData&&this.fetchData("prev")},preloadNext:function(a){a.first>=a.total-this.preLoadNum&&this.nextData&&this.fetchData("next")},reInit:function(a){var b=this._view._doms.content,c=b.down("[data-videoslide-elem=item]"),d=this._view,e=this._model;if(!c)return;this._view._doms.list.show(),d._doms.item=c,e.set({disp:this.opt.disp,total:c.length}),a.data.sign=="prev"&&(e.setFirst(e.get().first+a.data.insertNum+1),d._curr=d._curr+a.data.insertNum),this._model.setFirst(e.get().first),d._setBtnStatic(e.get()),d.initView(e.get())},fetchData:function(a){Q.event.customEvent.fire({type:"getRederVideoList",data:{sign:a}})},setNextData:function(a){this.nextData=a},setBeforeData:function(a){this.BeforeData=a},resetSlideButtonStatus:function(a){var b=a.data.after||!1,c=a.data.before||!1;this.setNextData(b),this.setBeforeData(c),this.setButtonGroupStatus()},setButtonGroupStatus:function(){if(!this._view._doms.buttonGroup)return;var a=this._model.get();this._view._setBtnStatic(a),a.total>parseInt(a.disp,10)?this._view._doms.buttonGroup.show():this._view._doms.buttonGroup.hide()},_clickVideo:function(a){if(f.check())return;var b=Q.$(a.target);a=Q.event.get(a.event),a.preventDefault();var c=b.attr("data-seq"),d=this._view._doms.content.down("*[data-widget-qiyuhookup='list']");d&&d.attr("data-qiyuhookup-currentindex",c),this.focus(c)},focusTo:function(a){this.focus(a),this._model.move(),this.redraw()},videoChangeFocus:function(a){var b=this;this._view._doms.item&&this._view._doms.item.forEach(function(c,d){var e=Q.$(c);e.attr("data-videolist-tvid")==a&&b.focusTo(d+1)})},_bindEvent:function(){this._view._doms.content.delegate("videoPlayList",this._clickVideo.bind(this)),this._view._doms.content.delegate("j-videoKeyPoints",this._clickVideo.bind(this));var a=this;e.getPlayer("video").on("videoChanged",function(b){var c=b.data.tvid;a.videoChangeFocus(c)}),this.opt.supportFinger&&this.fingerEvent();var b="";Q.event.customEvent.on("clickShortCutBtn",function(c){if(c.data.sign=="show"){var d=a._view._doms.content.down("*[data-widget-videokeypoints]");b=a._view._doms.buttonGroup.css("display"),d||a._view._doms.buttonGroup.hide()}c.data.sign=="hide"&&a._view._doms.buttonGroup.css("display",b)})},fingerEvent:function(){var a=this;this._view._doms.list.on("touchmove",function(a){a.preventDefault()});var b=0,c=0,d=0,e=0,f=function(a){b=a.targetTouches[0].pageX,c=a.targetTouches[0].pageY},g=function(c){d=c.changedTouches[0].pageX,e=c.changedTouches[0].pageY;var f=d-b,g=150,h=a._model.get();if(f>0){if(h.first<=1)return;var i=h.first-1<1?1:h.first-1;Math.abs(f)>g?a.prev():(a._model.setFirst(i),a.moveTo(i))}else if(f<0){var j=parseInt(h.first,10),k=parseInt(h.total,10),l=parseInt(a.opt.disp,10);if(j+l<=k){var m=j+1;Math.abs(f)>g?a.next():(a._model.setFirst(m),a.moveTo(m))}}};this._view._doms.list.on("touchstart",f),this._view._doms.list.on("touchend",g)},initFocus:function(a){var b,c;a?(b=a.down(".selected"),c=b&&b.attr("data-seq")):(b=this._view._doms.list.down(".selected"),c=b&&b.attr("data-seq")),c&&this.focusTo(c);var d=this._model.get();this.preloadPrev(d),this.preloadNext(d)},reSet:function(a){this._model.reSet(a)}}})});
define("../../action/slide",["../components/action/widget","../model/slideModel","../view/slideView","../kit/eventPlugin"],function(a,b,c){var d=a("../components/action/widget"),e=a("../model/slideModel"),f=a("../view/slideView"),g=a("../kit/eventPlugin");c.exports=Q.Class("Slide",{extend:d,plugins:[new g],construct:function(a){a=a||{},a.model=a.model||new e(a),a.view=a.view||new f(a),a.model.set({disp:a.disp,total:a.doms.item.length}),this.callsuper(a),this._view.initView(this._model.get()),this._snap=!!a.snap||!0,this._circle=a.circle},properties:{events:{next:function(){this.next()},prev:function(){this.prev()},touchend:function(a){var b=a.data.first,c=this._model.get();this._circle&&(b>=c.total+c.disp?b>=c.total+2*c.disp?b=c.disp:b=Math.min(b-c.disp):b<=c.disp?b=Math.max(c.total-c.disp+b):b-=c.disp);var d=parseInt(c.disp);b=b<=0?1:b,b=b+d-1>c.total?c.total-d+1:b,a.data.first=b,c=this._model.set(a.data),this._snap&&this.redraw(c),this.fire({type:"moved",data:c})},itemlinkclick:function(a){this.changeFocus(a),this.fire({type:"itemclick",data:a.data})},itemMouseEnter:function(a){this.ce=a,this.fire({type:"itemmouseenter",data:a.data})},itemMouseLeave:function(a){this.fire({type:"itemmouseleave",data:a.data})}}},methods:{changeFocus:function(a){a=a||this.ce;var b=this._model.get(),c=a.data.item,d=parseInt(c.attr("data-seq"));b.focus!=d&&(this.focus(d),this.redraw(),this.fire({type:"focuschange",data:a.data}))},nextFocus:function(){var a=this._model.get(),b=a.focus+1;b=this.isLast()?1:b,this._model.setFocus(b),this._model.move(),this.focus(b),this.redraw(),this.fire({type:"focuschange",data:{item:this.getItem(b),index:b-1}})},focus:function(a){if(arguments.length!=1)return this._model.get().focus;this._model.setFocus(a),this._view.focus(this._model.get())},next:function(){var a=this._model.get();this._model.next(),this.redraw(),this.fire({type:"moved",data:a})},prev:function(){var a=this._model.get();this._model.prev(),this.redraw(),this.fire({type:"moved",data:a})},moveTo:function(a,b){var c=this._model.get();this._model.set({first:a}),this.redraw(),this.fire({type:"moved",data:c})},isLast:function(){var a=this._model.get();return a.focus==a.total},isFirst:function(){var a=this._model.get();return a.focus==1},getItem:function(a){return this._view.getItem(a)},reInit:function(a){this._model.reSet({first:1,focus:1,total:a.length}),this._view.reSetItemInfo(a)}}})});
define("../../model/slideModel",["../components/model/model"],function(a,b,c){var d=a("../components/model/model");c.exports=Q.Class("SlideModel",{extend:d,construct:function(a){this.callsuper(),this._data={first:1,focus:1,total:0,disp:0,canMovePrev:!0,canMoveNext:!0,dir:"next"},this._circle=a.circle},methods:{init:function(){this.setFirst(1)},setFirst:function(a){var b=this._data,c=b.total-b.disp+1,d=1;b.first=a,this._circle?(b.dir=="next"&&a>c&&(b.first=a-c),b.dir=="prev"&&a<d&&(b.first=b.total+a)):b.first=Math.max(Math.min(a,c),1),a>=c?b.canMoveNext=!1:b.canMoveNext=!0,a<=1?b.canMovePrev=!1:b.canMovePrev=!0},setFocus:function(a){var b=this._data;b.focus=a},next:function(){this._check();var a=this._data;a.disp>1?this.setFirst(a.first+(a.disp-1)):this.setFirst(a.first+a.disp),a.dir="next",Q.log.log(a)},prev:function(){this._check();var a=this._data;a.disp>1?this.setFirst(a.first-(a.disp-1)):this.setFirst(a.first-a.disp),a.dir="prev",Q.log.log(a)},move:function(){this._check();var a=this._data;a.focus>0&&this.setFirst(a.focus-Math.floor(a.disp/2)),Q.log.log(a)},_check:function(){var a=this._data;if(a.total==0||a.disp==0)throw new Error("[SlideModel]Invalid data.")},reSet:function(a){a&&(this._data.first=a.first?a.first:this._data.first,this._data.focus=a.focus?a.focus:this._data.focus,this._data.total=a.total?a.total:this._data.total,this._data.disp=a.disp?a.disp:this._data.disp)}}})});
define("../../view/slideView",["../components/view/widgetView","../kit/anim"],function(a,b,c){var d=a("../components/view/widgetView"),e=a("../kit/anim"),f=new Q.ic.InfoCenter({moduleName:"SlideView"});c.exports=Q.Class("SlideView",{extend:d,construct:function(a){this.callsuper(a),this._enableMouseEnter=!!a.enableMouseEnter,this._enableMouseLeave=!!a.enableMouseLeave,this._enableTouch=!!a.enableTouch,this._enableScroll=a.enableScroll===!1?!1:!0,this._useDefaultOffset=a.useDefaultOffset?!0:!1,this._circle=!!a.circle,this._disp=a.disp,this.lBtnClass=a.lBtnClass||"lt_no",this.rBtnClass=a.rBtnClass||"rt_no",this._offset=a.offset||0,this._head=[],this._tail=[],this._itemWidth=a.itemWidth,this._curr=1},methods:{init:function(a){this.callsuper("init",a),this._bindEvent()},initView:function(a){this._circle&&this._addItems(a),this.setItemInfo(),this._initPosition()},_initOffset:function(){var a=this._doms,b=a.content.width(),c=this._itemWidth*this._disp,d=b-c;this._offset=Math.ceil(d/2)},_addItems:function(a){var b=this._doms;if(a.total>a.disp){for(var c=0;c<a.disp;c++)this._tail.push(Q.$(b.item[c]).clone(!0));for(var c=a.total-1;c>a.total-a.disp-1;c--)this._head.unshift(Q.$(b.item[c]).clone(!0));this._head.forEach(function(a){b.list.insertBefore(a,b.list.first())}),this._tail.forEach(function(a){b.list.append(a)})}},_initPosition:function(){if(!this._enableScroll)return;f.debug("Old offset : "+this._offset),this._useDefaultOffset||this._initOffset(),f.debug("New offset : "+this._offset),this._anim&&this._anim.done();var a=this._offset-(this._head.length+this._curr-1)*this._itemWidth,b=this._doms;if(isNaN(a))return;b.list.css("left",a+"px")},setItemInfo:function(a){var b=this._doms;b.item.forEach(function(a,b){a=Q.$(a),a.attr("data-seq",b+1)});var c=Q.$(b.item[0]),d=parseInt(c.css("marginRight")),e=parseInt(c.css("marginLeft"));isNaN(d)&&(d=0),isNaN(e)&&(e=0),this._itemWidth=this._itemWidth||c.width()+d+e,this._resetListWidth(a)},reSetItemInfo:function(a){this._doms.item=a,this.setItemInfo()},update:function(a){this._curr=a.first,this._resetListWidth(a),this._move(a),this._setBtnStatic(a)},focus:function(a){var b=a.focus,c=this._doms;c.item.removeClass("selected"),Q.$(c.item[b-1]).addClass("selected")},getItem:function(a){var b=this._doms;return Q.$(b.item[a-1])},_resetListWidth:function(a){var b=this._doms;if(!this._enableScroll)return;b.list.css("width",this._itemWidth*(b.item.length+this._head.length+this._tail.length)+"px")},_move:function(a){var b=this._doms,c=b.list.left(b.content);if(isNaN(a.first))return;var d=a.first;this._circle&&(d+=this._head.length);var f=(1-d)*this._itemWidth+this._offset;this._listPos=this._listPos||0,this._disp==1&&(a.dir=="next"&&(c=f+this._itemWidth-this._listPos),a.dir=="prev"&&(c=f-this._itemWidth+this._listPos)),this._anim=e({elem:b.list,from:c,to:f}),this._listPos=0},_setBtnStatic:function(a){var b=this._doms;b.pbtn&&(a.canMovePrev?b.pbtn.removeClass(this.lBtnClass):b.pbtn.addClass(this.lBtnClass)),b.nbtn&&(a.canMoveNext?b.nbtn.removeClass(this.rBtnClass):b.nbtn.addClass(this.rBtnClass))},_moveWithFinger:function(a){this._anim&&this._anim.stop();var b=this._doms,c=b.list.left(b.content),d=c+a.x;b.list.css("left",d+"px"),this._lastDir=a.x},_touchend:function(){var a=this._doms,b=this,c=a.list.left(a.content),d=Math.ceil((0-c)/this._itemWidth)+(this._lastDir<0?1:0);this._listPos=Math.abs((a.list.left(a.content)-this._offset)%this._itemWidth),setTimeout(function(){b._ctrl.notice({type:"touchend",data:{first:d,dir:b._lastDir>0?"prev":"next"}})},100),!(c>=this._offset);var e=Math.max(a.list.width()-a.content.width(),0)+this._offset;!(Math.abs(c)>=e)},_bindEvent:function(){var a=this._doms,b=this;a.pbtn&&(a.pbtn.on("click",function(a){a=Q.event.get(a),a.stop(),b._ctrl.notice({type:"prev"})}),a.pbtn.on("mouseover",function(c){c=Q.event.get(c),c.stop(),a.pbtn.hasClass(b.lBtnClass)||a.pbtn.addClass("lt_on")}),a.pbtn.on("mouseout",function(b){b=Q.event.get(b),b.stop(),a.pbtn.removeClass("lt_on")})),a.nbtn&&(a.nbtn.on("click",function(a){a=Q.event.get(a),a.stop(),b._ctrl.notice({type:"next"})}),a.nbtn.on("mouseover",function(c){c=Q.event.get(c),c.stop(),a.nbtn.hasClass(b.rBtnClass)||a.nbtn.addClass("rt_on")}),a.nbtn.on("mouseout",function(b){b=Q.event.get(b),b.stop(),a.nbtn.removeClass("rt_on")})),a.list.on("click",function(a){a=Q.event.get(a);var c=Q.$(a.target),d=c.parent();while(d){if(d.attr("data-elem")=="item")break;d=d.parent()}if(c.attr("data-elem")=="itemlink"||c.parent("a").attr("data-elem")=="itemlink")a.stop(),b._ctrl.notice({type:"itemlinkclick",data:{item:d}})}),Q.$(window).on("onorientationchange",function(){f.debug("Resized."),setTimeout(function(){b._initPosition()},500)}),this._enableTouch&&this._enableScroll&&this._bindTouchEvent(),a.item&&(this._enableMouseEnter&&a.item.forEach(function(a){a=Q.$(a),a.on("mouseenter",function(a){a=Q.event.get(a);var c=Q.$(a.currentTarget||a.target);b._ctrl.notice({type:"itemMouseEnter",data:{item:c,index:parseInt(c.attr("data-seq"))-1}})})}),this._enableMouseLeave&&a.item.forEach(function(a){a=Q.$(a),a.on("mouseleave",function(a){a=Q.event.get(a);var c=Q.$(a.currentTarget||a.target);b._ctrl.notice({type:"itemMouseLeave",data:{item:c,index:parseInt(c.attr("data-seq"))-1}})})}))},_bindTouchEvent:function(){var a=this._doms,b=this,c=0;a.list.on("touchstart",function(a){Q.event.get(a).stopPropagation(),c=a.touches[0].pageX}),a.list.on("fingermove",function(a){b._moveWithFinger(a.data)}),a.list.on("touchend",function(a){c=Math.abs(a.changedTouches[0].pageX-c),c>20&&b._touchend(),c=0})}}})});
define("../../units/renderVideoList",["../components/units/pageJob","../view/renderVideoListView"],function(a,b,c){var d=a("../components/units/pageJob"),e=a("../view/renderVideoListView"),f="renderVideoList",g;d.create(f,{check:function(){return g=Q.$('*[data-widget-rendervideolist="video"]'),!!g},init:function(){},exec:function(){var a={};a.doms={},a.doms.content=g.down("*[data-rendervideolist-content]"),a.doms.wrap=g.down('[data-videoslide-elem="content"]'),a.doms.tpl=g.down('*[data-rendervideolist-tpl="list"]').value();var b=g.down('*[data-rendervideolist-tpl="update"]');a.doms.updateTpl=b&&b.value(),a.doms.loading=g.down('*[data-rendervideolist-loadingelem="loading"]');var c=g.attr("data-rendervideolist-categoryid"),d=g.attr("data-rendervideolist-source");a.params={},a.params.tvId=g.attr("data-rendervideolist-tvid"),a.params.numOfCutoff=g.attr("data-rendervideolist-numOfCutoff");if(d==1){var f=g.attr("data-rendervideolist-sourceid");a.requestParam={categoryId:c,sourceId:f}}else if(d==2){var h=g.attr("data-rendervideolist-albumid"),i=g.attr("data-rendervideolist-pageno");a.requestParam={albumId:h,pageNo:i,categoryId:c}}var j=new e(a);j.init()}}),c.exports=f});
define("../../view/renderVideoListView",["../components/view/view"],function(a,b,c){var d=a("../components/view/view");c.exports=Q.Class("SlideView",{extend:d,construct:function(a){this.callsuper(a),this.doms=a.doms,this.requestParam=a.requestParam,this.params=a.params},methods:{init:function(){this.initEvent(),this.firstRequestData()},initEvent:function(){var a=this;Q.event.customEvent.on("getRederVideoList",function(b){a.doms.loading.show();var c=b.data;c.categoryId=a.requestParam.categoryId,Q.event.customEvent.fire({type:"getVrsVideoData",data:c})}),Q.event.customEvent.on("getVrsVideoDataBack",function(b){a.doms.loading.hide(),a.doms.wrap.show(),a.render(b)})},firstRequestData:function(){var a=this;Q.event.customEvent.fire({type:"getRederVideoList",data:a.requestParam})},parseData:function(a){var b=a,c=a.tvPh?a.tvPh:null,d=a.tvSea?a.tvSea:null,e="",f;if(a.pubTime){var g=[],h="";f=a.pubTime;for(var i=0;i<f.length;i++)h+=f.charAt(i),i!==0&&(i+1)%2===0&&(g.push(h),h="");e=g?g[0]+"月"+g[1]+"日"+g[2]+":"+g[3]+"更新":"",b.yugaoevent="j-delegate=genbo"}b.yugao=e;var j,k;c||d?(j=d?"第"+d+"季":"",c&&(k=j+" 第"+c+"期")):k="第"+a.tvYear+"期",b.qishu=k,b.selected=(a.tvId||a.id)==this.params.tvId?"selected":"no";var l=b.aName||b.vn;b.series_name="第"+b.pd+"集",b.yugao&&(b.series_name+="预告片");var m=this.params.numOfCutoff||42;b.shortname_l2=Q.string.truncate(l,m),b.tvSbtitle_l2=Q.string.truncate(b.tvSbtitle,m);if(b.aPicUrl){var n=b.aPicUrl.lastIndexOf("."),o=b.aPicUrl.substring(0,n)+"_110_70"+b.aPicUrl.substring(n),p=b.aPicUrl.substring(0,n)+"_116_65"+b.aPicUrl.substring(n);b.aPicUrl_110_70=o,b.aPicUrl_116_65=p}return b.isvip=a.purType==1?1:0,b.tvid=a.tvId||a.id,b},insertUpdateTip:function(a){if(!a.after&&a.data&&a.data.ps&&a.data.ic<a.data.pm&&this.doms.updateTpl){var b={};b.ps=a.data.ps;var c=Q.plugins.Mustache.render(this.doms.updateTpl,b);this.doms.content.html("BEFOREEND",c);var d=this.doms.content.down("[data-widget-subscribe]");Q.event.customEvent.fire({type:"videoListSubscribeDone",data:{widget:d}})}},render:function(a){var b=[],c="";if(a.data.code=="A00000"){var d=a.data.list;for(var e=0;e<d.length;e++){var f=this.parseData(d[e]);c=Q.plugins.Mustache.render(this.doms.tpl,f),b.push(c)}a.data.sign=="prev"||!a.data.sign?this.doms.content.html("AFTERBEGIN",b.join("")):a.data.sign=="next"&&this.doms.content.html("BEFOREEND",b.join("")),this.insertUpdateTip(a.data),Q.event.customEvent.fire({type:"qidan_add_renderDone",data:{source:"videolist"}}),Q.event.customEvent.fire({type:"videoListRenderDone",data:{source:"videolist",after:a.data.after,before:a.data.before,sign:a.data.sign,insertNum:d.length}});var g=this;Q.event.customEvent.fire({type:"qidan_add_renderDone",data:{wrapper:g.doms.content}})}else Q.event.customEvent.fire({type:"videoListRenderDone",data:{source:"videolist",after:!1,before:!1,sign:null,insertNum:0}})}}})});
define("../../units/tvVrsVideoData",["../interfaces/cache_avlistInterface","../components/units/pageJob"],function(a,b,c){var d=a("../interfaces/cache_avlistInterface"),e=a("../components/units/pageJob"),f=new Q.ic.InfoCenter({moduleName:"units/tvVrsVideoData"}),g="TvVrsVideoData",h=1,i=1,j=1,k=1,l={},m=null,n=!1,o=!1;e.create(g,{check:function(){return!0},init:function(){Q.event.customEvent.on("getVrsVideoData",this.getVrsVideoData.bind(this)),Q.event.customEvent.on("getShortCutList",this.getShortCutList.bind(this))},getData:function(a){var b=a.pageNo||1,c=l[b+""];c?a.callBack.call(this,{pageNo:b,sign:a.sign},c):b<1||b>j?a.callBack.call(this,{pageNo:b,sign:a.sign},{code:"E00000"}):(new d).request({albumId:a.albumId,pageNo:b},a.callBack.bind(this,{pageNo:b,sign:a.sign,categoryId:a.categoryId}))},getVrsVideoData:function(a){var b=a.data,c=1,d=b.sign;if(b.pageNo)j=c=h=i=b.pageNo,m=b.albumId;else if(d=="prev"){if(n)return!1;n=!0,c=--h}else if(d=="next"){if(o)return!1;o=!0,c=++i}else c=1;this.getData({albumId:m,pageNo:c,sign:d,categoryId:b.categoryId,callBack:this.getVrsVideoDataBack})},getVrsVideoDataBack:function(a,b){var c=a.sign;b.code=="A00000"?(this.setPage(b.data),l[a.pageNo+""]=b,f.info("============================================================================"),f.warn(b.data.vlist.length,h>1,i<j,h,i,j),f.info("============================================================================"),Q.event.customEvent.fire({type:"getVrsVideoDataBack",data:{code:b.code,list:b.data.vlist,data:b.data,before:h>1,after:i<j,sign:c,categoryId:a.categoryId}})):(Q.event.customEvent.fire({type:"getVrsVideoDataBack",data:{code:b.code,list:[],before:h>1,after:i<j,sign:c}}),c=="prev"&&h++,c=="next"&&i--),c=="prev"&&(n=!1),c=="next"&&(o=!1)},getShortCutList:function(a){var b=a.data;this.getData({albumId:b.albumId,pageNo:b.pageNo,callBack:this.getShortCutListBack})},getShortCutListBack:function(a,b){if(b.code=="A00000"){var c=b.data;this.setPage(c),l[a.pageNo+""]=b,Q.event.customEvent.fire({type:"getShortCutListBack",data:{code:b.code,list:c.vlist,perPage:k,totalPage:j,total:c.pt}})}else Q.event.customEvent.fire({type:"getShortCutListBack",data:{code:b.code}})},setPage:function(a){j=parseFloat(a.pgt),k=parseFloat(a.pp)}}),c.exports=g});
define("../../units/shortCutListForSet",["../action/shortCutList","../action/shortCutBtn","../components/action/checkDoms","../components/units/pageJob"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"units/tvShortCutList"}),e=a("../action/shortCutList"),f=a("../action/shortCutBtn"),g=a("../components/action/checkDoms"),h=a("../components/units/pageJob"),i,j,k,l,m,n="ShortCutListForSet";h.create(n,{check:function(){return i=Q.$("*[data-shortcutlist=container]"),i?!0:(d.warn("缺少data-shortcutlist=container"),!1)},init:function(){this.initBtn(),this.initList(),this.bindEvent()},exec:function(){},initBtn:function(){var a=Q.$("*[data-shortcutlist=showbtn]"),b=Q.$("*[data-shortcutlist=hidebtn]");k=i.down("*[data-shortcutlist=list]");if(a&&b){var c=new f({showBtn:a,hideBtn:b,container:i,limit:parseInt(k.attr("data-shortcutlist-limit"),10)||30});c.init(),c.on("containerShow",this.doContainerShow.bind(this)),this.scBtn=c}},initList:function(){j=i.down("*[data-shortcutlist=set]"),l=i.attr("data-shortcutlist-albumid"),m=i.attr("data-shortcutlist-pageno"),j&&k&&(m=m?parseInt(m,10):1,this.shortCutList=new e({setCon:j,listCon:k,albumId:l,pageNo:m,truncateCount:k.attr("data-shortcutlist-truncatecount")||""}),this.shortCutList.init())},bindEvent:function(){Q.event.customEvent.on("getShortCutListBack",this.getShortCutListBack.bind(this))},doContainerShow:function(a){this.shortCutList.getShortCutList()},getShortCutListBack:function(a){var b=a.data;b.code=="A00000"&&this.scBtn.changeBoxHeight(b.list.length),this.scBtn.showContainer()}}),c.exports=n});
define("../../action/shortCutList",["../components/action/adapter","../kit/qiyiPlayer"],function(a,b,c){var d=new Q.ic.InfoCenter({moduleName:"action/shortCutList"}),e=a("../components/action/adapter"),f=a("../kit/qiyiPlayer"),g='<div class="loading"><img src="http://www.qiyipic.com/common/images/load.gif" alt="正在加载...">&nbsp;正在加载... </div>';c.exports=Q.Class("VarietyShortCutListCondition",{ns:Q.action,extend:e,construct:function(a){this.callsuper(a);var b=this.setCon=a.setCon,c=this.listCon=a.listCon;this.albumId=a.albumId,this.pageNo=a.pageNo,this.setTpl=b.down("textarea").value(),this.listTpl=c.down("textarea").value(),this.tvId=parseInt(c.attr("data-shortcutlist-tvid")||0,10),this.truncateCount=a.truncateCount&&parseInt(a.truncateCount)||26},methods:{init:function(){this.bindEvent()},bindEvent:function(){Q.event.customEvent.on("getShortCutListBack",this.getShortCutListBack.bind(this)),this.setCon.delegate("clicktvset",this.doClickTvSet.bind(this)),f.getPlayer("video").on("videoChanged",this.doVideoChange.bind(this))},getShortCutList:function(a){this.pageNo=a?a:this.pageNo,this.listCon.html(g),Q.event.customEvent.fire({type:"getShortCutList",data:{albumId:this.albumId,pageNo:this.pageNo}})},getShortCutListBack:function(a){var b=a.data;b.code=="A00000"?(this.buildSet(b),this.buildList(b),this.catchData=b):d.warn("后端无数据！")},buildSet:function(a){var b=this.setCon;if(!b.attr("hasBuilded")){var c=a.totalPage,d=a.perPage,e=a.total,f=[];if(c>1){var g=b.attr("data-shortcutlistset-split")||"";for(var h=0;h<c;h++)f.push(Q.plugins.Mustache.render(this.setTpl,{num:h*d+1+"-"+Math.min((h+1)*d,e),index:h,selected:h==this.pageNo-1?"selected":""}));b.html(f.join(g)),b.attr("hasBuilded","true"),this.allSet=b.down("*[data-shortcutlistset-index]"),b.css("display","")}else b.hide()}},buildList:function(a){var b=a.list,c=[],d=null,e=this.setCon.attr("data-shortcutlistlist-split")||"";for(var f=0,g=b.length;f<g;f++)d=b[f],this.format(d),c.push(Q.plugins.Mustache.render(this.listTpl,d));this.listCon.html(c.join(e))},format:function(a){a._selected=a.id==this.tvId?"selected":"",a._vt=Q.string.truncate(a.vt,26),a._vn=Q.string.truncate(a.vn,this.truncateCount),a.listVt=a.yugao?"即将上线： "+a.yugao:a.vn},doClickTvSet:function(a){a=Q.event.get(a.event),Q.event.stop(a);var b=Q.$(a.target);this.getShortCutList(parseInt(b.attr("data-shortcutlistset-index"))+1),this.allSet.removeClass("selected"),b.addClass("selected")},doVideoChange:function(a){var b=a.data;if(b){this.tvId=b.tvid;var c=this.catchData;c&&this.buildList(c)}}}})});
define("../../action/shortCutBtn",["../components/action/adapter","../kit/eventPlugin"],function(a,b,c){var d=a("../components/action/adapter"),e=a("../kit/eventPlugin");c.exports=Q.Class("VarietyShortCutListCondition",{ns:Q.action,extend:d,plugins:[new e],properties:{isShow:!1,isAnimRuning:!1},construct:function(a){this.callsuper(a),this.container=a.container,this.showBtn=a.showBtn,this.hideBtn=a.hideBtn,this._maxHeight=a.maxHeight||134,this.limit=a.limit||4},methods:{init:function(){this.bindEvent()},bindEvent:function(){this.showBtn.on("click",this.doShowBtnClick.bind(this)),this.hideBtn.on("click",this.doHideBtnClick.bind(this))},doShowBtnClick:function(a){a=Q.event.get(a),Q.event.stop(a),this.fire({type:"containerShow"})},doHideBtnClick:function(a){a=Q.event.get(a),Q.event.stop(a),this.hideContainer()},changeBoxHeight:function(a){a>this.limit?this.container.css("height","auto"):this.container[0].style.height=this._maxHeight+"px"},showContainer:function(){if(this.isAnimRuning||this.isShow)return!1;var a=this,b=this.container;b.show(),this.isShow=!0;var c=b.css("border-top-width");c=c?parseFloat(c.split("px")[0]):0;var d=b.css("border-bottom-width");d=d?parseFloat(d.split("px")[0]):0;var e=b.css("padding-top");e=e?parseFloat(e.split("px")[0]):0;var f=b.css("padding-bottom");f=f?parseFloat(f.split("px")[0]):0;var g=b.height()-c-d-e-f;b.css("height","0"),b.css("overflow","hidden"),b.css("zIndex","10");var h=Q.anim(b);h.duration(150),h.ease(),this.isAnimRuning=!0,h.from("height",0).to("height",Math.max(this._maxHeight,g)).onDone(function(){a.isAnimRuning=!1}).go(),this.showBtn.css("display","none"),this.hideBtn.css("display",""),Q.event.customEvent.fire({type:"clickShortCutBtn",data:{sign:"show"}})},hideContainer:function(){if(this.isAnimRuning||!this.isShow)return!1;var a=this,b=this.container;this.isShow=!1;var c=b.css("border-top-width");c=c?parseFloat(c.split("px")[0]):0;var d=b.css("border-bottom-width");d=d?parseFloat(d.split("px")[0]):0;var e=b.css("padding-top");e=e?parseFloat(e.split("px")[0]):0;var f=b.css("padding-bottom");f=f?parseFloat(f.split("px")[0]):0;var g=b.height()-c-d-e-f,h=Q.anim(b);h.duration(150),h.ease(),this.isAnimRuning=!0,h.from("height",Math.max(this._maxHeight,g)).to("height",0).onDone(function(){b.css("height","auto"),b.hide(),a.isAnimRuning=!1}).go(),this.showBtn.css("display",""),this.hideBtn.css("display","none"),this.fire({type:"containerHide"}),Q.event.customEvent.fire({type:"clickShortCutBtn",data:{sign:"hide"}})}}})});
define("../../units/annouceForLogin",["../components/units/pageJob","../kit/getWebEventID","../kit/userInfo","../action/qipaLogin"],function(a,b,c){var d=a("../components/units/pageJob"),e="annouceForLogin",f=a("../kit/getWebEventID"),g=a("../kit/userInfo"),h=a("../action/qipaLogin");d.create(e,{check:function(){return!0},init:function(){this.seed=Math.floor(Math.random()*20+1),Q.$(document).delegate("genbo",this.doPreview.bind(this)),this._currenthref="",this.bindone=!1},showlogin:function(){if(!g.isLogin()){isTrack=!0;var a=this.seed==2?"":this._currenthref,b=encodeURIComponent("http://t.qiyi.com/opening/start.php?returnUrl="+encodeURIComponent(document.location.href));h.openLoginWindow({regUrl:b,btnId:"genbo"})}else window.location.href=this._currenthref+"?seed="+this.seed},doPreview:function(a){this.bindone||(this.bindEvent(),this.bindone=!0),a.target.nodeName&&a.target.nodeName.toUpperCase()=="A"&&Q.$(a.target).attr("href")?this._currenthref=Q.$(a.target).attr("href"):a.target.parentNode.nodeName&&a.target.parentNode.nodeName.toUpperCase()=="A"&&Q.$(a.target.parentNode).attr("href")&&(this._currenthref=Q.$(a.target.parentNode).attr("href")),this.loginPingback("clktrailer");if(this.seed!=2)return;this.showlogin(),Q.event.get(a.event).stop()},loginPingback:function(a){f(function(b){Q.log.server({type:"genbotrailer20121122",jsuid:Q.cookie.get("QC006"),flshuid:Q.cookie.get("QC005"),qtcurl:location.href,weid:b,act:a,ppuid:g.getUid(),usertype:this.seed},"http://msg.video.qiyi.com/tmpstats.gif")})},bindEvent:function(){var a=this;Q.event.customEvent.on("login",function(){isTrack&&(a.seed==2&&!g.isLogin()&&(window.location.href=a._currenthref),g.isLogin()&&(a.loginPingback("logsuc"),window.location.href=a._currenthref+"?seed="+a.seed),isTrack=!1)}),Q.event.customEvent.on("loginIframeClosed",function(b){isTrack&&!g.isLogin()&&(a.seed==2&&(window.location.href=a._currenthref+"?seed="+a.seed),a.loginPingback("clkclose"),isTrack=!1)})}}),c.exports=e});